(window.webpackJsonp=window.webpackJsonp||[]).push([["goods_count_detail"],{9905:function(e,t,a){"use strict";a.r(t);var n=a("81a2"),r=a("05dd"),i=(a("bbb9"),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e});function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function n(r,i){try{var l=t[r](i),o=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(o).then(function(e){n("next",e)},function(e){n("throw",e)});e(o)}("next")})}}var o={data:function(){return{tableData:[],info:[],logId:"",header:"盘库记录详情",pageObj:{}}},props:{tab:{type:[String,Number],default:1}},mounted:function(){var e=this;return l(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.logId=Number(e.$route.query.id),"number"==typeof e.logId){t.next=3;break}return t.abrupt("return");case 3:e.initBtn(),e.initPageObj(),e.getData();case 6:case"end":return t.stop()}},t,e)}))()},methods:{funGetPage:function(e,t){"size-change"==e?this.pageObj.pageSize=t:this.pageObj.currentPage=t,this.getData()},getData:function(){var e=this;return l(regeneratorRuntime.mark(function t(){var a,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={},n={},a={logId:e.logId,page:e.pageObj.currentPage,size:e.pageObj.pageSize},t.t0=e.tab+"",t.next="1"===t.t0?5:"2"===t.t0?5:"3"===t.t0?9:13;break;case 5:return t.next=7,e.getHttp("invoicingGetCheckInventoryLogDetail",a);case 7:return n=t.sent,t.abrupt("break",13);case 9:return t.next=11,e.getHttp("dispatchGetDispatchAuditLogDetailList",{logId:e.logId});case 11:return n=t.sent,t.abrupt("break",13);case 13:e.initTableData(n),e.initInfo(n),e.pageObj.total=Number(n.count)||0;case 16:case"end":return t.stop()}},t,e)}))()},initTableData:function(e){var t=this;switch(this.tab+""){case"1":Array.isArray(e.list)||(e.list=[]),this.tableData=e.list,this.tableData=this.tableData.map(function(e,a){e.arrow=Number(e.after)>Number(e.before),e.before=""+e.before+e.unitName,e.after=""+e.after+e.unitName,e.storeName=e.wName+"/"+e.aName,e.change=""+e.change+e.unitName;var n=(t.pageObj.currentPage-1)*t.pageObj.pageSize+1+a;return e.itemIndex=n>=10?n:"0"+n,e});break;case"2":Array.isArray(e.list)||(e.list=[]),e.unit&&"object"==i(e.unit)||(e.unit={}),this.tableData=e.list;var a=!0,n=!1,l=void 0;try{for(var o,u=this.tableData[Symbol.iterator]();!(a=(o=u.next()).done);a=!0){var c=o.value;for(var s in e.unit)if(c.itemId==s){var b,p;p=c.unitId,b=e.unit[s],c.unitInfo=this.getMaterilaUnitInfo(b,p);break}}}catch(e){n=!0,l=e}finally{try{!a&&u.return&&u.return()}finally{if(n)throw l}}this.tableData=this.tableData.map(function(e,a){e.arrow=Number(e.after)>Number(e.before),e.before=r.a.comUnit(Number(e.before),e.unitInfo.countUnitVal,e.unitInfo.countUnitName,e.unitInfo.minName),e.after=r.a.comUnit(Number(e.after),e.unitInfo.countUnitVal,e.unitInfo.countUnitName,e.unitInfo.minName),e.change=r.a.comUnit(Number(e.change),e.unitInfo.countUnitVal,e.unitInfo.countUnitName,e.unitInfo.minName),e.storeName=e.wName+"/"+e.aName;var n=(t.pageObj.currentPage-1)*t.pageObj.pageSize+1+a;return e.itemIndex=n>=10?n:"0"+n,e});break;case"3":Array.isArray(e.list)||(e.list=[]),this.tableData=e.list.map(function(e,a){e.itemIndex=a+1,e.itemIndex<10&&(e.itemIndex="0"+e.itemIndex);var n=t.generatorDate(1e3*e.applicationTime);return e.zh_applicationTime=n.str,e})}},initInfo:function(e){var t=null,a=[];switch(this.tab+""){case"1":case"2":e.logDetail&&"object"==i(e.logDetail)||(e.logDetail={}),(t=e.logDetail).time=this.generatorDate(1e3*t.createTime).str,a=[{label:"记录编号",value:t.code},{label:"操作时间",value:t.time},{label:"操作人",value:t.createUName}];break;case"3":e&&"object"==(void 0===e?"undefined":i(e))||(e={}),e.time=this.generatorDate(1e3*e.createTime).str,a=[{label:"操作类型",value:e.type},{label:"操作人",value:e.createUName},{label:"操作时间",value:e.time}]}this.info=a},getMaterilaUnitInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],a={},n=!0,r=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var u=l.value;1==u.isMin&&(a.minName=u.name,a.minVal=u.value),1==u.isDefault&&(a.defName=u.name,a.defVal=u.value),u.muId==t&&(a.countUnitName=u.name,a.countUnitVal=u.value)}}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}return a},getHttp:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a[e]({data:a});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},r,t)}))()},generatorDate:function(e){var t={};e?"number"!=typeof e&&"string"!=typeof e||(e=Number(e),e=new Date(e)):e=new Date;var a=t={year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),week:0,str:"",time:"",dateTime:""},n=a.year,r=a.month,i=a.day,l=a.hour,o=a.minute;return r+=1,l=l>9?l:"0"+l,o=o>9?o:"0"+o,t.time=l+":"+o,t.dateTime=n+"-"+r+"-"+i,t.str=n+"-"+r+"-"+i+" "+l+":"+o,t},initPageObj:function(){this.pageObj={total:0,pageSize:10,pagerCount:11,currentPage:1}},initBtn:function(){var e=this;this.$store.commit("setPageTools",[{name:"返回",type:"5",className:"plain",fn:function(){e.$router.go(-1)}}])}}},u=(a("cb72"),a("d801")),c=Object(u.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"goods-count"}},[a("div",{staticClass:"page-head"},[e._v(e._s(e.header))]),e._v(" "),a("div",{staticClass:"info"},e._l(e.info,function(t,n){return a("li",{key:n},[e._v(e._s(t.label)+" : "+e._s(t.value))])})),e._v(" "),a("div",{staticClass:"table"},[1==e.tab?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","header-cell-style":{"background-color":"#f5f7fa"}}},[a("el-table-column",{attrs:{label:"序号",align:"center",prop:"itemIndex"}}),e._v(" "),a("el-table-column",{attrs:{label:"商品名",align:"center",width:"150px",prop:"itemName"}}),e._v(" "),a("el-table-column",{attrs:{label:"条码",align:"center",width:"150px",prop:"barCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"仓库所属",align:"center",width:"150px",prop:"storeName"}}),e._v(" "),a("el-table-column",{attrs:{label:"盘库前",align:"center",width:"150px",prop:"before"}}),e._v(" "),a("el-table-column",{attrs:{label:"盘库后",align:"center",width:"150px",prop:"after"}}),e._v(" "),a("el-table-column",{attrs:{label:"变化量",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return t.column,t.index,[a("span",{staticClass:"arrow",class:{"arrow-up":n.arrow,"arrow-down":!n.arrow}}),e._v("\n\t\t\t\t\t"+e._s(n.change)+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"成本价",align:"center",prop:"cost"}})],1):e._e(),e._v(" "),2==e.tab?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","header-cell-style":{"background-color":"#f5f7fa"}}},[a("el-table-column",{attrs:{label:"序号",align:"center",prop:"itemIndex"}}),e._v(" "),a("el-table-column",{attrs:{label:"物料名称",align:"center",width:"150px",prop:"itemName"}}),e._v(" "),a("el-table-column",{attrs:{label:"物料简码",align:"center",width:"150px",prop:"barCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"仓库所属",align:"center",width:"150px",prop:"storeName"}}),e._v(" "),a("el-table-column",{attrs:{label:"盘库前",align:"center",width:"150px",prop:"before"}}),e._v(" "),a("el-table-column",{attrs:{label:"盘库后",align:"center",width:"150px",prop:"after"}}),e._v(" "),a("el-table-column",{attrs:{label:"变化量",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return t.column,t.index,[a("span",{staticClass:"arrow",class:{"arrow-up":n.arrow,"arrow-down":!n.arrow}}),e._v("\n\t\t\t\t\t"+e._s(n.change)+"\n\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"成本金额",align:"center",prop:"cost"}})],1):e._e(),e._v(" "),3==e.tab?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","header-cell-style":{"background-color":"#f5f7fa"}}},[a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return t.column,t.index,[a("span",{staticClass:"view-detail",on:{click:function(t){e.linkUrl(n)}}},[e._v("查看详情")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"序号",align:"center",prop:"itemIndex"}}),e._v(" "),a("el-table-column",{attrs:{label:"申请单号",align:"center",prop:"applicationCode"}}),e._v(" "),a("el-table-column",{attrs:{label:"申请店铺/品牌",align:"center",prop:"applicationShop"}}),e._v(" "),a("el-table-column",{attrs:{label:"申请人",align:"center",prop:"applicant"}}),e._v(" "),a("el-table-column",{attrs:{label:"申请时间",align:"center",prop:"zh_applicationTime"}})],1):e._e()],1),e._v(" "),3!=e.tab?a("div",{staticClass:"bottom"},[a("el-pagination",{attrs:{"pager-count":e.pageObj.pagerCount,"page-size":e.pageObj.pageSize,layout:"total,sizes,prev, pager, next,jumper",background:!0,total:e.pageObj.total},on:{"size-change":function(t){e.funGetPage("size-change",t)},"current-change":function(t){e.funGetPage("current-change",t)}}})],1):e._e()])},[],!1,null,"15def42b",null);t.default=c.exports},cb72:function(e,t,a){"use strict";var n=a("e94f");a.n(n).a},e94f:function(e,t,a){}}]);