(window.webpackJsonp=window.webpackJsonp||[]).push([["goods_count_detail"],{"66cc":function(e,t,a){},9905:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"goods-count"}},[a("div",{staticClass:"page-head"},[e._v("盘库记录详情")]),e._v(" "),a("div",{staticClass:"info"},[a("li",[e._v("记录编号 : "+e._s(e.info.code))]),e._v(" "),a("li",[e._v("操作时间 : "+e._s(e.info.createTimeZh))]),e._v(" "),a("li",[e._v("操作人 : "+e._s(e.info.createUName))])]),e._v(" "),a("div",[a("table-com",{attrs:{showHand:!1,titleHeight:50,showTitle:1,titleData:e.tableTitle,fixed:2,widthType:!0,introData:e.tableData,listWidth:1200,bannerStyle:{color:"#333",fontSize:"16px"},mainBox:{color:"#666"},listHeight:70},scopedSlots:e._u([{key:"con-6",fn:function(t){var n=t.data;t.index;return a("div",{},[a("span",{staticClass:"arrow",class:{"arrow-up":n.arrow,"arrow-down":!n.arrow}}),e._v("\n\t\t\t"+e._s(n.change)+"\n\t\t")])}}])})],1),e._v(" "),a("div",{staticClass:"bottom"},[a("page",{attrs:{page:e.pageObj.currentPage,total:e.pageObj.totalNum,num:e.pageObj.num,isNoPaging:!0},on:{pageNum:e.funGetPageNum}})],1)])};n._withStripped=!0;var r=a("81a2"),i=a("05dd"),o=a("bbb9");function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function n(r,i){try{var o=t[r](i),u=o.value}catch(e){return void a(e)}if(!o.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}("next")})}}var c={data:function(){return{tableTitle:[{titleName:"序号",dataName:"itemIndex"},{titleName:"商品名",dataName:"itemName"},{titleName:"条码",dataName:"barCode"},{titleName:"仓库所属",dataName:"storeName"},{titleName:"盘库前",dataName:"before"},{titleName:"盘库后",dataName:"after"},{titleName:"变化量",dataName:"change"}],tableData:[],pageObj:{num:10,currentPage:1,totalNum:1,listNum:0},info:{},logId:""}},props:{tab:{type:[String,Number],default:1}},activated:function(){this.initBtn()},mounted:function(){var e=this;return u(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.isPrimitive(e.$route.query.id)&&(e.logId=e.$route.query.id),e.initBtn(),e.getData();case 3:case"end":return t.stop()}},t,e)}))()},beforeRouteLeave:function(e,t,a){delete this.$route.query.id,a()},methods:{getData:function(){var e=this;return u(regeneratorRuntime.mark(function t(){var a,n,r,i,u,c,m,s,l,f,d,b,g,N;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={},n={},a={logId:e.logId,page:e.pageObj.currentPage,size:e.pageObj.num},t.next=4,e.getHttp("invoicingGetCheckInventoryLogDetail",a);case 4:if(n=t.sent,Array.isArray(n.list)&&(e.tableData=n.list,e.tableData=e.addItemIndex(e.tableData)),2!=e.tab||!n.unit){t.next=42;break}r=!0,i=!1,u=void 0,t.prev=10,c=e.tableData[Symbol.iterator]();case 12:if(r=(m=c.next()).done){t.next=28;break}s=m.value,t.t0=regeneratorRuntime.keys(n.unit);case 15:if((t.t1=t.t0()).done){t.next=25;break}if(l=t.t1.value,s.itemId!=l){t.next=23;break}return f=[],d="",d=s.unitId,f=n.unit[l],s.unitInfo=e.getMaterilaUnitInfo(f,d),t.abrupt("break",25);case 23:t.next=15;break;case 25:r=!0,t.next=12;break;case 28:t.next=34;break;case 30:t.prev=30,t.t2=t.catch(10),i=!0,u=t.t2;case 34:t.prev=34,t.prev=35,!r&&c.return&&c.return();case 37:if(t.prev=37,!i){t.next=40;break}throw u;case 40:return t.finish(37);case 41:return t.finish(34);case 42:e.initTableData(),"object"==o.a.type(n.logDetail)&&(e.info=n.logDetail,b="",g={},N="",b=1e3*Number(e.info.createTime),(g=e.generatorDate(b)).hour=g.hour>9?g.hour:"0"+g.hour,g.minute=g.minute>9?g.minute:"0"+g.minute,N=g.year+"-"+(g.month+1)+"-"+g.day+" "+g.hour+":"+g.minute,e.info.createTimeZh=N),e.pageObj.totalNum=n.total||0,e.pageObj.listNum=n.count||0;case 46:case"end":return t.stop()}},t,e,[[10,30,34,42],[35,,37,41]])}))()},initTableData:function(){switch(this.tab+""){case"1":this.tableData=this.tableData.map(function(e){return e.arrow=Number(e.after)>Number(e.before),e.before=""+e.before+e.unitName,e.after=""+e.after+e.unitName,e.storeName=e.wName+"/"+e.aName,e.change=""+e.change+e.unitName,e});break;case"2":this.tableTitle=[{titleName:"序号",dataName:"itemIndex"},{titleName:"物料名称",dataName:"itemName"},{titleName:"物料简码",dataName:"barCode"},{titleName:"仓库所属",dataName:"storeName"},{titleName:"盘库前",dataName:"before"},{titleName:"盘库后",dataName:"after"},{titleName:"变化量",dataName:"change"}],this.tableData=this.tableData.map(function(e){return e.arrow=Number(e.after)>Number(e.before),e.before=i.a.comUnit(Number(e.before),e.unitInfo.countUnitVal,e.unitInfo.countUnitName,e.unitInfo.minName),e.after=i.a.comUnit(Number(e.after),e.unitInfo.countUnitVal,e.unitInfo.countUnitName,e.unitInfo.minName),e.change=i.a.comUnit(Number(e.change),e.unitInfo.countUnitVal,e.unitInfo.countUnitName,e.unitInfo.minName),e.storeName=e.wName+"/"+e.aName,e})}},getMaterilaUnitInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],a={},n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var c=o.value;1==c.isMin&&(a.minName=c.name,a.minVal=c.value),1==c.isDefault&&(a.defName=c.name,a.defVal=c.value),c.muId==t&&(a.countUnitName=c.name,a.countUnitVal=c.value)}}catch(e){r=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}return a},addItemIndex:function(e){for(var t=0;t<e.length;t++){var a=(this.pageObj.currentPage-1)*this.pageObj.num+1+t;e[t].itemIndex=a>=10?a:"0"+a}return e},funGetPageNum:function(e){this.pageObj.num=e.num,this.pageObj.currentPage=e.page,this.getData()},getHttp:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a[e]({data:a});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}},n,t)}))()},isPrimitive:function(e){return"string"==typeof e||"number"==typeof e},generatorDate:function(e){return e?"number"!=typeof e&&"string"!=typeof e||(e=Number(e),e=new Date(e)):e=new Date,{year:e.getFullYear(),month:e.getMonth(),day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),week:0}},initBtn:function(){var e=this;this.$store.commit("setPageTools",[{name:"返回",style:{height:"40px",border:"1px solid #ccc","background-color":"#fff",color:"#999"},fn:function(){e.$router.go(-1)}}])}},components:{tableCom:function(){return a.e("table").then(a.bind(null,"4360"))},page:function(){return a.e("page_element").then(a.bind(null,"5921"))}}},m=(a("c021"),a("6ceb")),s=Object(m.a)(c,n,[],!1,null,"3908ca6c",null);s.options.__file="src\\module\\invoicing_system\\invoicing\\goods_count_detail.vue";t.default=s.exports},c021:function(e,t,a){"use strict";var n=a("66cc");a.n(n).a}}]);