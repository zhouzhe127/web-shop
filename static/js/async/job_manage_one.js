(window.webpackJsonp=window.webpackJsonp||[]).push([["job_manage_one"],{1090:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",[n("win",{attrs:{align:"right",width:600,height:"auto",ok:t.okStyle,cancel:t.cancelStyle},on:{winEvent:t.clickResult}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"jobWin",attrs:{id:"jobWin"}},[n("h2",{staticClass:"required tag"},[t._v("职位名称")]),t._v(" "),n("div",{staticClass:"mes"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.info.name,expression:"info.name"}],staticClass:"input",staticStyle:{width:"280px"},attrs:{type:"text",maxlength:"10",placeholder:"请输入职位名字"},domProps:{value:t.info.name},on:{input:function(i){i.target.composing||t.$set(t.info,"name",i.target.value)}}})]),t._v(" "),n("div",{staticClass:"clear"}),t._v(" "),n("h2",{staticClass:"required tag"},[t._v("排序")]),t._v(" "),n("div",{staticClass:"mes"},[n("subadd",{attrs:{bindnum:t.info.sort,maxnum:255,minnum:1,sign:!1},on:{toClick:t.change}})],1),t._v(" "),n("div",{staticClass:"clear"}),t._v(" "),n("h2",{staticClass:"required tag"},[t._v("职位权限")]),t._v(" "),n("div",{staticClass:"mes"},[n("a",{staticClass:"addclassify",staticStyle:{width:"220px"},attrs:{href:"javascript:void(0);"},on:{click:t.edit}},[t._v("分配职位权限")])]),t._v(" "),n("div",{staticClass:"clear"}),t._v(" "),n("h2",{staticClass:"tag"}),t._v(" "),t.info&&t.info.nodeIds?n("div",{staticClass:"mes",staticStyle:{color:"#999"}},[t._v("\n\t\t\t\t\t已分配职位权限："+t._s(t.info.nodeIds.length)+" 个\n\t\t\t\t")]):t._e(),t._v(" "),n("div",{staticClass:"mes",staticStyle:{"margin-top":"20px"}},[n("a",{staticClass:"addses",staticStyle:{width:"150px",float:"left"},attrs:{href:"javascript:void(0);"},on:{click:t.copysec}},[t._v("复制已有职位权限")]),t._v(" "),n("div",{staticStyle:{color:"#999",float:"left","line-height":"40px",width:"220px"}},[n("img",{staticStyle:{float:"left",padding:"10px"},attrs:{src:e("fdd3"),alt:""}}),t._v(" "),n("span",[t._v("复制权限后会将当前权限覆盖")])])]),t._v(" "),n("div",{staticClass:"clear",staticStyle:{height:"120px"}})])])]),t._v(" "),t.showTan?n("job-tan",{attrs:{info:t.info,type:"0"},on:{throwTanResult:t.doThrowTanResult}}):t._e(),t._v(" "),t.showRadioTan?n("selectRadioWin",{attrs:{list:t.list,title:"请选择需要复制的已有权限",name:"name",selectIndex:t.index},on:{selectRadioWin:t.TanResult}}):t._e()],1)};n._withStripped=!0;var s=e("81a2");var o={data:function(){return{title:"",cancelStyle:null,okStyle:null,info:{name:"",sort:"255",nodeIds:[],type:"0"},oldName:"",showTan:!1,showRadioTan:!1,index:-1}},props:{isAdd:null,jobId:"",jobIndex:"",list:Array},components:{win:function(){return e.e("win").then(e.bind(null,"f60a"))},subadd:function(){return e.e("subadd").then(e.bind(null,"e7ea"))},jobTan:function(){return e.e("job_manage_two").then(e.bind(null,"2377"))},selectRadioWin:function(){return e.e("select_radio_win").then(e.bind(null,"4e06"))}},mounted:function(){this.isAdd?(this.title="新建职位",this.cancelStyle=null,this.okStyle={content:"确定",style:{backgroundColor:"#29ABE2",color:"#fff"}}):this.isAdd||(this.title="修改职位",this.okStyle={content:"保存",style:{backgroundColor:"#29ABE2",color:"#fff"}}),this.getJobInfo()},methods:{TanResult:function(t,i){"ok"==t?(this.info.nodeIds=i.nodeIds.split(","),this.index=i.index,this.showRadioTan=!1):this.showRadioTan="cancel"!=t&&"close"!=t},copysec:function(){this.showRadioTan=!0},change:function(t){this.info.sort=t},getJobInfo:function(){var t,i=this;return(t=regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.isAdd){t.next=5;break}return t.next=3,s.a.newGetJobInfo({data:{id:i.jobId}});case 3:(e=t.sent)&&(i.oldName=e.name,e.nodeIds=e.nodeIds.split(","),i.info=e);case 5:case"end":return t.stop()}},t,i)}),function(){var i=t.apply(this,arguments);return new Promise(function(t,e){return function n(s,o){try{var a=i[s](o),l=a.value}catch(t){return void e(t)}if(!a.done)return Promise.resolve(l).then(function(t){n("next",t)},function(t){n("throw",t)});t(l)}("next")})})()},clickResult:function(t){if("ok"==t){var i=this.info;if(!i)return!0;var e=i.name+"";if(/^[\s]*$/.test(e))return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"职位名称不能为空"}),!1;for(var n=0;n<this.list.length;n++)if(this.list[n].name===e&&this.isAdd||!this.isAdd&&this.oldName!==e&&this.list[n].name===e)return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"该职位已经存在"}),!1;if(0==i.nodeIds.length)return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"必须分配至少一项职位权限"}),!1;this.info.sort=parseInt(this.info.sort);for(var s=this.info.nodeIds,o="",a=0;a<s.length;a++)o=o+s[a]+",";this.info.nodeIds=o;var l=this.info;this.$emit("throwWinResult",t,l)}else this.$emit("throwWinResult",t)},edit:function(){this.showTan=!0},doThrowTanResult:function(t){this.showTan="ok"!=t&&"cancel"!=t&&"close"!=t}}},a=(e("939b"),e("7610")),l=Object(a.a)(o,n,[],!1,null,"666d860e",null);l.options.__file="src\\module\\shop_config\\job_manage_one.vue";i.default=l.exports},"88f8":function(t,i,e){},"939b":function(t,i,e){"use strict";var n=e("88f8");e.n(n).a},fdd3:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAASCAYAAAC9+TVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTNEMTRBQjQ3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTNEMTRBQjU3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1M0QxNEFCMjdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1M0QxNEFCMzdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoJwRHcAAAF1SURBVHjapNRPKARRHMDx2bGsEiUXB5JEDubktiWlxHUl5eCmlJSDPyfkTykOJOWwxz1ISRxsCUURF21pDi5ulIQD7Zbb+L76jZ7Xm92DV5/27e+9+c37O7EgCJz/lrjv+/r/VsxjCAlL/xOs4TIMeJ7nuFqHETzIbyLipf24wLIeDJMMI4Myy4NqvosYQE5iarTrv9NBA3aLTPkaS1KvwJ7UZ3COUzWSzRLr1oVBtGPaaEuzprG4dLCVPI7xhgl0W/o0oTcekeBM5p/FlcTeUWfpm3QtwWfZgTHUS6wa5REvbLQlqcUqbrEvsQ3URCRxbUmqtHPjyGhGiyz8qxvRsIUPqW9r58VWcirJjRH8xoLUe2T3dvAZsYNZlWTSaDjAl9QLmNMW1yxT3J2CSnKHFa2hGS1oQ4eMZNxyJdQZSofH3pHhV8pRTuKxxCk+Qsq8gKrMyiW7L/Lwk0w/9ed7YnQ6FH3oVAdJpvECX74neTPzjwADADrTSFI39Bw5AAAAAElFTkSuQmCC"}}]);