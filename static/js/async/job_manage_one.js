(window.webpackJsonp=window.webpackJsonp||[]).push([["job_manage_one"],{1090:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("win",{attrs:{align:"right",width:600,height:"auto",ok:t.okStyle,cancel:t.cancelStyle},on:{winEvent:t.clickResult}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),i("div",{attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"jobWin",attrs:{id:"jobWin"}},[i("el-form",{ref:"info",attrs:{model:t.info,"label-width":"100px"}},[i("el-form-item",{attrs:{required:"",label:"职位名称"}},[i("el-input",{staticStyle:{width:"280px"},attrs:{maxlength:"20",placeholder:"请输入职位名称"},model:{value:t.info.name,callback:function(e){t.$set(t.info,"name",e)},expression:"info.name"}})],1),t._v(" "),i("el-form-item",{attrs:{required:"",label:"排序"}},[i("el-input-number",{staticStyle:{width:"150px"},attrs:{min:1,max:255},model:{value:t.info.sort,callback:function(e){t.$set(t.info,"sort",e)},expression:"info.sort"}})],1),t._v(" "),i("el-form-item",{attrs:{required:"",label:"职位权限"}},[i("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary"},on:{click:t.edit}},[t._v("分配职位权限")]),t._v(" "),t.info&&t.info.nodeIds?i("div",{staticStyle:{color:"#999",width:"300px"}},[t._v("\n\t\t\t\t\t\t\t已分配职位权限："+t._s(t.info.nodeIds.length)+" 个\n\t\t\t\t\t\t")]):t._e()],1),t._v(" "),i("el-form-item",[i("el-button",{staticStyle:{width:"150px",float:"left"},attrs:{plain:""},on:{click:t.copysec}},[t._v("复制已有职位权限")]),t._v(" "),i("div",{staticStyle:{color:"#999",float:"left","line-height":"40px",width:"220px"}},[i("img",{staticStyle:{float:"left",padding:"10px"},attrs:{src:n("fdd3"),alt:""}}),t._v(" "),i("span",[t._v("复制权限后会将当前权限覆盖")])])],1)],1)],1)])]),t._v(" "),t.showTan?i("job-tan",{attrs:{info:t.info,type:"0"},on:{throwTanResult:t.doThrowTanResult}}):t._e(),t._v(" "),t.showRadioTan?i("selectRadioWin",{attrs:{list:t.list,title:"请选择需要复制的已有权限",name:"name",selectIndex:t.index},on:{selectRadioWin:t.TanResult}}):t._e()],1)};i._withStripped=!0;var o=n("81a2");var s={data:function(){return{title:"",cancelStyle:null,okStyle:null,info:{name:"",sort:"255",nodeIds:[],type:"0"},oldName:"",showTan:!1,showRadioTan:!1,index:-1}},props:{isAdd:null,jobId:"",jobIndex:"",list:Array},components:{win:function(){return n.e("win").then(n.bind(null,"f60a"))},subadd:function(){return n.e("subadd").then(n.bind(null,"e7ea"))},jobTan:function(){return n.e("job_manage_two").then(n.bind(null,"2377"))},selectRadioWin:function(){return n.e("select_radio_win").then(n.bind(null,"4e06"))}},mounted:function(){this.isAdd?(this.title="新建职位",this.cancelStyle=null,this.okStyle={content:"确定",style:{backgroundColor:"#29ABE2",color:"#fff"}}):this.isAdd||(this.title="修改职位",this.okStyle={content:"保存",style:{backgroundColor:"#29ABE2",color:"#fff"}}),this.getJobInfo()},methods:{TanResult:function(t,e){"ok"==t?(this.info.nodeIds=e.nodeIds.split(","),this.index=e.index,this.showRadioTan=!1):this.showRadioTan="cancel"!=t&&"close"!=t},copysec:function(){this.showRadioTan=!0},change:function(t){this.info.sort=t},getJobInfo:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isAdd){t.next=5;break}return t.next=3,o.a.newGetJobInfo({data:{id:e.jobId}});case 3:(n=t.sent)&&(e.oldName=n.name,n.nodeIds=n.nodeIds.split(","),e.info=n);case 5:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(o,s){try{var l=e[o](s),a=l.value}catch(t){return void n(t)}if(!l.done)return Promise.resolve(a).then(function(t){i("next",t)},function(t){i("throw",t)});t(a)}("next")})})()},clickResult:function(t){if("ok"==t){var e=this.info;if(!e)return!0;var n=e.name+"";if(/^[\s]*$/.test(n))return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"职位名称不能为空"}),!1;for(var i=0;i<this.list.length;i++)if(this.list[i].name===n&&this.isAdd||!this.isAdd&&this.oldName!==n&&this.list[i].name===n)return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"该职位已经存在"}),!1;if(0==e.nodeIds.length)return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"必须分配至少一项职位权限"}),!1;this.info.sort=parseInt(this.info.sort);for(var o=this.info.nodeIds,s="",l=0;l<o.length;l++)s=s+o[l]+",";this.info.nodeIds=s;var a=this.info;this.$emit("throwWinResult",t,a)}else this.$emit("throwWinResult",t)},edit:function(){this.showTan=!0},doThrowTanResult:function(t){this.showTan="ok"!=t&&"cancel"!=t&&"close"!=t}}},l=(n("939b"),n("6ceb")),a=Object(l.a)(s,i,[],!1,null,"666d860e",null);a.options.__file="src\\module\\shop_config\\job_manage_one.vue";e.default=a.exports},"939b":function(t,e,n){"use strict";var i=n("d87f");n.n(i).a},d87f:function(t,e,n){},fdd3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAASCAYAAAC9+TVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTNEMTRBQjQ3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTNEMTRBQjU3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1M0QxNEFCMjdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1M0QxNEFCMzdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoJwRHcAAAF1SURBVHjapNRPKARRHMDx2bGsEiUXB5JEDubktiWlxHUl5eCmlJSDPyfkTykOJOWwxz1ISRxsCUURF21pDi5ulIQD7Zbb+L76jZ7Xm92DV5/27e+9+c37O7EgCJz/lrjv+/r/VsxjCAlL/xOs4TIMeJ7nuFqHETzIbyLipf24wLIeDJMMI4Myy4NqvosYQE5iarTrv9NBA3aLTPkaS1KvwJ7UZ3COUzWSzRLr1oVBtGPaaEuzprG4dLCVPI7xhgl0W/o0oTcekeBM5p/FlcTeUWfpm3QtwWfZgTHUS6wa5REvbLQlqcUqbrEvsQ3URCRxbUmqtHPjyGhGiyz8qxvRsIUPqW9r58VWcirJjRH8xoLUe2T3dvAZsYNZlWTSaDjAl9QLmNMW1yxT3J2CSnKHFa2hGS1oQ4eMZNxyJdQZSofH3pHhV8pRTuKxxCk+Qsq8gKrMyiW7L/Lwk0w/9ed7YnQ6FH3oVAdJpvECX74neTPzjwADADrTSFI39Bw5AAAAAElFTkSuQmCC"}}]);