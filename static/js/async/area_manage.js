(window.webpackJsonp=window.webpackJsonp||[]).push([["area_manage"],{"0008":function(t,e,i){"use strict";var n=i("e324");i.n(n).a},"763f":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"area-show"}},[i("section",[i("el-table",{ref:"multipleTable",staticStyle:{width:"90%"},attrs:{stripe:"","header-cell-style":{"background-color":"#f5f7fa"},data:t.showDataList,border:""}},[i("el-table-column",{attrs:{fixed:"","min-width":"120",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{color:"#FE8D2C",cursor:"pointer"},on:{click:function(i){t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),i("span",{staticStyle:{padding:"0 5px",color:"#D2D2D2"}},[t._v("|")]),t._v(" "),i("span",{staticStyle:{color:"#FD3F1F",cursor:"pointer"},on:{click:function(i){t.del(e.row)}}},[t._v("删除")])]}}])}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"50",align:"center",prop:"sort",label:"排序"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"areaName",label:"区域名称"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"tableTotal",label:"总桌数(桌)"}}),t._v(" "),i("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"seatTotal",label:"总席位（个）"}})],1)],1),t._v(" "),i("section",{staticStyle:{"margin-top":"10px"}},[i("el-pagination",{attrs:{background:"","current-page":t.page,"page-size":t.num,layout:"sizes, prev, pager, next","page-count":t.total,"page-sizes":[10,20,30]},on:{"size-change":t.numChange,"current-change":t.pageClick}})],1),t._v(" "),t.showWin?i("area-win",{attrs:{isAdd:t.isAdd,areaId:t.areaId,shopId:t.shopId},on:{throwWinResult:t.doThrowWinResult}}):t._e()],1)};n._withStripped=!0;var a=i("81a2"),s=i("f6ce"),o=i("bbb9");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(a,s){try{var o=e[a](s),r=o.value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(r).then(function(t){n("next",t)},function(t){n("throw",t)});t(r)}("next")})}}var c={data:function(){return{shopId:null,isAdd:!0,showWin:!1,dataList:[],showDataList:[],areaId:"",num:10,total:0,page:1}},mounted:function(){var t=s.a.session("userShop");this.shopId=t.currentShop.id,this.init()},created:function(){var t=this,e=[{name:"新建区域",className:"pick",fn:function(){t.add()}}];this.$store.commit("setPageTools",e)},methods:{del:function(t){var e=this;this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确认删除区域"+t.areaName+"？",callback:function(i){"ok"==i&&e.deleteArea(t)}})},deleteArea:function(t){var e=this;return r(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.a.deleteArea({data:{shopId:e.shopId,id:t.id}});case 2:i.sent&&(e.dataList=e.dataList.filter(function(e){return e.id!=t.id}),e.paging());case 4:case"end":return i.stop()}},i,e)}))()},paging:function(){this.total=Math.ceil(this.dataList.length/this.num),this.showDataList=this.dataList.slice((this.page-1)*this.num,(this.page-1)*this.num+this.num)},numChange:function(t){this.num=t,this.paging(),console.log(t)},pageClick:function(t){this.page=t,this.paging(),console.log(t)},init:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getArea({data:{shopId:t.shopId}});case 2:i=e.sent,console.log(i),t.dataList=i,t.sortList(),t.paging();case 7:case"end":return e.stop()}},e,t)}))()},add:function(){this.isAdd=!0,this.showWin=!0},edit:function(t){console.log(t),this.isAdd=!1,this.areaId=t.id,this.showWin=!0},doThrowWinResult:function(t,e){if(console.log(e),"ok"==t){if(this.isAdd)this.dataList.push(e);else if(!this.isAdd)for(var i=0;i<this.dataList.length;i++)if(this.dataList[i].id==e.id){this.dataList[i].areaName=e.areaName,this.dataList[i].description=e.description,this.dataList[i].sort=e.sort;break}this.sortList(),this.paging(),this.showWin=!1}"cancel"==t&&(this.isAdd||(this.dataList=this.dataList.filter(function(t){return t.id!=e.id})),this.paging(),this.showWin=!1),"close"==t&&(this.showWin=!1)},sortList:function(){this.dataList=o.a.sortByAll(this.dataList,["sort","id"],!0)}},components:{areaWin:function(){return i.e("area_manage_win").then(i.bind(null,"adfa"))}}},l=(i("0008"),i("6ceb")),d=Object(l.a)(c,n,[],!1,null,"f309db88",null);d.options.__file="src\\module\\shop_config\\area_manage.vue";e.default=d.exports},e324:function(t,e,i){}}]);