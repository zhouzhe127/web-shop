(window.webpackJsonp=window.webpackJsonp||[]).push([["good_package_win"],{"076b":function(t,o,e){},"72f8c":function(t,o,e){"use strict";var s=e("076b");e.n(s).a},b172:function(t,o,e){"use strict";e.r(o);var s=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("win",{attrs:{align:"center",width:980,height:550},on:{winEvent:t.getWinClickResult}},[s("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),s("section",{staticClass:"relatedForm",attrs:{slot:"content"},slot:"content"},[0==t.category.length?s("div",{staticClass:"loading"},[s("img",{attrs:{src:e("b8bc")}})]):t._e(),t._v(" "),s("section",[s("section",{staticClass:"place fl"},[s("section",{staticClass:"class-Parent"},[t._l(t.category,function(o,e){return[1==t.shopIndex[0]?s("div",{key:e},[o.categoryId==t.L1ID?s("span",{staticClass:"on",on:{click:function(s){t.changeL1ID(o.categoryId,e)}}},[t._v(t._s(o.categoryName))]):s("span",{on:{click:function(s){t.changeL1ID(o.categoryId,e)}}},[t._v(t._s(o.categoryName))])]):s("div",{key:e},[o.categoryName==t.L1ID?s("span",{staticClass:"on",on:{click:function(s){t.changeL1ID(o.categoryName,e)}}},[t._v(t._s(o.categoryName))]):s("span",{on:{click:function(s){t.changeL1ID(o.categoryName,e)}}},[t._v(t._s(o.categoryName))])])]})],2),t._v(" "),s("section",{staticClass:"class-Child"},[t._l(t.child,function(o,e){return t.child.length>0?[o.goodsId==t.L2ID?s("span",{key:e,staticClass:"second-on",on:{click:function(e){t.changeL2ID(o.goodsId)}}},[t._v(t._s(o.goodsName))]):s("span",{key:e,on:{click:function(e){t.changeL2ID(o.goodsId)}}},[t._v(t._s(o.goodsName))])]:t._e()})],2)]),t._v(" "),s("section",{staticClass:"fl",staticStyle:{width:"100%",height:"auto","margin-bottom":"10px"}},[s("a",{staticClass:"check fl",attrs:{href:"javascript:void(0)"},on:{click:t.wholeOnCom}},[t._v("全部选择")]),t._v(" "),s("a",{staticClass:"unselect fl",attrs:{href:"javascript:void(0)"},on:{click:t.wholeOffCom}},[t._v("全部取消")])])]),t._v(" "),t.selectgoods.length>0?s("section",{staticClass:"comList"},[s("mulSelect",{attrs:{list:t.selectgoods,selects:t.goodsIndex,name:"goodsName",keys:"goodsId",isradio:!1,styles:{"background-color":"#F1F1F1"}},on:{selOn:t.getRelation}})],1):t._e()])])};s._withStripped=!0;var a=e("81a2"),n=e("f6ce"),i=e("bbb9");function d(t){return function(){var o=t.apply(this,arguments);return new Promise(function(t,e){return function s(a,n){try{var i=o[a](n),d=i.value}catch(t){return void e(t)}if(!i.done)return Promise.resolve(d).then(function(t){s("next",t)},function(t){s("throw",t)});t(d)}("next")})}}var c=n.a.session("userShop"),r=void 0;r=c.currentShop.brandId?c.currentShop.brandId:0;var g={props:{pObj:null},data:function(){return{L1ID:null,L2ID:0,shopIndex:null,category:[],child:[],selectgoods:[],goodsCom:[],goodsIndex:[],selectPackages:[],show:-1,title:"添加关联菜品",areaIndex:null,goodsIds:null,eleShopId:null,goods:null}},methods:{getRelation:function(t){t.length>0&&(this.goodsIndex=t)},getWinClickResult:function(t){if("ok"==t){var o={},e=[];this.goodsLength=this.goodsIndex.length,this.goodsIds=this.goodsIndex;for(var s=0;s<this.goodsIds.length;s++)if(1==this.areaIndex[0]){for(var a=0;a<this.goodsCom.length;a++)if(this.goodsIds[s]==this.goodsCom[a].goodsId){var n=[];""!=this.goodsCom[a].packageIds&&n.push(this.goodsCom[a].packageIds),e=e.concat(n),this.packageIds=e.toString(),o[this.goodsIds[s]+""]=this.goodsCom[a].specId}}else if(2==this.areaIndex[0]){for(var d=0;d<this.mtgoods.length;d++)if(this.goodsIds[s]==this.mtgoods[d].goodsId){var c=[];""!=this.mtgoods[d].packageIds&&c.push(this.mtgoods[d].packageIds),e=e.concat(c),this.packageIds=e.toString(),o[this.goodsIds[s]+""]=this.mtgoods[d].specId}}else if(3==this.areaIndex[0])for(var r=0;r<this.baidugoods.length;r++)if(this.goodsIds[s]==this.baidugoods[r].goodsId){var g=[];""!=this.baidugoods[r].packageIds&&g.push(this.baidugoods[r].packageIds),e=e.concat(g),this.packageIds=e.toString(),o[this.goodsIds[s]+""]=this.baidugoods[r].specId}this.goods=JSON.stringify(o)}this.goodsIndex=i.a.unique(this.goodsIndex);var h={goods:this.goods,packageIds:this.packageIds,goodsLength:this.goodsIndex.length,goodsIds:this.goodsIndex};this.$emit("toClick",t,h)},catecarygoods:function(t){var o=this;return d(regeneratorRuntime.mark(function e(){var s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<1)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,a.a.getGoodsByCategoryId({data:{type:1,categoryId:o.category[t].categoryId}});case 6:for(s=e.sent,n=0;n<s.length;n++)o.goodsCom.push(s[n]);o.goodReady(),o.catecarygoods(t-1);case 10:case"end":return e.stop()}},e,o)}))()},changeL1ID:function(t){this.L1ID=t,this.L2ID=0,this.goodReady(t)},changeL2ID:function(t){this.L2ID=t,this.goodReady(t)},incategory:function(t){return 0==this.L1ID||(t.indexOf(this.L1ID)>=0&&0==this.L2ID||t.indexOf(this.L2ID)>=0)},requestAllList:function(t){var o=this;return d(regeneratorRuntime.mark(function e(){var s,n,i,d,c,g,h,l,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=o.areaIndex[0]){e.next=9;break}return e.next=3,a.a.takeoutGetCategoryList({data:{eleShopId:o.eleShopId}});case 3:s=e.sent,o.category=s,s&&o.category.unshift({categoryName:"全部",categoryId:0}),o.catecarygoods(o.category.length-1),e.next=31;break;case 9:if(2!=o.areaIndex[0]){e.next=21;break}return e.next=12,a.a.getMtGoods({data:{}});case 12:for(n=e.sent,o.category=n.typeList,n&&o.category.unshift({categoryName:"全部",categoryId:0}),o.mtgoods=n.goodsList,o.goodReady(),i=[],d=0;d<o.mtgoods.length;d++)void 0===t||"全部"===t?(c=o.mtgoods[d]).categoryName instanceof Array?o.incategory(c.categoryName)&&(i=i.concat(c)):i=i.concat(c):o.mtgoods[d].categoryName==t&&(i=i.concat(o.mtgoods[d]));e.next=31;break;case 21:if(3!=o.areaIndex[0]){e.next=31;break}return e.next=24,a.a.getBaiduGoods({data:{type:1,brandId:r}});case 24:for(g=e.sent,o.category=g.categoryList,g&&o.category.unshift({categoryName:"全部",categoryId:0}),o.baidugoods=g.goodsList,o.goodReady(),h=[],l=0;l<o.baidugoods.length;l++)void 0===t||"全部"===t?(u=o.baidugoods[l]).categoryName instanceof Array?o.incategory(u.categoryName)&&(h=h.concat(u)):h=h.concat(u):o.baidugoods[l].categoryName==t&&(h=h.concat(o.baidugoods[l]));case 31:case"end":return e.stop()}},e,o)}))()},goodReady:function(t){var o=[];if(1==this.areaIndex[0])for(var e=0;e<this.goodsCom.length;e++)if(void 0===t||0===t){var s=this.goodsCom[e];s.categoryId instanceof Array?this.incategory(s.categoryId)&&(o=o.concat(s)):o=o.concat(s)}else this.goodsCom[e].categoryId==t&&(o=o.concat(this.goodsCom[e]));else if(2==this.areaIndex[0])for(var a=0;a<this.mtgoods.length;a++)if(void 0===t||"全部"===t){var n=this.mtgoods[a];n.categoryName instanceof Array?this.incategory(n.categoryName)&&o.push(n):o.push(n)}else this.mtgoods[a].categoryName==t&&o.push(this.mtgoods[a]);else if(3==this.areaIndex[0])for(var i=0;i<this.baidugoods.length;i++)if(void 0===t||"全部"===t){var d=this.baidugoods[i];d.categoryName instanceof Array?this.incategory(d.categoryName)&&o.push(d):o.push(d)}else this.baidugoods[i].categoryName==t&&o.push(this.baidugoods[i]);this.selectgoods=o},wholeOnCom:function(){if(this.goodsIndex=[],this.areaIndex[0]){for(var t=0;t<this.selectgoods.length;t++)this.goodsIndex.push(this.selectgoods[t].goodsId);this.goodsIndex=i.a.unique(this.goodsIndex)}},wholeOffCom:function(){if(this.areaIndex[0])for(var t=0;t<this.selectgoods.length;t++)this.goodsIndex.splice(0,this.goodsIndex.length)}},mounted:function(){this.areaIndex=this.pObj.areaIndex,this.goodsIds=this.pObj.goodsIds,this.eleShopId=this.pObj.eleShopid,this.L1ID=1==this.areaIndex[0]?0:"全部",this.shopIndex=this.areaIndex,this.goodsIndex=this.goodsIds,this.requestAllList()},components:{win:function(){return e.e("win").then(e.bind(null,"f60a"))},mulSelect:function(){return e.e("mul_select").then(e.bind(null,"7d09"))}}},h=(e("72f8c"),e("7610")),l=Object(h.a)(g,s,[],!1,null,"09ef9eb0",null);l.options.__file="src\\module\\outfood\\takeawayprint\\printrelation_win.vue";o.default=l.exports},b8bc:function(t,o,e){t.exports=e.p+"images/preloader.3e54c692.gif"}}]);