(window.webpackJsonp=window.webpackJsonp||[]).push([["brand_assign_list"],{1825:function(t,n,e){"use strict";e.r(n);var s=e("81a2"),i=e("f6ce");function a(t){return function(){var n=t.apply(this,arguments);return new Promise(function(t,e){return function s(i,a){try{var r=n[i](a),c=r.value}catch(t){return void e(t)}if(!r.done)return Promise.resolve(c).then(function(t){s("next",t)},function(t){s("throw",t)});t(c)}("next")})}}var r=1,c={data:function(){return{tabIndex:1,tempList:[],authList:[]}},mounted:function(){console.log("1"),this.initBtn(),this.getTemplateList(),this.getAuthorityList(),this.tabIndex=r},beforeRouteLeave:function(t,n,e){"/admin/brandAssign/setNewjurisdiction"!=t.path&&(r=1),e()},methods:{initBtn:function(){var t=this,n=[{name:"指派日志",style:"background: #29a7e1;border: 1px solid #29a7e1;color: #fff;",fn:function(){t.$router.push({path:"/admin/brandAssign/jurisdictionRecord"})}}];this.$store.commit("setPageTools",n)},getTemplateList:function(){var t=this;return a(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.InventoryassignGetAssignTemplates();case 2:e=n.sent,t.tempList=e;case 4:case"end":return n.stop()}},n,t)}))()},getAuthorityList:function(){var t=this;return a(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.InventoryassignGetPowerTemplates();case 2:e=n.sent,t.authList=e;case 4:case"end":return n.stop()}},n,t)}))()},tabClick:function(t){this.tabIndex=t,r=t},createAuth:function(t){1==t?this.$router.push({path:"/admin/brandAssign/create"}):2==t&&this.$router.push({path:"/admin/brandAssign/setNewjurisdiction"})},delmolde:function(t,n){var e,i=this;this.$store.commit("setWin",{title:"提示信息",winType:"confirm",content:"确定删除",callback:(e=a(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("ok"!=a){e.next=5;break}return e.next=3,s.a.InventordeleteTemplate({data:{id:t.id}});case 3:e.sent&&(1==i.tabIndex?i.tempList.splice(n,1):i.authList.splice(n,1));case 5:case"end":return e.stop()}},e,i)})),function(t){return e.apply(this,arguments)})})},appoint:function(t){i.a.session("brandAssignId",t.id);var n=1==this.tabIndex?"brandAssign/create":"brandAssign/setNewjurisdiction";this.$router.push({path:n})}}},o=(e("7b86"),e("d801")),u=Object(o.a)(c,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"brand-assign"}},[e("div",{staticClass:"tab"},[e("span",{class:{active:1==t.tabIndex},on:{click:function(n){t.tabClick(1)}}},[t._v("进销存指派")]),t._v(" "),e("span",{class:{active:2==t.tabIndex},on:{click:function(n){t.tabClick(2)}}},[t._v("进销存权限指派")])]),t._v(" "),1==t.tabIndex?e("div",{staticClass:"main"},[e("div",{staticClass:"cell add",on:{click:function(n){t.createAuth(1)}}},[e("em"),t._v(" "),e("p",[t._v("新建指派方案")])]),t._v(" "),t._l(t.tempList,function(n,s){return e("div",{key:s,staticClass:"cell item"},[e("p",{staticClass:"name text-ellipsis"},[t._v(t._s(n.name))]),t._v(" "),e("p",{staticClass:"num"},[t._v(t._s(s+1))]),t._v(" "),e("div",{staticClass:"btn-box"},[e("span",{staticClass:"assign",on:{click:function(e){t.appoint(n)}}},[t._v("指派")]),t._v(" "),e("span",{staticClass:"del",on:{click:function(e){t.delmolde(n,s)}}},[t._v("删除")])])])})],2):t._e(),t._v(" "),2==t.tabIndex?e("div",{staticClass:"main"},[e("div",{staticClass:"cell add",on:{click:function(n){t.createAuth(2)}}},[e("em"),t._v(" "),e("p",[t._v("新建权限指派方案")])]),t._v(" "),t._l(t.authList,function(n,s){return e("div",{key:s,staticClass:"cell item"},[e("p",{staticClass:"name text-ellipsis"},[t._v(t._s(n.name))]),t._v(" "),e("p",{staticClass:"num"},[t._v(t._s(s+1))]),t._v(" "),e("div",{staticClass:"btn-box"},[e("span",{staticClass:"assign",on:{click:function(e){t.appoint(n)}}},[t._v("指派")]),t._v(" "),e("span",{staticClass:"del",on:{click:function(e){t.delmolde(n,s)}}},[t._v("删除")])])])})],2):t._e()])},[],!1,null,"09f5f9e4",null);n.default=u.exports},"7b86":function(t,n,e){"use strict";var s=e("d37c");e.n(s).a},d37c:function(t,n,e){}}]);