(window.webpackJsonp=window.webpackJsonp||[]).push([["output_store_batch_win"],{"0268":function(t,e,i){"use strict";var n=i("0c39");i.n(n).a},"0c39":function(t,e,i){},a74d:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("win",{attrs:{align:"center",width:1024,height:550,ok:t.btnOk},on:{winEvent:t.closeSelfWin}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),i("div",{attrs:{slot:"content",id:"select-batch"},slot:"content"},[i("div",{staticClass:"batch-title"},[i("li",[t._v("商品名称: "+t._s(t.needItem.goodsName))]),t._v(" "),i("li",[t._v("条码: "+t._s(t.needItem.barCode))]),t._v(" "),i("li",[t._v("单位: "+t._s(t.needItem.unit))]),t._v(" "),i("li",[i("span",{staticClass:"clear",on:{click:t.clearInput}},[t._v("清空输入")])])]),t._v(" "),i("div",{staticClass:"search-div"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.batchNum,expression:"batchNum"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入批次编号"},domProps:{value:t.batchNum},on:{input:function(e){e.target.composing||(t.batchNum=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.supplier,expression:"supplier"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入供应商"},domProps:{value:t.supplier},on:{input:function(e){e.target.composing||(t.supplier=e.target.value)}}}),t._v(" "),i("calendar",{attrs:{time:t.startTime,type:0,format:"yyyy年MM月dd日"},on:{emit:t.startTimeChange}}),t._v(" "),i("calendar",{attrs:{time:t.endTime,type:0,format:"yyyy年MM月dd日"},on:{emit:t.endTimeChange}}),t._v(" "),i("div",{staticClass:"btn-box"},[i("div",{staticClass:"filter blue",on:{click:t.search}},[t._v("筛选")]),t._v(" "),i("div",{staticClass:"reset gray",on:{click:t.reset}},[t._v("重置")])])],1),t._v(" "),i("div",{staticClass:"table"},[i("div",{staticClass:"table-head"},[i("li",[t._v("序号")]),t._v(" "),i("li",[t._v("批次编号")]),t._v(" "),i("li",[t._v("生产日期")]),t._v(" "),i("li",[t._v("供应商")]),t._v(" "),i("li",[t._v("数量/重量")]),t._v(" "),i("li",[t._v("所属仓库")]),t._v(" "),i("li",[t._v("出库数量")])]),t._v(" "),i("div",{staticClass:"table-body"},t._l(t.changeList,function(e,n){return i("div",{key:n,staticClass:"table-row"},[i("li",[t._v(t._s(n+1))]),t._v(" "),i("li",[t._v(t._s(e.batchCode))]),t._v(" "),i("li",[t._v(t._s(t.getTime(e.productionTime)))]),t._v(" "),i("li",[t._v(t._s(e.supplier))]),t._v(" "),i("li",[t._v(t._s(e.surplus)+t._s(t.needItem.unit))]),t._v(" "),i("li",[t._v(t._s(e.wName)+"\n\t\t\t\t\t\t"),[t._v("-"+t._s(e.aName))]],2),t._v(" "),i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.outNum,expression:"item.outNum"}],staticClass:"input-num",attrs:{type:"text",placeholder:"输入数字"},domProps:{value:e.outNum},on:{input:[function(i){i.target.composing||t.$set(e,"outNum",i.target.value)},function(i){t.getmin(i,e,n)}]}})])])}))])])])};n._withStripped=!0;var a=i("bbb9"),s=i("81a2");var r={data:function(){return{title:"批次选择",btnOk:{},btnCancel:{},showTime:!1,startTime:"",endTime:"",cate:"",allList:"",changeList:"",batchNum:"",supplier:""}},props:["pObj","needItem","wid","selectItem","shopId"],methods:{clearInput:function(){var t=a.a.deepCopy(this.changeList),e=!0,i=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){s.value.outNum=""}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}this.changeList=t},init:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var i,n,r,o,u,c,l,m,v,h,d,p,f,_,b,g,y,w,T;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.getGoodsBatch({data:{gid:e.needItem.id,wid:e.wid||"",shopId:e.shopId}});case 2:if(i=t.sent,e.allList=i.list,e.changeList=e.allList,!e.selectItem||!e.selectItem.length){t.next=53;break}n=a.a.deepCopy(e.changeList),r=!0,o=!1,u=void 0,t.prev=10,c=n[Symbol.iterator]();case 12:if(r=(l=c.next()).done){t.next=36;break}for(m=l.value,v=!0,h=!1,d=void 0,t.prev=17,p=e.selectItem[Symbol.iterator]();!(v=(f=p.next()).done);v=!0)_=f.value,m.batchId==_.batchId&&(m.outNum=_.outNum);t.next=25;break;case 21:t.prev=21,t.t0=t.catch(17),h=!0,d=t.t0;case 25:t.prev=25,t.prev=26,!v&&p.return&&p.return();case 28:if(t.prev=28,!h){t.next=31;break}throw d;case 31:return t.finish(28);case 32:return t.finish(25);case 33:r=!0,t.next=12;break;case 36:t.next=42;break;case 38:t.prev=38,t.t1=t.catch(10),o=!0,u=t.t1;case 42:t.prev=42,t.prev=43,!r&&c.return&&c.return();case 45:if(t.prev=45,!o){t.next=48;break}throw u;case 48:return t.finish(45);case 49:return t.finish(42);case 50:e.changeList=n,t.next=72;break;case 53:for(b=!0,g=!1,y=void 0,t.prev=56,w=e.changeList[Symbol.iterator]();!(b=(T=w.next()).done);b=!0)T.value.outNum="";t.next=64;break;case 60:t.prev=60,t.t2=t.catch(56),g=!0,y=t.t2;case 64:t.prev=64,t.prev=65,!b&&w.return&&w.return();case 67:if(t.prev=67,!g){t.next=70;break}throw y;case 70:return t.finish(67);case 71:return t.finish(64);case 72:case"end":return t.stop()}},t,e,[[10,38,42,50],[17,21,25,33],[26,,28,32],[43,,45,49],[56,60,64,72],[65,,67,71]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(a,s){try{var r=e[a](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})})()},chooseTime:function(){this.showTime=!this.showTime},transFormDate:function(t){return a.a.format(new Date(t),"yyyy-MM-dd")},getReturnInfo:function(t){this.startTime=t.startTime,this.endTime=t.endTime,this.showTime=!1},closeSelfWin:function(t){if("ok"==t){var e=!0,i=!1,n=void 0;try{for(var a,s=this.changeList[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var r=a.value;if(Number(r.surplus)>=0&&Number(r.outNum)>Number(r.surplus))return this.$store.commit("setWin",{title:"操作提示",content:"批次编号"+r.batchCode+" 库存数量不足"}),!1}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}this.$emit("throwWin",t,this.changeList)}else this.$emit("throwWin",t)},initBtn:function(){this.btnOk={content:"确定",style:"background-color:#ff9200;"}},search:function(){var t=[];for(var e in this.allList){var i=this.allList[e];-1!=i.supplier.indexOf(this.supplier)&&0==i.batchCode.indexOf(this.batchNum)&&1e3*i.productionTime>this.startTime&&1e3*i.productionTime<this.endTime&&t.push(i)}this.changeList=t},reset:function(){this.supplier="",this.batchNum="",this.startTime=(new Date).setHours(0,0,0,0),this.endTime=(new Date).getTime(),this.changeList=this.allList},getmin:function(t,e){""!=e.outNum?e.outNum=(e.outNum+"").replace(/[^\d.]/g,""):e.outNum="",t.target.value=e.outNum},startTimeChange:function(t){this.startTime=t},endTimeChange:function(t){this.endTime=t},getTime:function(t){return a.a.format(1e3*parseInt(t),"yyyy年MM月dd日")}},mounted:function(){this.startTime=(new Date).setHours(0,0,0,0),this.endTime=(new Date).getTime(),this.initBtn(),this.init()},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))},calendar:function(){return i.e("calendar_type").then(i.bind(null,"f2dd"))}}},o=(i("0268"),i("6ceb")),u=Object(o.a)(r,n,[],!1,null,"7aaaabf8",null);u.options.__file="src\\module\\invoicing_system\\warehouse_manage\\output_store_batch_win.vue";e.default=u.exports}}]);