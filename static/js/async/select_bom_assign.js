(window.webpackJsonp=window.webpackJsonp||[]).push([["select_bom_assign"],{"3b0c":function(e,t,a){"use strict";a.r(t);var i=a("f6ce"),s=a("bbb9"),n=a("81a2");var r={data:function(){return{cid:"",isBrand:0,selectedType:0,options:["全部BOM单类型","公开","私密"],bomTypeList:[0,1,-1],isPublic:0,bomTypeIndex:0,prevIndex:0,page:1,pageShow:10,pageTotal:1,list:[],listLength:0,userData:"",createName:"",shopType:"",bomNum:"",gName:"",titleList:[{titleName:"操作",titleStyle:{width:"200px"}},{titleName:"序号"},{titleName:"商品名称",dataName:"itemName"},{titleName:"创建人",dataName:"createName"},{titleName:"创建时间"},{titleName:"BOM单编号",dataName:"bomNum"},{titleName:"BOM类型"}],storeAll:!1,pageAll:!1,savePage:[],selectBom:[],selNum:0}},props:["isAll","selBom"],components:{pageBtn:function(){return a.e("page_element").then(a.bind(null,"5921"))},selectBtn:function(){return a.e("select_btn").then(a.bind(null,"3d41"))},calendar:function(){return a.e("calendar_type").then(a.bind(null,"f2dd"))},comTable:function(){return a.e("table").then(a.bind(null,"4360"))}},created:function(){this.userData=i.a.session("userShop"),this.cid=this.userData.user.id},mounted:function(){this.initBtn(),this.setDefault(),this.getData()},methods:{initBtn:function(){var e=this,t=[{name:"确定",style:"background: #fe8d01;border: 1px solid #fe8d01;color: #fff;",fn:function(){e.$emit("emit",e.selectBom,e.storeAll)}},{name:"取消",style:"background: #b3b3b3;border: 1px solid #b3b3b3;color: #fff;",fn:function(){e.$emit("emit",!1)}}];this.$store.commit("setPageTools",t)},setDefault:function(){this.isAll?this.storeAll=!0:this.selectBom=this.selBom},dropBomType:function(e){this.isPublic=this.bomTypeList[e],this.bomTypeIndex=e,this.filter()},setBomType:function(e){return"1"==e?"公开":"-1"==e?"私密":void 0},formatTime:function(e){return s.a.format(new Date(1e3*e),"yyyy-MM-dd hh:mm:ss")},filter:function(){this.page=1,this.getData()},getData:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var a,i,s,r,l,o,c,u,m,p,h,d,f,v,g,b,y,x,N;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.bomBillmaterialGetBomList({data:{createUid:t.cid,startTime:"",endTime:"",page:t.page,num:t.pageShow,createName:t.createName,shopType:t.shopType,isPublic:t.isPublic,bomNum:t.bomNum,gName:t.gName}});case 2:if(a=e.sent){e.next=6;break}return t.$store.commit("setWin",{title:"温馨提示",content:"您没有权限查看私密bom单！"}),e.abrupt("return");case 6:i=!1,s=!0,r=!1,l=void 0,e.prev=10,o=a.list[Symbol.iterator]();case 12:if(s=(c=o.next()).done){e.next=81;break}if(u=c.value,!t.storeAll){e.next=18;break}u.selected=!0,e.next=78;break;case 18:m=!0,p=!1,h=void 0,e.prev=21,d=t.savePage[Symbol.iterator]();case 23:if(m=(f=d.next()).done){e.next=31;break}if(f.value!=t.page){e.next=28;break}return i=!0,e.abrupt("break",31);case 28:m=!0,e.next=23;break;case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(21),p=!0,h=e.t0;case 37:e.prev=37,e.prev=38,!m&&d.return&&d.return();case 40:if(e.prev=40,!p){e.next=43;break}throw h;case 43:return e.finish(40);case 44:return e.finish(37);case 45:if(!i){e.next=49;break}u.selected=!0,e.next=78;break;case 49:v=!1,g=!0,b=!1,y=void 0,e.prev=53,x=t.selectBom[Symbol.iterator]();case 55:if(g=(N=x.next()).done){e.next=63;break}if(N.value.id!=u.id){e.next=60;break}return v=!0,e.abrupt("break",63);case 60:g=!0,e.next=55;break;case 63:e.next=69;break;case 65:e.prev=65,e.t1=e.catch(53),b=!0,y=e.t1;case 69:e.prev=69,e.prev=70,!g&&x.return&&x.return();case 72:if(e.prev=72,!b){e.next=75;break}throw y;case 75:return e.finish(72);case 76:return e.finish(69);case 77:u.selected=!!v;case 78:s=!0,e.next=12;break;case 81:e.next=87;break;case 83:e.prev=83,e.t2=e.catch(10),r=!0,l=e.t2;case 87:e.prev=87,e.prev=88,!s&&o.return&&o.return();case 90:if(e.prev=90,!r){e.next=93;break}throw l;case 93:return e.finish(90);case 94:return e.finish(87);case 95:t.pageAll=!!i,t.list=a.list,t.listLength=a.totalCount,t.pageTotal=a.totalPage,t.setSelNum();case 100:case"end":return e.stop()}},e,t,[[10,83,87,95],[21,33,37,45],[38,,40,44],[53,65,69,77],[70,,72,76],[88,,90,94]])}),function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function i(s,n){try{var r=t[s](n),l=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(l).then(function(e){i("next",e)},function(e){i("throw",e)});e(l)}("next")})})()},setSelNum:function(){var e=!0,t=!1,a=void 0;try{for(var i,s=this.list[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){1==i.value.selected&&this.selNum++}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}},reset:function(){var e=!0,t=!1,a=void 0;try{for(var i,s=["createName","gName","bomNum"][Symbol.iterator]();!(e=(i=s.next()).done);e=!0){this[i.value]=""}}catch(e){t=!0,a=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw a}}this.page=1,this.bomTypeIndex=0,this.pageShow=10,this.isPublic=0,this.getData()},pageChange:function(e){this.page=e.page,this.pageShow=e.num,this.getData()},listHandle:function(e){var t=this.list[e];if(!this.storeAll)if(t.selected=!t.selected,t.selected)this.selectBom.push({id:t.id,name:t.itemName}),this.selNum++,this.selNum==this.list.length&&(this.savePage.push(this.page),this.pageAll=!0);else{this.selNum--;for(var a=0;a<this.selectBom.length;a++)this.selectBom[a].id==t.id&&(this.selectBom.splice(a,1),a--);this.pageAll&&(this.removePageNum(),this.pageAll=!1)}},radioAll:function(e){if(this.list.length)if("store"==e)this.storeAll=!this.storeAll,this.pageAll=!1,this.setSelAll(this.storeAll);else if("page"==e){if(this.storeAll)return;this.pageAll=!this.pageAll,this.pageAll?(this.savePage.push(this.page),this.pageSetId("add")):(this.removePageNum(),this.pageSetId("cancel"))}},removePageNum:function(){for(var e=0;e<this.savePage.length;e++)this.savePage[e]==this.page&&(this.savePage.splice(e,1),e--)},pageSetId:function(e){if("add"==e){var t=!0,a=!1,i=void 0;try{for(var s,n=this.list[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var r=s.value,l=!1,o=!0,c=!1,u=void 0;try{for(var m,p=this.selectBom[Symbol.iterator]();!(o=(m=p.next()).done);o=!0){var h=m.value;if(r.id==h.id){l=!0;break}}}catch(e){c=!0,u=e}finally{try{!o&&p.return&&p.return()}finally{if(c)throw u}}l||(this.selectBom.push({id:r.id,name:r.itemName}),r.selected=!0)}}catch(e){a=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw i}}}else if("cancel"==e){var d=!0,f=!1,v=void 0;try{for(var g,b=this.list[Symbol.iterator]();!(d=(g=b.next()).done);d=!0)for(var y=g.value,x=0;x<this.selectBom.length;x++){if(this.selectBom[x].id==y.id){this.selectBom.splice(x,1),y.selected=!1,x--;break}}}catch(e){f=!0,v=e}finally{try{!d&&b.return&&b.return()}finally{if(f)throw v}}}},setSelAll:function(e){if(e){var t=!0,a=!1,i=void 0;try{for(var s,n=this.list[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){s.value.selected=!0}}catch(e){a=!0,i=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw i}}}else{var r=!0,l=!1,o=void 0;try{for(var c,u=this.list[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){c.value.selected=!1}}catch(e){l=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw o}}this.selectBom=[]}}}},l=(a("f30c"),a("d801")),o=Object(l.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bom-order"},[a("div",{staticClass:"filter"},[a("div",{staticClass:"inline-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.createName,expression:"createName"}],attrs:{type:"text",placeholder:"请输入创建人"},domProps:{value:e.createName},on:{input:function(t){t.target.composing||(e.createName=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.gName,expression:"gName"}],attrs:{type:"text",placeholder:"请输入商品名称/编码"},domProps:{value:e.gName},on:{input:function(t){t.target.composing||(e.gName=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.bomNum,expression:"bomNum"}],attrs:{type:"text",placeholder:"请输入bom单编号"},domProps:{value:e.bomNum},on:{input:function(t){t.target.composing||(e.bomNum=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"inline-box"},[a("selectBtn",{attrs:{sorts:e.options,index:e.bomTypeIndex},on:{emit:e.dropBomType}})],1),e._v(" "),a("div",{staticClass:"inline-box"},[a("div",{staticClass:"button-box"},[a("span",{staticClass:"blue",on:{click:e.filter}},[e._v("筛选")]),e._v(" "),a("span",{staticClass:"gray",on:{click:e.reset}},[e._v("重置")])])])]),e._v(" "),a("com-table",{attrs:{listName:"BOM单列表",titleData:e.titleList,allTotal:e.listLength,introData:e.list,listHeight:70},scopedSlots:e._u([{key:"title-0",fn:function(t){return a("div",{staticClass:"select-all select-ban"},[a("span",{on:{click:function(t){e.radioAll("store")}}},[e._v(e._s(e.storeAll?"取消本店":"全选本店"))]),e._v("|\n\t\t\t"),a("span",{staticClass:"page-all",class:{ban:e.storeAll},on:{click:function(t){e.radioAll("page")}}},[e._v(e._s(e.pageAll?"取消本页":"全选本页"))])])}},{key:"con-0",fn:function(t){return a("span",{staticClass:"detail select-ban",on:{click:function(a){e.listHandle(t.index)}}},[a("i",{class:{"sel-active":t.data.selected,storeAll:e.storeAll}})])}},{key:"con-1",fn:function(t){return a("span",{},[e._v(e._s((e.page-1)*e.pageShow+t.index>=9?(e.page-1)*e.pageShow+t.index+1:"0"+((e.page-1)*e.pageShow+t.index+1)))])}},{key:"con-4",fn:function(t){return a("span",{},[e._v(e._s(e.formatTime(t.data.createTime)))])}},{key:"con-6",fn:function(t){return a("span",{},[e._v(e._s(e.setBomType(t.data.isPublic)))])}}])}),e._v(" "),a("div",{staticClass:"page-box"},[a("pageBtn",{attrs:{total:e.pageTotal,page:e.page,isNoJump:!0},on:{pageNum:e.pageChange}})],1)],1)},[],!1,null,"c4359fe2",null);t.default=o.exports},e9d8:function(e,t,a){},f30c:function(e,t,a){"use strict";var i=a("e9d8");a.n(i).a}}]);