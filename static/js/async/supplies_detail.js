(window.webpackJsonp=window.webpackJsonp||[]).push([["supplies_detail"],{"2e5d":function(t,e,i){},a891:function(t,e,i){"use strict";i.r(e);var n=i("81a2"),a=i("f6ce");function s(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(a,s){try{var o=e[a](s),r=o.value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(r).then(function(t){n("next",t)},function(t){n("throw",t)});t(r)}("next")})}}var o={data:function(){return{unitList:"",mid:"",goodsDetail:"",dataUnit:["月","日","年"],goodsData:"",goodsUnit:"",selUnit:0,showDetail:!0,isBrand:!1,typeValue:["成品","半成品","普通物料"]}},mounted:function(){var t=this;a.a.session("publicDetailReturn")&&(this.tabactive=1),this.isBrand="3"==a.a.session("userShop").currentShop.ischain,this.$store.commit("setPageTools",[{name:"返回",className:["back"],fn:function(){a.a.session("warehouseDetailDestroy",!0),a.a.session("tabactive",1),a.a.session("publicDetailReturn")?t.$router.push({path:"/admin/inventoryManagement"}):window.history.go(-1)}},{name:"盘库",className:["pickCheck"],fn:function(){var e=t.$route.query;e.id=t.mid,t.$router.push({path:"warehouseCount",query:e})}}]),this.mid=this.$route.query.id,this.init()},methods:{init:function(){var t=this;return s(regeneratorRuntime.mark(function e(){var i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.All([{httpId:"invoic_getMaterialDetail",data:{mid:t.mid,isDistribution:1}},{httpId:"invoic_getMaterialBatch",data:{mid:t.mid}}]);case 2:for(a in i=e.sent,t.goodsDetail=i[0].data,t.goodsData=i[1].data,t.goodsData.relation)1==t.goodsData.relation[a].isDefault&&(s=t.goodsData.relation.splice(a,1),t.goodsData.relation.unshift(s[0]));t.setUnitList();case 7:case"end":return e.stop()}},e,t)}))()},getString:function(t,e){if("string"!=typeof t&&t){var i=[],n=!0,a=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(n=(o=r.next()).done);n=!0){var l=o.value;i.push(l[e])}}catch(t){a=!0,s=t}finally{try{!n&&r.return&&r.return()}finally{if(a)throw s}}return i.join(",")}return t},setUnitList:function(){var t=[],e=!0,i=!1,n=void 0;try{for(var a,s=this.goodsData.relation[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var o=a.value;t.push(o.name)}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}this.goodsUnit=t},getdefUnit:function(t,e){var i=1==e?"isDefault":"isMin";for(var n in t)if(1==t[n][i])return t[n].name},computeUnit:function(t){var e="",i=this.getdefUnit(t,2);for(var n in t)n>0&&(e+="\n"),e+=" 1"+t[n].name+"="+t[n].value+i+" ";return e},delList:function(){var t=this;return s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.commit("setWin",{title:"提示",content:"确定删除此物料?",winType:"confirm",callback:function(){var e=s(regeneratorRuntime.mark(function e(i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("ok"!=i){e.next=4;break}return e.next=3,n.a.invoic_delMaterial({data:{mid:t.mid}});case 3:window.history.go(-1);case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}},e,t)}))()},selectList:function(t){this.selUnit=t},revampcate:function(){this.$router.push({path:"revampUnit",query:{id:this.mid,name:this.goodsDetail.name||"--"}})},turnToEditMaterial:function(){this.$router.push({path:"materialEdit",query:{id:this.mid}})}},computed:{},components:{suppliesList:function(){return i.e("supplies_list").then(i.bind(null,"8ab6"))},suppliesOpert:function(){return i.e("supplies_opert").then(i.bind(null,"4026"))},selectBtn:function(){return i.e("select_btn").then(i.bind(null,"3d41"))}},destroyed:function(){a.a.session("publicDetailReturn",null),a.a.session("publicDetailReturn",!1)}},r=(i("d58b"),i("d801")),l=Object(r.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"suppliesDetaile"}},[i("div",{staticClass:"headBox"},[i("div",{staticClass:"headTitle"},[t._v("\n\t\t\t物料信息\n\t\t\t"),t.isBrand?i("a",{on:{click:function(e){t.showDetail=!t.showDetail}}},[t._v(t._s(t.showDetail?"收起":"展开"))]):t._e()]),t._v(" "),i("div",{staticClass:"innerBox"},[i("ul",[i("li",[i("span",[t._v("物料名称：")]),t._v(" "),i("span",[t._v(t._s(t.goodsDetail.name||"--"))])]),t._v(" "),i("li",[i("span",[t._v("物料简码：")]),t._v(" "),i("span",[t._v(t._s(t.goodsDetail.BC||"--"))])]),t._v(" "),i("li",[i("span",[t._v("品牌：")]),t._v(" "),i("span",[t._v(t._s(t.goodsDetail.brandName||"--"))])]),t._v(" "),i("li",[i("span",[t._v("批次数：")]),t._v(" "),i("span",[t._v(t._s(t.goodsDetail.batchNum||"--"))])])]),t._v(" "),i("ul",[i("li",[i("span",[t._v("物料类型：")]),t._v(" "),i("span",[t._v(t._s(t.typeValue[t.goodsDetail.type]))])]),t._v(" "),i("li",[i("span",[t._v("物料单位：")]),t._v(" "),t.goodsDetail.unit?i("span",[t._v(t._s(t.getString(t.goodsDetail.unit,"name")))]):t._e()]),t._v(" "),i("li",[i("span",[t._v("默认单位：")]),t._v(" "),t.goodsDetail.unit?i("span",[t._v(t._s(t.getdefUnit(t.goodsDetail.unit,1)))]):t._e()]),t._v(" "),i("li",[i("span",[t._v("最小单位：")]),t._v(" "),t.goodsDetail.unit?i("span",[t._v(t._s(t.getdefUnit(t.goodsDetail.unit,2)))]):t._e()])]),t._v(" "),i("ul",[i("li",{staticStyle:{width:"400px"},attrs:{title:t.computeUnit(t.goodsDetail.unit)}},[i("span",{staticStyle:{"vertical-align":"top"}},[t._v("单位换算：")]),t._v(" "),t.goodsDetail.unit?i("span",{staticStyle:{"white-space":"pre"}},[t._v(t._s(t.computeUnit(t.goodsDetail.unit)))]):t._e()]),t._v(" "),i("li",[i("span",[t._v("分类：")]),t._v(" "),t.goodsDetail.cate?i("span",[t._v(t._s(t.getString(t.goodsDetail.cate,"name")))]):t._e()]),t._v(" "),i("li",[i("span",[t._v("库存总量：")]),t._v(" "),i("span",[t._v(t._s(t.goodsDetail.num)+t._s(t.getdefUnit(t.goodsDetail.unit,2)))])]),t._v(" "),i("li",[i("span",[t._v("保质期：")]),t._v(" "),i("span",[t._v(t._s(t.goodsDetail.validity||"--")+t._s(t.dataUnit[t.goodsDetail.validityType]))])])])]),t._v(" "),i("div",{staticClass:"search"},[i("el-button",{attrs:{type:"primary"},on:{click:t.revampcate}},[t._v("修改单位")]),t._v(" "),i("el-button",{attrs:{type:"warning"},on:{click:t.turnToEditMaterial}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:t.delList}},[t._v("删除")])],1)]),t._v(" "),t.isBrand&&t.showDetail&&t.goodsDetail.distributionRela?i("div",{staticClass:"area-detail"},t._l(t.goodsDetail.distributionRela,function(e,n){return i("li",{key:n},[i("span",[t._v(t._s(n+1))]),t._v(" "),i("i",[t._v(t._s(e.distributionName)+" : "+t._s(e.value)+"/"),t._l(t.goodsDetail.unit,function(n,a){return n.muId==e.unitId?i("strong",{key:a},[t._v(t._s(n.name))]):t._e()})],2)])})):t._e(),t._v(" "),i("div",{staticStyle:{margin:"20px 0"}},[i("select-btn",{ref:"select",attrs:{sorts:t.goodsUnit,name:"单位切换"},on:{selOn:t.selectList}})],1),t._v(" "),i("supplies-list",{attrs:{goodsData:t.goodsData,selUnit:t.selUnit}})],1)},[],!1,null,"e9eae900",null);e.default=l.exports},d58b:function(t,e,i){"use strict";var n=i("2e5d");i.n(n).a}}]);