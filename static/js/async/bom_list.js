(window.webpackJsonp=window.webpackJsonp||[]).push([["bom_list"],{2707:function(e,t,a){},"5d21":function(e,t,a){"use strict";a.r(t);var i=a("f6ce"),n=a("bbb9"),s=a("81a2");var r={data:function(){return{timeDate:[],startTime:"",endTime:"",cid:"",isBrand:0,options:[{value:0,label:"全部BOM单类型"},{value:1,label:"公开"},{value:-1,label:"私密"}],isPublic:0,prevIndex:0,page:1,pageShow:10,pageTotal:1,list:[],listLength:0,userData:"",createName:"",shopType:"",bomNum:"",gName:"",titleList:[{titleName:"操作"},{titleName:"序号"},{titleName:"商品名称",dataName:"itemName"},{titleName:"创建人",dataName:"createName"},{titleName:"创建时间"},{titleName:"BOM单编号",dataName:"bomNum"},{titleName:"BOM类型"}],requestObj:{}}},components:{pageBtn:function(){return a.e("page_element").then(a.bind(null,"5921"))},selectBtn:function(){return a.e("select_btn").then(a.bind(null,"3d41"))},calendar:function(){return a.e("calendar_type").then(a.bind(null,"f2dd"))},comTable:function(){return a.e("table").then(a.bind(null,"4360"))}},created:function(){this.userData=i.a.session("userShop"),this.cid=this.userData.user.id,this.isBrand="3"==this.userData.currentShop.ischain?1:0},mounted:function(){this.initBtn(),this.initData(),this.getData()},methods:{initBtn:function(){var e=this,t=[{name:"新建BOM单",className:"success",type:4,fn:function(){e.$router.push({path:"bomList/bomCreate",query:e.$route.query})}}];this.$store.commit("setPageTools",t)},initData:function(){this.shopType=this.isBrand;var e=i.a.session("bomListCache");if(i.a.session("bomListDestroy")&&e){for(var t in e)this[t]=e[t];i.a.session("bomListCache",null),i.a.session("bomListDestroy",null)}},timeChange:function(e){this.startTime=new Date(e[0]).setHours(0,0,0,0),this.endTime=new Date(e[1]).setHours(23,59,59,0)},dropBomType:function(e){this.isPublic=e,this.filter()},setBomType:function(e){return"1"==e?"公开":"-1"==e?"私密":void 0},formatTime:function(e){return n.a.format(new Date(1e3*e),"yyyy-MM-dd hh:mm:ss")},filter:function(){this.page=1,this.isInit=!1,this.getData()},getData:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var a,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.validate()){e.next=2;break}return e.abrupt("return");case 2:return a="",n="",r="",t.endTime&&(r=new Date(t.endTime).setHours(23,59,59,0),a=parseInt(t.startTime/1e3),n=parseInt(r/1e3)),e.next=6,s.a.bomBillmaterialGetBomList({data:{createUid:t.cid,startTime:a,endTime:n,page:t.page,num:t.pageShow,createName:t.createName,shopType:t.shopType,isPublic:t.isPublic,bomNum:t.bomNum,gName:t.gName}});case 6:if(o=e.sent){e.next=10;break}return t.$store.commit("setWin",{title:"温馨提示",content:"您没有权限查看私密bom单！"}),e.abrupt("return");case 10:t.list=o.list,t.listLength=o.totalCount,t.pageTotal=o.totalPage,t.requestObj={startTime:t.startTime,endTime:r,page:t.page,pageShow:t.pageShow,createName:t.createName,shopType:t.shopType,isPublic:t.isPublic,bomNum:t.bomNum,gName:t.gName,pageTotal:t.pageTotal},i.a.session("bomListCache",t.requestObj);case 15:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function i(n,s){try{var r=t[n](s),o=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}("next")})})()},reset:function(){this.startTime="",this.endTime="",this.timeDate=[],this.page=1,this.isPublic=0,this.pageShow=10;for(var e=["createName","bomNum","gName"],t=0;t<e.length;t++){this[e[t]]=""}this.getData()},validate:function(){return!(parseInt(this.startTime/1e3/3600/24)>parseInt(this.endTime/1e3/3600/24))||(this.$store.commit("setWin",{title:"提示信息",content:"开始时间不能大于结束时间"}),!1)},pageChange:function(e,t){t?this.page=e:this.pageShow=e,this.getData()},indexMethod:function(e){return this.pageShow*(this.page-1)+e+1},listHandle:function(e){var t=this.$route.query;t.id=e.id,this.$router.push({path:"bomList/bomDetail",query:t})}}},o=(a("f892"),a("d801")),l=Object(o.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bom-order"},[a("div",{staticClass:"filter"},[a("span",{staticClass:"inline-span"},[e._v("创建时间：")]),e._v(" "),a("div",{staticClass:"inline-box"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:e.timeChange},model:{value:e.timeDate,callback:function(t){e.timeDate=t},expression:"timeDate"}})],1),e._v(" "),a("div",{staticClass:"block"},[a("div",{staticClass:"inline-box"},[a("el-input",{attrs:{placeholder:"请输入创建人"},model:{value:e.createName,callback:function(t){e.createName=t},expression:"createName"}})],1),e._v(" "),a("div",{staticClass:"inline-box"},[a("el-input",{attrs:{placeholder:"请输入商品名称/编码"},model:{value:e.gName,callback:function(t){e.gName=t},expression:"gName"}})],1),e._v(" "),a("div",{staticClass:"inline-box"},[a("el-input",{attrs:{placeholder:"请输入bom单编号"},model:{value:e.bomNum,callback:function(t){e.bomNum=t},expression:"bomNum"}})],1),e._v(" "),a("div",{staticClass:"inline-box"},[a("el-select",{attrs:{placeholder:"请选择仓库"},on:{change:e.dropBomType},model:{value:e.isPublic,callback:function(t){e.isPublic=t},expression:"isPublic"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",{staticClass:"inline-box button-box"},[a("el-button",{attrs:{type:"success"},on:{click:e.filter}},[e._v("筛选")]),e._v(" "),a("el-button",{attrs:{type:"info"},on:{click:e.reset}},[e._v("重置")])],1)])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"itemName",label:"商品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createName",label:"创建人"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t        \t"+e._s(e.formatTime(t.row.createTime))+"\n\t\t      \t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bomNum",label:"BOM单编号"}}),e._v(" "),a("el-table-column",{attrs:{label:"BOM类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t        \t"+e._s(e.setBomType(t.row.isPublic))+"\n\t\t      \t")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.listHandle(t.row)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),a("div",{staticClass:"page-box"},[a("el-pagination",{attrs:{"current-page":e.page,background:"",layout:"sizes,total,prev, pager, next","page-sizes":[10,20,50],total:e.listLength},on:{"current-change":function(t){e.pageChange(t,1)},"size-change":e.pageChange}})],1)],1)},[],!1,null,"2d25c92c",null);t.default=l.exports},f892:function(e,t,a){"use strict";var i=a("2707");a.n(i).a}}]);