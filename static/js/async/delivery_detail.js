(window.webpackJsonp=window.webpackJsonp||[]).push([["delivery_detail"],{"6c72":function(t,e,a){"use strict";var i=a("e3b5");a.n(i).a},c15a:function(t,e,a){"use strict";a.r(e);var i=a("81a2"),s=a("bbb9");var r={data:function(){return{page:1,num:10,endTotal:1,payWays:[{id:0,name:"商品详情"},{id:1,name:"赠品详情"}],payType:0,titleList:[{titleName:"序号",dataName:"serialnum"},{titleName:"商品名",dataName:"name"},{titleName:"单价",dataName:"price"},{titleName:"商品数量",dataName:"num"},{titleName:"小计",dataName:"total"}],allFormList:[],formList:[],orderDetail:"",serialNumber:"",memberInfo:""}},props:{oid:String,constructionsId:String},methods:{changeRadio:function(t){this.page=1;var e=t.id;this.payType=e,this.dealwithgoods()},getPageNum:function(t){this.page=t.page,this.num=t.num,this.setPage()},setPage:function(){this.endTotal=Math.ceil(this.allFormList.length/this.num);var t=(this.page-1)*this.num,e=this.page*this.num,a=this.allFormList.slice(t,e);this.formList=a},returnStore:function(){this.$emit("orderdetailResult",!1)},formatTime:function(t){return"0"==t?"未完成":s.a.format(new Date(1e3*t),"yyyy-MM-dd hh:mm:ss")},getStatus:function(t){switch(t){case"10":return"已完成";case"-2":return"已退单/已取消"}},dealwithgoods:function(){var t=this.orderDetail.goodsData.gifts.goods.concat(this.orderDetail.goodsData.gifts.package),e=this.orderDetail.goodsData.sales.goods.concat(this.orderDetail.goodsData.sales.package);0==this.payType?(e.forEach(function(t,e){t.total=t.num*t.price,t.serialnum=e+1}),this.allFormList=e):(t.forEach(function(t,e){t.total=t.num*t.price,t.serialnum=e+1}),this.allFormList=t),this.setPage()},getTakeoutOrderDetail:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.getTakeoutOrderDetail({data:{oid:e.oid,recordShopId:e.constructionsId}});case 2:(a=t.sent)&&(e.orderDetail=a,e.serialNumber=Number(a.oid.substring(a.oid.length-5)),e.memberInfo=a.memberInfo,e.dealwithgoods());case 4:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(s,r){try{var n=e[s](r),o=n.value}catch(t){return void a(t)}if(!n.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})})()},getpayment:function(){var t=this.orderDetail.aliPayPain,e=this.orderDetail.weChatPain,a=this.orderDetail.memberPain;return 0!=t&&0==e&&0==a?"支付宝支付":0==t&&0!=e&&0==a?"微信支付":0==t&&0==e&&0!=a?"会员支付":"混合支付"}},watch:{},computed:{},components:{comTable:function(){return a.e("table").then(a.bind(null,"4360"))},pageElement:function(){return a.e("page_element").then(a.bind(null,"5921"))}},mounted:function(){var t=this;this.$store.commit("setPageTools",[{name:"返回",className:["fd-blue"],fn:function(){t.returnStore()}}]),this.getTakeoutOrderDetail()}},n=(a("6c72"),a("d801")),o=Object(n.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"delivery"}},[a("div",{staticClass:"box_l fl"},[a("div",{staticClass:"line"}),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"content_t clearfix"},[a("div",{staticClass:"order"},[a("p",{staticClass:"fl",staticStyle:{"margin-bottom":"0"}},[t._v("订单号:"+t._s(t.orderDetail.oid))]),t._v(" "),a("span",[t._v("外卖")])]),t._v(" "),a("p",[t._v("外卖单序号:#"+t._s(t.serialNumber))]),t._v(" "),a("p",[t._v("单据状态:"+t._s(t.getStatus(t.orderDetail.status)))]),t._v(" "),a("p",[t._v("人数:"+t._s(t.orderDetail.person)+"人")])]),t._v(" "),a("div",{staticClass:"container clearfix"},[a("h3",[t._v("营业明细")]),t._v(" "),a("ul",[a("li",[t._v("消费总额:¥"+t._s(t.orderDetail.consumption))]),t._v(" "),a("li",[t._v("配送费:¥"+t._s(t.orderDetail.moveFee))]),t._v(" "),a("li",[t._v("优惠总计:¥"+t._s(t.orderDetail.discount))]),t._v(" "),a("li",[t._v("订单应收金额:¥"+t._s(t.orderDetail.consumption))]),t._v(" "),a("li",[t._v("订单实收金额:¥"+t._s(t.orderDetail.pain))])]),t._v(" "),a("ul",[a("li",[t._v("销量:"+t._s(t.orderDetail.sales))]),t._v(" "),a("li",[t._v("赠品:"+t._s(t.orderDetail.gift))]),t._v(" "),a("li",[t._v("代金券-优惠金额:¥"+t._s(t.orderDetail.vouchersPain))]),t._v(" "),a("li",[t._v("积分抵扣金额:¥"+t._s(t.orderDetail.pointCash))])])]),t._v(" "),a("div",{staticClass:"container clearfix"},[a("h3",[t._v("下单信息")]),t._v(" "),a("ul",[a("li",[t._v("下单人:"+t._s(t.orderDetail.name))])]),t._v(" "),a("ul",[a("li",[t._v("电话:"+t._s(t.orderDetail.phone))])]),t._v(" "),a("p",[t._v("地址:"+t._s(t.orderDetail.address))])]),t._v(" "),a("div",{staticClass:"container clearfix"},[a("h3",[t._v("会员信息")]),t._v(" "),a("ul",[a("li",[t._v("会员账号:"+t._s(t.memberInfo.mobile))]),t._v(" "),a("li",[t._v("会员名称:"+t._s(t.memberInfo.name))])]),t._v(" "),a("ul",[a("li",[t._v("会员等级:"+t._s(t.memberInfo.levelName))]),t._v(" "),a("li",[t._v("会员积分:"+t._s(t.memberInfo.point))])])]),t._v(" "),a("div",{staticClass:"container clearfix"},[a("h3",[t._v("支付方式:"+t._s(t.getpayment()))]),t._v(" "),a("ul",[a("li",[t._v("支付宝:¥"+t._s(t.orderDetail.aliPayPain))]),t._v(" "),a("li",[t._v("微信支付:¥"+t._s(t.orderDetail.weChatPain))]),t._v(" "),a("li",[t._v("会员支付:¥"+t._s(t.orderDetail.memberPain))])])]),t._v(" "),a("div",{staticClass:"container clearfix"},[a("p",[t._v("下单时间:"+t._s(t.formatTime(t.orderDetail.createTime)))]),t._v(" "),a("p",[t._v("完成时间:"+t._s(t.formatTime(t.orderDetail.updateTime)))])]),t._v(" "),t._m(0)])]),t._v(" "),a("div",{staticClass:"box_r fl"},[a("div",{staticClass:"compared"},t._l(t.payWays,function(e,i){return a("span",{key:i,class:{effect:t.payType==e.id},on:{click:function(a){t.changeRadio(e)}}},[t._v(t._s(e.name))])})),t._v(" "),a("div",{staticClass:"title"},[a("p",{staticClass:"fl"},[t._v("应收金额:¥"+t._s(t.orderDetail.consumption))]),t._v(" "),a("p",{staticClass:"fl"},[t._v("销量:"+t._s(t.orderDetail.sales))]),t._v(" "),a("p",{staticClass:"fr"},[t._v("赠品:"+t._s(t.orderDetail.gift))])]),t._v(" "),a("section",[a("com-table",{attrs:{listHeight:60,listWidth:580,showHand:!1,titleData:t.titleList,introData:t.formList,widthType:!0}}),t._v(" "),a("section",{staticClass:"turn-page",staticStyle:{height:"42px"}},[a("pageElement",{attrs:{page:Number(t.page),total:Number(t.endTotal),numArr:[10,20,30,40,50],isNoJump:!0},on:{pageNum:t.getPageNum}})],1)],1)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container clearfix"},[e("p")])}],!1,null,"5e451321",null);e.default=o.exports},e3b5:function(t,e,a){}}]);