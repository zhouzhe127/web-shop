(window.webpackJsonp=window.webpackJsonp||[]).push([["good_list_win"],{"38d1":function(e,t,s){"use strict";var o=s("6a90");s.n(o).a},"6a90":function(e,t,s){},"8bf4":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("win",{attrs:{align:"center",width:860,height:560},on:{winEvent:e.goodListWin}},[s("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.title))]),e._v(" "),s("div",{attrs:{slot:"content",id:"tan"},slot:"content"},[e.isCashier?s("section",{staticStyle:{height:"50px","line-height":"50px","margin-left":"15px"}},[s("span",{staticStyle:{"font-size":"16px"}},[e._v("分类名称：")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.reportName,expression:"reportName"}],staticStyle:{height:"30px","font-size":"16px","padding-left":"10px"},attrs:{type:"text"},domProps:{value:e.reportName},on:{input:function(t){t.target.composing||(e.reportName=t.target.value)}}})]):e._e(),e._v(" "),s("section",{attrs:{id:"configTan"}},[s("section",{staticClass:"oCont",staticStyle:{width:"100%"}},[e.isOnlyGoods?e._e():s("div",{staticClass:"Box",staticStyle:{width:"160px",float:"left"}},[s("section",{staticClass:"oDe",class:{act:!e.isPackage},staticStyle:{"border-left":"none",width:"50%"},on:{click:function(t){e.getGoodList(0)}}},[e._v("商品")]),e._v(" "),s("section",{staticClass:"oDe",class:{act:e.isPackage},on:{click:function(t){e.getGoodList(1)}}},[e._v("套餐")])]),e._v(" "),e.isPackage?e._e():s("div",{staticStyle:{float:"left","margin-left":"10px"}},[s("elCategory",{attrs:{categoryArr:e.oneArea.oneAreaList,itemIndex:e.oneArea.oneAreaIndex,itemArea:e.oneArea},on:{selectCategory:e.newselectOneArea}}),e._v(" "),s("elCategory",{attrs:{categoryArr:e.twoArea.twoAreaList,itemIndex:e.twoArea.twoAreaIndex,itemArea:e.twoArea},on:{selectCategory:e.newselectTwoArea}}),e._v(" "),s("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入名称",clearable:""},on:{change:e.searchGoods},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[s("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchGoods},slot:"append"})],1)],1),e._v(" "),e.isPackage?s("div",{staticStyle:{width:"100%",height:"50px",overflow:"hidden","padding-top":"10px"}},[s("el-radio-group",{on:{change:e.selectPack},model:{value:e.packBtn,callback:function(t){e.packBtn=t},expression:"packBtn"}},[s("el-radio-button",{attrs:{label:"-1"}},[e._v("全部")]),e._v(" "),!e.isPackType||e.isPackType.indexOf("0")>-1?s("el-radio-button",{attrs:{label:"0"}},[e._v("固定套餐")]):e._e(),e._v(" "),!e.isPackType||e.isPackType.indexOf("1")>-1?s("el-radio-button",{attrs:{label:"1"}},[e._v("可选套餐")]):e._e(),e._v(" "),!e.isPackType||e.isPackType.indexOf("2")>-1?s("el-radio-button",{attrs:{label:"2"}},[e._v("自定义套餐")]):e._e()],1)],1):e._e()]),e._v(" "),s("ul",{staticClass:"aUl"},[e.allGood?s("section",["goodsChoice"==e.goInName||"packsChoice"==e.goInName?[e._l(e.goodsCom,function(t,o){return e.isPackage?e._e():s("li",{key:o,staticClass:"aLi",class:[{"shoName-select":t.selected&&!t.isSynOk},{"dis-type":t.isSynOk}],on:{click:function(s){!t.isSynOk&&e.choseGood(t)}}},[e._v(e._s(t.goodsName))])}),e._v(" "),e._l(e.packCom,function(t,o){return e.isPackage?s("li",{key:o,staticClass:"aLi",class:[{"shoName-select":t.selected&&!t.isSynOk},{"dis-type":t.isSynOk}],on:{click:function(s){!t.isSynOk&&e.choseGood(t)}}},[e._v(e._s(t.packageName))]):e._e()})]:[e._l(e.goodsCom,function(t,o){return e.isPackage?e._e():s("li",{key:o,staticClass:"aLi",class:{"shoName-select":t.selected},on:{click:function(s){e.choseGood(t)}}},[e._v(e._s(t.goodsName))])}),e._v(" "),e._l(e.packCom,function(t,o){return e.isPackage?s("li",{key:o,staticClass:"aLi",class:{"shoName-select":t.selected},on:{click:function(s){e.choseGood(t)}}},[e._v(e._s(t.packageName))]):e._e()})]],2):e._e(),e._v(" "),e.allGood?e._e():s("section",[e.oneGoodList.goodsList.length>0?s("div",{staticClass:"onecate"},[s("section",[s("i",{staticClass:"twoI",class:{oneI:"0"==e.L2ID}}),e._v(" "),s("li",{staticClass:"twoTitle ",class:{oneTitle:"0"==e.L2ID}},[e._v(e._s(e.oneGoodList.name))])]),e._v(" "),s("section",{staticStyle:{"padding-left":"30px"}},["goodsChoice"==e.goInName?e._l(e.oneGoodList.goodsList,function(t,o){return s("li",{key:o,staticClass:"aLi",class:[{"shoName-select":t.selected&&!t.isSynOk},{"dis-type":t.isSynOk}],on:{click:function(s){!t.isSynOk&&e.choseGood(t)}}},[e._v(e._s(t.goodsName?t.goodsName:t.packageName))])}):e._e(),e._v(" "),"goodsChoice"!==e.goInName?e._l(e.oneGoodList.goodsList,function(t,o){return s("li",{key:o,staticClass:"aLi",class:{"shoName-select":t.selected},on:{click:function(s){e.choseGood(t)}}},[e._v(e._s(t.goodsName?t.goodsName:t.packageName))])}):e._e()],2)]):e._e(),e._v(" "),e._l(e.oneGoodList.child,function(t,o){return t.goodsList.length>0?s("div",{key:o,staticClass:"onecate"},[s("section",[s("i",{staticClass:"twoI"}),e._v(" "),s("li",{staticClass:"twoTitle"},[e._v(e._s(t.name))])]),e._v(" "),s("section",{staticStyle:{"padding-left":"30px"}},["goodsChoice"==e.goInName?e._l(t.goodsList,function(t,o){return s("li",{key:o,staticClass:"aLi",class:[{"shoName-select":t.selected&&!t.isSynOk},{"dis-type":t.isSynOk}],on:{click:function(s){!t.isSynOk&&e.choseGood(t)}}},[e._v(e._s(t.goodsName?t.goodsName:t.packageName))])}):e._e(),e._v(" "),"goodsChoice"!==e.goInName?e._l(t.goodsList,function(t,o){return s("li",{key:o,staticClass:"aLi",class:{"shoName-select":t.selected},on:{click:function(s){e.choseGood(t)}}},[e._v(e._s(t.goodsName?t.goodsName:t.packageName))])}):e._e()],2)]):e._e()})],2)]),e._v(" "),e.isGoods?s("div",{staticStyle:{width:"100%",height:"40px","background-color":"#f7f7f7",position:"fixed",bottom:"50px",left:"0"}},[s("section",{staticClass:"isallselect",class:{allselect:!e.allSelect},on:{click:function(t){e.allGoods(0)}}},[e._v("取消全部")]),e._v(" "),s("section",{staticClass:"isallselect",class:{allselect:e.allSelect},on:{click:function(t){e.allGoods(1)}}},[e._v("选择全部")]),e._v(" "),s("h3",{staticStyle:{width:"160px",height:"40px","line-height":"40px",float:"right",color:"#FF9700"}},[e._v("已选择"+e._s(e.isPackage?e.selectPackNum:e.selectNum)+"个")])]):e._e()])])])};o._withStripped=!0;var i=s("81a2"),a=s("05dd"),n=s("f6ce");s("bbb9");function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,s){return function o(i,a){try{var n=t[i](a),r=n.value}catch(e){return void s(e)}if(!n.done)return Promise.resolve(r).then(function(e){o("next",e)},function(e){o("throw",e)});e(r)}("next")})}}var c={data:function(){return{shopId:"",isNum:!1,title:"关联商品配置",printDetial:null,createUid:"",showTowWin:!1,oneArea:{name:"请选择一级分类",oneAreaIndex:-1,oneAreaList:[{id:"0",name:"全部"}]},twoArea:{name:"请选择二级分类",twoAreaIndex:-1,twoAreaList:[{id:"0",name:"全部二级分类"}]},packlist:[],packCom:[],isPackage:!1,goodsCom:[],goodList:[],L1ID:0,L2ID:0,allSelect:!1,oneGoodList:{},newOneGoodList:{},allGood:!0,packBtn:-1,selectNum:0,selectPackNum:0,reportName:"",version:{},search:""}},mounted:function(){this.isCashier&&(this.reportName=this.reportSetName);var e=n.a.session("userShop");this.shopId=e.currentShop.id,this.getOneAreaList(),this.getpackagelist(),this.getGoodsList(),"packsChoice"==this.goInName&&(this.title="关联套餐配置",this.getGoodList(1))},props:{goodsIds:Array,packages:Array,isGoods:Boolean,goInName:String,isCashier:Boolean,reportSetName:String,isOnlyGoods:Boolean,idAndName:Boolean,allGid:Array,asyncGoods:Array,isAllOrOther:Boolean,categoryList:Array,isPackType:String},components:{win:function(){return s.e("win").then(s.bind(null,"f60a"))},elCategory:function(){return s.e("el_category").then(s.bind(null,"eff4"))}},methods:{searchGoods:function(){for(var e=[],t=this.goodList,s=0;s<t.length;s++){var o=t[s].goodsName.toLowerCase(),i=this.search;o&&o.indexOf(i)>-1&&e.push(t[s])}this.oneArea.name="请选择一级分类",this.L1ID,this.twoArea={name:"请选择二级分类",twoAreaIndex:-1,twoAreaList:[{id:"0",name:"全部二级分类"}]},this.allGood=!0,this.goodsCom=e},ShopGetExtra:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.ShopGetExtra({data:{}});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},t,e)}))()},goodListWin:function(e){var t={goodArr:[],packArr:[]};if("ok"==e){for(var s=this.goodList,o=this.packlist,i=0;i<s.length;i++)if(s[i].selected)if(this.idAndName){var n={};n.id=s[i].id,n.goodsName=s[i].goodsName,t.goodArr.push(n)}else t.goodArr.push(s[i].id);for(var r=0;r<o.length;r++)if(o[r].selected)if(this.idAndName){var c={};c.id=o[r].id,c.packageName=o[r].packageName,t.packArr.push(c)}else t.packArr.push(o[r].id);if(this.isCashier){if(!a.a.checkData({reportName:"请输入分类名称"},this))return;t.reportSetName=this.reportName}}else t.goodArr=this.goodsIds,t.packArr=this.packages;this.$emit("goodListWin",e,t)},getGoodsList:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var s,o,a,r,c,l,d,h,g,p,f,u,k,m,v,L,x,G,_,y,C,A,w,b,N,I,S,O,P,T,D;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.a.session("goodList"),o=[],a=n.a.session("httpGoodVersion"),r=!1,t.next=6,e.ShopGetExtra();case 6:if(e.version=t.sent,a&&e.version.goodsConfigVer==a.goodsConfigVer?r=!0:(r=!1,n.a.session("httpGoodVersion",e.version)),!s||!r){t.next=12;break}o=s,t.next=17;break;case 12:return t.next=14,i.a.getGoodsList({data:{shopId:e.shopId,page:1,num:9999,specification:1}});case 14:c=t.sent,n.a.session("goodList",c.list),o=c.list;case 17:if(l={},"goodCom"!=e.goInName){t.next=24;break}for(d=[],h=0;h<o.length;h++)"0"==o[h].groupId&&"0"==o[h].isGroup&&"0"==o[h].status&&"0"==o[h].type&&"0"==o[h].isSeasonal&&d.push(o[h]);o=d,t.next=98;break;case 24:if("menuConfig"!=e.goInName){t.next=30;break}for(g=[],p=0;p<o.length;p++)"0"==o[p].groupId&&"2"!=o[p].status&&"2"!=o[p].type&&g.push(o[p]);o=g,t.next=98;break;case 30:if("isMain"!=e.goInName){t.next=36;break}for(f=[],u=0;u<o.length;u++)"0"==o[u].groupId&&"2"!=o[u].status&&f.push(o[u]);o=f,t.next=98;break;case 36:if("isCoupon"!=e.goInName){t.next=42;break}for(k=[],m=0;m<o.length;m++)"1"!=o[m].isGroup&&"2"!=o[m].status&&"2"!=o[m].type&&k.push(o[m]);o=k,t.next=98;break;case 42:if("isKitchen"!=e.goInName){t.next=48;break}for(v=[],L=0;L<o.length;L++)"2"!=o[L].status&&"1"!=o[L].isGroup&&v.push(o[L]);o=v,t.next=98;break;case 48:if("isChild"!=e.goInName){t.next=54;break}for(x=[],G=0;G<o.length;G++)"1"!=o[G].isGroup&&"2"!=o[G].status&&x.push(o[G]);o=x,t.next=98;break;case 54:if("goodSale"!=e.goInName){t.next=74;break}for(_=[],y=0;y<o.length;y++)"1"!=o[y].isGroup&&"0"==o[y].type&&"2"!=o[y].status&&_.push(o[y]);C=0;case 58:if(!(C<_.length)){t.next=71;break}A=0;case 60:if(!(A<e.allGid.length)){t.next=68;break}if(_[C].id!=e.allGid[A]){t.next=65;break}return _.splice(C,1),C--,t.abrupt("break",68);case 65:A++,t.next=60;break;case 68:C++,t.next=58;break;case 71:o=_,t.next=98;break;case 74:if("goodsChoice"!=e.goInName){t.next=97;break}if(e.isAllOrOther){t.next=93;break}w=0;case 77:if(!(w<e.asyncGoods.length)){t.next=91;break}b=!1,N=0;case 80:if(!(N<o.length)){t.next=87;break}if(e.asyncGoods[w].id!=o[N].id){t.next=84;break}return b=!0,t.abrupt("break",87);case 84:N++,t.next=80;break;case 87:b||(e.asyncGoods[w].isSynOk=!0);case 88:w++,t.next=77;break;case 91:t.next=94;break;case 93:for(I=0;I<e.asyncGoods.length;I++)e.asyncGoods[I].isSynOk=!1;case 94:o=e.asyncGoods,t.next=98;break;case 97:if("isSonGoods"==e.goInName){for(S=[],O=0;O<o.length;O++)"1"!=o[O].isGroup&&S.push(o[O]);o=S}case 98:for(P=0;P<o.length;P++)e.$set(o[P],"selected",!1),l[o[P].id]?console.error("有重复id"):l[o[P].id]=P;for(T=0;T<e.goodsIds.length;T++)((D=l[e.goodsIds[T]])||void 0!=D)&&(o[D].selected=!0);e.goodsCom=o,e.goodList=o;case 102:case"end":return t.stop()}},t,e)}))()},getpackagelist:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var s,o,a,r,c,l,d,h,g,p,f,u,k;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.a.session("packList"),o=[],a=n.a.session("httpGoodVersion"),r=!1,t.next=6,e.ShopGetExtra();case 6:if(e.version=t.sent,a&&e.version.otherConfigVer==a.otherConfigVer?r=!0:(r=!1,n.a.session("httpGoodVersion",e.version)),!s||!r){t.next=12;break}o=s,t.next=16;break;case 12:return t.next=14,i.a.getpackagelist({data:{shopId:e.shopId,page:1,num:9999}});case 14:o=t.sent,n.a.session("packList",o);case 16:for(c={},l=0;l<o.length;l++)o[l].selected=!1,("2"==o[l].status||e.isPackType&&-1==e.isPackType.indexOf(o[l].type))&&(o.splice(l,1),l--);for(d=0;d<o.length;d++)c[o[d].id]?console.error("有重复id"):c[o[d].id]=d;if(e.packages)for(h=0;h<e.packages.length;h++)((g=c[e.packages[h]])||void 0!=g)&&(o[g].selected=!0);if("packsChoice"!=e.goInName){t.next=41;break}if(e.isAllOrOther){t.next=39;break}p=0;case 23:if(!(p<e.asyncGoods.length)){t.next=37;break}f=!1,u=0;case 26:if(!(u<o.length)){t.next=33;break}if(e.asyncGoods[p].id!=o[u].id){t.next=30;break}return f=!0,t.abrupt("break",33);case 30:u++,t.next=26;break;case 33:f||(e.asyncGoods[p].isSynOk=!0);case 34:p++,t.next=23;break;case 37:t.next=40;break;case 39:for(k=0;k<e.asyncGoods.length;k++)e.asyncGoods[k].isSynOk=!1;case 40:o=e.asyncGoods;case 41:e.packlist=o,e.packCom=o;case 43:case"end":return t.stop()}},t,e)}))()},getGoodList:function(e){this.allGood=!0,this.oneArea.oneAreaIndex=-1,this.oneArea.name="请选择一级分类",this.twoArea.twoAreaIndex=-1,this.twoArea.name="请选择二级分类",this.twoArea.twoAreaList=[{id:"0",name:"全部二级分类"}],0==e?(this.isPackage=!1,this.goodsCom=this.goodList):1==e&&(this.isPackage=!0,this.goodsCom=this.packlist)},choseGood:function(e){if(this.isGoods)e.selected=!e.selected;else{for(var t=0;t<this.goodsCom.length;t++)this.goodsCom[t].selected=!1;if(this.isPackage)for(var s=0;s<this.goodList.length;s++)this.goodList[s].selected=!1;else for(var o=0;o<this.packlist.length;o++)this.packlist[o].selected=!1;e.selected=!0}},selectPack:function(e){this.packBtn=e,this.packCom=[];var t=this.packlist;if(-1==e)this.packCom=t;else for(var s=0;s<t.length;s++)t[s].type==e&&this.packCom.push(t[s])},allGoods:function(e){if(0==e)if(this.allSelect=!1,this.isPackage)for(var t=0;t<this.packCom.length;t++)this.packCom[t].selected=!1;else if(this.allGood)for(var s=0;s<this.goodsCom.length;s++)this.goodsCom[s].selected=!1;else{if(this.oneGoodList.goodsList.length>0)for(var o=0;o<this.goodsCom.length;o++)for(var i=0;i<this.oneGoodList.goodsList.length;i++)this.oneGoodList.goodsList[i].selected=!1,this.goodsCom[o].id==this.oneGoodList.goodsList[i].id&&(this.goodsCom[o].selected=!1);if(this.oneGoodList.child&&this.oneGoodList.child.length>0)for(var a=0;a<this.goodsCom.length;a++)for(var n=0;n<this.oneGoodList.child.length;n++)for(var r=0;r<this.oneGoodList.child[n].goodsList.length;r++)this.oneGoodList.child[n].goodsList[r].selected=!1,this.goodsCom[a].id==this.oneGoodList.child[n].goodsList[r].id&&(this.goodsCom[a].selected=!1)}else if(1==e)if(this.allSelect=!0,this.isPackage)for(var c=0;c<this.packCom.length;c++)this.packCom[c].selected=!0;else if(this.allGood)for(var l=0;l<this.goodsCom.length;l++)this.goodsCom[l].selected=!0;else{if(this.oneGoodList.goodsList.length>0)for(var d=0;d<this.goodsCom.length;d++)for(var h=0;h<this.oneGoodList.goodsList.length;h++)this.oneGoodList.goodsList[h].selected=!0,this.goodsCom[d].id==this.oneGoodList.goodsList[h].id&&(this.goodsCom[d].selected=!0);if(this.oneGoodList.child&&this.oneGoodList.child.length>0)for(var g=0;g<this.goodsCom.length;g++)for(var p=0;p<this.oneGoodList.child.length;p++)for(var f=0;f<this.oneGoodList.child[p].goodsList.length;f++)this.oneGoodList.child[p].goodsList[f].selected=!0,this.goodsCom[g].id==this.oneGoodList.child[p].goodsList[f].id&&(this.goodsCom[g].selected=!0)}},newselectOneArea:function(e){this.oneArea.oneAreaIndex=e,this.twoArea.twoAreaIndex=-1;var t=this.oneArea.oneAreaList[e];this.selectOneArea(e,t)},newselectTwoArea:function(e){this.twoArea.twoAreaIndex=e;var t=this.twoArea.twoAreaList[e];this.selectTwoArea(e,t)},selectOneArea:function(e,t){if(this.search="",this.twoArea.name="请选择二级分类",this.L1ID=t.id,this.L2ID=0,0==e)this.allGood=!0,this.goodsCom=this.goodList,this.oneArea.name="全部";else{this.allGood=!1,this.oneArea.name=t.name,this.oneArea.oneAreaIndex=e;var s=this.goodList;t.goodsList=[],this.twoArea.twoAreaList=[{id:"0",name:"全部二级分类"}];for(var o=0;o<t.child.length;o++)t.child[o].selected=!1,this.twoArea.twoAreaList.push(t.child[o]),t.child[o].goodsList=[];for(var i=0;i<s.length;i++)for(var a=0;a<s[i].cids.length;a++){t.id==s[i].cids[a]&&t.goodsList.push(s[i]);for(var n=0;n<t.child.length;n++)t.child[n].id==s[i].cids[a]&&t.child[n].goodsList.push(s[i])}this.oneGoodList=t,this.newOneGoodList=t}},selectTwoArea:function(e,t){this.search="",this.twoArea.name=t.name;var s=this.newOneGoodList,o={};if(0==t.id)s.goodsList=[],this.oneGoodList=s;else{for(var i=0;i<s.child.length;i++)t.id==s.child[i].id&&(o=s.child[i]);this.oneGoodList=o}this.L2ID=t.id},getOneAreaList:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var s,o,a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.oneArea.oneAreaList=[{id:"0",name:"全部"}],s=[{id:"0",name:"全部"}],[{id:"0",name:"全部二级分类"}],o=void 0,!(a=n.a.session("areaList"))){t.next=9;break}o=a,t.next=13;break;case 9:return t.next=11,i.a.getCategoryList({data:{shopId:e.shopId}});case 11:o=t.sent,n.a.session("areaList",o);case 13:for(e.categoryList&&(o=e.categoryList),r=0;r<o.length;r++)o[r].selected=!1,s.push(o[r]);e.oneArea.oneAreaList=s;case 16:case"end":return t.stop()}},t,e)}))()}},watch:{goodList:{deep:!0,handler:function(e,t){for(var s=e,o=[],i=0;i<s.length;i++)1==s[i].selected&&o.push(s[i]);this.selectNum=o.length}},packlist:{deep:!0,handler:function(e,t){for(var s=[],o=this.packlist,i=0;i<o.length;i++)1==o[i].selected&&s.push(o[i]);this.selectPackNum=s.length}}}},l=(s("38d1"),s("6ceb")),d=Object(l.a)(c,o,[],!1,null,"d42c6c86",null);d.options.__file="src\\components\\good_list_win.vue";t.default=d.exports}}]);