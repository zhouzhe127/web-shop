(window.webpackJsonp=window.webpackJsonp||[]).push([["online_configuration"],{"00e1":function(t,e,i){},"267c":function(t,e,i){"use strict";i.r(e);var s=i("81a2"),n=i("f6ce");function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function s(n,a){try{var r=e[n](a),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){s("next",t)},function(t){s("throw",t)});t(o)}("next")})}}var r={data:function(){return{shopId:n.a.session("userShop").currentShop.id,remind:"",isconfirmOrder:!1,iselfhelPay:!1,iscoupons:!1,istoredPay:!1,isPoints:!1,isattention:!0,publicNumber:!1,headings:!1,integralList:[{name:"固定标题"},{name:"自动标题"}],integralOn:"-1",title:"",uploadUrl:"",image:"",imageName:"",exportUrl:"javascript:void(0);"}},mounted:function(){this.uploadUrl=n.a.session("userShop").uploadUrl,this.getConfiguration()},watch:{},components:{onOff:function(){return i.e("on_off").then(i.bind(null,"034b"))}},methods:{isPublicNumber:function(){this.publicNumber=!this.publicNumber},isHeadings:function(){this.headings=!this.headings},openConfirmOrder:function(t){this.isconfirmOrder=t},openSelfhelPay:function(t){this.iselfhelPay=t},openCoupons:function(t){this.iscoupons=t},opentoredPay:function(t){this.istoredPay=t},openPoints:function(t){this.isPoints=t},openSattention:function(t){this.isattention=t},chooseIntegral:function(t){this.integralOn==t?this.integralOn="-1":this.integralOn=t},getConfiguration:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var i,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getOrderconfig({data:{shopId:t.shopId}});case 2:(i=e.sent)&&(t.remind=i.remind,t.isconfirmOrder=Boolean(Number(i.autoConfirm)),t.iselfhelPay=Boolean(Number(i.autoPay)),t.iscoupons=Boolean(Number(i.couponUse)),t.istoredPay=Boolean(Number(i.storedValuePay)),t.isPoints=Boolean(Number(i.pointSwitch)),t.isattention=Boolean(Number(i.followSwitch)),t.integralOn=i.titleType,0==i.titleType&&(t.title=i.title),t.image=i.image,t.imageName=i.image,n=t.imageName.lastIndexOf("/"),t.imageName=t.imageName.substring(n+1,t.imageName.length));case 4:case"end":return e.stop()}},e,t)}))()},saveConfiguration:function(){var t=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isattention||"-1"!=t.integralOn){e.next=3;break}return t.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"请设置标题方式"}),e.abrupt("return",!1);case 3:if(!t.isattention||"0"!=t.integralOn||""!=t.title){e.next=6;break}return t.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"固定标题不能为空"}),e.abrupt("return",!1);case 6:return e.next=8,s.a.saveOrderconfig({data:{shopId:t.shopId,remind:t.remind,autoConfirm:Number(t.isconfirmOrder),autoPay:Number(t.iselfhelPay),couponUse:Number(t.iscoupons),storedValuePay:Number(t.istoredPay),pointSwitch:Number(t.isPoints),followSwitch:Number(t.isattention),titleType:1==t.isattention?Number(t.integralOn):1,title:t.title,image:t.image}});case 8:e.sent&&t.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"保存成功"});case 10:case"end":return e.stop()}},e,t)}))()},bgNameChange:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var i,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.uploadImg({data:{type:8,shopId:t.shopId},formId:"bgImage"});case 2:i=e.sent,t.image=i,n=t.image.lastIndexOf("/"),t.imageName=t.image.substring(n+1,t.image.length);case 6:case"end":return e.stop()}},e,t)}))()},downloadCode:function(){var t=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.downloadPack({});case 2:case"end":return t.stop()}},e,t)}))()}}},o=(i("2c9d"),i("d801")),l=Object(o.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"online-configuration"}},[i("div",{staticClass:"containter"},[t._m(0),t._v(" "),i("div",{staticClass:"online-box clearfix",staticStyle:{"margin-bottom":"0px"}},[i("span",{staticClass:"online-sub fl"},[t._v("下单成功提醒")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remind,expression:"remind"}],staticClass:"txt fl",attrs:{placeholder:"请输入下单成功提醒",maxlength:"30"},domProps:{value:t.remind},on:{input:function(e){e.target.composing||(t.remind=e.target.value)}}})]),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"},[t._v("自动确认订单")]),t._v(" "),i("onOff",{key:1,attrs:{status:t.isconfirmOrder},on:{statusChange:t.openConfirmOrder}})],1),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"},[t._v("自助买单")]),t._v(" "),i("onOff",{key:1,attrs:{status:t.iselfhelPay},on:{statusChange:t.openSelfhelPay}})],1),t._v(" "),t.iselfhelPay?i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"}),t._v(" "),i("div",{staticClass:"self-help fl"},[i("div",{staticClass:"min-box",attrs:{clearfix:""}},[i("div",{staticClass:"min-boxl fl"},[i("span",{staticClass:"fl min-sub"},[t._v("优惠券使用")]),t._v(" "),i("onOff",{key:1,attrs:{status:t.iscoupons},on:{statusChange:t.openCoupons}})],1),t._v(" "),i("div",{staticClass:"min-boxl fr"},[i("span",{staticClass:"fl min-sub"},[t._v("储值支付")]),t._v(" "),i("onOff",{key:1,attrs:{status:t.istoredPay},on:{statusChange:t.opentoredPay}})],1)]),t._v(" "),i("div",{staticClass:"min-box",attrs:{clearfix:""}},[i("div",{staticClass:"min-boxl fl"},[i("span",{staticClass:"fl min-sub"},[t._v("积分抵扣")]),t._v(" "),i("onOff",{key:1,attrs:{status:t.isPoints},on:{statusChange:t.openPoints}})],1)])])]):t._e(),t._v(" "),t._m(2),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"online-sub fl"},[t._v("关注公众号并点餐")]),t._v(" "),i("onOff",{key:1,attrs:{status:t.isattention},on:{statusChange:t.openSattention}}),t._v(" "),i("div",{staticClass:"prompting fl",on:{click:t.isPublicNumber}},[t.publicNumber?i("div",{staticClass:"detDiv",staticStyle:{top:"0px",left:"45px"}},[i("i",{staticClass:"detI triright",staticStyle:{top:"10px",left:"-20px"}}),t._v(" "),i("h3",{staticClass:"detH3"},[t._v("\n\t\t\t\t\t\t关闭该功能后，生成的二维码无点餐推送。\n\t\t\t\t\t")])]):t._e()])],1),t._v(" "),t.isattention?i("section",[i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"},[t._v("标题设置")]),t._v(" "),t._l(t.integralList,function(e,s){return i("span",{key:s,staticClass:"freeFix",class:{presentActive:t.integralOn==s},staticStyle:{"margin-right":"14px"},on:{click:function(e){t.chooseIntegral(s)}}},[t._v(t._s(e.name))])}),t._v(" "),i("div",{staticClass:"prompting fl",on:{click:t.isHeadings}},[t.headings?i("div",{staticClass:"detDiv",staticStyle:{top:"0px",left:"45px"}},[i("i",{staticClass:"detI triright",staticStyle:{top:"10px",left:"-20px"}}),t._v(" "),t._m(3)]):t._e()])],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"==t.integralOn,expression:"integralOn == '0'"}],staticClass:"online-box clearfix",staticStyle:{"margin-bottom":"0px"}},[i("span",{staticClass:"fl online-sub"}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"inp",attrs:{type:"text",name:"",placeholder:"请输入固定标题",maxlength:"15"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"0"==t.integralOn,expression:"integralOn == '0'"}],staticClass:"online-box clearfix",staticStyle:{"margin-bottom":"0px"}},[i("span",{staticClass:"online-sub fl"}),t._v(" "),t._m(4)]),t._v(" "),""!=t.image?i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"}),t._v(" "),i("div",{staticClass:"uploadImg fl"},[i("img",{attrs:{alt:"logo",src:t.uploadUrl+t.image}})]),t._v(" "),i("div",{staticClass:"fl updateName"},[t._v("(已上传："+t._s(t.imageName)+")")])]):t._e(),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"},[t._v("显示图片")]),t._v(" "),i("div",{staticClass:"uploadImgs fl"},[i("a",{staticClass:"addclassify fl",staticStyle:{"margin-right":"15px"},attrs:{href:"javascript:void(0);"}},[t._v("上传图片")]),t._v(" "),i("form",{attrs:{enctype:"multipart/form-data",id:"bgImage"}},[i("input",{attrs:{type:"file",id:"bg_upload",accept:"image/jpeg,image/png,image/gif,image/tiff",name:"image",onclick:"this.value = ''"},on:{change:t.bgNameChange}})])]),t._v(" "),t._m(5)]),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"},[t._v("批量下载二维码")]),t._v(" "),i("a",{staticClass:"download",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.downloadCode()}}},[t._v("下载二维码")])])]):t._e(),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"}),t._v(" "),i("a",{staticClass:"gray fl",staticStyle:{width:"200px","margin-right":"2px"},attrs:{href:"javascript:void(0);"},on:{click:t.getConfiguration}},[t._v("取消")]),t._v(" "),i("a",{staticClass:"blue fl",staticStyle:{width:"200px"},attrs:{href:"javascript:void(0);"},on:{click:t.saveConfiguration}},[t._v("保存")])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"titles"},[this._v("基础配置")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"online-box clearfix",staticStyle:{"margin-bottom":"0px"}},[e("span",{staticClass:"online-sub fl"}),this._v(" "),e("div",{staticClass:"fl handle-tips"},[e("i"),this._v("\n\t\t\t\t限30字以内\n\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"titles"},[this._v("进阶配置")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"detH3"},[this._v("\n\t\t\t\t\t\t\t固定标题：自定义，显示在公众号推送的标题。\n\t\t\t\t\t\t\t"),e("br"),this._v(" 自动标题：默认根据区域名名称一桌台名称，自动补充为标题。\n\t\t\t\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v("\n\t\t\t\t\t限15字以内\n\t\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v("\n\t\t\t\t\t尺寸 640*480\n\t\t\t\t")])}],!1,null,"ffd622a6",null);e.default=l.exports},"2c9d":function(t,e,i){"use strict";var s=i("00e1");i.n(s).a}}]);