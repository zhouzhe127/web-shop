(window.webpackJsonp=window.webpackJsonp||[]).push([["weixin_onfiguration"],{"0040":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkIzQTM5Nzg1NkRBNTExRTZCMjdCOTIxREQzOEJFOUM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkIzQTM5Nzg2NkRBNTExRTZCMjdCOTIxREQzOEJFOUM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjNBMzk3ODM2REE1MTFFNkIyN0I5MjFERDM4QkU5QzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjNBMzk3ODQ2REE1MTFFNkIyN0I5MjFERDM4QkU5QzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6sCeqgAAAANklEQVR42mL8//8/Ay4wa9YsuGRaWhojAx7AxEAlMGoQHQ1inDlz5v9h6rXRlD1qEBUAQIABAMqiEOYqUpH7AAAAAElFTkSuQmCC"},"0501":function(e,t,n){"use strict";var i=n("8ea5");n.n(i).a},"1d7e":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"list"},[n("span",{staticClass:"fl required"},[e._v("品牌名")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.names,expression:"names"}],staticClass:"fl import",attrs:{type:"text",placeholder:"请输入品牌名",maxlength:"20"},domProps:{value:e.names},on:{input:function(t){t.target.composing||(e.names=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"list"},[n("span",{staticClass:"fl required"},[e._v("LOGO")]),e._v(" "),n("div",{staticClass:"fl updateImgBox"},[""==e.config.logoImage?[e._m(0),e._v(" "),n("p",{staticStyle:{color:"#666666","font-size":"16px"}},[e._v("上传LOGO")]),e._v(" "),n("p",[e._v("(194px*194px)")])]:e._e(),e._v(" "),n("form",{attrs:{enctype:"multipart/form-data",id:"logoImage"}},[n("input",{attrs:{type:"file",id:"logo_upload",accept:"image/jpeg,image/png,image/gif,image/tiff",name:"image",onclick:"this.value = ''"},on:{change:e.logoChange}})]),e._v(" "),""!=e.config.logoImage?n("img",{attrs:{alt:"logo",src:e.uploadUrl+e.config.logoImage}}):e._e()],2),e._v(" "),""!=e.config.logoImage?n("div",{staticClass:"fl updateName",staticStyle:{height:"150px","line-height":"150px"}},[e._v("(已上传："+e._s(e.logoName)+")")]):e._e()]),e._v(" "),n("div",{staticClass:"list"},[n("span",{staticClass:"fl"},[e._v("背景图")]),e._v(" "),n("div",{staticClass:"fl updateImgBox"},[""==e.config.bgImage?[e._m(1),e._v(" "),n("p",{staticStyle:{color:"#666666","font-size":"16px"}},[e._v("上传背景图")]),e._v(" "),n("p",[e._v("(750px*1334px)")])]:e._e(),e._v(" "),n("form",{attrs:{enctype:"multipart/form-data",id:"bgImage"}},[n("input",{attrs:{type:"file",id:"bg_upload",accept:"image/jpeg,image/png,image/gif,image/tiff",name:"image",onclick:"this.value = ''"},on:{change:e.bgChange}})]),e._v(" "),""!=e.config.bgImage?n("img",{attrs:{alt:"logo",src:e.uploadUrl+e.config.bgImage}}):e._e()],2),e._v(" "),""!=e.config.bgImage?n("div",{staticClass:"fl updateName",staticStyle:{height:"150px","line-height":"150px"}},[e._v("(已上传："+e._s(e.bgName)+")")]):e._e()]),e._v(" "),n("div",{staticClass:"list"},[n("span",{staticClass:"fl"},[e._v("欢迎语")]),e._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.config.welcome,expression:"config.welcome"}],attrs:{placeholder:"请输入欢迎语",maxlength:"30"},domProps:{value:e.config.welcome},on:{input:function(t){t.target.composing||e.$set(e.config,"welcome",t.target.value)}}}),e._v(" "),e._m(2)]),e._v(" "),n("div",{staticClass:"list"},[n("span",{staticClass:"fl"},[e._v("功能入口")]),e._v(" "),n("div",{staticClass:"fl add-config "},[e._l(e.config.menu,function(t,i){return n("span",{key:i,staticClass:"fl",on:{click:function(n){e.openWin(i,t,"1")}}},[e._v(e._s(t.name)+"\n\t\t\t\t"),n("i",{on:{click:function(t){t.stopPropagation(),e.deleteList(i)}}})])}),e._v(" "),n("span",{staticClass:"addContent fl",on:{click:e.openWin}})],2)]),e._v(" "),n("div",{staticClass:"list"},[n("span",{staticClass:"fl add-config"},[e._v(" ")]),e._v(" "),e.isConfig?n("a",{staticClass:"yellow set-home-config fl",attrs:{href:"javascript:void(0)"},on:{click:e.updateHomePageConfig}},[e._v("保存")]):e._e()]),e._v(" "),e.show?n("entry",{attrs:{i:e.i,item:e.item,type:e.type,config:e.config},on:{winEvent:e.winEvent}}):e._e()],1)},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"imgAdd"},[t("img",{attrs:{src:n("0040"),alt:"LOGO"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"imgAdd"},[t("img",{attrs:{src:n("0040"),alt:"背景图"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl handle-tips"},[t("i"),this._v("\n\t\t\t限30字内\n\t\t")])}];i._withStripped=!0;var o=n("bbb9"),s=n("f6ce"),g=n("81a2");function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(a,o){try{var s=t[a](o),g=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(g).then(function(e){i("next",e)},function(e){i("throw",e)});e(g)}("next")})}}var r=/["'&]/g,l={data:function(){return{config:{},uploadUrl:"",isConfig:"",logoName:"",bgName:"",name:"",shopId:0,i:0,item:{},type:"",show:!1}},computed:{names:{get:function(){return this.name},set:function(e){this.name=e.replace(r,""),this.config.logoName=this.name}}},methods:{winEvent:function(){this.show=!1},logoChange:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.uploadImg({data:{type:8,shopId:e.shopId},formId:"logoImage"});case 2:n=t.sent,e.config.logoImage=n,i=e.config.logoImage.lastIndexOf("/"),e.logoName=e.config.logoImage.substring(i+1,e.config.logoImage.length);case 6:case"end":return t.stop()}},t,e)}))()},bgChange:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.uploadImg({data:{type:8,shopId:e.shopId},formId:"bgImage"});case 2:n=t.sent,e.config.bgImage=n,i=e.config.logoImage.lastIndexOf("/"),e.bgName=e.config.logoImage.substring(i+1,e.config.logoImage.length);case 6:case"end":return t.stop()}},t,e)}))()},openWin:function(e,t,n){t?(this.i=e,this.item=t,this.type=n):(this.i=this.config.menu.length,this.item={},this.type=""),this.show=!0},getHomePageConfig:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var n,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.getHomePageConfig({data:{}});case 2:n=t.sent,e.config=n,e.name=e.config.logoName,e.logoName=n.logoImage,i=e.logoName.lastIndexOf("/"),e.logoName=e.logoName.substring(i+1,e.logoName.length),e.bgName=n.bgImage,a=e.bgName.lastIndexOf("/"),e.bgName=e.bgName.substring(a+1,e.bgName.length);case 11:case"end":return t.stop()}},t,e)}))()},updateHomePageConfig:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=o.a.trim(e.config.logoName)){t.next=3;break}return e.$store.commit("setWin",{content:"请输入品牌名"}),t.abrupt("return",!1);case 3:if(e.config.logoImage){t.next=6;break}return e.$store.commit("setWin",{content:"请上传Logo",time:1e3}),t.abrupt("return",!1);case 6:return t.next=8,g.a.updateHomePageConfig({data:{logoName:e.config.logoName,logoImage:e.config.logoImage,bgImage:e.config.bgImage,welcome:e.config.welcome,menuData:JSON.stringify(e.config.menu)}});case 8:e.$store.commit("setWin",{content:"保存成功",time:1e3});case 9:case"end":return t.stop()}},t,e)}))()},deleteList:function(e){this.config.menu.splice(e,1)}},components:{entry:function(){return n.e("weixin_onfiguration_entry").then(n.bind(null,"587c"))}},mounted:function(){var e=s.a.session("userShop");this.uploadUrl=e.uploadUrl,this.isConfig="0"==e.currentShop.ischain||"3"==e.currentShop.ischain,this.shopId=e.currentShop.id,this.getHomePageConfig()}},m=(n("0501"),n("7610")),u=Object(m.a)(l,i,a,!1,null,"0196dde8",null);u.options.__file="src\\module\\marketing_tools\\weixin_onfiguration.vue";t.default=u.exports},"8ea5":function(e,t,n){}}]);