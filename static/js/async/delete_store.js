(window.webpackJsonp=window.webpackJsonp||[]).push([["delete_store"],{"16af":function(t,e,o){},2390:function(t,e,o){"use strict";var a=o("16af");o.n(a).a},b8bc:function(t,e,o){t.exports=o.p+"images/preloader.3e54c692.gif"},f81a:function(t,e,o){"use strict";o.r(e);var a=o("81a2"),i=o("bbb9"),s=o("f6ce");var l={data:function(){return{deleteList:[],orderStoreList:"",shopId:"",dayData:"",dayList:[],sendData:{},total:[{orderNum:0,totalPrice:0,totalDay:1}],orderTotal:[{orderNum:0,totalPrice:0,totalDay:1}],dayTotal:[{orderNum:0,totalPrice:0,totalDay:1}],page:1,pageNum:1,pageShow:10,showStep:"",loadShow:!1,singleTime:""}},props:["store","order","otherData","step","loading"],mounted:function(){this.orderStoreList=this.store?this.store:[],this.deleteList=this.order.list?this.order.list:[],this.sendData=this.otherData,this.showStep=this.step,this.setStore(),this.setOrder()},watch:{store:"setStore",step:"setStep",order:"setOrder",loading:"setLoad"},methods:{toDay:function(t){this.shopId=t,this.page=1,this.getDayData(),s.a.session("deleteShopId",this.shopId)},toSingle:function(t){console.log(t),console.log(this.deleteList),console.log(this.order),this.singleTime=t,s.a.session("deleteSingleTime",this.singleTime),this.showStep=3,this.page=1,this.pageNum=1;var e={step:this.showStep,id:this.shopId,pageShow:this.pageShow,time:1e3*this.singleTime};this.$emit("emit",e)},getDayData:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.moreDelOrder({data:{startTime:parseInt(e.sendData.startTime/1e3),endTime:parseInt(e.sendData.endTime/1e3),isOpenTime:e.sendData.openTime,page:e.page,num:e.pageShow,trueShopId:e.shopId}});case 2:(o=t.sent).pageShow=e.pageShow,e.setDayData(o,!1),s.a.session("dayData",o),e.showStep=2,i={step:e.showStep},e.$emit("emit",i);case 9:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,o){return function a(i,s){try{var l=e[i](s),r=l.value}catch(t){return void o(t)}if(!l.done)return Promise.resolve(r).then(function(t){a("next",t)},function(t){a("throw",t)});t(r)}("next")})})()},toDetail:function(t){var e={step:0,id:t.oid};this.$emit("emit",e)},handleSizeChange:function(t){console.log(t),this.pageShow=t,this.page=1,this.initData()},pageChange:function(t){this.page=t,this.initData()},initData:function(){var t=s.a.session("deleteShopId"),e=void 0;switch(t&&(this.shopId=t),this.showStep){case 2:this.getDayData();break;case 3:this.showStep=3,e={step:this.showStep,id:this.shopId,page:this.page,pageShow:this.pageShow,time:1e3*this.singleTime},this.$emit("emit",e)}},setDayData:function(t,e){if(t){e&&(this.page=t.page,this.pageShow=t.pageShow),this.pageNum=t.pageNum,this.dayList=t.list?t.list:[],this.dayTotal[0].orderNum=t.total.orderNum,this.dayTotal[0].totalPrice=t.total.price,this.dayTotal[0].totalDay=Math.ceil((this.sendData.endTime-this.sendData.startTime)/864e5);for(var o=0;o<this.dayList.length;o++)this.dayList[o].newDate=this.formatTime(this.dayList[o].date);console.log(this.dayList)}},setStep:function(){this.showStep=this.step,2==this.showStep&&this.setDayData(s.a.session("dayData"),!0)},setStore:function(){if(this.store){this.orderStoreList=this.store,this.sendData=this.otherData;var t=0,e=0;this.orderStoreList.forEach(function(o){t+=o.orderNum,e+=o.price}),this.orderTotal[0].orderNum=t,this.orderTotal[0].totalPrice=e,this.orderTotal[0].totalDay=Math.ceil((this.sendData.endTime-this.sendData.startTime)/864e5),console.log(this.orderStoreList)}},setOrder:function(){var t=s.a.session("deleteSingleTime");for(var e in this.singleTime=t||"",this.deleteList=this.order.list?this.order.list:[],this.pageNum=this.order.pageNum?this.order.pageNum:1,this.page=this.order.page?this.order.page:1,this.total[0])this.order.total?this.total[0][e]=this.order.total[e]:(this.total[0][e]=0,this.total[0].totalDay=1);for(var o=0;o<this.deleteList.length;o++)this.deleteList[o].areaName=""==this.deleteList[o].areaName?"--":this.deleteList[o].areaName,this.deleteList[o].tableName=""==this.deleteList[o].tableName?"--":this.deleteList[o].tableName;console.log(this.deleteList)},setLoad:function(){this.loadShow=this.loading},formatTime:function(t){return i.a.format(new Date(1e3*t),"yyyy年MM月dd日")}}},r=(o("2390"),o("d801")),n=Object(r.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"step-container"}},[1!=t.showStep||t.loadShow?t._e():[a("div",[a("el-table",{attrs:{stripe:"","header-cell-style":{"background-color":"#f5f7fa"},data:t.orderTotal,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"totalDay",label:"天数"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"orderNum",label:"废单总数"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"totalPrice",label:"废单总额"}})],1)],1),t._v(" "),a("div",{staticClass:"store-list"},[a("div",{staticClass:"length"},[t._v("\n\t\t\t\t废单统计 · 共\n\t\t\t\t"),a("span",[t._v(" "+t._s(t.orderStoreList.length)+" ")]),t._v("条记录\n\t\t\t")]),t._v(" "),a("el-table",{attrs:{stripe:"","header-cell-style":{"background-color":"#f5f7fa"},data:t.orderStoreList,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",label:"店铺名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"light",on:{click:function(o){t.toDay(e.row.shopId)}}},[t._v(t._s(e.row.shopName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"orderNum",label:"废单总数"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"price",label:"废单总额"}})],1)],1)],t._v(" "),t.loadShow?a("div",{staticClass:"loading"},[a("img",{attrs:{src:o("b8bc")}})]):t._e(),t._v(" "),2==t.showStep?[a("div",[a("el-table",{attrs:{stripe:"","header-cell-style":{"background-color":"#f5f7fa"},data:t.dayTotal,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"totalDay",label:"天数"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"orderNum",label:"废单总数"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"totalPrice",label:"废单总额"}})],1)],1),t._v(" "),a("div",{staticClass:"store-list"},[2==t.showStep?[a("el-table",{attrs:{stripe:"","header-cell-style":{"background-color":"#f5f7fa"},data:t.dayList,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",label:"查看详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"light",on:{click:function(o){t.toSingle(e.row.date)}}},[t._v("查看详情")])]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"newDate",label:"时间"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"orderNum",label:"废单数量"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"price",label:"废单金额"}})],1)]:t._e()],2)]:t._e(),t._v(" "),3==t.showStep?[a("div",[a("el-table",{attrs:{stripe:"","header-cell-style":{"background-color":"#f5f7fa"},data:t.total,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"totalDay",label:"天数"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"orderNum",label:"废单总数"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"totalPrice",label:"废单总额"}})],1)],1),t._v(" "),a("div",{staticClass:"store-list"},[a("div",{staticClass:"length"},[t._v("\n\t\t\t\t废单统计 · 共\n\t\t\t\t"),a("span",[t._v(" "+t._s(t.total[0].orderNum)+" ")]),t._v("条记录\n\t\t\t")]),t._v(" "),a("el-table",{attrs:{stripe:"","header-cell-style":{"background-color":"#f5f7fa"},data:t.deleteList,border:""}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"200",align:"center",label:"订单号",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"light",on:{click:function(o){t.toDetail(e.row)}}},[t._v(t._s(e.row.oid))])]}}])}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"areaName",label:"区域"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"tableName",label:"桌台"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"price",label:"废单金额"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"createTime",label:"开单时间"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"updateTime",label:"废单时间"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"delReason",label:"废单原因"}}),t._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"staffName",label:"操作人"}})],1)],1)]:t._e(),t._v(" "),1!=t.step?a("div",{staticClass:"page-box"},[a("el-pagination",{attrs:{background:"","current-page":t.page,"page-size":t.pageShow,layout:"sizes, prev, pager, next","page-count":t.pageNum,"page-sizes":[10,20,30]},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1):t._e()],2)},[],!1,null,"53cae7f6",null);e.default=n.exports}}]);