(window.webpackJsonp=window.webpackJsonp||[]).push([["delete_store"],{"81e23":function(t,e,s){"use strict";var a=s("d3dd");s.n(a).a},b8bc:function(t,e,s){t.exports=s.p+"images/preloader.3e54c692.gif"},d3dd:function(t,e,s){},f81a:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"step-container"},[1!=t.showStep||t.loadShow?t._e():[a("div",{staticClass:"total"},[t._m(0),t._v(" "),a("div",{staticClass:"total-data"},[a("span",[t._v(t._s(t.orderTotal.totalDay))]),t._v(" "),a("span",[t._v(t._s(t.orderTotal.orderNum))]),t._v(" "),a("span",[t._v(t._s(t.orderTotal.totalPrice))])])]),t._v(" "),a("div",{staticClass:"store-list"},[a("div",{staticClass:"length"},[t._v("\n\t\t\t\t废单统计 · 共\n\t\t\t\t"),a("span",[t._v(" "+t._s(t.orderStoreList.length)+" ")]),t._v("条记录\n\t\t\t")]),t._v(" "),t._m(1),t._v(" "),a("ul",{on:{click:t.toDay}},[t._l(t.orderStoreList,function(e,s){return a("li",{key:s},[a("span",{staticClass:"light",attrs:{"data-id":e.shopId}},[t._v(t._s(e.shopName))]),t._v(" "),a("span",[t._v(t._s(e.orderNum))]),t._v(" "),a("span",[t._v(t._s(e.price))])])}),t._v(" "),t.orderStoreList.length?t._e():a("li",{staticClass:"list-empty"},[t._v("暂时没有废单")])],2)])],t._v(" "),t.loadShow?a("div",{staticClass:"loading"},[a("img",{attrs:{src:s("b8bc")}})]):t._e(),t._v(" "),2==t.showStep?[a("div",{staticClass:"total"},[t._m(2),t._v(" "),a("div",{staticClass:"total-data"},[a("span",[t._v(t._s(t.orderTotal.totalDay))]),t._v(" "),a("span",[t._v(t._s(t.dayTotal.orderNum))]),t._v(" "),a("span",[t._v(t._s(t.dayTotal.totalPrice))])])]),t._v(" "),a("div",{staticClass:"store-list"},[t._m(3),t._v(" "),a("ul",{on:{click:t.toSingle}},[t._l(t.dayList,function(e,s){return a("li",{key:s,staticClass:"day"},[a("span",{staticClass:"light",attrs:{"data-time":e.date}},[t._v("查看详情")]),t._v(" "),a("span",[t._v(t._s(t.formatTime(e.date)))]),t._v(" "),a("span",[t._v(t._s(e.orderNum))]),t._v(" "),a("span",[t._v(t._s(e.price))])])}),t._v(" "),t.dayList.length?t._e():a("li",{staticClass:"list-empty"},[t._v("暂时没有废单")])],2)])]:t._e(),t._v(" "),3==t.showStep?[a("div",{staticClass:"total"},[t._m(4),t._v(" "),a("div",{staticClass:"total-data"},[a("span",[t._v(t._s(t.total.totalDay))]),t._v(" "),a("span",[t._v(t._s(t.total.orderNum))]),t._v(" "),a("span",[t._v(t._s(t.total.totalPrice))])])]),t._v(" "),a("tableCom",{attrs:{listHeight:50,listName:"废单统计",allTotal:t.total.orderNum,introData:t.deleteList,titleData:t.titleList,listWidth:1200},scopedSlots:t._u([{key:"con-0",fn:function(e){return a("div",{staticStyle:{color:"#29abe2",cursor:"pointer"},on:{click:function(s){t.toDetail(e.data)}}},[t._v("\n\t\t\t\t"+t._s(e.data.oid)+"\n\t\t\t")])}}])})]:t._e(),t._v(" "),1!=t.step?a("div",{staticClass:"page-box"},[a("pageBtn",{attrs:{total:t.pageNum,page:t.page,isNoJump:!0},on:{pageNum:t.pageChange}})],1):t._e()],2)};a._withStripped=!0;var i=s("81a2"),o=s("bbb9"),r=s("f6ce");var n={props:["store","order","otherData","step","loading"],data:function(){return{dropList:["10","20"],deleteList:[],orderStoreList:"",shopId:"",dayData:"",dayList:[],sendData:{},total:{orderNum:0,totalPrice:0,totalDay:1},orderTotal:{orderNum:0,totalPrice:0,totalDay:1},dayTotal:{orderNum:0,totalPrice:0},page:1,num:10,pageNum:1,pageShow:10,showStep:"",showPageList:[10,20],loadShow:!1,singleTime:"",titleList:[{titleName:"订单号",titleStyle:{width:"190px"}},{titleName:"区域",dataName:"areaName"},{titleName:"桌台",dataName:"tableName"},{titleName:"废单金额",dataName:"price"},{titleName:"开单时间",dataName:"createTime"},{titleName:"废单时间",dataName:"updateTime"},{titleName:"废单原因",dataName:"delReason"},{titleName:"操作人",dataName:"staffName"}]}},watch:{store:"setStore",step:"setStep",order:"setOrder",loading:"setLoad"},mounted:function(){this.orderStoreList=this.store?this.store:[],this.deleteList=this.order.list?this.order.list:[],this.sendData=this.otherData,this.showStep=this.step,this.setStore(),this.setOrder()},components:{selectBtn:function(){return s.e("select_btn").then(s.bind(null,"3d41"))},pageBtn:function(){return s.e("page_element").then(s.bind(null,"5921"))},tableCom:function(){return s.e("table").then(s.bind(null,"4360"))}},methods:{toDay:function(t){var e=t.target;e.className.includes("light")&&(this.shopId=e.getAttribute("data-id"),this.page=1,this.getDayData(),r.a.session("deleteShopId",this.shopId))},toSingle:function(t){var e=t.target;if(e.className.includes("light")){this.singleTime=e.getAttribute("data-time"),r.a.session("deleteSingleTime",this.singleTime),this.showStep=3,this.page=1,this.pageNum=1;var s={step:this.showStep,id:this.shopId,pageShow:this.pageShow,time:1e3*this.singleTime};this.$emit("emit",s)}},getDayData:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var s,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.moreDelOrder({data:{startTime:parseInt(e.sendData.startTime/1e3),endTime:parseInt(e.sendData.endTime/1e3),isOpenTime:e.sendData.openTime,page:e.page,num:e.pageShow,trueShopId:e.shopId}});case 2:(s=t.sent).pageShow=e.pageShow,e.setDayData(s,!1),r.a.session("dayData",s),e.showStep=2,a={step:e.showStep},e.$emit("emit",a);case 9:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function a(i,o){try{var r=e[i](o),n=r.value}catch(t){return void s(t)}if(!r.done)return Promise.resolve(n).then(function(t){a("next",t)},function(t){a("throw",t)});t(n)}("next")})})()},toDetail:function(t){var e={step:0,id:t.oid};this.$emit("emit",e)},pageChange:function(t){var e=this.page;this.page=t.page,this.pageShow=t.num,e!=t.page&&this.initData()},initData:function(){var t=r.a.session("deleteShopId"),e=void 0;switch(t&&(this.shopId=t),this.showStep){case 2:this.getDayData();break;case 3:this.showStep=3,e={step:this.showStep,id:this.shopId,page:this.page,pageShow:this.pageShow,time:1e3*this.singleTime},this.$emit("emit",e)}},showPageChange:function(){this.page=1,this.initData()},setDayData:function(t,e){t&&(e&&(this.page=t.page,this.pageShow=t.pageShow),this.pageNum=t.pageNum,this.dayList=t.list?t.list:[],this.dayTotal.orderNum=t.total.orderNum,this.dayTotal.totalPrice=t.total.price)},setStep:function(){this.showStep=this.step,2==this.showStep&&this.setDayData(r.a.session("dayData"),!0)},setStore:function(){if(this.store){this.orderStoreList=this.store,this.sendData=this.otherData;var t=0,e=0;this.orderStoreList.forEach(function(s){t+=s.orderNum,e+=s.price}),this.orderTotal.orderNum=t,this.orderTotal.totalPrice=e,this.orderTotal.totalDay=Math.ceil((this.sendData.endTime-this.sendData.startTime)/864e5)}},setOrder:function(){var t=r.a.session("deleteSingleTime");for(var e in this.singleTime=t||"",this.deleteList=this.order.list?this.order.list:[],this.pageNum=this.order.pageNum?this.order.pageNum:1,this.page=this.order.page?this.order.page:1,this.total)this.order.total?this.total[e]=this.order.total[e]:(this.total[e]=0,this.total.totalDay=1)},setLoad:function(){this.loadShow=this.loading},formatTime:function(t){return o.a.format(new Date(1e3*t),"yyyy年MM月dd日")}}},l=(s("81e23"),s("7610")),h=Object(l.a)(n,a,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("天数")]),this._v(" "),e("span",[this._v("废单总数")]),this._v(" "),e("span",[this._v("废单总额")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("店铺名称")]),this._v(" "),e("span",[this._v("废单总数")]),this._v(" "),e("span",[this._v("废单总额")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("天数")]),this._v(" "),e("span",[this._v("废单总数")]),this._v(" "),e("span",[this._v("废单总额")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title day"},[e("span",[this._v("查看详情")]),this._v(" "),e("span",[this._v("时间")]),this._v(" "),e("span",[this._v("废单数量")]),this._v(" "),e("span",[this._v("废单金额")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("天数")]),this._v(" "),e("span",[this._v("废单总数")]),this._v(" "),e("span",[this._v("废单总额")])])}],!1,null,"53501c08",null);h.options.__file="src\\module\\statistics\\delete_store.vue";e.default=h.exports}}]);