(window.webpackJsonp=window.webpackJsonp||[]).push([["scheduling_application_list"],{"0109":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"scheduling-application-list"}},[a("div",{staticClass:"tab-div"},[a("span",{class:{"select-tab":t.toggle},on:{click:function(e){t.toggle=!0}}},[t._v("调度申请")]),t._v(" "),a("span",{class:{"select-tab":!t.toggle},on:{click:function(e){t.toggle=!1}}},[t._v("模板列表")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.toggle,expression:"toggle"}]},[a("div",{staticClass:"search-div"},[a("span",{staticClass:"submit-time"},[t._v("提交时间 : ")]),t._v(" "),a("div",{staticClass:"in-block"},[a("calendar",{attrs:{pObj:t.startTime},on:{throwTime:function(e){t.getTime("startTime",e)}}}),t._v(" "),a("span",{staticClass:"line"}),t._v(" "),a("calendar",{attrs:{pObj:t.endTime},on:{throwTime:function(e){t.getTime("endTime",e)}}})],1)]),t._v(" "),a("div",{staticClass:"search-div"},[a("div",{staticClass:"in-block"},[a("select-btn",{attrs:{width:180,name:t.tips.auditStatus,sorts:t.auditStatusName},on:{emit:function(e){t.getStatus("auditStatus",e)}}}),t._v(" "),a("select-btn",{staticClass:"marginL-10",attrs:{width:180,name:t.tips.dispatchStatus,sorts:t.dispatchStatusName},on:{emit:function(e){t.getStatus("dispatchStatus",e)}}})],1),t._v(" "),a("div",{staticClass:"in-block"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.subObj.uName,expression:"subObj.uName"}],staticClass:"input-txt",attrs:{type:"text",maxlength:"30",placeholder:"请输入提交人"},domProps:{value:t.subObj.uName},on:{input:function(e){e.target.composing||t.$set(t.subObj,"uName",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.subObj.code,expression:"subObj.code"}],staticClass:"input-txt",attrs:{maxlength:"30",type:"text",placeholder:"请输入申请单号"},domProps:{value:t.subObj.code},on:{input:function(e){e.target.composing||t.$set(t.subObj,"code",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"in-block"},[a("span",{staticClass:"font"},[t._v("入货仓库 : ")]),t._v(" "),a("select-btn",{staticClass:"marginL-10",attrs:{width:180,name:t.tips.wid,sorts:t.warehouseListName},on:{emit:function(e){t.getWid("wid",e)}}})],1),t._v(" "),a("div",{staticClass:"in-block"},[a("span",{staticClass:"common-btn blue",on:{click:function(e){t.clickBtn("filter",!0)}}},[t._v("筛选")]),a("span",{staticClass:"common-btn gray",on:{click:function(e){t.clickBtn("reset")}}},[t._v("重置")])])]),t._v(" "),a("div",{staticClass:"content-body"},[a("com-table",{attrs:{showHand:!0,listName:"调度申请",listHeight:70,showTitle:1,titleData:t.titleData,introData:t.applicationList,allTotal:t.pageObj.listNum,fixed:0,bannerStyle:{color:"#43414a",fontSize:"16px"},widthType:!0,listWidth:1435,contentStyle:{color:"#666",fontSize:"14px"}},scopedSlots:t._u([{key:"con-0",fn:function(e){return a("div",{},[4==e.data.auditStatus&&5==e.data.dispatchStatus?a("span",{staticClass:"operation",staticStyle:{color:"#ff8d01"},on:{click:function(a){t.chanageRouter(e.data,"import")}}},[t._v("确认入货")]):a("span",{staticClass:"operation",on:{click:function(a){t.chanageRouter(e.data,"detai")}}},[t._v("查看详情")])])}},{key:"con-1",fn:function(e){return[t._v("\n\t\t\t\t\t"+t._s(e.data.itemIndex)+"\n\t\t\t\t")]}}])})],1),t._v(" "),a("div",[a("page-element",{attrs:{page:t.pageObj.page,total:t.pageObj.total},on:{pageNum:t.getPageNum}})],1)]),t._v(" "),a("keep-alive",{attrs:{include:["templateList"]}},[a(t.showCom,{tag:"component"})],1)],1)};i._withStripped=!0;var s=a("9719"),n=a("81a2"),r=a("bbb9"),u=a("f6ce"),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t};function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(s,n){try{var r=e[s](n),u=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(u).then(function(t){i("next",t)},function(t){i("throw",t)});t(u)}("next")})}}var l={data:function(){return{titleData:[{titleName:"操作"},{titleName:"序号"},{titleName:"操作类型",dataName:"opeartionType"},{titleName:"审核状态",dataName:"auditStatusType"},{titleName:"调度状态",dataName:"dispatchType"},{titleName:"申请单号",dataName:"code"},{titleName:"申请人",dataName:"createName"},{titleName:"申请时间",dataName:"submitTime"},{titleName:"入货仓库",dataName:"wName"}],pageObj:{page:1,total:0,num:10,listNum:0},startTime:{time:"",show:!0,detail:!0,width:160},endTime:{time:"",show:!0,detail:!0,width:160},applicationType:[{id:"1",name:"入货申请"},{id:"2",name:"出货申请"}],auditStatus:[{id:0,name:"全部审核状态"},{id:1,name:"审核中"},{id:2,name:"已取消"},{id:3,name:"审核未通过"},{id:4,name:"审核通过"}],auditStatusName:[],dispatchStatus:[{id:0,name:"全部调度状态"},{id:1,name:"未调度"},{id:2,name:"调度中"},{id:3,name:"未出货"},{id:4,name:"全部取消"},{id:5,name:"待入货"},{id:6,name:"已完成"},{id:7,name:"已完成（异常）"}],dispatchStatusName:[],warehouseList:[],warehouseListName:[],tips:{},subObj:{},toggle:!0,applicationList:[],showCom:"",isBrand:"",shopId:"",brandId:!1}},methods:o({},Object(s.b)(["setWin","setPageTools"]),{getTime:function(t,e){this.subObj[t]=parseInt(e/1e3),this[t].time=e},getStatus:function(t,e){this.subObj[t]=this[t][e].id,0==this.subObj[t]&&(this.subObj[t]=""),this.tips[t]=this[t][e].name},getWid:function(t){this.subObj.wid=this.warehouseList[t].id,this.tips.wid=this.warehouseList[t].name,0==this.subObj.wid&&(this.subObj.wid="")},clickBtn:function(t,e){var a=this;return c(regeneratorRuntime.mark(function i(){var s,n,r,u,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if("filter"!=t){i.next=15;break}return e&&(a.pageObj.page=1,a.subObj.page=1),i.next=4,a.getHttp("dispatchSearchApplications",a.subObj);case 4:s=i.sent,n=s.list,r=void 0===n?[]:n,u=s.rows,o=void 0===u?0:u,r.forEach(function(t,e){t.opeartionType=a.itera(a.applicationType,t.type),t.auditStatusType=a.itera(a.auditStatus,t.auditStatus),t.dispatchType=a.itera(a.dispatchStatus,t.dispatchStatus),t.submitTime=a.transFormTime(t.createTime);var i=(a.pageObj.page-1)*a.pageObj.num+e+1;t.itemIndex=i>=10?i:"0"+i}),a.applicationList=r,a.pageObj.listNum=o,a.pageObj.total=Math.ceil(a.pageObj.listNum/a.pageObj.num),i.next=17;break;case 15:a.resetData(),a.clickBtn("filter");case 17:case"end":return i.stop()}},i,a)}))()},getPageNum:function(t){this.pageObj.page=t.page,t.num!=this.pageObj.num&&(this.pageObj.num=t.num,this.pageObj.total=Math.ceil(this.pageObj.listNum/this.pageObj.num)),this.subObj.num=this.pageObj.num,this.subObj.page=this.pageObj.page,this.clickBtn("filter")},chanageRouter:function(t){var e=this.$route.query;e.id=t.id,e.auditStatus=t.auditStatus,this.$router.push({path:"schedulingApplication/purchaseRequisitionDetail",query:e})},itera:function(t,e){var a=!0,i=!1,s=void 0;try{for(var n,r=t[Symbol.iterator]();!(a=(n=r.next()).done);a=!0){var u=n.value;if(u.id==e)return u.name}}catch(t){i=!0,s=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw s}}},transFormTime:function(t){t=parseInt(1e3*t);var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()},getHttp:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(regeneratorRuntime.mark(function i(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a[t]({data:a});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},i,e)}))()},toggleTab:function(){this.toggle?(this.showCom="",u.a.session("tab",1)):(this.showCom="templateList",u.a.session("tab",2))},storageSubObj:function(){var t=u.a.session("subObj");if(t){var e=Object.keys(this.tips),a={};this.startTime.time=t.sTime,this.endTime.time=t.eTime,this.pageObj.page=t.page,this.subObj=o({},t),delete this.subObj.sTime,delete this.subObj.eTime;var i=!0,s=!1,n=void 0;try{for(var r,c=e[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var l=r.value,d=this.subObj[l];d||(d=0),a[l]=d}}catch(t){s=!0,n=t}finally{try{!i&&c.return&&c.return()}finally{if(s)throw n}}this.tips={auditStatus:this.itera(this.auditStatus,a.auditStatus),dispatchStatus:this.itera(this.dispatchStatus,a.dispatchStatus),wid:this.itera(this.warehouseList,a.wid)}}},filterStore:function(t,e,a){return t.filter(function(t){return"brandId"==a&&0==t.shopId?t[a]==e:"shopId"==a&&0!=t.shopId?t[a]==e:void 0})},mapName:function(){this.auditStatusName=this.auditStatus.map(function(t){return t.name}),this.dispatchStatusName=this.dispatchStatus.map(function(t){return t.name})},resetData:function(){this.subObj={page:1,num:10,startTime:"",endTime:"",type:1,auditStatus:"",dispatchStatus:"",wid:"",uName:"",code:"",supplierId:""};var t=r.a.getTime({time:Date.now(),type:!0});this.subObj.startTime=parseInt(t.start/1e3),this.subObj.endTime=parseInt(t.end/1e3),this.startTime.time=t.start,this.endTime.time=t.end,this.pageObj.page=1,this.brandId&&(this.subObj.supplierId=this.brandId),this.tips={auditStatus:"全部审核状态",dispatchStatus:"全部调度状态",wid:"全部仓库"}},initData:function(){var t=u.a.session("userShop");switch(this.isBrand=3==t.currentShop.ischain,this.shopId=t.currentShop.id,t.currentShop.ischain+""){case"0":case"3":this.brandId=t.currentShop.id;break;case"1":case"2":this.brandId=!1}},initBtn:function(){var t=this;this.setPageTools([{name:"申请入货",style:{color:"#fff"},fn:function(){var e=t.$route.query;t.$router.push({path:"schedulingApplication/purchaseRequisition",query:e})}}])}}),mounted:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.mapName(),t.initBtn(),t.initData(),2==u.a.session("tab")&&(t.toggle=!1,t.toggleTab()),t.resetData(),e.next=7,t.getHttp("warehouseList");case 7:t.warehouseList=e.sent,a=t.isBrand?"brandId":"shopId",t.warehouseList=t.filterStore(t.warehouseList,t.shopId,a),t.warehouseList.unshift({id:0,name:"全部仓库"}),t.warehouseListName=t.warehouseList.map(function(t){return t.name}),t.storageSubObj(),t.clickBtn("filter");case 14:case"end":return e.stop()}},e,t)}))()},watch:{toggle:function(){this.toggleTab()}},beforeDestroy:function(){if(u.a.session("tab",null),"/admin/schedulingApplication/purchaseRequisitionDetail"==this.$route.path){var t=o({},this.subObj);t.sTime=this.startTime.time,t.eTime=this.endTime.time,u.a.session("subObj",t)}else u.a.session("subObj",null)},components:{calendar:function(){return a.e("calendar_result").then(a.bind(null,"9265"))},comTable:function(){return a.e("table").then(a.bind(null,"4360"))},selectBtn:function(){return a.e("select_btn").then(a.bind(null,"3d41"))},pageElement:function(){return a.e("page_element").then(a.bind(null,"5921"))},templateList:function(){return a.e("template_list").then(a.bind(null,"59f9"))}}},d=(a("104a"),a("7610")),p=Object(d.a)(l,i,[],!1,null,"3e68948b",null);p.options.__file="src\\module\\invoicing_system\\warehouse_manage\\scheduling_application_list.vue";e.default=p.exports},"104a":function(t,e,a){"use strict";var i=a("21b2");a.n(i).a},"21b2":function(t,e,a){}}]);