(window.webpackJsonp=window.webpackJsonp||[]).push([["supplier_configure"],{"32d3":function(t,i,e){},4102:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"invo-config"}},[e("div",{staticClass:"head"},[t._v("进销存权限")]),t._v(" "),e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("ul",{staticClass:"config-list"},t._l(t.configList,function(i,n){return e("li",{key:n},[e("span",[t._v(t._s(i.name)+" : "+t._s(0==i.status?"关":"开"))])])}))]),t._v(" "),e("div",{staticClass:"head-short"},[t._v("是否启用配置")]),t._v(" "),e("div",{staticClass:"config-switch"},[e("span",{staticClass:"label"},[t._v("商品 , 物料应用")]),t._v(" "),e("div",{staticClass:"mul-sel"},t._l(t.config,function(i,n){return e("span",{key:n,staticClass:"list",class:{checkbox:i.isSelect},on:{click:function(e){t.chooseList(i,n)}}},[t._v(t._s(i.name))])}))]),t._v(" "),e("div",{staticClass:"head-short"},[t._v("是否可以售卖")]),t._v(" "),e("div",{staticClass:"sale-switch"},[t._v("\n\t\t货架商品不足时\n\t\t"),e("span",{staticClass:"on-off"},[e("on-off",{attrs:{status:t.saleSwitch},on:{statusChange:t.getOnOff}})],1),t._v(" "),t._m(1)]),t._v(" "),t.isBrand?e("div",{staticClass:"head-short"},[t._v("分销价格名称")]):t._e(),t._v(" "),t.isBrand?e("div",{staticClass:"sale-switch",staticStyle:{"padding-left":"0",height:"auto","padding-bottom":"30px"}},t._l(t.distribution,function(i,n){return e("li",{key:n,staticClass:"list"},[e("div",{staticClass:"label"},[e("span",{staticClass:"index"},[t._v(t._s(n>8?n+1:"0"+(n+1)))]),t._v(" "),e("span",[t._v("分销价格名称")])]),t._v(" "),e("div",{staticClass:"label-tag"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.name,expression:"item.name"}],staticClass:"price",class:{"error-flag":i.errorFlag},attrs:{type:"text",placeholder:"请输入分销价格名称",maxlength:"10"},domProps:{value:i.name},on:{input:function(e){e.target.composing||t.$set(i,"name",e.target.value)}}}),t._v(" "),e("span",{staticClass:"icon-container",on:{click:function(e){t.delAdd("del",i,n)}}},[e("i",{staticClass:"del-icon"})]),t._v(" "),t.distribution.length-1==n?e("span",{staticClass:"icon-container",on:{click:function(e){t.delAdd("add",i,n)}}},[e("i",{staticClass:"add-icon"})]):t._e()])])})):t._e(),t._v(" "),e("div",{staticClass:"bottom"},[e("div",{staticClass:"gray btn-com",on:{click:function(i){t.clickBtn("cancel")}}},[t._v("取消")]),t._v(" "),e("div",{staticClass:"yellow btn-com",on:{click:function(i){t.clickBtn("ok")}}},[t._v("确定")])])])};n._withStripped=!0;var r=e("81a2"),a=e("f6ce"),s=function(){return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,i){var e=[],n=!0,r=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(e.push(s.value),!i||e.length!==i);n=!0);}catch(t){r=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return e}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function o(t){return function(){var i=t.apply(this,arguments);return new Promise(function(t,e){return function n(r,a){try{var s=i[r](a),o=s.value}catch(t){return void e(t)}if(!s.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var c={data:function(){return{configList:[{name:"物料单位修改",status:0,attr:"updateUnit"},{name:"物料单位新建",status:0,attr:"createUnit"},{name:"物料分类修改",status:0,attr:"updateCategory"},{name:"物料分类新建",status:0,attr:"createCategory"},{name:"商品品牌修改",status:0,attr:"updateBrand"},{name:"商品品牌新建",status:0,attr:"createBrand"},{name:"物料修改",status:0,attr:"updateMaterial"},{name:"物料新建",status:0,attr:"createMaterial"},{name:"供应商修改",status:0,attr:"updateSupplier"},{name:"供应商新建",status:0,attr:"createSupplier"},{name:"BOM单修改",status:0,attr:"updateBom"},{name:"BOM单新建",status:0,attr:"createBom"}],config:[{name:"商品",id:0,attr:"isGoods"},{name:"物料",id:1,attr:"isMaterial"}],saleSwitch:!1,distribution:[],isBrand:!1}},methods:{chooseList:function(t,i){t.isSelect=!t.isSelect,this.config.splice(i,1,t)},getOnOff:function(t){this.saleSwitch=t},getSelectConfig:function(t){var i={},e=!0,n=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var o=a.value;i[o.attr]=Number(o.isSelect)}}catch(t){n=!0,r=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw r}}return i},getDistribution:function(){var t=[],i=!0,e=!1,n=void 0;try{for(var r,a=this.distribution[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var s=r.value;s.name=s.name.trim(),s.name&&t.push({id:s.id,name:s.name})}}catch(t){e=!0,n=t}finally{try{!i&&a.return&&a.return()}finally{if(e)throw n}}return t},checkDistribution:function(){var t=!0;return this.distribution=this.distribution.map(function(i){return i.name=i.name.trim(),Number(i.id)>0&&!i.name?(i.errorFlag=!0,t=!1):i.errorFlag=!1,i}),t},checkDistributionSameName:function(){for(var t=!0,i=0;i<this.distribution.length;i++)for(var e=i+1;e<this.distribution.length;e++)if(this.distribution[i].name==this.distribution[e].name){t=!1;break}return t},clickBtn:function(t){var i=this;return o(regeneratorRuntime.mark(function e(){var n,r,s,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},[],r={},"ok"!=t){e.next=23;break}if(i.checkDistribution()){e.next=5;break}return i.alert("请填写需要修改的分销价格名称!"),e.abrupt("return");case 5:if(i.checkDistributionSameName()){e.next=8;break}return i.alert("分销价格名称不能相同!"),e.abrupt("return");case 8:return(n=i.getSelectConfig(i.config)).isShelveMinus=Number(i.saleSwitch),n.distribution=i.getDistribution(),e.next=13,i.getHttp("invociUpdateSupplier",n);case 13:r=e.sent,i.alert("保存成功!"),Array.isArray(r.distribution)&&(i.distribution=r.distribution),s=0,o=[],1==r.isGoods&&1!=r.isMaterial?(s=1,o=["领料管理","BOM单管理","单位配置","物料分类"]):1!=r.isGoods&&1==r.isMaterial&&(s=2,o=["称重商品配置","货架管理"]),i.$store.commit("setasideDel",o),a.a.session("inventConfigure",s),e.next=24;break;case 23:"cancel"==t&&i.$router.go(-1);case 24:case"end":return e.stop()}},e,i)}))()},delDistribution:function(t,i){var e=this;return o(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=void 0,!(Number(t.id)>0)){n.next=7;break}return n.next=4,e.getHttp("invoicingDelDistributionConfig",{id:t.id});case 4:r=n.sent,n.next=8;break;case 7:r=!0;case 8:r&&e.distribution.splice(i,1),0==e.distribution.length&&e.distribution.push({id:0,name:""});case 10:case"end":return n.stop()}},n,e)}))()},delAdd:function(t,i,e){var n=this;if("add"==t)this.distribution.length<=9?this.distribution.push({id:0,name:""}):this.alert("最多可设置10个分销价格!");else{if(1==this.distribution.length&&0==this.distribution[0].id)return void this.alert("所有分销价已经删除!");this.alert("确认删除该分销价?",function(t){"ok"==t&&n.delDistribution(i,e)})}},alert:function(t,i){var e={title:"温馨提示",content:t,winType:"alert"};"function"==typeof i&&(e.winType="confirm",e.callback=i),this.$store.commit("setWin",e)},getHttp:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.a[t]({data:e});case 2:return a=i.sent,i.abrupt("return",a);case 4:case"end":return i.stop()}},n,i)}))()},initList:function(){for(var t=arguments.length,i=Array(t),e=0;e<t;e++)i[e]=arguments[e];var n=s(i,4),r=n[0],a=void 0===r?[]:r,o=n[1],c=void 0===o?{}:o,u=n[2],l=void 0===u?"attr":u,d=n[3],f=void 0===d?"status":d;return a=a.map(function(t){for(var i in c)if(t[l]==i){t[f]=1==c[i];break}return t})},initData:function(){var t=a.a.session("userShop").currentShop;this.isBrand=3==t.ischain}},mounted:function(){var t=this;return o(regeneratorRuntime.mark(function i(){var e,n,r,a,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.initData(),i.next=3,t.getHttp("invociGetSupplier");case 3:return e=i.sent,n=e.isGoods,r=e.isMaterial,a=e.isShelveMinus,s=[],t.configList=t.initList(t.configList,e,"attr","status"),t.config=t.initList(t.config,{isGoods:n,isMaterial:r},"attr","isSelect"),t.saleSwitch=1==a,i.next=11,t.getHttp("invoicingGetDistributionConfig");case 11:s=i.sent,Array.isArray(s)&&(t.distribution=s),0==t.distribution.length&&t.distribution.push({id:0,name:""});case 14:case"end":return i.stop()}},i,t)}))()},components:{onOff:function(){return e.e("on_off").then(e.bind(null,"034b"))},mulSel:function(){return e.e("mul_select").then(e.bind(null,"7d09"))}}},u=(e("7dd0"),e("6ceb")),l=Object(u.a)(c,n,[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"assign-tips"},[i("span",{staticClass:"tips-icon"}),this._v("\n\t\t\t进销存权限统一由品牌指派,如有权限需求请联系品牌权限管理人员\n\t\t")])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"sale"},[i("span",{staticClass:"tips-icon"}),this._v(" "),i("span",{staticClass:"tips-word"},[this._v("开关开启时,销售后货架商品数量可以为负数,下次上架后补充完整")])])}],!1,null,"16ff9270",null);l.options.__file="src\\module\\invoicing_system\\warehouse_manage\\supplier_configure.vue";i.default=l.exports},"7dd0":function(t,i,e){"use strict";var n=e("32d3");e.n(n).a}}]);