(window.webpackJsonp=window.webpackJsonp||[]).push([["small_program_binding"],{"3baa":function(t,e,i){},"5c74":function(t,e,i){"use strict";var n=i("3baa");i.n(n).a},"98be":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"weChatBinding"}},[t.checkList?i("section",[i("div",{staticClass:"title"},[i("a",{attrs:{href:"javascript:;"},on:{click:t.checkLists}},[t._v("查看小程序列表")]),t._v(" "),i("a",{attrs:{href:"javascript:;"},on:{click:t.toTutorial}},[t._v("小程序上传教程")])]),t._v(" "),t._m(0),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"third"},[i("span",{staticClass:"fl"},[t._v("3")]),t._v(" "),i("span",{staticClass:"required"},[t._v("小程序App ID")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.miniAppIds,expression:"miniAppIds"}],attrs:{type:"text",placeholder:"请输入AppId",maxlength:"32"},domProps:{value:t.miniAppIds},on:{input:function(e){e.target.composing||(t.miniAppIds=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"third"},[i("span",{staticClass:"fl",staticStyle:{opacity:"0"}},[t._v("3")]),t._v(" "),i("span",{staticClass:"required"},[t._v("小程序秘钥")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.miniAppSecrets,expression:"miniAppSecrets"}],attrs:{type:"text",placeholder:"请输入AppSecret",maxlength:"32"},domProps:{value:t.miniAppSecrets},on:{input:function(e){e.target.composing||(t.miniAppSecrets=e.target.value)}}})]),t._v(" "),t._m(2),t._v(" "),i("a",{staticClass:"blue btn",attrs:{href:"javascript:void(0)"},on:{click:t.setConfig}},[t._v("保存")])]):t._e(),t._v(" "),t.checkList?t._e():i("section",[i("div",{staticClass:"title"},[i("span",{on:{click:t.checkLists}},[t._v("返回")])]),t._v(" "),i("div",{staticClass:"list"},[i("div",{staticClass:"list_title"},[i("span",[t._v("更新记录")]),t._v(" "),i("span"),t._v(" "),i("span",[t._v("共\n\t\t\t\t\t"),i("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.versionList.length))]),t._v("条记录")])]),t._v(" "),t._m(3),t._v(" "),""==t.versionList?i("div",{staticClass:"nolist"},[t._v("暂时没有版本更新，敬请期待...")]):t._l(t.versionList,function(e){return i("ul",{staticClass:"contents"},[i("li",{on:{click:function(i){t.downLoad(e.fileName)}}},[t._v("下载")]),t._v(" "),i("li",[t._v(t._s(t.transFormDate(e.uploadTime)))]),t._v(" "),i("li",[t._v(t._s(e.code))]),t._v(" "),i("li",[i("span",[t._v(t._s(e.desc))])]),t._v(" "),i("li",[t._v("无")])])})],2)])])};n._withStripped=!0;var s=i("81a2"),r=i("f6ce"),a=i("bbb9");function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(s,r){try{var a=e[s](r),c=a.value}catch(t){return void i(t)}if(!a.done)return Promise.resolve(c).then(function(t){n("next",t)},function(t){n("throw",t)});t(c)}("next")})}}var p={data:function(){return{miniAppId:"",miniAppSecret:"",checkList:!0,versionList:[],userData:Object}},mounted:function(){this.userData=r.a.session("userShop"),this.getConfig(),this.getVersion()},methods:{checkLists:function(){this.checkList=!this.checkList},transFormDate:function(t){return 10==(t+="").length?(t-=0,t*=1e3):t-=0,a.a.format(new Date(t),"yyyy-MM-dd")},downLoad:function(t){window.open(this.userData.uploadUrl+"packages/"+t)},toTutorial:function(){window.open("https://mp.weixin.qq.com/debug/wxadoc/dev/")},setConfig:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(""==t.miniAppId||t.miniAppId.length<=0)){e.next=3;break}return t.$store.commit("setWin",{title:"提示信息",content:"AppId不能为空！"}),e.abrupt("return",!1);case 3:if(!(""==t.miniAppSecret||t.miniAppSecret.length<=0)){e.next=6;break}return t.$store.commit("setWin",{title:"提示信息",content:"appSecret不能为空！"}),e.abrupt("return",!1);case 6:return e.next=8,s.a.updateMiniProgramConfig({data:{shopId:t.userData.currentShop.id,miniAppId:t.miniAppId,miniAppSecret:t.miniAppSecret}});case 8:(i=e.sent)&&(t.miniAppId=i.miniAppId,t.miniAppSecret=i.miniAppSecret,t.$store.commit("setWin",{title:"提示信息",content:"保存成功！"}));case 10:case"end":return e.stop()}},e,t)}))()},getConfig:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getWechatConfig({data:{shopId:t.userData.currentShop.id}});case 2:(i=e.sent)&&(t.miniAppId=i.miniAppId,t.miniAppSecret=i.miniAppSecret);case 4:case"end":return e.stop()}},e,t)}))()},getVersion:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.smallProgramUpdateList({data:{shopId:t.userData.currentShop.id}});case 2:(i=e.sent)&&(t.versionList=i);case 4:case"end":return e.stop()}},e,t)}))()}},computed:{miniAppIds:{get:function(){return this.miniAppId},set:function(t){this.miniAppId=t.replace(/[^a-zA-Z\d]/g,"")}},miniAppSecrets:{get:function(){return this.miniAppSecret},set:function(t){this.miniAppSecret=t.replace(/[^a-zA-Z\d]/g,"")}}}},o=(i("5c74"),i("7610")),u=Object(o.a)(p,n,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"first"},[e("span",[this._v("1")]),this._v(" "),e("span",[this._v("将下载的小程序包在微信开发者工具中上传,进行扫码安装。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"second"},[e("span",[this._v("2")]),this._v(" "),e("span",[this._v("在微信小程序后台配置域名，域名为\n\t\t\t\t"),e("a",{attrs:{href:"javascript:;"}},[this._v("wx.ishandian.net")])]),this._v(" "),e("span",[this._v("如何配置域名")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"handle-tips"},[e("i"),this._v(" "),e("span",[this._v("请仔细填写App ID与秘钥，轻易不要更换否则将无法正常使用小程序。")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"heads"},[i("li",[t._v("操作")]),t._v(" "),i("li",[t._v("更新时间")]),t._v(" "),i("li",[t._v("版本号")]),t._v(" "),i("li",[t._v("版本内容")]),t._v(" "),i("li",[t._v("修复内容")])])}],!1,null,"5b11643c",null);u.options.__file="src\\module\\public_number_configuration\\small_program_binding.vue";e.default=u.exports}}]);