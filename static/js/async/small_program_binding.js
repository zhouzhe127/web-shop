(window.webpackJsonp=window.webpackJsonp||[]).push([["small_program_binding"],{"07d7":function(t,e,i){},"4c22":function(t,e,i){"use strict";var n=i("07d7");i.n(n).a},"647d":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"merchants"}},[t.isAuth?[t.showConfig?i("appletConfig",{attrs:{number:t.number,secret:t.secret,authMiniBackground:t.authMiniBackground},on:{throwWinResult:t.getConfigs}}):[t._m(5),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"online-sub fl"},[t._v("小程序:")]),t._v(" "),i("div",{staticClass:"rightHalf"},[i("span",{staticClass:"fl name"},[t._v(t._s(t.authMiniAppName))]),t._v(" "),i("a",{staticClass:"blue abtn fl",attrs:{href:"javascript:void(0)"},on:{click:t.reauthorization}},[t._v("重新授权")]),t._v(" "),i("a",{staticClass:"gray abtn fl",attrs:{href:"javascript:void(0)"},on:{click:t.deleteAuth}},[t._v("解除授权")])])]),t._v(" "),""!==t.reviewStatus?i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"online-sub fl"},[t._v("状态:")]),t._v(" "),i("div",{staticClass:"rightHalf"},[i("span",{staticClass:"fl name"},[t._v(t._s(t.reviewObj[t.reviewStatus]))])])]):t._e(),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"online-sub fl"}),t._v(" "),i("div",{staticClass:"rightHalf"},["2"==t.reviewStatus?i("a",{staticClass:"gray",staticStyle:{width:"200px"},attrs:{href:"javascript:;"}},[t._v("提交微信审核")]):i("a",{staticClass:"blue",staticStyle:{width:"200px"},attrs:{href:"javascript:;"},on:{click:t.Auditing}},[t._v("提交微信审核")]),t._v(" "),i("a",{staticClass:"blue",staticStyle:{width:"200px"},attrs:{href:"javascript:;"},on:{click:t.openConfig}},[t._v("配置小程序")]),t._v(" "),i("a",{staticClass:"blue",staticStyle:{width:"200px"},attrs:{href:"javascript:;"},on:{click:t.getQRcode}},[t._v("小程序体验二维码")])])]),t._v(" "),t._m(6),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"online-sub fl"},[t._v("提示:")]),t._v(" "),i("div",{staticClass:"rightHalf"},[i("p",{staticClass:"name"},[t._v("需提交小程序二维码校验文件后,方可进行小程序登录。")]),t._v(" "),i("p",{staticClass:"name"},[t._v("步骤一：登录小程序后台，点击左方侧边栏选中“设置”")]),t._v(" "),i("p",{staticClass:"name"},[t._v("步骤二：设置中选择“开发设置”，滑动至最下方“扫普通链接二维码打开小程序”，点击“添加”")]),t._v(" "),i("p",{staticClass:"name"},[t._v("步骤三：二维码规则处填写\n\t\t\t\t\t\t"),i("input",{staticClass:"url urlo inpurl",attrs:{type:"text",value:"'https://wx.ishandian.net/MiniPro?oid='",readonly:"true"}}),i("span",{staticStyle:{color:"#29A8E0","font-size":"16px"},on:{click:t.copyCode}},[t._v("点击复制")])]),t._v(" "),i("p",{staticClass:"name"},[t._v("步骤四：在“配置普通链接二维码规则”内，点击“下载校验文件”")]),t._v(" "),i("p",{staticClass:"name"},[t._v("步骤五：打开校验文件，复制文件名与文件内容粘贴至下方，点击保存。")]),t._v(" "),i("a",{staticClass:"blue",staticStyle:{width:"200px","margin-top":"10px"},attrs:{href:"javascript:;"},on:{click:t.openCheckWin}},[t._v("配置校验文件")])])])]]:[t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"verticalBar"},[t._m(2),t._v(" "),i("div",{staticClass:"onRight fl clearfix"},[i("a",{staticClass:"blue btn fl",attrs:{href:"javascript:void(0)"},on:{click:t.addWeChat}},[t._v("授权微信小程序")]),t._v(" "),t._m(3)])]),t._v(" "),t._m(4),t._v(" "),i("div",{staticClass:"verticalBar"},[i("div",{staticClass:"vertical fl"}),t._v(" "),i("div",{staticClass:"onRight fl clearfix"},[i("a",{staticClass:"blue btn fl",attrs:{href:"javascript:void(0)"},on:{click:t.registrationApplet}},[t._v("注册小程序")])])])],t._v(" "),t.showWin?i("programWin",{on:{getAppliedWin:t.getResult}}):t._e(),t._v(" "),t.codeWin?i("qrcode",{on:{getcodeResult:t.getcodeResult}}):t._e(),t._v(" "),t.checkWin?i("checkFile",{on:{getCheckWin:t.getcheckResult}}):t._e()],2)};n._withStripped=!0;var s=i("81a2"),a=i("f6ce");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(s,a){try{var r=e[s](a),c=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(c).then(function(t){n("next",t)},function(t){n("throw",t)});t(c)}("next")})}}var c={data:function(){return{number:"",secret:"",numberStatus:!0,secretStatus:!0,isMember:!1,userData:Object,show:!1,auth_code:"",showWin:!1,isAuth:!1,showConfig:!1,authMiniBackground:"",authMiniAppName:"",appletQrcode:"",codeWin:!1,reviewStatus:"",reviewObj:{0:"审核成功",1:"审核失败",2:"审核中"},checkWin:!1}},methods:{getResult:function(t){"ok"==t&&this.addWeChat(),"cancel"==t&&this.getConfig(),this.showWin=!1},getConfigs:function(t,e){this.showConfig=t,this.authMiniBackground=e},openConfig:function(){this.showConfig=!0},selectBusinessHours:function(){this.isMember=!this.isMember},registrationApplet:function(){window.open("https://mp.weixin.qq.com")},addWeChat:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getAuthUrl({data:{shopId:t.userData.currentShop.id,redirect_uri:document.location.toString(),auth_type:2}});case 2:(i=e.sent)&&(t.showWin=!0,window.open(i));case 4:case"end":return e.stop()}},e,t)}))()},GetQueryString:function(t){var e=document.location.toString().split("?");if(e.length>1){for(var i=e[e.length-1].split("&"),n=[],s=0;s<i.length;s++)if(null!=(n=i[s].split("="))&&n[0]==t)return unescape(n[1]);return""}return""},setAuth:function(t){var e=this;return r(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.a.setAuth({data:{auth_code:t}});case 2:i.sent&&(e.isAuth=!0,e.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"授权成功"}));case 4:case"end":return i.stop()}},i,e)}))()},reauthorization:function(){this.isAuth=!1,this.addWeChat()},checkForm:function(t){return""==this.number||8!=this.number.length&&10!=this.number.length?(this.numberStatus=!1,t&&this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"商户号必须为8位或10位数字"}),!1):(this.numberStatus=!0,""==this.secret||32!=this.secret.length?(this.secretStatus=!1,t&&this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"商户秘钥必须为32位"}),!1):(this.secretStatus=!0,!0))},Auditing:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.Auditing({data:{merchantId:"",merchantSecret:""}});case 2:e.sent&&(t.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"已提交微信审核"}),t.getConfig());case 4:case"end":return e.stop()}},e,t)}))()},getConfig:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getWechatConfig({data:{shopId:t.userData.currentShop.id}});case 2:(i=e.sent)&&(t.isAuth=!1,""!=i.authMiniAppId&&(t.isAuth=!0,t.number=i.miniAppId,t.secret=i.miniAppSecret,t.authMiniAppName=i.authMiniAppName),""!=i.auditData&&(t.reviewStatus=i.auditData.status),t.authMiniBackground=i.authMiniBackground);case 4:case"end":return e.stop()}},e,t)}))()},getQRcode:function(){this.codeWin=!0},getcodeResult:function(){this.codeWin=!1},releaseCode:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.release({data:{}});case 2:e.sent&&t.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"发布成功"});case 4:case"end":return e.stop()}},e,t)}))()},deleteAuth:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.deleteAuth({data:{type:2}});case 2:e.sent&&(t.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"解除授权成功"}),t.getConfig());case 4:case"end":return e.stop()}},e,t)}))()},openCheckWin:function(){this.checkWin=!0},getcheckResult:function(){this.checkWin=!1},copyCode:function(){document.getElementsByClassName("inpurl")[0].select(),document.execCommand("copy"),this.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"复制成功"})}},components:{programWin:function(){return i.e("business_win").then(i.bind(null,"c7e9"))},appletConfig:function(){return i.e("applet_configuration").then(i.bind(null,"67de"))},qrcode:function(){return i.e("qrcode_win").then(i.bind(null,"5c3c"))},checkFile:function(){return i.e("check_file_win").then(i.bind(null,"e1a6"))}},mounted:function(){this.userData=a.a.session("userShop"),this.getConfig()}},o=(i("4c22"),i("6ceb")),u=Object(o.a)(c,n,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"titles"},[this._v("小程序授权步骤")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"first"},[e("span",{staticClass:"round"},[this._v("1")]),this._v(" "),e("span",{staticClass:"theText"},[this._v("将微信小程序授权给闪店,系统会自动生成店铺小程序,并提交到微信审核;您不需要做复杂操作,即可获得店铺的微信小程序。")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"vertical fl"},[e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v(" 注:你的小程序的主题必须是【企业】,并开通了微信支付,才能具备支付权限。\n\t\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"first"},[e("span",{staticClass:"round"},[this._v("2")]),this._v(" "),e("span",{staticClass:"theText"},[this._v("如果还没有注册微信小程序,点击按钮注册;注册成功后,再授权给闪店即可。\n\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"titles"},[this._v("设置微信支付")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"titles",staticStyle:{width:"160px"}},[this._v("小程序二维码规则配置")]),this._v(" "),e("div",{staticClass:"line",staticStyle:{width:"580px"}})])}],!1,null,"4495b46d",null);u.options.__file="src\\module\\public_number_configuration\\program_config\\small_program.vue";e.default=u.exports}}]);