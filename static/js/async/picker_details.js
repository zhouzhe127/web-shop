(window.webpackJsonp=window.webpackJsonp||[]).push([["picker_details"],{"1ce9":function(t,i,e){"use strict";var a=e("3052");e.n(a).a},3052:function(t,i,e){},ffec:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"people_del"}},[t.isPickerDetail?e("div",[e("div",{staticClass:"ic-title"},[e("div",{staticClass:"text"},[t._v("\n\t\t\t  "+t._s(t.fromPicking?"领料详情":"领料人详情")+"\n\t\t\t")]),t._v(" "),e("div",{staticClass:"dashed"})]),t._v(" "),t.fromPicking?t._e():[e("section",{staticClass:"ic-contern"},[e("div",{staticClass:"all-contern"},[e("span",{staticClass:"span_contern"},[t._v("领料人："+t._s(t.info.name))])])])],t._v(" "),t.fromPicking?[e("section",{staticClass:"ic-contern"},[e("div",{staticClass:"all-contern"},[t._v("\n\t\t\t\t\t领料原因："+t._s(t.detail.reason)+"\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"all-contern"},[e("span",{staticClass:"span_contern"},[t._v("领料人："+t._s(t.detail.ownerName))]),t._v(" "),e("span",{staticClass:"span_contern"},[t._v("操作人："+t._s(t.detail.creatorName))])]),t._v(" "),e("div",{staticClass:"all-contern"},[t._v("\n\t\t\t\t\t备注："+t._s(t.detail.remarks?t.detail.remarks:"--")+"\n\t\t\t\t")])])]:t._e(),t._v(" "),e("div",{staticClass:"list_num"},[e("section",{staticClass:"totle"},[e("div",{staticClass:"head"},[t._v("\n\t\t\t\t\t所领物料 · 共"),e("span",{staticClass:"wen_zi"},[t._v(t._s(t.detailList.length))]),t._v("个条目\n\t\t\t\t\t"),e("span",{staticClass:"changeList",on:{click:function(i){t.changeList()}}},[t._v(t._s(t.isChangeList?"简洁":"详细"))])]),t._v(" "),e("ul",{staticClass:"oUl oulFirst"},[e("li",[t._v("序号")]),t._v(" "),e("li",[t._v("物料名")]),t._v(" "),e("li",[t._v("分类")]),t._v(" "),e("li",[t._v("类型")]),t._v(" "),e("li",[t._v("领料单位选择")]),t._v(" "),e("li",[t._v(t._s(t.fromPicking?"领料数量/重量":"剩余数量/重量"))])]),t._v(" "),0==t.detailList.length?e("ul",{staticStyle:{width:"100%",color:"orange"}},[e("li",{staticStyle:{height:"50px","line-height":"50px","text-align":"center"}},[t._v("无记录")])]):t._e(),t._v(" "),t._l(t.detailList,function(i,a){return 0!=t.detailList.length?e("section",{key:a,staticStyle:{clear:"both"}},[e("ul",{staticClass:"oUl oulSecond"},[e("li",[t._v("\n\t\t\t\t\t\t\t"+t._s(a+1)+"\n\t\t\t\t\t\t")]),t._v(" "),e("li",{staticClass:"over_hide",attrs:{title:i.materialName}},[t._v(t._s(i.materialName))]),t._v(" "),e("li",{staticClass:"over_hide",attrs:{title:i.materialCategoryName}},[t._v(t._s(i.materialCategoryName))]),t._v(" "),e("li",[t._v(t._s(t.getType(i.materialType)))]),t._v(" "),e("li",{staticStyle:{"line-height":"0","margin-top":"15px"},on:{click:function(e){t.backItem(i,i.indexDe)}}},[e("selectBtn",{attrs:{sorts:i.unitList,index:i.indexDe,width:"80"},on:{emit:t.selectType}})],1),t._v(" "),e("li",{staticClass:"over_hide",attrs:{title:i.showSurplus}},[t._v(t._s(i.showSurplus))])]),t._v(" "),e("div",{staticStyle:{"border-bottom":"3px solid #f7f7f7"}},[t.isChangeList&&i.batch&&0!=i.batch.length?e("ul",{staticClass:"oulThd font16"},[e("li",[t._v("序号")]),t._v(" "),e("li",[t._v("批次编码")]),t._v(" "),e("li",[t._v("生产日期")]),t._v(" "),e("li",[t._v("供应商")]),t._v(" "),e("li",[t._v("进价")]),t._v(" "),e("li",[t._v("所属仓库")]),t._v(" "),e("li",[t._v(t._s(t.fromPicking?"领料数量/重量":"剩余数量/重量"))])]):t._e(),t._v(" "),t._l(i.batch,function(a,s){return t.isChangeList&&i.batch&&0!=i.batch.length?e("ul",{key:s,staticClass:"oulThd"},[e("li",[t._v("批次"+t._s(s+1))]),t._v(" "),e("li",{staticClass:"over_hide",attrs:{title:a.batchCode}},[t._v(t._s(a.batchCode))]),t._v(" "),e("li",[t._v(t._s(t.transformTime(a.productionTime)))]),t._v(" "),e("li",{staticClass:"over_hide",attrs:{title:a.supplier}},[t._v(t._s(a.supplier))]),t._v(" "),e("li",{staticClass:"over_hide",attrs:{title:a.purchasePrice}},[t._v(t._s(a.purchasePrice))]),t._v(" "),e("li",{staticClass:"over_hide",attrs:{title:a.warehouseName+"-"+a.areaName}},[t._v(t._s(a.warehouseName)+"-"+t._s(a.areaName))]),t._v(" "),e("li",{staticClass:"over_hide",attrs:{title:a.showSurplus}},[t._v(t._s(a.showSurplus))])]):t._e()})],2)]):t._e()})],2)])],2):t._e()])};a._withStripped=!0;var s=e("f6ce"),n=e("bbb9"),l=e("81a2"),r=e("05dd");function c(t){return function(){var i=t.apply(this,arguments);return new Promise(function(t,e){return function a(s,n){try{var l=i[s](n),r=l.value}catch(t){return void e(t)}if(!l.done)return Promise.resolve(r).then(function(t){a("next",t)},function(t){a("throw",t)});t(r)}("next")})}}var o={data:function(){return{detailList:[],fromPicking:{},isChangeList:!1,isPickerDetail:!0,item:{},detail:{},info:""}},mounted:function(){this.fromPicking=s.a.session("listDetail"),this.info=s.a.session("info"),this.initBtn()},destroyed:function(){s.a.session("listDetail",null)},methods:{initBtn:function(){var t=this;if(this.fromPicking){this.$store.commit("setHeaderTil",{type:"push",params:[{title:"查看详情"}]});var i=[{name:"返回",className:"huiC",fn:function(){s.a.session("listDetail",null),s.a.session("isBackPickingRecord",!0),t.$router.push({path:"../pickingList",query:t.$route.query})}}];this.$store.commit("setPageTools",i),this.initOne()}else{this.$store.commit("setHeaderTil",{type:"push",params:[{title:"领料人详情"}]});var e=[{name:"返回",className:"huiC",fn:function(){t.$store.commit("setPageTools",{}),s.a.session("numType",{num:1}),t.$router.push({path:"../pickingList",query:t.$route.query})}},{name:"领料盘库",className:"pickCheck",fn:function(){t.isPickerDetail=!1;var i={storageInfo:t.detailList,info:t.info};s.a.session("plateStorage",i),t.$router.push({path:"../pickingList/plateStorage",query:t.$route.query})}}];this.$store.commit("setPageTools",e),this.getDetailByOwner()}},getType:function(t){var i={0:"成品",1:"半成品",2:"普通物料"};for(var e in i)if(e==t)return i[e];return"--"},changeList:function(){this.isChangeList=!this.isChangeList},selectType:function(t){this.backItem(this.item,t)},backItem:function(t,i){this.item=t,t.indexDe=i;for(var e=t.unitList[i],a="",s=0;s<t.materialUnit.length;s++)t.materialUnit[s].name==e&&(a=t.materialUnit[s].value);if(t.showSurplus=r.a.comUnit(t.surplus,a,e,t.minName),t.batch&&0!=t.batch.length)for(var n=0;n<t.batch.length;n++)t.batch[n].showSurplus=r.a.comUnit(t.batch[n].surplus,a,e,t.minName)},unitConversion:function(){for(var t=0;t<this.detailList.length;t++){for(var i=[],e=0;e<this.detailList[t].materialUnit.length;e++){1==this.detailList[t].materialUnit[e].isDefault&&(this.detailList[t].defaultName=this.detailList[t].materialUnit[e].name,this.detailList[t].defaultValue=this.detailList[t].materialUnit[e].value),1==this.detailList[t].materialUnit[e].isMin&&(this.detailList[t].minName=this.detailList[t].materialUnit[e].name),i=i.concat(this.detailList[t].materialUnit[e].name);for(var a=0;a<i.length;a++)if(i[a]==this.detailList[t].defaultName){var s=i.splice(a,1);i.unshift(s[0])}this.detailList[t].unitList=i}if(this.detailList[t].indexDe=0,this.detailList[t].showSurplus=r.a.comUnit(this.detailList[t].surplus,this.detailList[t].defaultValue,this.detailList[t].defaultName,this.detailList[t].minName),this.detailList[t].batch&&0!=this.detailList[t].batch.length)for(var n=0;n<this.detailList[t].batch.length;n++)this.detailList[t].batch[n].showSurplus=r.a.comUnit(this.detailList[t].batch[n].surplus,this.detailList[t].defaultValue,this.detailList[t].defaultName,this.detailList[t].minName)}},getDetailByOwner:function(){var t=this;return c(regeneratorRuntime.mark(function i(){var e,a,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,l.a.getDetailByOwner({data:{owner:t.info.id}});case 2:if(e=i.sent){for(a=0;a<e.length;a++)if(e[a].showSurplus="",e[a].useNum="",e[a].useWeight="",e[a].backNum="",e[a].backWeight="",e[a].usemin="",e[a].backmin="",e[a].selUnit="",e[a].unit="",e[a].index=0,e[a].batch&&0!=e[a].batch.length)for(s=0;s<e[a].batch.length;s++)e[a].batch[s].useNum="",e[a].batch[s].useWeight="",e[a].batch[s].backNum="",e[a].batch[s].backWeight="",e[a].batch[s].usemin="",e[a].batch[s].backmin="",e[a].batch[s].selUnit="",e[a].batch[s].unit="",e[a].batch[s].showSurplus="";t.detailList=n.a.deepCopy(e),t.unitConversion()}case 4:case"end":return i.stop()}},i,t)}))()},initOne:function(){var t=this;return c(regeneratorRuntime.mark(function i(){var e,a,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,l.a.MaterialreceiveGetLogDetail({data:{id:t.fromPicking.id}});case 2:if(e=i.sent){for(t.detail=e,a=0;a<e.material.length;a++)if(e.material[a].showSurplus="",e.material[a].surplus=e.material[a].number,e.material[a].batch&&0!=e.material[a].batch.length)for(s=0;s<e.material[a].batch.length;s++)e.material[a].batch[s].showSurplus="",e.material[a].batch[s].surplus=e.material[a].batch[s].number;t.detailList=n.a.deepCopy(e.material),t.unitConversion()}case 4:case"end":return i.stop()}},i,t)}))()},transformTime:function(t){return n.a.format(new Date(1e3*Number(t)),"yyyy-MM-dd")},storageReturn:function(t){var i=this;this.isPickerDetail=t,Promise.resolve().then(function(){i.initBtn()})}},components:{plateStorage:function(){return e.e("plate_storage").then(e.bind(null,"f7567"))},selectBtn:function(){return e.e("select_btn").then(e.bind(null,"3d41"))}}},u=(e("1ce9"),e("6ceb")),h=Object(u.a)(o,a,[],!1,null,"d3022a5a",null);h.options.__file="src\\module\\invoicing_system\\picking_list\\picker_details.vue";i.default=h.exports}}]);