(window.webpackJsonp=window.webpackJsonp||[]).push([["new_schedule"],{d508:function(t,e,a){t.exports=a.p+"images/evret.dc1bc2da.jpg"},d5c7:function(t,e,a){},d94d:function(t,e,a){t.exports=a.p+"images/examine.421ae45c.jpg"},dca0:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.slegoods?r(t.componentId,{tag:"component",attrs:{dstShopId:t.detailData.shopId,srcShopId:t.outWare.shopId,shopId:t.outWare.shopId,wid:t.outWare.id,sleCommodity:t.goodsArr,sleSupplies:t.suppliesArr},on:{select:t.selectGoods}}):r("div",{attrs:{id:"shipment"}},[r("div",{staticClass:"topBox"},[r("div",{staticClass:"title"},[r("i"),t._v(" "),r("h3",[t._v("新建调度")]),t._v(" "),t._l(70,function(t){return r("div",{key:t,staticClass:"dian"})})],2),t._v(" "),r("div",{staticClass:"innerBox"},[r("ul",[r("li",[r("span",[t._v("申请单号：")]),t._v(" "),r("span",[t._v(t._s(t.detailData.code))])]),t._v(" "),r("li",[r("span",[t._v("审核状态：")]),t._v(" "),r("span",[t._v(t._s(t.auditStatus[t.detailData.auditStatus-1]))])]),t._v(" "),r("li",[r("span",[t._v("调度状态：")]),t._v(" "),r("span",[t._v(t._s(t.dispatchStatus[t.detailData.dispatchStatus-1]))])]),t._v(" "),r("li",[r("span",[t._v("入货仓库：")]),t._v(" "),r("span",[t._v(t._s(t.detailData.wName))]),t._v(" "),r("img",{attrs:{src:a("d94d"),alt:""},on:{click:function(e){t.examine(!1)}}})]),t._v(" "),r("li",[r("span",[t._v("出货仓库：")]),t._v(" "),r("span",[t._v(t._s(t.outWare.name))]),t._v(" "),t.outWare?r("img",{attrs:{src:a("d94d"),alt:""},on:{click:function(e){t.examine(t.outWare)}}}):t._e(),t._v(" "),r("img",{attrs:{src:a("d508"),alt:""},on:{click:function(e){t.addShow=!0}}})])]),t._v(" "),r("ul",[r("li",[r("span",[t._v("申请人：")]),t._v(" "),r("span",[t._v(t._s(t.detailData.createName||"--"))])]),t._v(" "),r("li",[r("span",[t._v("申请时间：")]),t._v(" "),r("span",[t._v(t._s(t.getTime(t.detailData.createTime)))])]),t._v(" "),r("li",[r("span",[t._v("原因：")]),t._v(" "),r("span",[t._v(t._s(t.detailData.reason||"--"))])]),t._v(" "),r("li",[r("span",[t._v("备注：")]),t._v(" "),r("span",[t._v(t._s(t.detailData.remark||"--"))])])])])]),t._v(" "),r("ul",{staticClass:"tebBox"},t._l(t.tebData,function(e,a){return r("li",{key:a,class:{active:t.tabactive==a},on:{click:function(e){t.tebClick(a)}}},[t._v(t._s(e))])})),t._v(" "),r("com-table",{attrs:{listName:(t.tabactive?"物料":"商品")+"列表",listHeight:60,mainBox:{overflow:"visible"},listConStyle:{overflow:"visible"},titleData:t.titleList,allTotal:t.introData.length,introData:t.introData},scopedSlots:t._u([{key:"title-1",fn:function(e){return r("span",{},[t._v(t._s(t.tabactive?"物料":"商品")+"名称")])}},{key:"list-4",fn:function(e){return r("span",{staticClass:"detailsBtn",on:{click:t.autoFill}},[t._v("自动填充")])}},{key:"con-0",fn:function(e){return r("div",{},[r("span",{staticClass:"detailsBtn",class:{errbtn:e.data.errResion},staticStyle:{"text-decoration":"none"},on:{click:function(a){t.chooseBatch(e.data)}}},[t._v("批次选择")]),t._v(" "),e.data.noPrev?t._e():r("div",{staticClass:"delBtn"},[r("span",[t._v("|")]),t._v(" \n\t\t\t\t\t"),r("span",{staticClass:"del",on:{click:function(a){t.delData(e.index)}}},[t._v("删除")])])])}},{key:"con-4",fn:function(e){return r("div",{staticClass:"inputBox"},[e.data.errResion?r("div",{staticClass:"errStyle"},[r("span",[t._v("!")]),t._v(t._s(e.data.errResion))]):r("div",{staticClass:"inputBox"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.data.outNum,expression:"props.data.outNum"}],staticClass:"input-num",class:{active:e.data.batchList.length>0&&e.data.outNum>0},attrs:{type:"text",placeholder:"输入数字",maxlength:"9",disabled:e.data.batchList.length>0&&e.data.outNum>0},domProps:{value:e.data.outNum},on:{input:[function(a){a.target.composing||t.$set(e.data,"outNum",a.target.value)},function(a){t.outNumChange(a,e.data)}]}}),t._v(" "),e.data.unitList&&0==e.data.batchList.length?r("selectBtn",{staticStyle:{backgroundColor:"#ffffff"},attrs:{name:e.data.selectName,sorts:e.data.unitList,width:"90"},on:{selOn:function(a){return t.getUnit(a,e.index)}}}):r("span",{staticClass:"unitBox",class:{active:e.data.batchList.length>0&&e.data.outNum>0}},[t._v(t._s(e.data.selectName))])],1)])}},{key:"con-3",fn:function(e){return r("div",{staticClass:"surplusBox"},[0===t.tabactive?r("span",[t._v(t._s(e.data.num)+t._s(e.data.selectName))]):r("span",{attrs:{title:t.setUnit(e.data.num,e.data.unitArr)}},[t._v(t._s(t.setUnit(e.data.num,e.data.unitArr,e.data.unitName)))])])}},{key:"con-5",fn:function(e){return r("div",{staticClass:"surplusBox"},[0===t.tabactive?r("span",[t._v(t._s(e.data.surplus)+t._s(e.data.selectName))]):r("span",{attrs:{title:t.setUnit(e.data.surplus,e.data.unitArr,e.data.unitName)}},[t._v(t._s(t.setUnit(e.data.surplus,e.data.unitArr,e.data.unitName)))])])}}])}),t._v(" "),r("ul",{staticClass:"bottomBtn"},[r("li",{on:{click:t.back}},[t._v("取消")]),t._v(" "),r("li",{on:{click:t.continued}},[t._v("继续添加调度单")]),t._v(" "),r("li",{on:{click:t.confirm}},[t._v("确定")])]),t._v(" "),t.waremessage?r("waremessage-win",{attrs:{wid:t.sleWid,width:500,height:200,title:"仓库信息"},on:{winEvent:function(e){t.waremessage=!1}}}):t._e(),t._v(" "),t.addShow?r("add-store",{attrs:{pObj:t.comObj},on:{throwWin:t.throwWin}}):t._e(),t._v(" "),t.showgoodswin?r("batchWin",{attrs:{needItem:t.checkList,wid:t.outWare.id,shopId:t.outWare.shopId},on:{throwWin:t.goodsthrowWin}}):t._e(),t._v(" "),t.showsupplieswin?r("clusion-supplies",{attrs:{wid:t.outWare.id,shopId:t.outWare.shopId,needItem:t.checkList},on:{throwWin:t.goodsthrowWin}}):t._e()],1)],1)};r._withStripped=!0;var i=a("81a2"),n=a("f6ce"),s=a("bbb9"),o=a("05dd");function u(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function r(i,n){try{var s=e[i](n),o=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(o).then(function(t){r("next",t)},function(t){r("throw",t)});t(o)}("next")})}}var l={data:function(){return{componentId:"",tabactive:0,tebData:["商品","物料"],waremessage:!1,auditStatus:["待审核","已取消","审核未通过","审核通过"],dispatchStatus:["未调度","调度中","未出货","全部取消","带入货","已完成","已完成（异常）"],titleList:[{titleName:"操作"},{titleName:"",dataName:"itemName"},{titleName:"已出数量",dataName:"eliteNum"},{titleName:"需求数量",dataName:"num",sort:!0},{titleName:"出货量",titleStyle:{overflow:"visible",minWidth:"200px"}},{titleName:"库存余量",dataName:"surplus",sort:!0}],introData:"",detailData:"",slegoods:!1,comObj:"",addShow:!1,sleWid:"",outWare:"",goodsArr:"",suppliesArr:"",getGoods:[],getSupplies:[],checkList:"",showgoodswin:!1,showsupplieswin:!1,itemList:{},goodsoutedNum:"",suppliesoutedNum:""}},methods:{init:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var a,r,n,s,o,c,l,d,m,p,v,h,f,b,N,g,_,w,x,y,k,D,S,I,L,W,A,C,O,R,B,j,G,E,U,V,$;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.detailData.itemList){e.next=151;break}return t.getSupplies=[],t.getGoods=[],a=t.detailData.itemList.goods,r=t.detailData.itemList.material,n=[],s=[],e.next=9,i.a.invoic_matchItemListWithOutgoingNum({data:{itemList:t.itemList,srcShopId:t.detailData.shopId,dstShopId:t.outWare.shopId,applyId:t.detailData.id}});case 9:if(!(o=e.sent).goods||!a){e.next=70;break}c=!0,l=!1,d=void 0,e.prev=14,m=a[Symbol.iterator]();case 16:if(c=(p=m.next()).done){e.next=52;break}v=p.value,h=!0,f=!0,b=!1,N=void 0,e.prev=22,g=o.goods[Symbol.iterator]();case 24:if(f=(_=g.next()).done){e.next=34;break}if((w=_.value).importId!=v.itemId){e.next=31;break}return v.id=w.exportId,t.getGoods.push(v),h=!1,e.abrupt("break",34);case 31:f=!0,e.next=24;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(22),b=!0,N=e.t0;case 40:e.prev=40,e.prev=41,!f&&g.return&&g.return();case 43:if(e.prev=43,!b){e.next=46;break}throw N;case 46:return e.finish(43);case 47:return e.finish(40);case 48:h&&(v.errResion="无法匹配",t.setErr(o.goodsError,v,"商品"),n.push(v));case 49:c=!0,e.next=16;break;case 52:e.next=58;break;case 54:e.prev=54,e.t1=e.catch(14),l=!0,d=e.t1;case 58:e.prev=58,e.prev=59,!c&&m.return&&m.return();case 61:if(e.prev=61,!l){e.next=64;break}throw d;case 64:return e.finish(61);case 65:return e.finish(58);case 66:return t.setOutNum(t.getGoods,!1,"itemName"),e.next=69,t.getgoodsSurplus(t.getGoods,1);case 69:t.goodsArr=[].concat(u(t.getGoods),n);case 70:if(!o.material||!r){e.next=151;break}x=!0,y=!1,k=void 0,e.prev=74,D=r[Symbol.iterator]();case 76:if(x=(S=D.next()).done){e.next=133;break}I=S.value,L=!0,I.selectValue=1,W=!0,A=!1,C=void 0,e.prev=83,O=o.material[Symbol.iterator]();case 85:if(W=(R=O.next()).done){e.next=115;break}if((B=R.value).importId!=I.itemId){e.next=112;break}if(I.id=B.exportId,L=!1,!I.unitRelation){e.next=110;break}for(j=!0,G=!1,E=void 0,e.prev=94,U=I.unitRelation[Symbol.iterator]();!(j=(V=U.next()).done);j=!0)$=V.value,I.unitName==$.name&&(I.selectValue=$.value);e.next=102;break;case 98:e.prev=98,e.t2=e.catch(94),G=!0,E=e.t2;case 102:e.prev=102,e.prev=103,!j&&U.return&&U.return();case 105:if(e.prev=105,!G){e.next=108;break}throw E;case 108:return e.finish(105);case 109:return e.finish(102);case 110:return t.getSupplies.push(I),e.abrupt("break",115);case 112:W=!0,e.next=85;break;case 115:e.next=121;break;case 117:e.prev=117,e.t3=e.catch(83),A=!0,C=e.t3;case 121:e.prev=121,e.prev=122,!W&&O.return&&O.return();case 124:if(e.prev=124,!A){e.next=127;break}throw C;case 127:return e.finish(124);case 128:return e.finish(121);case 129:L&&(I.errResion="无法匹配",t.setErr(o.materialError,I,"物料"),s.push(I));case 130:x=!0,e.next=76;break;case 133:e.next=139;break;case 135:e.prev=135,e.t4=e.catch(74),y=!0,k=e.t4;case 139:e.prev=139,e.prev=140,!x&&D.return&&D.return();case 142:if(e.prev=142,!y){e.next=145;break}throw k;case 145:return e.finish(142);case 146:return e.finish(139);case 147:return t.setOutNum(t.getSupplies,!0,"itemName"),e.next=150,t.getgoodsSurplus(t.getSupplies,2);case 150:t.suppliesArr=[].concat(u(t.getSupplies),s);case 151:case"end":return e.stop()}},e,t,[[14,54,58,66],[22,36,40,48],[41,,43,47],[59,,61,65],[74,135,139,147],[83,117,121,129],[94,98,102,110],[103,,105,109],[122,,124,128],[140,,142,146]])}))()},setErr:function(t,e,a){var r="商品"==a?"goodsId":"id",i=function(t,e,a){var i=!0,n=!1,s=void 0;try{for(var o,u=t[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){if(o.value[r]==e.itemId){e.errResion=a;break}}}catch(t){n=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(n)throw s}}};for(var n in t)switch(n){case"nameError":i(t[n],e,a+"无法匹配");break;case"unitError":i(t[n],e,"单位无法匹配");break;case"typeError":i(t[n],e,a+"类型匹配错误")}},tebClick:function(t){this.tabactive=t,this.introData=0==t?this.goodsArr:this.suppliesArr},examine:function(t){this.sleWid=t?t.id:this.detailData.wid,this.waremessage=!0},selectGoods:function(t){this.slegoods=!1,t&&this.setlistData(t),this.titleBtn()},throwWin:function(t,e){this.addShow=!1,"ok"==t&&(e.id==this.detailData.wid?(this.alert("出货仓库不能与入货仓库重复,请重新选择"),this.addShow=!0):(this.comObj.owner=e,this.outWare=e,this.init()))},back:function(){this.$router.push({path:"/admin/conclusionList"})},titleBtn:function(){var t=this;this.$store.commit("setPageTools",[{name:"添加商品",className:["wearhouse handle"],fn:function(){t.outWare?(t.slegoods=!0,t.componentId="selectGoods"):t.alert("请选择出货仓库")}},{name:"添加物料",className:["wearhouse handle"],fn:function(){t.outWare?(t.slegoods=!0,t.componentId="selectSupplies"):t.alert("请选择出货仓库")}}])},chooseBatch:function(t){t.errResion||(0==this.tabactive?this.showgoodswin=!0:this.showsupplieswin=!0,this.checkList=t)},delData:function(t){this.introData.splice(t,1)},getTime:function(t){return s.a.format(1e3*parseInt(t),"yyyy-MM-dd hh:mm")},setlistData:function(t){if("selectGoods"==this.componentId){var e=!0,a=!1,r=void 0;try{for(var i,n=t[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var s=i.value;s.itemName=s.goodsName,s.id=s.gid,s.outNum="",s.num=0,s.selectName=s.unit,s.batchList=[],s.eliteNum=0,s.eNum=0}}catch(t){a=!0,r=t}finally{try{!e&&n.return&&n.return()}finally{if(a)throw r}}this.setOutNum(t,!1,"goodsName"),this.goodsArr=[].concat(u(this.getGoods),u(t)),0==this.tabactive&&(this.introData=this.goodsArr)}else if("selectSupplies"==this.componentId){var o=!0,c=!1,l=void 0;try{for(var d,m=t[Symbol.iterator]();!(o=(d=m.next()).done);o=!0){var p=d.value;p.itemName=p.name,p.outNum="",p.num=0,p.unitList=[],p.batchList=[],p.unitArr=p.unit,p.eNum=0,p.eliteNum=0;var v=[],h=!0,f=!1,b=void 0;try{for(var N,g=p.unitArr[Symbol.iterator]();!(h=(N=g.next()).done);h=!0){var _=N.value;1==_.isDefault?(v.unshift(_),p.unitList.unshift(_.name)):(v.push(_),p.unitList.push(_.name))}}catch(t){f=!0,b=t}finally{try{!h&&g.return&&g.return()}finally{if(f)throw b}}p.unit=v,p.selectName=p.unit[0].name,p.selectValue=p.unit[0].value}}catch(t){c=!0,l=t}finally{try{!o&&m.return&&m.return()}finally{if(c)throw l}}this.setOutNum(t,!0,"name"),this.suppliesArr=[].concat(u(this.getSupplies),u(t)),1==this.tabactive&&(this.introData=this.suppliesArr)}},getUnit:function(t,e){var a=this.introData[e];this.$set(a,"outNum",""),a.selectName=this.introData[e].unit[t].name,a.selectValue=this.introData[e].unit[t].value},goodsthrowWin:function(t,e){var a=this;if(this.showgoodswin=!1,this.showsupplieswin=!1,"ok"==t){var r=0;this.checkList.batchList=[],e.map(function(t){t.outNum&&Number(t.outNum)>0&&(a.checkList.batchList.push(t),r+=Number(t.outNum))}),this.checkList.outNum=r}},autoFill:function(){var t=!0,e=!1,a=void 0;try{for(var r,i=this.introData[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var n=r.value;n.batchList="",Number(n.num)>Number(n.surplus)?(n.outNum<=0||!n.outNum)&&(n.outNum=1==this.tabactive?parseInt((Number(n.surplus)-Number(n.eNum))/Number(n.selectValue)):Number(n.surplus)-Number(n.eNum)):(n.outNum<=0||!n.outNum)&&(n.outNum=1==this.tabactive?parseInt((Number(n.num)-Number(n.eNum))/Number(n.selectValue)):Number(n.num)-Number(n.eNum)),(n.outNum<0||isNaN(n.outNum))&&(n.outNum=0)}}catch(t){e=!0,a=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw a}}},setUnit:function(t,e,a){var r="",i="",n=1,s=!0,u=!1,c=void 0;try{for(var l,d=e[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var m=l.value;1==m.isMin&&(i=m.name),"string"==typeof a||"number"==typeof a?m.name==a&&(r=m.name,n=m.value):1==m.isDefault&&(r=m.name,n=m.value)}}catch(t){u=!0,c=t}finally{try{!s&&d.return&&d.return()}finally{if(u)throw c}}return o.a.comUnit(t,n,r,i)},getgoodsSurplus:function(t,e){var a=this;return c(regeneratorRuntime.mark(function r(){var n,s,o,u,c,l,d,m,p,v,h,f,b,N,g,_,w;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(n=1==e?"invent_getGoodsNum":"invoiv_getMaterialNum",s=[],o=!0,u=!1,c=void 0,r.prev=5,l=t[Symbol.iterator]();!(o=(d=l.next()).done);o=!0)m=d.value,s.push(m.id);r.next=13;break;case 9:r.prev=9,r.t0=r.catch(5),u=!0,c=r.t0;case 13:r.prev=13,r.prev=14,!o&&l.return&&l.return();case 16:if(r.prev=16,!u){r.next=19;break}throw c;case 19:return r.finish(16);case 20:return r.finish(13);case 21:if(p=1==e?{gids:s.join(",")}:{mids:s.join(",")},!(s.length>0)){r.next=50;break}return r.next=25,i.a[n]({data:Object.assign(p,{wid:a.outWare.id,shopId:a.outWare.shopId})});case 25:v=r.sent,r.t1=regeneratorRuntime.keys(t);case 27:if((r.t2=r.t1()).done){r.next=50;break}for(h=r.t2.value,f=!0,b=!1,N=void 0,r.prev=32,g=v[Symbol.iterator]();!(f=(_=g.next()).done);f=!0)w=_.value,t[h].id==w.id&&(t[h].surplus=w.surplus);r.next=40;break;case 36:r.prev=36,r.t3=r.catch(32),b=!0,N=r.t3;case 40:r.prev=40,r.prev=41,!f&&g.return&&g.return();case 43:if(r.prev=43,!b){r.next=46;break}throw N;case 46:return r.finish(43);case 47:return r.finish(40);case 48:r.next=27;break;case 50:return r.abrupt("return",t);case 51:case"end":return r.stop()}},r,a,[[5,9,13,21],[14,,16,20],[32,36,40,48],[41,,43,47]])}))()},getOutedNum:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.All([{httpId:"invoic_getItemNum",data:{applyId:t.detailData.id,choose:0}},{httpId:"invoic_getItemNum",data:{applyId:t.detailData.id,choose:1}}]);case 2:a=e.sent,t.goodsoutedNum=a[0].data,t.suppliesoutedNum=a[1].data;case 5:case"end":return e.stop()}},e,t)}))()},setOutNum:function(t,e,a){var r=e?this.suppliesoutedNum:this.goodsoutedNum,i=!0,n=!1,s=void 0;try{for(var o,u=t[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var c=o.value;r[c[a]]&&(e?(c.eliteNum=this.setUnit(r[c[a]].num,r[c[a]].unitData,c.unitName),c.eNum=r[c[a]].num):(c.eliteNum=""+r[c[a]].num+r[c[a]].unit,c.eNum=r[c[a]].num))}}catch(t){n=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(n)throw s}}},outNumChange:function(t,e){e.outNum=/^\d*\.?\d+$/.test(e.outNum)?e.outNum:0,""!=e.outNum&&(0==this.tabactive?Number(e.outNum)>Number(e.surplus)&&(e.outNum=e.surplus):Number(e.outNum)*Number(e.selectValue)>Number(e.surplus)&&(e.outNum=parseInt(e.surplus/Number(e.selectValue))),e.noPrev?1==e.type?t.target.value=parseInt(e.outNum):t.target.value=(e.outNum+"").replace(/^(\d*)\.?\d{4}$/g,parseInt(1e3*e.outNum)/1e3):e.unitList||1==e.type?t.target.value=(e.outNum+"").replace(/^(\d*)\.?\d{4}$/g,parseInt(1e3*e.outNum)/1e3):t.target.value=parseInt(e.outNum),e.outNum=t.target.value)},alert:function(t,e){this.$store.commit("setWin",{title:e,winType:"alert",content:t})},continued:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var a,r,i,n,s,o,u,c,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processingData();case 2:if(!e.sent){e.next=48;break}for(a=!0,r=!1,i=void 0,e.prev=7,n=t.getSupplies[Symbol.iterator]();!(a=(s=n.next()).done);a=!0)s.value.outNum="";e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),r=!0,i=e.t0;case 15:e.prev=15,e.prev=16,!a&&n.return&&n.return();case 18:if(e.prev=18,!r){e.next=21;break}throw i;case 21:return e.finish(18);case 22:return e.finish(15);case 23:for(o=!0,u=!1,c=void 0,e.prev=26,l=t.getGoods[Symbol.iterator]();!(o=(d=l.next()).done);o=!0)d.value.outNum="";e.next=34;break;case 30:e.prev=30,e.t1=e.catch(26),u=!0,c=e.t1;case 34:e.prev=34,e.prev=35,!o&&l.return&&l.return();case 37:if(e.prev=37,!u){e.next=40;break}throw c;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return t.suppliesArr=t.getSupplies,t.goodsArr=t.getGoods,t.introData=0==t.tabactive?t.goodsArr:t.suppliesArr,e.next=47,t.getOutedNum();case 47:t.init();case 48:case"end":return e.stop()}},e,t,[[7,11,15,23],[16,,18,22],[26,30,34,42],[35,,37,41]])}))()},confirm:function(){var t=this;return c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processingData();case 2:e.sent&&t.$router.push({path:"/admin/conclusionList"});case 4:case"end":return e.stop()}},e,t)}))()},processingData:function(){var t=[],e=[],a=!0,r=!1,i=void 0;try{for(var n,o=this.goodsArr[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var u=n.value;if(u.outNum&&Number(u.outNum)>0){var c={id:u.id||u.gid};if(u.batchList&&u.batchList.length>0){var l=!0,d=!1,m=void 0;try{for(var p,v=u.batchList[Symbol.iterator]();!(l=(p=v.next()).done);l=!0){var h=p.value;Number(h.outNum)>0&&(Object.assign(c,{batchId:h.batchId,num:h.outNum}),t.push(s.a.deepCopy(c)))}}catch(t){d=!0,m=t}finally{try{!l&&v.return&&v.return()}finally{if(d)throw m}}}else Object.assign(c,{batchId:0,num:u.outNum}),t.push(c)}}}catch(t){r=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var f=!0,b=!1,N=void 0;try{for(var g,_=this.suppliesArr[Symbol.iterator]();!(f=(g=_.next()).done);f=!0){var w=g.value;if(w.outNum&&Number(w.outNum)>0){var x={mid:w.id,type:0,selectUnitName:w.selectName};if(w.batchList&&w.batchList.length>0){var y=!0,k=!1,D=void 0;try{for(var S,I=w.batchList[Symbol.iterator]();!(y=(S=I.next()).done);y=!0){var L=S.value;Number(L.outNum)>0&&(Object.assign(x,{batchId:L.batchId,num:L.outNum*Number(w.selectValue)}),e.push(s.a.deepCopy(x)))}}catch(t){k=!0,D=t}finally{try{!y&&I.return&&I.return()}finally{if(k)throw D}}}else Object.assign(x,{batchId:0,num:w.outNum*Number(w.selectValue)}),e.push(x)}}}catch(t){b=!0,N=t}finally{try{!f&&_.return&&_.return()}finally{if(b)throw N}}if(0==t.length&&0==e.length)return this.alert("请选择调度商品"),!1;var W={receiptNumber:"",reason:this.detailData.reason,remark:this.detailData.remark,outWarehouse:this.outWare.id,intoWarehouse:this.detailData.wid,applyId:this.detailData.id,goodsDetail:t,materialDetail:e};return this.addDispatch(W)},addDispatch:function(t){var e=this;return c(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.invoic_addDispatchOrder({data:t});case 2:return e.alert("调度成功！"),a.abrupt("return",!0);case 4:case"end":return a.stop()}},a,e)}))()}},mounted:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var a,r,i,s,o,u,c,l,d,m,p,v,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.detailData=n.a.session("details"),t.outWare=t.detailData.outWare,t.comObj=t.detailData.comObj,t.itemList.goods=[],t.itemList.material=[],!t.detailData.itemList){e.next=46;break}if(!t.detailData.itemList.goods){e.next=26;break}for(a=!0,r=!1,i=void 0,e.prev=10,s=t.detailData.itemList.goods[Symbol.iterator]();!(a=(o=s.next()).done);a=!0)u=o.value,Object.assign(u,{noPrev:!0,outNum:"",selectName:u.unitName,surplus:0,batchList:[],id:u.itemId,eliteNum:0,eNum:0}),c={goodsId:u.itemId,itemName:u.itemName,unit:u.unitName,type:1==u.type?0:1,barCode:u.barCode},t.itemList.goods.push(c);e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),r=!0,i=e.t0;case 18:e.prev=18,e.prev=19,!a&&s.return&&s.return();case 21:if(e.prev=21,!r){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:if(!t.detailData.itemList.material){e.next=46;break}for(l=!0,d=!1,m=void 0,e.prev=30,p=t.detailData.itemList.material[Symbol.iterator]();!(l=(v=p.next()).done);l=!0)h=v.value,Object.assign(h,{noPrev:!0,outNum:"",selectName:h.unitName,surplus:0,batchList:[],unitArr:h.unitRelation||[],id:h.itemId,eliteNum:0,eNum:0}),f={id:h.itemId,name:h.itemName},t.itemList.material.push(f);e.next=38;break;case 34:e.prev=34,e.t1=e.catch(30),d=!0,m=e.t1;case 38:e.prev=38,e.prev=39,!l&&p.return&&p.return();case 41:if(e.prev=41,!d){e.next=44;break}throw m;case 44:return e.finish(41);case 45:return e.finish(38);case 46:return t.titleBtn(),e.next=49,t.getOutedNum();case 49:return e.next=51,t.init();case 51:t.introData=t.goodsArr;case 52:case"end":return e.stop()}},e,t,[[10,14,18,26],[19,,21,25],[30,34,38,46],[39,,41,45]])}))()},destroyed:function(){sessionStorage.removeItem("details")},components:{comTable:function(){return a.e("table").then(a.bind(null,"4360"))},waremessageWin:function(){return a.e("waremessage_win").then(a.bind(null,"39f2"))},batchWin:function(){return a.e("clusion_store_batch_win").then(a.bind(null,"1d28"))},clusionSupplies:function(){return a.e("clusion_supplies").then(a.bind(null,"3676"))},selectGoods:function(){return a.e("output_select_goods_ware").then(a.bind(null,"6dab"))},selectSupplies:function(){return a.e("output_select_supplies_ware").then(a.bind(null,"09f6"))},addStore:function(){return a.e("choose_warehouse_win").then(a.bind(null,"f8b9"))},selectBtn:function(){return a.e("select_btn").then(a.bind(null,"3d41"))}}},d=(a("fd54"),a("7610")),m=Object(d.a)(l,r,[],!1,null,"9d6d0356",null);m.options.__file="src\\module\\invoicing_system\\conclusion\\new_schedule.vue";e.default=m.exports},fd54:function(t,e,a){"use strict";var r=a("d5c7");a.n(r).a}}]);