(window.webpackJsonp=window.webpackJsonp||[]).push([["scancode_oredersearch"],{"0ce9":function(t,e,n){"use strict";var a=n("8a6c");n.n(a).a},"815e":function(t,e,n){"use strict";n.r(e);var a=n("81a2");var s={data:function(){return{detail:"",okStyle:{content:"确认",style:{backgroundColor:"#FF9800",color:"#fff"}}}},props:{constructionsId:String,oid:String},methods:{getAppliedWin:function(t){this.$emit("getAppliedWin",t)},scanPayOrderDetail:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.scanPayOrderDetail({data:{oid:e.oid,recordShopId:e.constructionsId}});case 2:(n=t.sent)&&(e.detail=n);case 4:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(s,i){try{var o=e[s](i),l=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(l).then(function(t){a("next",t)},function(t){a("throw",t)});t(l)}("next")})})()},getpayment:function(t){return 0==t.memberConsumption&&t.weChatPain>0?"微信支付":t.memberConsumption>0&&t.weChatPain>0?"混合支付":t.memberConsumption>0&&0==t.weChatPain?"会员支付":t.aliPayPain>0&&0==t.weChatPain&&t.memberConsumption?"支付宝支付":"会员支付"}},computed:{},components:{Win:function(){return Promise.resolve().then(n.bind(null,"f60a"))}},mounted:function(){this.scanPayOrderDetail()}},i=(n("dd57"),n("d801")),o=Object(i.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Win",{attrs:{width:653,height:500,align:"center",ok:t.okStyle},on:{winEvent:t.getAppliedWin}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("查看详情")]),t._v(" "),n("div",{attrs:{slot:"content",id:"tan"},slot:"content"},[n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("用户:")]),t._v(" "),n("span",[t._v(t._s(t.detail.name))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("手机号:")]),t._v(" "),n("span",[t._v(t._s(t.detail.mobile))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("支付卡:")]),t._v(" "),n("span",[t._v(t._s(t.detail.cardType))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("支付方式:")]),t._v(" "),n("span",[t._v(t._s(t.getpayment(t.detail)))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("消费金额:")]),t._v(" "),n("span",[t._v(t._s(t.detail.consumption))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("代金券:")]),t._v(" "),n("span",[t._v(t._s(t.detail.vouchersPain)+"("+t._s(t.detail.vouchersNum)+"张)")])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("实收金额:")]),t._v(" "),n("span",[t._v(t._s(t.detail.pain))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("会员支付:")]),t._v(" "),n("span",[t._v(t._s(t.detail.memberConsumption))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("微信支付:")]),t._v(" "),n("span",[t._v(t._s(t.detail.weChatPain))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("支付宝支付:")]),t._v(" "),n("span",[t._v(t._s(t.detail.aliPayPain))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("优惠金额:")]),t._v(" "),n("span",[t._v(t._s(t.detail.discount))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("参与优惠金额:")]),t._v(" "),n("span",[t._v(t._s(t.detail.discount))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("不参与优惠金额:")]),t._v(" "),n("span",[t._v(t._s(t.detail.noDiscountPrice))])]),t._v(" "),n("div",{staticClass:"online-box clearfix"},[n("span",{staticClass:"online-sub fl"},[t._v("积分抵扣总额:")]),t._v(" "),n("span",[t._v(t._s(t.detail.pointCash))])])])])},[],!1,null,"55ece451",null).exports,l=n("bbb9");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(s,i){try{var o=e[s](i),l=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(l).then(function(t){a("next",t)},function(t){a("throw",t)});t(l)}("next")})}}var c={data:function(){return{page:1,num:10,endTotal:1,goodsName:"",staticLists:[],staticshopLists:[],showWin:!1,isPopupwindow:"",allFormList:[],formList:[],allLists:[],oid:"",allShop:[],showCode:!1,dynamicTags:[],paymentCode:"",codesd:""}},methods:{getcommodity:function(){if(""==this.goodsName)return this.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"请输入订单号"}),!1;var t,e=new RegExp(this.goodsName);t=this.allLists.filter(function(t){return e.test(t.oid)}),this.allFormList=Object.values(t),this.setPage()},reset:function(){this.page=1,this.goodsName="",this.getScanPayData()},returnShopstatic:function(){this.$emit("scanorderResult","static")},tableEvent:function(){},getPageNum:function(t){this.page=t.page,this.num=t.num,this.setPage()},getResult:function(){this.showWin=!1},openStore:function(t){this.showWin=!0,this.isPopupwindow="getAppliedWin",this.oid=t.oid},getScanPayData:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getScanPayData({data:{taskId:t.taskId,showDetail:1,showShopId:t.constructionsId,showDay:t.oneData}});case 2:(n=e.sent)&&(t.staticLists=[],t.staticLists.push(n.total),t.allFormList=n.list,t.allLists=t.allFormList,t.$nextTick(function(){t.setPage()}));case 4:case"end":return e.stop()}},e,t)}))()},Export:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.exportScanPayData({data:{taskId:t.taskId,showDetail:1,showShopId:t.constructionsId,showDay:t.oneData,isExport:1}});case 2:case"end":return e.stop()}},e,t)}))()},setPage:function(){this.endTotal=Math.ceil(this.allFormList.length/this.num);var t=(this.page-1)*this.num,e=this.page*this.num,n=this.allFormList.slice(t,e);this.formList=n},formatTime:function(t){return 10==t.length&&(t*=1e3),l.a.format(new Date(t),"yyyy-MM-dd hh:mm:ss")},getShopList:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getScanPayInfo({data:{shopId:t.constructionsId}});case 2:if(n=e.sent,t.allShop=[],s={staffName:t.constructionsName,staffId:0,shopId:t.constructionsId},t.allShop.push(s),n)for(i in n.staffList)t.allShop.push(n.staffList[i]);case 7:case"end":return e.stop()}},e,t)}))()},getStaffname:function(t){var e="--",n=!0,a=!1,s=void 0;try{for(var i,o=this.allShop[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;if(l.staffId==t){e=l.staffName;break}}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return e},getScanPayOrderByCodes:function(t){var e=this;return r(regeneratorRuntime.mark(function n(){var s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.a.getScanPayOrderByCodes({data:{showShopId:e.constructionsId,codes:t.join(","),taskId:e.taskId,showDay:e.oneData}});case 2:(s=n.sent)&&""!=s?(e.staticLists=[],e.staticLists.push(s.total),e.allFormList=s.list,e.allLists=e.allFormList,e.$nextTick(function(){e.setPage()})):(e.staticLists=[],e.formList=[]);case 4:case"end":return n.stop()}},n,e)}))()},openPaycode:function(){this.showCode=!0},getByCodes:function(){if(0==this.dynamicTags.length)return this.$store.commit("setWin",{content:"请选择收款码",title:"操作提示",winType:"alert"}),!1;var t=[],e=!0,n=!1,a=void 0;try{for(var s,i=this.dynamicTags[Symbol.iterator]();!(e=(s=i.next()).done);e=!0){var o=s.value;t.push(o.staffId)}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}this.codesd=t,this.getScanPayOrderByCodes(this.codesd)},backShopId:function(t,e){"ok"==t&&(this.dynamicTags=e,this.dynamicTags.length>0?this.paymentCode="已选择"+this.dynamicTags.length+"个收款码":this.paymentCode="请选择收款码"),this.showCode=!1},handleClose:function(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1),this.dynamicTags.length>0?this.paymentCode="已选择"+this.dynamicTags.length+"个收款码":this.paymentCode="请选择收款码"},handleSizeChange:function(t){this.num=t,this.setPage()},pageChange:function(t){this.page=t,this.setPage()}},props:{constructionsName:String,startTime:Number,endTime:Number,constructionsId:String,isOpenTime:Boolean,oneData:String,taskId:Number,codes:Array},components:{pageElement:function(){return n.e("page_element").then(n.bind(null,"5921"))},comTable:function(){return n.e("table").then(n.bind(null,"4360"))},getAppliedWin:o,paymentCode:function(){return n.e("scancode_payment_codewin").then(n.bind(null,"37c41"))}},created:function(){this.getShopList()},mounted:function(){var t=this;this.$store.commit("setPageTools",[{name:"返回",className:["fd-blue"],fn:function(){t.returnShopstatic()}},{name:"导出",className:["fd-blue"],fn:function(){t.Export()}}]),this.codes&&""!=this.codes?this.getScanPayOrderByCodes(this.codes):this.getScanPayData()},destroyed:function(){clearInterval(this.timer)}},u=(n("0ce9"),Object(i.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"membercard"}},[n("div",{staticClass:"search"},[n("el-input",{staticClass:"fl",staticStyle:{width:"auto"},attrs:{placeholder:"请输入订单号"},model:{value:t.goodsName,callback:function(e){t.goodsName=e},expression:"goodsName"}},[n("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:t.getcommodity},slot:"suffix"})]),t._v(" "),n("div",{staticClass:"paymentbox fl",on:{click:t.openPaycode}},[n("el-input",{attrs:{placeholder:"请选择收款码",disabled:!0,"suffix-icon":"el-icon-plus"},model:{value:t.paymentCode,callback:function(e){t.paymentCode=e},expression:"paymentCode"}})],1),t._v(" "),n("div",{staticClass:"paymentbox fl"},[n("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:t.getByCodes}},[t._v("筛选")]),t._v(" "),n("el-button",{staticStyle:{width:"120px"},attrs:{type:"info"},on:{click:t.reset}},[t._v("重置")])],1)],1),t._v(" "),n("div",{staticClass:"choiceshop"},[n("div",{staticClass:"choiceshop_l"},[t._v("\n\t\t\t收款码:\n\t\t")]),t._v(" "),t.dynamicTags.length>0?n("div",{staticClass:"choiceshop_r"},t._l(t.dynamicTags,function(e,a){return n("el-tag",{key:a,attrs:{closable:"","disable-transitions":!1},on:{close:function(n){t.handleClose(e)}}},[t._v("\n\t\t\t\t"+t._s(e.staffName)+"\n\t\t\t")])})):n("div",{staticClass:"choiceshop_r"},[t._v("\n\t\t\t请选择收款码\n\t\t")])]),t._v(" "),n("div",{staticClass:"choiceshop"},[n("div",{staticClass:"choiceshop_l"},[t._v("\n\t\t\t选择店铺:\n\t\t")]),t._v(" "),n("div",{staticClass:"choiceshop_r"},[t._v("\n\t\t\t"+t._s(t.constructionsName)+" | 选择时间:"+t._s(t.formatTime(t.startTime))+" - "+t._s(t.formatTime(t.endTime))+"\n\t\t")])]),t._v(" "),n("section",{staticStyle:{"margin-bottom":"20px"}},[n("el-table",{staticStyle:{width:"1436px"},attrs:{data:t.staticLists,border:"",stripe:!0,"header-cell-style":{"background-color":"#f5f7fa"},"header-row-style":{height:"40px"},"row-style":{height:"70px"}}},[n("el-table-column",{attrs:{fixed:"",prop:"days",label:"天数",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v("1")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"支付次数",prop:"payTimes",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"totalConsumption",label:"消费总额",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"优惠总额",prop:"totalDiscount",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"代金券",prop:"totalConsumption",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.totalVouchersPain)+"("+t._s(e.row.totalVouchersNum)+"张)")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"实收总额",prop:"totalPain",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"积分抵扣总额",prop:"totalPointCash",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"会员消费总额",prop:"totalMemberConsumption",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"微信支付总额",prop:"totalWeChatPain",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"支付宝支付总额",prop:"totalAliPayPain",align:"center"}})],1)],1),t._v(" "),n("div",{staticClass:"list_box",staticStyle:{width:"100%"}},[n("div",{staticClass:"list_title"},[n("div",{staticClass:"list_title_l fl"},[n("span",[t._v("快捷支付统计")]),t._v(" "),n("span"),t._v(" "),n("span",[t._v("共\n\t\t\t\t\t\t\t"),n("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.allFormList.length))]),t._v("个条目")])]),t._v(" "),n("div",{staticClass:"list_title_r fr"})]),t._v(" "),n("el-table",{attrs:{data:t.formList,border:"",stripe:!0,"header-cell-style":{"background-color":"#f5f7fa"},"header-row-style":{height:"40px"},"row-style":{height:"70px"}}},[n("el-table-column",{attrs:{fixed:"",label:"结账时间",prop:"createTime",align:"center",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{prop:"oid",label:"支付订单",align:"center",width:"200"}}),t._v(" "),n("el-table-column",{attrs:{label:"消费总额",prop:"consumption",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"优惠总额",prop:"discount",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"代金券",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.vouchersPain)+"("+t._s(e.row.vouchersNum)+"张)")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"实收总额",prop:"pain",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"积分抵扣总额",prop:"pointCash",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"会员消费总额",prop:"memberConsumption",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"微信支付总额",prop:"weChatPain",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"支付宝支付总额",prop:"aliPayPain",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"收款码",prop:"staffId",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"shopId",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticStyle:{color:"#e1bb4a"},on:{click:function(n){t.openStore(e.row)}}},[t._v("查看详情")])]}}])})],1)],1),t._v(" "),t.showCode?n("paymentCode",{attrs:{shopIds:t.dynamicTags,constructionsName:t.constructionsName,constructionsId:t.constructionsId},on:{chooseShop:t.backShopId}}):t._e(),t._v(" "),n("div",{staticClass:"pageWrap"},[n("el-pagination",{attrs:{background:"","current-page":t.page,"page-size":t.num,layout:"sizes, prev, pager, next","page-count":t.endTotal,"page-sizes":[10,20,30]},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1),t._v(" "),t.showWin?n(t.isPopupwindow,{tag:"component",attrs:{constructionsId:t.constructionsId,oid:t.oid},on:{getAppliedWin:t.getResult}}):t._e()],1)},[],!1,null,"28435b8c",null));e.default=u.exports},"8a6c":function(t,e,n){},dd57:function(t,e,n){"use strict";var a=n("f059");n.n(a).a},f059:function(t,e,n){}}]);