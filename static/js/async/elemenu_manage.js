(window.webpackJsonp=window.webpackJsonp||[]).push([["elemenu_manage"],{"31bf":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFCQThBNjA5NTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFCQThBNjBBNTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUJBOEE2MDc1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUJBOEE2MDg1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4kIzh0AAABmklEQVR42oyUTSgFURTHvdfzke+yYMNiUKOXyIKUCK9slJKPbGyUslBWVhIrK/UUexsLxEaRzxI2Sh4WJDNJsfGRFFHy/I/+U891Z8apX/d0z73/OXPuuTdgWVaSxppAN8cizt2AHbAAtp2FhmH8jCFFwASzoEYjXkL6QQz0gAsnGExY2ACOXURUqwQn3PNLSDJZBWkem8dAOwXEUsC6bdum82sBMAfSPUT2wTj9ZDBPPxUsQywsGTWDKp9fqQMdzHxYiZWBiGTU5SHwClbAPRgE9S7rhkI8Yp1tgiPWbo9zDyBPs7ZWfq1QE7hlzwyAAs5lsj46yxGhD00gF0yAA7DIuSjIdquBCN1p5jM49nLMB30etXwRoUOX4BR4pD/tc6qnQfaQau9glH4jj34GPLsITYrQBjhTAkuSLv03MEI/SyNiS4vI8cfZSzF2qlgpKGYNw6ATVGhEPkErXoC4c/vlFrcwO7lD1eDKpy4iEoHIuXr7d/nVy3/c/mtQzj1/nhEnM5PZrYEn8MWvS1dvgTZ5zxLfIrFvAQYAHHVSK1WxAuMAAAAASUVORK5CYII="},"61ba":function(t,e,i){t.exports=i.p+"images/test.90111ab3.jpg"},"8a3e":function(t,e,i){"use strict";var s=i("fc41");i.n(s).a},c131:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{attrs:{id:"picList"}},[s("div",{staticClass:"line"},[s("span",{staticClass:"warp"},[t._v("电子菜单设备不被其他桌台共用")]),t._v(" "),s("onoff",{staticClass:"button",attrs:{status:t.isShared},on:{statusChange:t.getisShared}})],1),t._v(" "),s("div",{staticClass:"line"},[s("span",{staticClass:"warp"},[t._v("验证授权码")]),t._v(" "),s("onoff",{staticClass:"button",attrs:{status:t.isWarrant},on:{statusChange:t.getisWarrant}}),t._v(" "),s("img",{staticClass:"image",attrs:{src:i("31bf")}}),t._v(" "),s("span",{staticStyle:{color:"#dddddd"}},[t._v("点击“确认下单”开启授权码，建议开启")])],1),t._v(" "),s("div",{staticClass:"line"},[s("span",{staticClass:"warp"},[t._v("电子菜单允许登录会员")]),t._v(" "),s("onoff",{staticClass:"button",attrs:{status:t.islogin},on:{statusChange:t.getLogin}}),t._v(" "),t.loginShow?s("section",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[s("mulselect",{key:"id",attrs:{list:t.loginList,name:"name",selects:t.loginSel},on:{selOn:t.setLogin}})],1):t._e(),t._v(" "),t.loginShow?s("img",{staticClass:"image",attrs:{src:i("31bf")}}):t._e(),t._v(" "),t.loginShow?s("span",{staticStyle:{color:"#dddddd"}},[t._v("至少选择一项登录方式")]):t._e()],1),t._v(" "),s("div",{staticClass:"line"},[s("span",{staticClass:"warp"},[t._v("电子菜单点餐模式")]),t._v(" "),s("section",{staticStyle:{display:"inline-block","vertical-align":"middle"}},[s("mulselect",{attrs:{list:t.orderModel,name:"name",keys:"id",selects:t.orderSel},on:{selOn:t.setOrder}})],1),t._v(" "),s("img",{staticClass:"image",attrs:{src:i("31bf")}}),t._v(" "),s("span",{staticStyle:{color:"#dddddd"}},[t._v("至少选择一种点餐模式")])]),t._v(" "),s("div",{staticClass:"line"},[s("span",{staticClass:"warp"},[t._v("置顶推荐区名称:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.topData.topName,expression:"topData.topName"}],staticClass:"mes",attrs:{type:"text",placeholder:"请输入名称",maxlength:"6"},domProps:{value:t.topData.topName},on:{input:function(e){e.target.composing||t.$set(t.topData,"topName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"line"},[s("span",{staticClass:"warp"},[t._v("置顶推荐区商品:")]),t._v(" "),s("a",{staticClass:"blue",staticStyle:{width:"100px",height:"40px","line-height":"40px"},on:{click:t.menuConfig}},[t._v("菜单配置")]),t._v(" "),0!=t.topData.topGoods.length||0!=t.topData.topPackages.length?s("span",[t._v("已配置\n\t\t\t"),0!=t.topData.topGoods.length?s("i",[t._v(t._s(t.topData.topGoods.length)+"个商品")]):t._e(),t._v(" "),0!=t.topData.topPackages.length?s("i",[t._v(t._s(t.topData.topPackages.length)+"个套餐")]):t._e()]):t._e()]),t._v(" "),s("div",{staticClass:"light"},t._l(t.buttonList.list,function(e,i){return s("span",{key:i,staticClass:"sel",class:{buttonOn:t.buttonList.flag==i},on:{click:function(e){t.light(i)}}},[t._v(t._s(e.name))])})),t._v(" "),0===t.buttonList.flag?s("div",{staticClass:"line"},[s("span",{staticClass:"imageName"},[t._v("拓展页面名称：")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.imageName,expression:"imageName"}],staticClass:"mes",attrs:{type:"text",placeholder:"请输入名称",maxlength:"10"},domProps:{value:t.imageName},on:{input:function(e){e.target.composing||(t.imageName=e.target.value)}}})]):t._e(),t._v(" "),s("div",{staticClass:"line"},[1===t.buttonList.flag?s("span",{staticClass:"typeName"},[t._v("锁屏页面图片：")]):s("span",{staticClass:"typeName"},[t._v("拓展页面图片：")])]),t._v(" "),s("ul",{staticClass:"pic-list"},[s("li",{staticClass:"add-pic",on:{click:t.add}},[t._m(0)]),t._v(" "),t._l(t.bannerList,function(e,a){return s("li",{key:a,staticClass:"li-pic",on:{click:function(i){t.edit(a,e)}}},[""!=e.image?s("img",{staticClass:"cname",attrs:{src:t.imgHost+e.image}}):t._e(),t._v(" "),""==e.image?s("img",{attrs:{src:i("61ba"),width:"300",height:"200",alt:"商品"}}):t._e(),t._v(" "),s("h2",[t._v(t._s(a+1))])])})],2),t._v(" "),s("a",{staticClass:"yellow",attrs:{href:"javascript:void(0);"},on:{click:t.save}},[t._v("保存")]),t._v(" "),t.showGoods?s("goodsWin",{attrs:{goInName:"menuConfig",goodsIds:t.topData.topGoods,packages:t.topData.topPackages,isGoods:!0},on:{goodListWin:t.goGoodList}}):t._e(),t._v(" "),t.showWin?s("shufflingPicWin",{attrs:{index:t.index,detial:t.detial,types:t.types,status:!0,type:t.buttonList.flag},on:{shufflingPicWin:t.getResult}}):t._e()],1)};s._withStripped=!0;var a=i("81a2"),n=i("f6ce"),o=i("bbb9");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function s(a,n){try{var o=e[a](n),r=o.value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(r).then(function(t){s("next",t)},function(t){s("throw",t)});t(r)}("next")})}}var l={data:function(){return{shopId:null,imgHost:"",bannerList:[],list:"",type:"",buttonList:{flag:0,list:[{index:0,name:"拓展页面"},{index:1,name:"锁屏页面"}]},showWin:!1,imageName:"",isShared:!1,isWarrant:!1,detial:{},index:0,types:"",loginList:[{id:"0",name:"手机号登录"},{id:"1",name:"卡号登录"}],orderModel:[{id:"0",name:"标准模式"},{id:"1",name:"大图模式"},{id:"2",name:"列表模式"}],loginSel:["0"],orderSel:["0"],loginShow:!0,islogin:!0,defaultLogin:[],defaultOrder:[],topName:"",topGoods:[],topPackages:[],showGoods:!1,topData:{topName:"",topGoods:[],topPackages:[]}}},mounted:function(){var t=n.a.session("userShop");this.shopId=t.currentShop.id,this.imgHost=t.uploadUrl,this.inte()},methods:{menuConfig:function(){this.showGoods=!0},goGoodList:function(t,e){if(e.goodArr.length+e.packArr.length>100)return this.$store.commit("setWin",{winType:"alert",content:"商品与套餐不能超过100个"}),!1;this.showGoods=!1,"ok"==t&&(this.topData.topGoods=e.goodArr,this.topData.topPackages=e.packArr)},setLogin:function(t){if(t.length<1)return this.$store.commit("setWin",{winType:"alert",content:"至少选择一项登录方式"}),this.loginSel=this.defaultLogin,!1;this.defaultLogin=o.a.deepCopy(t)},setOrder:function(t){if(t.length<1)return this.$store.commit("setWin",{winType:"alert",content:"至少选择一种点餐模式"}),this.orderSel=this.defaultOrder,!1;this.defaultOrder=o.a.deepCopy(t)},getLogin:function(t){this.islogin=t,this.loginShow=!!t,t&&(this.loginSel=["0"])},getResult:function(t,e){var i=this;if("ok"==t){if("add"==e.types){var s={shopId:this.shopId,image:e.image,sort:e.sort,type:e.type,imageName:this.imageName};this.addPic(s)}else if("edit"==e.types){var a={shopId:this.shopId,id:e.id,image:e.image,sort:e.sort,type:e.type,imageName:this.imageName};this.editPic(a)}this.showWin=!1}else if("cancel"==t&&"add"!==e.types){var n={shopId:this.shopId,id:e.id,type:e.type};this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确定删除该图片?",callback:function(t){"ok"==t&&(i.delSlideShow(n),i.bannerList.splice(i.index,1),i.showWin=!1)}})}else this.showWin=!1},getisShared:function(t){this.isShared=t},getisWarrant:function(t){this.isWarrant=t},light:function(t){this.buttonList.flag=t,1==t?(this.bannerList=this.list[0].slideshow,this.type=this.list[0].id):(this.bannerList=this.list[1].slideshow,this.type=this.list[1].id)},addPic:function(t){var e=this;return r(regeneratorRuntime.mark(function i(){var s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.a.addSlideShow({data:t});case 2:s=i.sent,e.bannerList.push(s),e.bannerList=e.bannerList.sort(function(t,e){return t.sort-e.sort});case 5:case"end":return i.stop()}},i,e)}))()},editPic:function(t){var e=this;return r(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.a.updateSlideShow({data:t});case 2:e.bannerList=e.bannerList.sort(function(t,e){return t.sort-e.sort});case 3:case"end":return i.stop()}},i,e)}))()},inte:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var i,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getElecMenu({data:{shopId:t.shopId}});case 2:for(i=e.sent,t.isWarrant=1==i.isWarrant,t.isShared=1==i.isShared,i.elecMenuVip||t.getLogin(!1),s=i.electronicMenu,n=0;n<s.length;n++)5==s[n].id&&(t.imageName=s[n].imageName);t.bannerList=s[1].slideshow,t.type=s[1].id,t.list=s,i.elecMenuType&&(t.orderSel=o.a.deepCopy(i.elecMenuType.split(","))),i.elecMenuVip&&(t.loginSel=i.elecMenuVip.split(",")),i.topData.filter(function(e){"2"==e.type&&(t.topData=e)});case 14:case"end":return e.stop()}},e,t)}))()},delSlideShow:function(t){var e=this;return r(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.eleDelSlideShow({data:t});case 2:case"end":return e.stop()}},i,e)}))()},SlideshowUpdate:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/^0+$/.test(t.topData.topName)){e.next=4;break}return t.$store.commit("setWin",{winType:"alert",content:"置顶推荐名称不能为"+t.topData.topName}),e.abrupt("return",!1);case 4:if(0==t.topData.topGoods.length&&0==t.topData.topPackages.length||t.topData.topName){e.next=7;break}return t.$store.commit("setWin",{winType:"alert",content:"置顶推荐名称不能为空"}),e.abrupt("return",!1);case 7:return e.next=9,a.a.SlideshowUpdate({data:{isWarrant:t.isWarrant?1:0,isShared:t.isShared?1:0,imageName:t.imageName,elecMenuType:t.orderSel.join(),elecMenuVip:t.islogin?t.loginSel.join():"",topPackages:t.topData.topPackages,topGoods:t.topData.topGoods,topName:t.topData.topName}});case 9:t.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"保存成功"});case 10:case"end":return e.stop()}},e,t)}))()},add:function(){this.types="add",this.showWin=!0,this.detial={image:"",sort:"1",type:this.type},this.ass="shufflingPicWin"},edit:function(t,e){this.types="edit",this.ass="shufflingPicWin",this.index=t,this.detial=e,this.showWin=!0},imageUpload:function(t){t&&(this.good.imageName=t.imageName)},save:function(){this.SlideshowUpdate()}},components:{onoff:function(){return i.e("on_off").then(i.bind(null,"034b"))},shufflingPicWin:function(){return i.e("shuffling_pic_win").then(i.bind(null,"4076"))},mulselect:function(){return i.e("mul_select").then(i.bind(null,"7d09"))},goodsWin:function(){return i.e("good_list_win").then(i.bind(null,"8bf4"))}}},c=(i("8a3e"),i("7610")),d=Object(c.a)(l,s,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addTo"},[e("input"),this._v(" "),e("span",[this._v("编辑图片")])])}],!1,null,"3ac22b12",null);d.options.__file="src\\module\\shop_config\\elemenu_manage.vue";e.default=d.exports},fc41:function(t,e,i){}}]);