(window.webpackJsonp=window.webpackJsonp||[]).push([["elemenu_manage"],{"2cb2":function(t,e,i){"use strict";var n=i("c27f");i.n(n).a},"31bf":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFCQThBNjA5NTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFCQThBNjBBNTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUJBOEE2MDc1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUJBOEE2MDg1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4kIzh0AAABmklEQVR42oyUTSgFURTHvdfzke+yYMNiUKOXyIKUCK9slJKPbGyUslBWVhIrK/UUexsLxEaRzxI2Sh4WJDNJsfGRFFHy/I/+U891Z8apX/d0z73/OXPuuTdgWVaSxppAN8cizt2AHbAAtp2FhmH8jCFFwASzoEYjXkL6QQz0gAsnGExY2ACOXURUqwQn3PNLSDJZBWkem8dAOwXEUsC6bdum82sBMAfSPUT2wTj9ZDBPPxUsQywsGTWDKp9fqQMdzHxYiZWBiGTU5SHwClbAPRgE9S7rhkI8Yp1tgiPWbo9zDyBPs7ZWfq1QE7hlzwyAAs5lsj46yxGhD00gF0yAA7DIuSjIdquBCN1p5jM49nLMB30etXwRoUOX4BR4pD/tc6qnQfaQau9glH4jj34GPLsITYrQBjhTAkuSLv03MEI/SyNiS4vI8cfZSzF2qlgpKGYNw6ATVGhEPkErXoC4c/vlFrcwO7lD1eDKpy4iEoHIuXr7d/nVy3/c/mtQzj1/nhEnM5PZrYEn8MWvS1dvgTZ5zxLfIrFvAQYAHHVSK1WxAuMAAAAASUVORK5CYII="},"61ba":function(t,e,i){t.exports=i.p+"images/test.90111ab3.jpg"},c131:function(t,e,i){"use strict";i.r(e);var n=i("81a2"),a=i("f6ce"),o=i("bbb9");function s(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(a,o){try{var s=e[a](o),r=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(r).then(function(t){n("next",t)},function(t){n("throw",t)});t(r)}("next")})}}var r={data:function(){return{shopId:null,imgHost:"",bannerList:[],list:"",type:"",buttonList:{flag:0,list:[{index:0,name:"拓展页面"},{index:1,name:"锁屏页面"}]},showWin:!1,imageName:"",isShared:!1,isWarrant:!1,detial:{},index:0,types:"",loginList:[{id:"0",name:"手机号登录"},{id:"1",name:"卡号登录"},{id:"2",name:"扫码登录"}],orderModel:[{id:"0",name:"标准模式"},{id:"1",name:"大图模式"},{id:"2",name:"列表模式"}],loginSel:["0"],orderSel:["0"],loginShow:!0,islogin:!0,defaultLogin:[],defaultOrder:[],topName:"",topGoods:[],topPackages:[],showGoods:!1,topData:{topName:"",topGoods:[],topPackages:[]},customPackageName:""}},mounted:function(){var t=a.a.session("userShop");this.shopId=t.currentShop.id,this.imgHost=t.uploadUrl,console.log(this.loginSel),this.inte()},methods:{menuConfig:function(){this.showGoods=!0},goGoodList:function(t,e){if(e.goodArr.length+e.packArr.length>100)return this.$store.commit("setWin",{winType:"alert",content:"商品与套餐不能超过100个"}),!1;this.showGoods=!1,"ok"==t&&(this.topData.topGoods=e.goodArr,this.topData.topPackages=e.packArr)},setLogin:function(t){if(console.log(t),t.length<1)return this.$store.commit("setWin",{winType:"alert",content:"至少选择一项登录方式"}),this.loginSel=this.defaultLogin,!1;this.defaultLogin=o.a.deepCopy(t)},setOrder:function(t){if(t.length<1)return this.$store.commit("setWin",{winType:"alert",content:"至少选择一种点餐模式"}),this.orderSel=this.defaultOrder,!1;this.defaultOrder=o.a.deepCopy(t)},getLogin:function(t){this.islogin=t,this.loginShow=!!t,t&&(this.loginSel=["0"])},getResult:function(t,e){var i=this;if("ok"==t){if("add"==e.types){var n={shopId:this.shopId,image:e.image,sort:e.sort,type:e.type,imageName:this.imageName};this.addPic(n)}else if("edit"==e.types){var a={shopId:this.shopId,id:e.id,image:e.image,sort:e.sort,type:e.type,imageName:this.imageName};this.editPic(a)}this.showWin=!1}else if("cancel"==t&&"add"!==e.types){var o={shopId:this.shopId,id:e.id,type:e.type};this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确定删除该图片?",callback:function(t){"ok"==t&&(i.delSlideShow(o),i.bannerList.splice(i.index,1),i.showWin=!1)}})}else this.showWin=!1},getisShared:function(t){this.isShared=t},getisWarrant:function(t){this.isWarrant=t},light:function(t){this.buttonList.flag=t,1==t?(this.bannerList=this.list[0].slideshow,this.type=this.list[0].id):(this.bannerList=this.list[1].slideshow,this.type=this.list[1].id)},addPic:function(t){var e=this;return s(regeneratorRuntime.mark(function i(){var a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.a.addSlideShow({data:t});case 2:a=i.sent,e.bannerList.push(a),e.bannerList=e.bannerList.sort(function(t,e){return t.sort-e.sort});case 5:case"end":return i.stop()}},i,e)}))()},editPic:function(t){var e=this;return s(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.a.updateSlideShow({data:t});case 2:e.bannerList=e.bannerList.sort(function(t,e){return t.sort-e.sort});case 3:case"end":return i.stop()}},i,e)}))()},inte:function(){var t=this;return s(regeneratorRuntime.mark(function e(){var i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.getElecMenu({data:{shopId:t.shopId}});case 2:for(i=e.sent,t.isWarrant=1==i.isWarrant,t.isShared=1==i.isShared,t.customPackageName=i.customPackageName,i.elecMenuVip||t.getLogin(!1),a=i.electronicMenu,s=0;s<a.length;s++)5==a[s].id&&(t.imageName=a[s].imageName);t.bannerList=a[1].slideshow,t.type=a[1].id,t.list=a,i.elecMenuType&&(t.orderSel=o.a.deepCopy(i.elecMenuType.split(","))),i.elecMenuVip&&(t.loginSel=i.elecMenuVip.split(",")),i.topData.filter(function(e){"2"==e.type&&(t.topData=e)});case 15:case"end":return e.stop()}},e,t)}))()},delSlideShow:function(t){var e=this;return s(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.eleDelSlideShow({data:t});case 2:case"end":return e.stop()}},i,e)}))()},SlideshowUpdate:function(){var t=this;return s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/^0+$/.test(t.topData.topName)){e.next=4;break}return t.$store.commit("setWin",{winType:"alert",content:"置顶推荐名称不能为"+t.topData.topName}),e.abrupt("return",!1);case 4:if(0==t.topData.topGoods.length&&0==t.topData.topPackages.length||t.topData.topName){e.next=7;break}return t.$store.commit("setWin",{winType:"alert",content:"置顶推荐名称不能为空"}),e.abrupt("return",!1);case 7:return e.next=9,n.a.SlideshowUpdate({data:{isWarrant:t.isWarrant?1:0,isShared:t.isShared?1:0,imageName:t.imageName,elecMenuType:t.orderSel.join(),elecMenuVip:t.islogin?t.loginSel.join():"",topPackages:t.topData.topPackages,topGoods:t.topData.topGoods,topName:t.topData.topName,customPackageName:t.customPackageName}});case 9:t.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"保存成功"});case 10:case"end":return e.stop()}},e,t)}))()},add:function(){this.types="add",this.showWin=!0,this.detial={image:"",sort:"1",type:this.type},this.ass="shufflingPicWin"},edit:function(t,e){this.types="edit",this.ass="shufflingPicWin",this.index=t,this.detial=e,this.showWin=!0},imageUpload:function(t){t&&(this.good.imageName=t.imageName)},save:function(){this.SlideshowUpdate()}},components:{onoff:function(){return i.e("on_off").then(i.bind(null,"034b"))},shufflingPicWin:function(){return i.e("shuffling_pic_win").then(i.bind(null,"4076"))},mulselect:function(){return i.e("mul_select").then(i.bind(null,"7d09"))},goodsWin:function(){return i.e("good_list_win").then(i.bind(null,"8bf4"))}}},l=(i("2cb2"),i("d801")),c=Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{attrs:{id:"picList"}},[n("el-form",{attrs:{"label-width":"220px"}},[n("el-form-item",{attrs:{label:"电子菜单设备不被其他桌台共用"}},[n("el-switch",{attrs:{"active-color":"#E1BB4A","inactive-color":"#e6e6e6"},on:{change:t.getisShared},model:{value:t.isShared,callback:function(e){t.isShared=e},expression:"isShared"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"验证授权码"}},[n("el-switch",{attrs:{"active-color":"#E1BB4A","inactive-color":"#e6e6e6"},on:{change:t.getisWarrant},model:{value:t.isWarrant,callback:function(e){t.isWarrant=e},expression:"isWarrant"}}),t._v(" "),n("img",{staticClass:"image",attrs:{src:i("31bf")}}),t._v(" "),n("span",{staticStyle:{color:"#dddddd"}},[t._v("点击“确认下单”开启授权码，建议开启")])],1),t._v(" "),n("el-form-item",{attrs:{label:"电子菜单允许登录会员"}},[n("el-switch",{attrs:{"active-color":"#E1BB4A","inactive-color":"#e6e6e6"},on:{change:t.getLogin},model:{value:t.islogin,callback:function(e){t.islogin=e},expression:"islogin"}}),t._v(" "),n("div",{staticStyle:{width:"380px",display:"inline-block"}},[t.loginShow?n("el-checkbox-group",{on:{change:t.setLogin},model:{value:t.loginSel,callback:function(e){t.loginSel=e},expression:"loginSel"}},t._l(t.loginList,function(e){return n("el-checkbox",{key:e.id,attrs:{label:e.id,border:""}},[t._v(t._s(e.name))])})):t._e()],1),t._v(" "),t.loginShow?n("img",{staticClass:"image",attrs:{src:i("31bf")}}):t._e(),t._v(" "),t.loginShow?n("span",{staticStyle:{color:"#dddddd"}},[t._v("至少选择一项登录方式")]):t._e()],1),t._v(" "),n("el-form-item",{attrs:{label:"电子菜单点餐模式"}},[n("div",{staticStyle:{width:"370px",display:"inline-block"}},[n("el-checkbox-group",{on:{change:t.setOrder},model:{value:t.orderSel,callback:function(e){t.orderSel=e},expression:"orderSel"}},t._l(t.orderModel,function(e){return n("el-checkbox",{key:e.id,attrs:{label:e.id,border:""}},[t._v(t._s(e.name))])}))],1),t._v(" "),n("img",{staticClass:"image",attrs:{src:i("31bf")}}),t._v(" "),n("span",{staticStyle:{color:"#dddddd"}},[t._v("至少选择一项登录方式")])]),t._v(" "),n("el-form-item",{attrs:{label:"置顶推荐区名称"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{maxlength:"6",placeholder:"请输入名称"},model:{value:t.topData.topName,callback:function(e){t.$set(t.topData,"topName",e)},expression:"topData.topName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"自定义套餐首页推荐名称"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{maxlength:"6",placeholder:"请输入名称"},model:{value:t.customPackageName,callback:function(e){t.customPackageName=e},expression:"customPackageName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"置顶推荐区商品"}},[n("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary"},on:{click:t.menuConfig}},[t._v("添加关联菜品")]),t._v(" "),0!=t.topData.topGoods.length||0!=t.topData.topPackages.length?n("span",[t._v("已配置\n\t\t\t\t"),0!=t.topData.topGoods.length?n("i",[t._v(t._s(t.topData.topGoods.length)+"个商品")]):t._e(),t._v(" "),0!=t.topData.topPackages.length?n("i",[t._v(t._s(t.topData.topPackages.length)+"个套餐")]):t._e()]):t._e()],1)],1),t._v(" "),n("div",{staticStyle:{padding:"10px 70px"}},[n("el-radio-group",{on:{change:t.light},model:{value:t.buttonList.flag,callback:function(e){t.$set(t.buttonList,"flag",e)},expression:"buttonList.flag"}},t._l(t.buttonList.list,function(e){return n("el-radio-button",{key:e.index,attrs:{label:e.index}},[t._v(t._s(e.name))])}))],1),t._v(" "),n("el-form",{attrs:{"label-width":"120px"}},[0===t.buttonList.flag?n("el-form-item",{attrs:{label:"拓展页面名称："}},[n("el-input",{staticStyle:{width:"250px"},attrs:{maxlength:"10",placeholder:"请输入拓展页面名称："},model:{value:t.imageName,callback:function(e){t.imageName=e},expression:"imageName"}})],1):t._e(),t._v(" "),1===t.buttonList.flag?n("span",{staticClass:"typeName"},[t._v("锁屏页面图片：")]):n("span",{staticClass:"typeName"},[t._v("拓展页面图片：")])],1),t._v(" "),n("ul",{staticClass:"pic-list"},[n("li",{staticClass:"add-pic",on:{click:t.add}},[t._m(0)]),t._v(" "),t._l(t.bannerList,function(e,a){return n("li",{key:a,staticClass:"li-pic",on:{click:function(i){t.edit(a,e)}}},[""!=e.image?n("img",{staticClass:"cname",attrs:{src:t.imgHost+e.image}}):t._e(),t._v(" "),""==e.image?n("img",{attrs:{src:i("61ba"),width:"300",height:"200",alt:"商品"}}):t._e(),t._v(" "),n("h2",[t._v(t._s(a+1))])])})],2),t._v(" "),n("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),t.showGoods?n("goodsWin",{attrs:{goInName:"menuConfig",goodsIds:t.topData.topGoods,packages:t.topData.topPackages,isGoods:!0,isPackType:"0,1"},on:{goodListWin:t.goGoodList}}):t._e(),t._v(" "),t.showWin?n("shufflingPicWin",{attrs:{index:t.index,detial:t.detial,types:t.types,status:!0,type:t.buttonList.flag},on:{shufflingPicWin:t.getResult}}):t._e()],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addTo"},[e("input"),this._v(" "),e("span",[this._v("编辑图片")])])}],!1,null,"311fce2e",null);e.default=c.exports},c27f:function(t,e,i){}}]);