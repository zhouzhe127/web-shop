(window.webpackJsonp=window.webpackJsonp||[]).push([["elerelation_win"],{"30af":function(t,s,e){"use strict";e.r(s);var i=e("81a2"),n=e("f6ce"),o=e("bbb9");var a={data:function(){return{L1ID:0,L2ID:0,category:[],child:[],selectgoods:[],goodsCom:[],goodsIndex:[],search:"",goodsArr:[],fixed:[],ispack:!1,fixedIndex:[],newfixed:""}},props:["width","height","title"],mounted:function(){this.init(),this.goodsCom=n.a.session("goodList"),this.goodReady();for(var t=n.a.session("packageList"),s=0;s<t.length;s++)0==t[s].type&&2!=t[s].status&&this.fixed.push(t[s]);this.newfixed=o.a.deepCopy(this.fixed)},methods:{init:function(){var t,s=this;return(t=regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.getCategoryList({data:{}});case 2:e=t.sent,s.category=e,s.category.unshift({name:"全部",id:0});case 5:case"end":return t.stop()}},t,s)}),function(){var s=t.apply(this,arguments);return new Promise(function(t,e){return function i(n,o){try{var a=s[n](o),c=a.value}catch(t){return void e(t)}if(!a.done)return Promise.resolve(c).then(function(t){i("next",t)},function(t){i("throw",t)});t(c)}("next")})})()},listChange:function(t){this.ispack=!1,this.goodsIndex=t},packChange:function(t){this.ispack=!0,this.fixedIndex=t},keyUp:function(){this.search=this.search.toUpperCase(),this.searchGoods()},changeL1ID:function(t,s){this.L1ID=t,this.L2ID=0,this.child=this.category[s].child?this.category[s].child:[],this.goodReady(t)},changeL2ID:function(t){this.L2ID=t,this.goodReady(t)},incategory:function(t){return 0==this.L1ID||(t.indexOf(this.L1ID)>=0&&0==this.L2ID||t.indexOf(this.L2ID)>=0)},changefix:function(t,s){"sign"==s.target.className&&(this.ispack=t,t?this.goodsIndex=[]:this.fixedIndex=[])},goodReady:function(t){for(var s=[],e=0;e<this.goodsCom.length;e++)if(void 0===t||0===t){var i=o.a.deepCopy(this.goodsCom[e]);i.cids instanceof Array?this.incategory(i.cids)&&s.push(i):console.log(i.id+" cids不是数组")}else for(var n=0;n<this.goodsCom[e].cids.length;n++)this.goodsCom[e].cids[n]==t&&s.push(this.goodsCom[e]);this.selectgoods=s,this.goodsArr=s},searchGoods:function(){for(var t=[],s=[],e=0;e<this.goodsCom.length;e++)-1!=this.goodsCom[e].goodsName.toUpperCase().indexOf(this.search)&&t.push(this.goodsCom[e]);for(var i=0;i<this.newfixed.length;i++)-1!=this.newfixed[i].packageName.toUpperCase().indexOf(this.search)&&s.push(this.newfixed[i]);this.search?(this.selectgoods=t,this.fixed=s):(this.selectgoods=this.goodsArr,this.fixed=this.newfixed)},winEvent:function(t){this.$emit("relationEvent",t)}},components:{win:function(){return e.e("win").then(e.bind(null,"f60a"))},mulSelect:function(){return e.e("mul_select").then(e.bind(null,"7d09"))}}},c=(e("bab4"),e("d801")),r=Object(c.a)(a,function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("win",{attrs:{width:t.width,height:t.height,align:"center"},on:{winEvent:t.winEvent},scopedSlots:t._u([{key:"content",fn:function(s){return e("div",{staticStyle:{height:"100%"},attrs:{id:"tan"}},[e("section",{staticStyle:{padding:"20px"},attrs:{id:"getGoods"}},[e("section",[e("section",{staticClass:"search fr",staticStyle:{"margin-right":"20px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入名称"},domProps:{value:t.search},on:{keyup:t.keyUp,input:function(s){s.target.composing||(t.search=s.target.value)}}}),t._v(" "),e("a",{staticClass:"search-btn",staticStyle:{"background-color":"#29A7E1"},attrs:{href:"javascript:void(0);"},on:{click:t.keyUp}})]),t._v(" "),e("section",{staticClass:"place fl"},[e("section",{staticClass:"class-Parent"},[t._l(t.category,function(s,i){return[s.id==t.L1ID?e("span",{key:i,staticClass:"on",on:{click:function(e){t.changeL1ID(s.id,i)}}},[t._v(t._s(s.name))]):e("span",{key:i,on:{click:function(e){t.changeL1ID(s.id,i)}}},[t._v(t._s(s.name))])]})],2),t._v(" "),e("section",{staticClass:"class-Child"},[t._l(t.child,function(s,i){return t.child.length>0?[s.id==t.L2ID?e("span",{key:i,staticClass:"second-on",on:{click:function(e){t.changeL2ID(s.id)}}},[t._v(t._s(s.name))]):e("span",{key:i,on:{click:function(e){t.changeL2ID(s.id)}}},[t._v(t._s(s.name))])]:t._e()})],2)]),t._v(" "),e("section",{staticClass:"fl",staticStyle:{width:"100%",height:"auto","margin-bottom":"10px"}},[e("a",{staticClass:"allsome",attrs:{href:"javascript:void(0)"}},[t._v("全部")])])]),t._v(" "),t.selectgoods.length>0?e("section",{staticClass:"comList"},[e("mul-select",{attrs:{styles:{backgroundColor:"#F1F1F1"},list:t.selectgoods,name:"goodsName",isradio:!0,selects:t.goodsIndex,keys:"id"},on:{selOn:t.listChange}})],1):t._e(),t._v(" "),e("section",{staticClass:"place fl"},[e("span",{staticClass:"on"},[t._v("固定套餐")])]),t._v(" "),e("section",{staticClass:"fl",staticStyle:{width:"100%",height:"auto","margin-bottom":"10px"}},[e("a",{staticClass:"allsome",attrs:{href:"javascript:void(0)"}},[t._v("全部")])]),t._v(" "),e("section",{staticClass:"comList"},[e("mul-select",{attrs:{styles:{backgroundColor:"#F1F1F1"},list:t.fixed,name:"packageName",isradio:!0,selects:t.fixedIndex,keys:"id"},on:{selOn:t.packChange}})],1)])])}}])},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))])])},[],!1,null,"52fad987",null);s.default=r.exports},"6ce2":function(t,s,e){},bab4:function(t,s,e){"use strict";var i=e("6ce2");e.n(i).a}}]);