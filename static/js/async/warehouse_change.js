(window.webpackJsonp=window.webpackJsonp||[]).push([["warehouse_change"],{"31bf":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFCQThBNjA5NTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFCQThBNjBBNTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUJBOEE2MDc1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUJBOEE2MDg1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4kIzh0AAABmklEQVR42oyUTSgFURTHvdfzke+yYMNiUKOXyIKUCK9slJKPbGyUslBWVhIrK/UUexsLxEaRzxI2Sh4WJDNJsfGRFFHy/I/+U891Z8apX/d0z73/OXPuuTdgWVaSxppAN8cizt2AHbAAtp2FhmH8jCFFwASzoEYjXkL6QQz0gAsnGExY2ACOXURUqwQn3PNLSDJZBWkem8dAOwXEUsC6bdum82sBMAfSPUT2wTj9ZDBPPxUsQywsGTWDKp9fqQMdzHxYiZWBiGTU5SHwClbAPRgE9S7rhkI8Yp1tgiPWbo9zDyBPs7ZWfq1QE7hlzwyAAs5lsj46yxGhD00gF0yAA7DIuSjIdquBCN1p5jM49nLMB30etXwRoUOX4BR4pD/tc6qnQfaQau9glH4jj34GPLsITYrQBjhTAkuSLv03MEI/SyNiS4vI8cfZSzF2qlgpKGYNw6ATVGhEPkErXoC4c/vlFrcwO7lD1eDKpy4iEoHIuXr7d/nVy3/c/mtQzj1/nhEnM5PZrYEn8MWvS1dvgTZ5zxLfIrFvAQYAHHVSK1WxAuMAAAAASUVORK5CYII="},6998:function(e,t,a){"use strict";a.r(t);var i=[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"font-limit tips"},[t("img",{attrs:{src:a("31bf"),alt:""}}),this._v("限20字以内,数字/字母\n            ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"img-span"},[t("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:a("8e35"),alt:""}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"font-limit tips"},[t("img",{attrs:{src:a("31bf"),alt:""}}),this._v("限40字以内\n            ")])}],n=a("f6ce"),s=a("81a2");function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function i(n,s){try{var r=t[n](s),c=r.value}catch(e){return void a(e)}if(!r.done)return Promise.resolve(c).then(function(e){i("next",e)},function(e){i("throw",e)});e(c)}("next")})}}var c={data:function(){return{detail:"",detailSend:"",param:{name:"",owner:"",province:"",city:"",town:""},tips:{name:"仓库名称",owner:"仓库所属",province:"省份",city:"城市",town:"地区"},code:"",place:"",wid:"",comObj:{},sendObj:{},showCom:"",ownerName:"",isBrand:0,ischain:"",brandId:"",booleanShared:!0,isShared:1,isClick:!1}},created:function(){this.userData=n.a.session("userShop"),this.ischain=this.userData.currentShop.ischain,this.isBrand="3"==this.ischain?1:0,1==this.ischain||2==this.ischain?this.brandId=this.userData.currentShop.brandId:3==this.ischain&&(this.brandId=this.userData.currentShop.id)},mounted:function(){this.initData(),this.getOwner()},components:{addStoreBlong:function(){return a.e("create_store_blong_win").then(a.bind(null,"9120"))},addresslinkage:function(){return a.e("address_linkage").then(a.bind(null,"4867"))},onOff:function(){return a.e("on_off").then(a.bind(null,"034b"))}},methods:{initData:function(){this.wid=this.$route.query.id,this.wid?this.getWarehouseDetail():console.log("仓库id不存在")},getShared:function(e){this.booleanShared=e,this.isShared=e?1:0},openStoreBlong:function(){this.sendObj.owner=this.param.owner,this.comObj=this.sendObj,this.showCom="addStoreBlong"},closeWin:function(e,t){"ok"==e&&(this.ownerName=t.name,"3"==t.ischain?this.param.owner=t.id+",0":"0"!=t.ischain?this.param.owner=this.brandId+","+t.id:this.param.owner="0,"+t.id),this.showCom=null},getAddress:function(e){this.param.province=e.province,this.param.city=e.city,this.param.town=e.area},codeInput:function(e){var t=e.target.value;t=t.replace(/[^A-Za-z0-9]/g,""),this.code=t,e.target.value=t},cancel:function(){this.$router.push({path:"warehouseDetail",query:this.$route.query})},confirm:function(){this.checkForm()&&this.changeWarehouse()},checkForm:function(){for(var e in this.param)if(this.param[e]=this.param[e].trim(),"city"!=e&&"town"!=e&&0==this.param[e].length)return this.$store.commit("setWin",{title:"温馨提示",content:this.tips[e]+"不能为空"}),!1;return!0},getWarehouseDetail:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var a,i,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.warehouseGetWarehouse({data:{id:e.wid}});case 2:for(n in a=t.sent,e.detail=a,i={param:{name:"",owner:"",province:"",city:"",town:""},code:"",place:"",isPublic:"",ownerName:"",isShared:""})if("param"==n)for(r in i.param)e.param[r]=e.detail[r];else"isShared"==n?(e.isShared=parseInt(e.detail[n]),e.booleanShared=1==e.isShared):e[n]=e.detail[n];case 6:case"end":return t.stop()}},t,e)}))()},getOwner:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.invoicing_getOwners();case 2:a=t.sent,e.sendObj={allList:a,isBrand:e.isBrand};case 4:case"end":return t.stop()}},t,e)}))()},changeWarehouse:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isClick){t.next=3;break}return e.$store.commit("setWin",{title:"温馨提示",content:"请勿重复点击"}),t.abrupt("return");case 3:return e.isClick=!0,a=null,t.prev=5,t.next=8,s.a.warehouseEditWarehouse({data:{name:e.param.name,code:e.code,isShared:e.isShared,owner:e.param.owner,place:e.place,country:"",province:e.param.province,city:e.param.city,town:e.param.town,wid:e.wid}},!0);case 8:a=t.sent,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(5),e.$store.commit("setWin",{title:"错误提示",content:t.t0.error.message}),e.isClick=!1;case 15:a&&e.$store.commit("setWin",{title:"温馨提示",content:"仓库修改成功",callback:function(){e.$router.push({path:"warehouseDetail",query:e.$route.query})}});case 16:case"end":return t.stop()}},t,e,[[5,11]])}))()}}},o=(a("be24"),a("d801")),l=Object(o.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"change-warehouse"}},[a("div",{staticClass:"create"},[e._v("修改仓库")]),e._v(" "),a("div",{staticClass:"store-content"},[a("div",{staticClass:"store-list"},[a("label",{staticClass:"store-name required"},[e._v("仓库名称")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.param.name,expression:"param.name"}],staticClass:"store-input",attrs:{type:"text",placeholder:"请输入仓库名称",maxlength:"10"},domProps:{value:e.param.name},on:{input:function(t){t.target.composing||e.$set(e.param,"name",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"store-list"},[a("label",{staticClass:"store-name"},[e._v("仓库编号")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],staticClass:"store-input",attrs:{type:"text",placeholder:"请输入仓库编号",maxlength:"20"},domProps:{value:e.code},on:{input:[function(t){t.target.composing||(e.code=t.target.value)},e.codeInput],propertychange:e.codeInput}}),e._v(" "),e._m(0)]),e._v(" "),a("div",{staticClass:"store-list"},[a("label",{staticClass:"store-name required"},[e._v("仓库所属")]),e._v(" "),a("div",{staticClass:"add-blong",on:{click:e.openStoreBlong}},[e._m(1),e._v("添加仓库所属\n            ")]),e._v(" "),e.ownerName?a("em",{staticClass:"now-select"},[e._v("( 已选择："+e._s(e.ownerName)+" )")]):e._e(),e._v(" "),e.ownerName?e._e():a("em",{staticClass:"now-select"},[e._v("( 请选择仓库所属 )")])]),e._v(" "),a("div",{staticClass:"store-list"},[a("label",{staticClass:"store-name required"},[e._v("共享")]),e._v(" "),a("div",{staticClass:"shared-box"},[a("on-off",{attrs:{status:e.booleanShared},on:{statusChange:e.getShared}})],1)]),e._v(" "),a("div",{staticClass:"store-list"},[a("label",{staticClass:"store-name required"},[e._v("仓库地址")]),e._v(" "),a("div",{staticClass:"address-box"},[a("addresslinkage",{attrs:{width:210,province:e.param.province,city:e.param.city,area:e.param.town},on:{emit:e.getAddress}})],1),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.place,expression:"place"}],staticClass:"text-area",attrs:{placeholder:"请输入详细地址",maxlength:"40"},domProps:{value:e.place},on:{input:function(t){t.target.composing||(e.place=t.target.value)}}}),e._v(" "),e._m(2)])]),e._v(" "),a("div",{staticClass:"store-content"},[a("div",{staticClass:"bottom-btn"},[a("div",{staticClass:"gray cancel-btn",on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("div",{staticClass:"yellow ok-btn",on:{click:e.confirm}},[e._v("确定")])])]),e._v(" "),a(e.showCom,{tag:"component",attrs:{pObj:e.comObj},on:{throwWin:e.closeWin}})],1)},i,!1,null,"21d2a1d6",null);t.default=l.exports},"8e35":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAyRTk3N0U3NjkwOTExRTY4MzI2OEU1NkY3Qjg2QTA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAyRTk3N0U4NjkwOTExRTY4MzI2OEU1NkY3Qjg2QTA3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDJFOTc3RTU2OTA5MTFFNjgzMjY4RTU2RjdCODZBMDciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDJFOTc3RTY2OTA5MTFFNjgzMjY4RTU2RjdCODZBMDciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7A3duJAAAANElEQVR42mL6//8/Ax6MDPCpY2BioBIYNYiOBrEA8X8i1f4fel5jJNI7jKPpaNQgHAAgwAAuLjvvigxAWAAAAABJRU5ErkJggg=="},be24:function(e,t,a){"use strict";var i=a("ed03");a.n(i).a},ed03:function(e,t,a){}}]);