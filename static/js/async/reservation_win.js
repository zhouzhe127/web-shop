(window.webpackJsonp=window.webpackJsonp||[]).push([["reservation_win"],{7426:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("win",{attrs:{align:"center",width:650,height:"auto",type:"alert"},on:{winEvent:t.clickResult}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v("预约详情")]),t._v(" "),e("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"main-box"},[e("div",{staticClass:"list"},[e("div",{staticClass:"title"},[e("span",[t._v("序号")]),t._v(" "),e("span",{staticClass:"wide"},[t._v("菜品名")]),t._v(" "),e("span",[t._v("单价")]),t._v(" "),e("span",[t._v("商品数量")]),t._v(" "),e("span",[t._v("口味价格")]),t._v(" "),e("span",[t._v("小计")]),t._v(" "),e("span")]),t._v(" "),t.list.length&&t.hasGoods?e("ul",t._l(t.list,function(s,i){return e("li",{key:i},[e("span",[t._v(t._s(i+1))]),t._v(" "),e("span",{staticClass:"wide text-ellipsis"},[t._v(t._s(s.goodsName))]),t._v(" "),e("span",[t._v(t._s(s.price))]),t._v(" "),e("span",[t._v(t._s(s.num))]),t._v(" "),e("span",[t._v(t._s(t.getTastePrice(s)))]),t._v(" "),e("span",[t._v(t._s(s.totalPrice-0+(t.getTastePrice(s)-0)))]),t._v(" "),s.isReturn?e("span",[e("img",{attrs:{src:a("e566")}})]):t._e(),t._v(" "),s.isFree?e("span",[e("img",{attrs:{src:a("84e0")}})]):t._e()])})):t._e(),t._v(" "),t.plist.length&&t.hasGoods?e("ul",t._l(t.plist,function(s,i){return e("li",{key:i},[e("span",[t._v(t._s(t.list.length+i+1))]),t._v(" "),e("span",{staticClass:"wide text-ellipsis"},[t._v(t._s(s.packageName))]),t._v(" "),e("span",[t._v(t._s(s.price))]),t._v(" "),e("span",[t._v(t._s(s.num))]),t._v(" "),e("span",[t._v("0")]),t._v(" "),e("span",[t._v(t._s(s.price))]),t._v(" "),s.isReturn?e("span",[e("img",{attrs:{src:a("e566")}})]):t._e(),t._v(" "),s.isFree?e("span",[e("img",{attrs:{src:a("84e0")}})]):t._e()])})):t._e(),t._v(" "),t.hasGoods?t._e():e("ul",[e("li",{staticClass:"empty"},[t._v("该订单没有商品信息")])])])]),t._v(" "),e("div",{staticClass:"bottom-box"},[e("span",[t._v("总计："+t._s(t.num)+" 份")]),t._v(" "),e("span",{staticClass:"light"},[t._v("预付款："+t._s(t.price))])])])])};e._withStripped=!0;var i=a("bbb9"),n={data:function(){return{showWin:null,winData:"",info:{goodsData:{goods:[]}},list:[],plist:[],hasGoods:!1,num:0,price:0}},props:["detailList"],mounted:function(){this.detailList&&(this.winData=this.detailList),this.initData()},methods:{clickResult:function(){this.$emit("emit","close")},initData:function(){this.winData.goodsData&&this.winData.goodsData.goods&&this.winData.goodsData.goods.length>0&&(this.list=this.changeList(this.winData.goodsData.goods,"goods")),this.winData.goodsData&&this.winData.goodsData.package&&this.winData.goodsData.package.length>0&&(this.plist=this.changeList(this.winData.goodsData.package,"package")),this.price=this.winData.price,this.getSomeData()},toFloatStr:function(t){var s=t+"";return i.a.toFloatStr(s,2)},getSomeData:function(){(this.list.length>0||this.plist.length>0)&&(this.hasGoods=!0),this.num=this.list.length+this.plist.length},changeList:function(t,s){var a=[];if(0==t.length)return a;for(var e=0;e<t.length;e++){var i=0,n=t[e];if(n.num-=0,t[e].returnNum||t[e].freeNum)i=t[e].unitPrice;else{var o=0;t[e].goodsName?1!=t[e].type&&(o=this.getTastePrice(t[e])):o=0,i=(t[e].price-o)/(t[e].num-0),i=this.toFloatStr(i.toString())}if(t[e].returnNum-=0,t[e].returnNum&&0!=t[e].returnNum){var r={};r.num=t[e].returnNum,n.num-=t[e].returnNum,r.price=i,r.totalPrice=(r.num-0)*(r.price-0),r.type=t[e].type,"goods"==s?(t[e].attr&&(r.attr=t[e].attr),r.goodsName=t[e].goodsName):"package"==s&&(r.packageName=t[e].packageName),r.isReturn=!0,a.push(r)}if(t[e].freeNum-=0,t[e].freeNum&&0!=t[e].freeNum){var l={};l.num=t[e].freeNum,n.num-=t[e].freeNum,l.price=i,l.totalPrice=(l.num-0)*(l.price-0),l.type=t[e].type,"goods"==s?(t[e].attr&&(l.attr=t[e].attr),l.goodsName=t[e].goodsName):"package"==s&&(l.packageName=t[e].packageName),l.isFree=!0,a.push(l)}n.num>0&&(n.price=i,n.totalPrice=(n.num-0)*(i-0),a.push(n))}return a},getTastePrice:function(t){if(t.attr&&0==t.attr.length)return 0;for(var s=t.attr,a=0,e=0;e<s.length;e++)for(var i=0;i<s[e].name.length;i++)1==t.type?a+=s[e].name[i].split(":")[1]-0:a+=(s[e].name[i].split(":")[1]-0)*(t.num-0);return a=this.toFloatStr(a.toString())}},components:{win:function(){return a.e("win").then(a.bind(null,"f60a"))}}},o=(a("8c76"),a("7610")),r=Object(o.a)(n,e,[],!1,null,"3c6789ec",null);r.options.__file="src\\module\\statistics\\reservation_win.vue";s.default=r.exports},"7eef":function(t,s,a){},"84e0":function(t,s,a){t.exports=a.p+"images/freeGoods.f1d03823.png"},"8c76":function(t,s,a){"use strict";var e=a("7eef");a.n(e).a},e566:function(t,s,a){t.exports=a.p+"images/returnGoods.5c90a64d.png"}}]);