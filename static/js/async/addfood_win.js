(window.webpackJsonp=window.webpackJsonp||[]).push([["addfood_win"],{2025:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("win",{attrs:{width:t.width,height:t.height,align:"right"},on:{winEvent:t.winEvent},scopedSlots:t._u([{key:"content",fn:function(e){return a("div",{staticStyle:{height:"100%"},attrs:{id:"tan"}},[a("div",{attrs:{id:"addGoods"}},[a("div",{staticClass:"lidput"},[a("p",{staticClass:"required"},[t._v("商品名称")]),t._v(" "),a("div",{staticClass:"fillout"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.packageName,expression:"packageName"}],staticClass:"input",staticStyle:{width:"200px",height:"40px"},attrs:{type:"text",maxlength:"30",placeholder:"输入名称"},domProps:{value:t.packageName},on:{input:function(e){e.target.composing||(t.packageName=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"lidput"},[a("p",{staticClass:"required"},[t._v("商品价格")]),t._v(" "),a("div",{staticClass:"fillout"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.packagePice,expression:"packagePice"}],staticClass:"input",staticStyle:{width:"200px",height:"40px"},attrs:{type:"text",maxlength:"20",placeholder:"输入价格0~500"},domProps:{value:t.packagePice},on:{input:function(e){e.target.composing||(t.packagePice=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"lidput"},[a("p",{staticClass:"required"},[t._v("商品分类")]),t._v(" "),a("div",{staticClass:"fillout"},[a("a",{staticClass:"addclassify",staticStyle:{width:"210px"},attrs:{href:"javascript:void(0);"},on:{click:function(e){t.addClassify(t.classifyname)}}},[t._v("选择分类")])]),t._v(" "),a("h1",{staticClass:"bomTxt"},[t._v("已添加分类："+t._s(t.classifyname))])]),t._v(" "),a("div",{staticClass:"lidput"},[a("p",{staticClass:"required"},[t._v("餐盒数量")]),t._v(" "),a("div",{staticClass:"fillout"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.mealboxNum,expression:"mealboxNum"}],staticClass:"input",staticStyle:{width:"200px",height:"40px"},attrs:{type:"text",maxlength:"20",placeholder:"请输入数量0~100"},domProps:{value:t.mealboxNum},on:{input:function(e){e.target.composing||(t.mealboxNum=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"lidput"},[a("p",{staticClass:"required"},[t._v("餐盒价格")]),t._v(" "),a("div",{staticClass:"fillout"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.mealUnit,expression:"mealUnit"}],staticClass:"input",staticStyle:{width:"200px",height:"40px"},attrs:{type:"text",maxlength:"20",placeholder:"请输入价格0~100"},domProps:{value:t.mealUnit},on:{input:function(e){e.target.composing||(t.mealUnit=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"lidput"},[a("p",{staticClass:"required"},[t._v("最小购买数量")]),t._v(" "),a("div",{staticClass:"fillout"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.minBuy,expression:"minBuy"}],staticClass:"input",staticStyle:{width:"200px",height:"40px"},attrs:{type:"text",maxlength:"20",placeholder:"请输入最小购买数量0~50"},domProps:{value:t.minBuy},on:{input:function(e){e.target.composing||(t.minBuy=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"lidput"},[a("p",{staticStyle:{"vertical-align":"top"}},[t._v("商品描述")]),t._v(" "),a("div",{staticClass:"fillout"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"describe",staticStyle:{width:"300px",height:"98px","font-size":"14px"},attrs:{maxlength:"200",placeholder:"输入描述"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"put-icon"},[a("i"),t._v(" "),a("span",{staticStyle:{color:"#999999","font-size":"16px"}},[t._v("限200字以内")])])]),t._v(" "),a("div",{staticClass:"lidput"},[a("p",{class:{required:2!=t.checkAdd}},[t._v("门店商品关联")]),t._v(" "),2!=t.checkAdd?a("div",{staticClass:"fillout"},[a("a",{staticClass:"addclassify",staticStyle:{width:"210px"},attrs:{href:"javascript:void(0);"},on:{click:t.releGoods}},[t._v("添加关联商品")])]):t._e(),t._v(" "),a("h1",{class:{bomTxt:2!=t.checkAdd,textrel:2==t.checkAdd}},[2!=t.checkAdd?a("span",[t._v("已关联商品：")]):t._e(),t._v(t._s(t.releSel.goodsName||t.releSel.packageName))])]),t._v(" "),a("div",{staticClass:"imgbox"},[a("div",{staticClass:"upfilediv",attrs:{id:"upfilediv"}},[""!=t.imgsrc?a("img",{attrs:{id:"mimgs",src:t.imgsrc,width:"225",height:"150"}}):a("img",{attrs:{id:"mimgs",src:i("61ba"),width:"225",height:"150"}}),t._v(" "),a("a",[t._v("编辑图片(500k以内)")]),t._v(" "),a("form",{attrs:{method:"post",id:"uploadImageForm",enctype:"multipart/form-data"}},[a("input",{staticStyle:{position:"absolute",bottom:"0",height:"40px",width:"225px",opacity:"0",cursor:"pointer"},attrs:{type:"file",accept:"image/jpeg,image/jpg",id:"fileInput",name:"image"},on:{change:t.imgUpload}})])])])])])}}])},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))])]),t._v(" "),t.packWin.winshow?a("packlist",{ref:"packwin",attrs:{width:t.packWin.width,addClassify:t.packWin.addClassify,height:t.packWin.height,title:t.packWin.title},on:{packwinEvent:t.packwin}}):t._e(),t._v(" "),t.relationWin.winshow?a("relationWin",{ref:"relationwin",attrs:{width:t.relationWin.width,changeConfig:t.relationWin.changeConfig,seloneAir:t.relationWin.seloneAir,seltwoAir:t.relationWin.seltwoAir,height:t.relationWin.height,title:t.relationWin.title},on:{relationEvent:t.relationevn}}):t._e()],1)};a._withStripped=!0;var s=i("81a2"),n=i("f6ce");function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(s,n){try{var o=e[s](n),r=o.value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(r).then(function(t){a("next",t)},function(t){a("throw",t)});t(r)}("next")})}}var r=n.a.session("userShop"),l=r.uploadUrl,c=n.a.session("packageList"),d=n.a.session("goodList");if(d)for(var p=0;p<d.length;p++)1!=d[p].type&&2!=d[p].type&&2!=d[p].status&&1!=d[p].isGroup||(d.splice(p,1),p--);var u={data:function(){return{packageName:"",packagePice:"",mealboxNum:"",mealUnit:"",minBuy:"",description:"",imgsrc:"",imgHost:l,classifyname:"",releSel:"",imgupData:"",checkAdd:this.type,packWin:{width:800,height:500,title:"添加商品",winshow:!1,addClassify:""},relationWin:{width:1e3,height:500,title:"关联商品",winshow:!1,addClassify:"",seloneAir:{},seltwoAir:{},changeConfig:3}}},props:["width","height","title","goodsList","type","item"],mounted:function(){console.log(this.type),2==this.type&&this.init()},methods:{init:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var i,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.queryListByEdishCodes({data:{eDishCodes:/^(0)/.test(t.item.eDishSkuCode)?t.item.eDishSkuCode.substr(1,t.item.eDishSkuCode.length-1):t.item.eDishSkuCode}});case 2:i=e.sent,a={},n=i.list[0],t.packageName=n.dishName,t.packagePice=n.price,t.mealboxNum=n.boxNum,t.mealUnit=n.boxPrice,t.minBuy=n.minOrderCount,t.description=n.description,t.classifyname=n.categoryName,t.imgsrc=n.picture,a.id=t.item.eDishSkuCode,a.goodsName=t.getGoodsName(a.id),t.releSel=a;case 16:case"end":return e.stop()}},e,t)}))()},addClassify:function(t){this.packWin.addClassify=t,this.packWin.winshow=!0},releGoods:function(){this.relationWin.winshow=!0},imgUpload:function(t){var e=this;return o(regeneratorRuntime.mark(function i(){var a,n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if("image/jpg"==t.target.files[0].type||"image/jpeg"==t.target.files[0].type){i.next=3;break}return e.alert("提示","只允许上传jpg格式图片"),i.abrupt("return",!1);case 3:for(a=0;a<t.target.files.length;a++)(n=new FileReader).readAsDataURL(t.target.files[a]),n.onload=function(t){t.total>5e5?e.alert("错误提示","图片大小必须小于500K"):e.imgsrc=t.currentTarget.result};return i.next=6,s.a.bigImgUpload({data:{type:8,shopId:r.currentShop.id},formId:"uploadImageForm"});case 6:o=i.sent,e.imgupData=l+o;case 8:case"end":return i.stop()}},i,e)}))()},packwin:function(t){this.packWin.winshow=!1,"ok"==t&&this.packClose()},packClose:function(){this.classifyname=this.$refs.packwin.selected.categoryName},relationevn:function(t){this.relationWin.winshow=!1,"ok"==t&&this.relationClose()},relationClose:function(){if(""==this.$refs.relationwin.selected)return this.alert("提示","请关联商品"),this.relationWin.winshow=!0,!1;for(var t=!1,e=0;e<this.goodsList.length;e++)for(var i=0;i<this.goodsList[e].list.length;i++)if(this.goodsList[e].list[i].eDishSkuCode==this.$refs.relationwin.selected.id){t=!0;break}if(t)return this.alert("提示","该商品已经被关联请重新关联"),this.relationWin.winshow=!0,!1;this.$refs.relationwin.selected.isPackage=this.$refs.relationwin.isPackage?1:0,this.releSel=this.$refs.relationwin.selected},winEvent:function(t){this.$emit("winEvent",t)},alert:function(t,e){this.$store.commit("setWin",{title:t,content:e})},getGoodsName:function(t){if(/^(0)/.test(t)){t=t.substr(1,t.length-1);for(var e=0;e<c.length;e++)if(t==c[e].id)return c[e].packageName}else for(var i=0;i<d.length;i++)if(t==d[i].id)return d[i].goodsName;return!1}},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))},packlist:function(){return i.e("packlist_win").then(i.bind(null,"c92e"))},relationWin:function(){return i.e("relation_win").then(i.bind(null,"596b"))}}},h=(i("84f0"),i("6ceb")),m=Object(h.a)(u,a,[],!1,null,"185d6965",null);m.options.__file="src\\module\\outfood\\accredit\\addfood_win.vue";e.default=m.exports},"61ba":function(t,e,i){t.exports=i.p+"images/test.90111ab3.jpg"},"84f0":function(t,e,i){"use strict";var a=i("8fd9");i.n(a).a},"8fd9":function(t,e,i){}}]);