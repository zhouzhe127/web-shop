(window.webpackJsonp=window.webpackJsonp||[]).push([["activity_agift_coupon"],{"1dd3":function(t,e,n){"use strict";var s=n("7e84");n.n(s).a},"7e84":function(t,e,n){},c8cd:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Win",{attrs:{width:850,height:350},on:{winEvent:t.winEvent}},[n("div",{staticClass:"coupon_list",staticStyle:{padding:"20px",overflow:"hidden"},attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"top",staticStyle:{"border-bottom":"1px dashed #ccc","padding-bottom":"20px"}},t._l(t.couponType,function(e,s){return n("span",{key:s,staticClass:"sel",class:{on:t.flag==s},on:{click:function(e){t.showCount(s)}}},[t._v(t._s(e.name))])})),t._v(" "),n("div",{staticStyle:{"padding-top":"10px",position:"relative"}},[n("span",{staticStyle:{"font-size":"14px",color:"#999999"}},[t._v("选择优惠券：")]),t._v(" "),n("section",{staticClass:"fr",staticStyle:{width:"100%",height:"auto","margin-bottom":"10px"}},[n("a",{staticClass:"unselect fr",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.selectUnselect()}}},[t._v("全部取消")])]),t._v(" "),n("section",{staticClass:"comList"},[n("coupon",{ref:"coupon",attrs:{list:t.goodsCom,selects:t.selects,"max-num":5,name:"name",keyName:"id"},on:{select:t.select}})],1)])])])};s._withStripped=!0;var i=n("bbb9"),o=n("81a2");var c={props:{selectCoupon:{type:Array,default:function(){return[]}}},data:function(){return{index:0,flag2:0,goodsCom:[],couponLists:[],selects:[],list:[],couponType:[{name:"全部"},{name:"满减优惠券"},{name:"折扣优惠券"},{name:"赠优惠券"}],flag:0}},methods:{select:function(t){this.selects=t.selectList,this.list=t.list},winEvent:function(t){this.$emit("winEvent",{status:t,data:{select:this.selects,list:this.list}})},selectUnselect:function(t,e){if("1"==t)for(var n=0;n<e.length;n++)this.selects.push(e[n].id);else this.selects=[]},getNoLimitCoupon:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var n,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getCouponCondition({data:{}});case 2:n=t.sent,s=[],n.filter(function(t){t.num=1,"6"!=t.type&&"7"!=t.type&&s.push(t)}),e.couponLists=s,e.goodsCom=e.filterList(e.couponLists,0),setTimeout(function(){e.$refs.coupon.up()});case 8:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function s(i,o){try{var c=e[i](o),a=c.value}catch(t){return void n(t)}if(!c.done)return Promise.resolve(a).then(function(t){s("next",t)},function(t){s("throw",t)});t(a)}("next")})})()},showCount:function(t){this.flag=t,this.goodsCom=this.filterList(this.couponLists,t)},filterList:function(t,e){for(var n=[],s=0;s<t.length;s++)0==e?n=i.a.deepCopy(t):1==e?"1"!=t[s].type&&"2"!=t[s].type&&"3"!=t[s].type||n.push(t[s]):2==e?"4"==t[s].type&&n.push(t[s]):"5"==t[s].type&&n.push(t[s]);return n}},watch:{selects:function(){11==this.selects.length&&(this.$store.commit("setWin",{content:"最多选择10张优惠劵"}),this.selects.splice(this.selects.length-1,1))}},components:{Win:function(){return n.e("win").then(n.bind(null,"f60a"))},coupon:function(){return n.e("coupon").then(n.bind(null,"6595"))}},created:function(){this.selects=i.a.deepCopy(this.selectCoupon)},mounted:function(){this.getNoLimitCoupon()}},a=(n("1dd3"),n("6ceb")),u=Object(a.a)(c,s,[],!1,null,"268e042a",null);u.options.__file="src\\module\\marketing_tools\\new_activity\\activity_agift_coupon.vue";e.default=u.exports}}]);