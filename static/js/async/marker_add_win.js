(window.webpackJsonp=window.webpackJsonp||[]).push([["marker_add_win"],{"1f9e":function(t,e,s){"use strict";var n=s("23ba");s.n(n).a},"23ba":function(t,e,s){},"8e35":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAyRTk3N0U3NjkwOTExRTY4MzI2OEU1NkY3Qjg2QTA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAyRTk3N0U4NjkwOTExRTY4MzI2OEU1NkY3Qjg2QTA3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDJFOTc3RTU2OTA5MTFFNjgzMjY4RTU2RjdCODZBMDciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDJFOTc3RTY2OTA5MTFFNjgzMjY4RTU2RjdCODZBMDciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7A3duJAAAANElEQVR42mL6//8/Ax6MDPCpY2BioBIYNYiOBrEA8X8i1f4fel5jJNI7jKPpaNQgHAAgwAAuLjvvigxAWAAAAABJRU5ErkJggg=="},a484:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("win",{attrs:{align:"right",width:550,height:550},on:{winEvent:t.closeSelfWin}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("编辑标识")]),t._v(" "),n("div",{attrs:{slot:"content",id:"marker_add"},slot:"content"},[n("p",{staticClass:"title"},[n("span",{staticClass:"base-info"},[t._v("基本信息\n\t\t\t\t\t"),n("span",{staticClass:"split-line"})])]),t._v(" "),n("p",{staticClass:"tagName"},[t._v("名称："+t._s(t.pObj.flag))]),t._v(" "),n("div",{staticClass:"tag-num"},[n("span",{staticStyle:{"font-size":"16px"}},[t._v(" 口味成度：\n\t\t\t\t\t"),t._l(t.markerNum,function(e){return n("span",{key:e},[1===t.pObj.markerType?n("img",{staticClass:"img",attrs:{src:s("d3e9"),alt:"星星图片"}}):t._e(),t._v(" "),2===t.pObj.markerType?n("img",{staticClass:"img",attrs:{src:s("4877"),alt:"点赞图片"}}):t._e(),t._v(" "),3===t.pObj.markerType?n("img",{staticClass:"img",attrs:{src:s("edfe"),alt:"辣椒图片"}}):t._e()])})],2)]),t._v(" "),n("div",{staticClass:"relative-good"},[n("span",{staticClass:"goods"},[t._v("关联商品：")]),t._v(" "),n("div",{staticClass:"addGoods",on:{click:t.openRelativeGoods}},[n("img",{attrs:{src:s("8e35"),alt:"添加"}}),t._v(" "),n("h3",[t._v("添加关联商品")])]),t._v(" "),n("span",{staticClass:"info"},[t._v("\n\t\t\t\t\t(已关联商品"+t._s(this.goodsIds.length+"")+"个， 套餐"+t._s(this.packageIds.length+"")+"个)\n\t\t\t\t")])])])]),t._v(" "),n(t.showCom,{tag:"component",attrs:{pGoodsList:t.comObj},on:{throwGoodListWin:t.closeRelativeGoods}})],1)};n._withStripped=!0;var a=s("81a2"),r=s("f6ce");function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function n(a,r){try{var o=e[a](r),i=o.value}catch(t){return void s(t)}if(!o.done)return Promise.resolve(i).then(function(t){n("next",t)},function(t){n("throw",t)});t(i)}("next")})}}var i={data:function(){return{showCom:null,goodsList:null,markerNum:0,comObj:{},relativeGoods:0,relativePack:0,shopId:null,falGoodIds:[],falPackageIds:[],goodsIds:[],copyGoodsIds:[],packageIds:[],copyPackageIds:[]}},props:{pObj:null},methods:{openRelativeGoods:function(){this.showCom="goodList";var t=[];this.goodsList.forEach(function(e){0!=e.status&&1!=e.status||(0==e.type&&!Number(e.isGroup)&&!Number(e.groupId)||1==e.type||1==e.isGroup&&!Number(e.groupId))&&t.push(e)}),this.comObj={selGoods:this.goodsIds,delGoods:this.falGoodIds,selPack:this.packageIds,delPack:this.falPackageIds,goodsList:t,type:0}},closeRelativeGoods:function(t,e){var s=this;this.showCom="",this.relativeGoods=e.goodArr.length,this.relativePack=e.packArr.length,this.goodsIds=[],this.packageIds=[],e.goodArr.forEach(function(t){s.goodsIds.push(t.id)}),e.packArr.forEach(function(t){s.packageIds.push(t.id)})},closeSelfWin:function(t){var e=this;"ok"==t?this.checkData()?this.$emit("throwAddWin","same"):this.addMarker().then(function(t){e.$emit("throwAddWin","edit",t)}):this.$emit("throwAddWin","close")},copyData:function(t){var e=null;return e=JSON.stringify(t),e=JSON.parse(e)},formatData:function(t){return t?t.split(","):[]},funSortArr:function(t){return t.sort(function(t,e){return t-e})},checkData:function(){var t=!0;if(this.copyGoodsIds.length==this.goodsIds.length){for(var e=0,s=this.copyGoodsIds.length;e<s;e++)if(this.copyGoodsIds[e]!=this.goodsIds[e]){t=!1;break}}else t=!1;if(t&&this.copyPackageIds.length==this.packageIds.length){for(var n=0,a=this.copyPackageIds.length;n<a;n++)if(this.copyPackageIds[n]!=this.packageIds[n]){t=!1;break}}else t=!1;return t},getGoodsMarker:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getGoodsMarker({data:{id:t.pObj.id,shopId:t.pObj.shopId}});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,t)}))()},addMarker:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.addMarker({data:{id:t.pObj.id,shopId:t.pObj.shopId,goodsIds:t.goodsIds.join(","),packageIds:t.packageIds.join(",")}});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},e,t)}))()},getGoods:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=null,e.next=3,a.a.getGoodsList({data:{shopId:t.shopId,page:1,num:9999,specification:1}});case 3:return n=e.sent,s=n.list,r.a.session("goodList",s),e.abrupt("return",s);case 7:case"end":return e.stop()}},e,t)}))()},getGoodsList:function(t,e){var s=this;return o(regeneratorRuntime.mark(function n(){var a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=null,!t){n.next=7;break}return n.next=4,s.getGoods();case 4:a=n.sent,n.next=25;break;case 7:if(o=r.a.session("httpGoodVersion")){n.next=14;break}return n.next=11,s.getGoods();case 11:a=n.sent,n.next=25;break;case 14:if(o.goodsConfigVer!=e){n.next=22;break}if(a=r.a.session("goodList")){n.next=20;break}return n.next=19,s.getGoods();case 19:a=n.sent;case 20:n.next=25;break;case 22:return n.next=24,s.getGoods();case 24:a=n.sent;case 25:return n.abrupt("return",a);case 26:case"end":return n.stop()}},n,s)}))()},ShopGetExtra:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.ShopGetExtra({data:{}});case 2:return s=t.sent,t.abrupt("return",s);case 4:case"end":return t.stop()}},e,t)}))()},initData:function(){this.shopId=this.pObj.shopId,this.markerNum=this.pObj.markerNum},syncRequest:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ShopGetExtra();case 2:return s=e.sent,e.next=5,t.getGoodsList(!1,s.goodsConfigVer);case 5:n=e.sent,t.goodsList=n,r.a.session("httpGoodVersion",s);case 8:case"end":return e.stop()}},e,t)}))()}},mounted:function(){var t=this;this.initData(),this.pObj.id&&this.getGoodsMarker().then(function(e){t.goodsIds=t.formatData(e.realGoodIds),t.falGoodIds=t.formatData(e.falGoodIds),t.packageIds=t.formatData(e.realPackageIds),t.falPackageIds=t.formatData(e.falPackageIds),t.copyGoodsIds=t.copyData(t.goodsIds),t.copyPackageIds=t.copyData(t.packageIds)}),this.syncRequest()},components:{win:function(){return s.e("win").then(s.bind(null,"f60a"))},goodList:function(){return s.e("good_package_win").then(s.bind(null,"f163"))}}},c=(s("1f9e"),s("6ceb")),d=Object(c.a)(i,n,[],!1,null,"0f3b8b24",null);d.options.__file="src\\module\\goods_config\\marker\\marker_add_win.vue";e.default=d.exports}}]);