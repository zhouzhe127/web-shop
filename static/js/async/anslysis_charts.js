(window.webpackJsonp=window.webpackJsonp||[]).push([["anslysis_charts"],{"0d89":function(e,t,i){},"2b50":function(e,t,i){},"84c1":function(e,t,i){"use strict";var s=i("2b50");i.n(s).a},b8bc:function(e,t,i){e.exports=i.p+"images/preloader.3e54c692.gif"},c7fd:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"charts-order"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticStyle:{width:"128px",margin:"200px auto"}},[s("img",{attrs:{src:i("b8bc")}})]),e._v(" "),s("section",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticStyle:{"text-align":"center",width:"100%"}},[s("div",{staticStyle:{height:"50px","border-bottom":"2px solid #ccc"}},[s("div",{staticStyle:{margin:"0 auto"}},e._l(e.chartsTitle.list,function(t,i){return s("span",{key:i,staticClass:"titleChart",style:{width:100/e.chartsTitle.list.length+"%"}},[s("span",{class:{one:i==e.chartsTitle.flag},staticStyle:{cursor:"pointer",display:"inline-block"},on:{click:function(s){e.changeTitlechart(i,t)}}},[e._v(e._s(t.name))])])}))]),e._v(" "),1==e.flag||2==e.flag||3==e.flag||4==e.flag?s("div",{ref:"percent",staticStyle:{height:"400px",width:"100%","min-width":"700px"},attrs:{id:"chart"}}):e._e(),e._v(" "),0===e.flag?s("div",{ref:"myflow",staticStyle:{height:"400px",width:"100%","min-width":"700px"},attrs:{id:"chart"}}):e._e(),e._v(" "),s("div",{staticStyle:{display:"inline-block",margin:"0 auto"}},e._l(e.ChartShopName,function(t,i){return s("div",{key:i,staticClass:"hide",staticStyle:{height:"55px",width:"auto",display:"inline-block","margin-left":"10px",cursor:"pointer"},on:{click:function(i){e.chartShop(t)}}},[s("div",{class:[t.className,{chactive:t.className}],staticStyle:{width:"15px",height:"15px",margin:"0 auto",border:"1px solid #69676F","border-radius":"3px"}}),e._v(" "),s("div",{staticStyle:{display:"inline-block",height:"40px","line-height":"40px"}},[e._v(e._s(t.name))])])})),e._v(" "),s("div",{staticStyle:{width:"750px","margin-bottom":"10px"}},[s("div",{staticStyle:{"margin-bottom":"20px",display:"inline-block",margin:"0 auto"}},e._l(e.buttonList.list,function(t,i){return s("span",{key:i,staticClass:"sel",class:{on:e.flag==i},on:{click:function(t){e.light(i)}}},[e._v(e._s(t.name))])}))]),e._v(" "),e.isTrue?s("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":e.rowClass,data:e.chartsPageList,"summary-method":e.getSummaries,"show-summary":"",border:"","head-align":"center",stripe:""}},[s("el-table-column",{staticStyle:{"text-align":"center"},attrs:{fixed:"",label:"时间",align:"center","show-overflow-tooltip":!0,width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("ul",[0===e.typeFlag?s("li",{staticClass:"aLi",staticStyle:{cursor:"pointer"},style:{height:50*t.row.list.length+"px"}},[s("p",{staticStyle:{"line-height":"30px"}},[e._v(e._s(e.timeTodate(t.row.time)))]),e._v(" "),s("p",{staticStyle:{"line-height":"10px"}},[e._v(e._s(e.timeToday(t.row.time)))])]):e._e(),e._v(" "),1===e.typeFlag?s("li",{staticClass:"aLi",staticStyle:{cursor:"pointer"},style:{height:50*t.row.list.length+"px"}},[s("p",{staticStyle:{"line-height":"30px"}},[e._v(e._s(e.timeToweek(t.row.time)))]),e._v(" "),s("p",{staticStyle:{"line-height":"10px"}},[e._v(e._s(e.weekTotime(t.row.time)))])]):e._e(),e._v(" "),2===e.typeFlag?s("li",{staticClass:"aLi",staticStyle:{cursor:"pointer"},style:{height:50*t.row.list.length+"px"}},[s("p",{staticStyle:{"line-height":"50px"}},[e._v(e._s(e.timeTodate(t.row.time)))])]):e._e(),e._v(" "),3===e.typeFlag?s("li",{staticClass:"aLi",staticStyle:{cursor:"pointer"},style:{height:50*t.row.list.length+"px"}},[s("p",{staticStyle:{"line-height":"30px"}},[e._v(e._s(e.timeToquarter(t.row.time)))])]):e._e(),e._v(" "),4===e.typeFlag?s("li",{staticClass:"aLi",staticStyle:{cursor:"pointer"},style:{height:50*t.row.list.length+"px"}},[s("p",{staticStyle:{"line-height":"50px"}},[e._v(e._s(e.timeToyear(t.row.time)))])]):e._e()])]}}])}),e._v(" "),s("el-table-column",{attrs:{fixed:"",align:"center",label:"店铺名称",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.list,function(i,a){return s("span",{key:a},[i.shopName?s("span",{staticClass:"title",class:{line:a!=t.row.list.length-1},staticStyle:{height:"50px","line-height":"50px",display:"inline-block",width:"100%","vertical-align":"bottom"}},[e._v(e._s(i.shopName))]):e._e()])})}}])}),e._v(" "),e._l(e.chartsTitle.list,function(t,i){return[t.selected?s("el-table-column",{key:i+"list",attrs:{align:"center",prop:t.column,label:t.name},scopedSlots:e._u([{key:"default",fn:function(i){return e._l(i.row.list,function(a,r){return s("span",{key:r},[s("span",{staticClass:"title",class:{line:r!=i.row.list.length-1},staticStyle:{height:"50px","line-height":"50px",display:"inline-block",width:"100%","vertical-align":"bottom"}},[3!=e.flag&&4!=e.flag?s("span",[s("i",[e._v(e._s(a[t.column]))]),e._v(" "),1!=e.flag&&2!=e.flag||"orderNum"==t.column||"goodsNum"==t.column||"originalPrice"==t.column||"paidIn"==t.column||"vouchersCash"==t.column||"vouchersNum"==t.column?e._e():s("i",[e._v("%")])]):s("span",[s("span",{class:{numGreen:a[t.column][1]<0,numRed:a[t.column][1]>0},staticStyle:{display:"block",height:"10px","line-height":"30px"}},[e._v(e._s(a[t.column][1])+e._s(t.name))]),e._v(" "),s("span",{class:{numRed:a[t.column][0]>0,numGreen:a[t.column][0]<0}},[e._v(e._s(a[t.column][0])+"\n                                            "),"-"!=a[t.column][0]?s("span",[e._v("%")]):e._e(),e._v(" "),a[t.column][0]<0||a[t.column][1]<0?s("span",[e._v("↓")]):e._e(),e._v(" "),a[t.column][0]>0||a[t.column][1]>0?s("span",[e._v("↑")]):e._e()])])])])})}}])}):e._e()]})],2):e._e(),e._v(" "),s("div",{staticClass:"page-box"},[s("el-pagination",{attrs:{background:"","page-size":e.num,"current-page":e.page,layout:"total, prev, pager, next, jumper",total:e.chartsOrder.length},on:{"current-change":e.pageChange,"update:currentPage":function(t){e.page=t}}})],1)],1)])};s._withStripped=!0;var a=i("bbb9");var r=null,n={data:function(){return{chartsTitle:{flag:-1,list:[]},chartsOrder:[],chartsPageList:[],chartWidth:0,chartIndex:0,backList:!1,chartTotalList:"",page:1,len:0,total:0,buttonList:{flag:0,list:[{index:0,name:"原表"},{index:1,name:"占比"},{index:2,name:"总占比"},{index:3,name:"环比"},{index:4,name:"同比"}]},ChartSelShop:[],series:[],selSeries:[],chartsHead:[],titleList:[],ChartShopName:[],isTrue:!0}},props:{reportList:Object,loading:Boolean,headList:Array,typeFlag:Number,selShopid:Array,ChartShop:Array,flag:Number,num:Number,chartFlag:Number},watch:{chartFlag:function(e){console.log(e),this.changeCtype(e),console.log(this.chartsTitle)},reportList:function(){this.ChartShopName=this.ChartShop,this.ChartSelShop=this.ChartShop.slice(0,3),this.chartsOrder=a.a.deepCopy(this.reportList.list),this.pageChange(this.page),this.changeCtype(this.chartFlag)}},mounted:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.e("echarts").then(function(){var e=i("375c");return"object"==typeof e&&e&&e.__esModule?e:Object.assign({},"object"==typeof e&&e,{default:e})});case 2:r=e.sent,t.ChartShopName=t.ChartShop,t.chartsHead=a.a.deepCopy(t.headList),t.ChartSelShop=t.ChartShop.slice(0,3),t.chartsOrder=a.a.deepCopy(t.reportList.list),t.pageChange(t.page),t.changeCtype(0);case 9:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function s(a,r){try{var n=t[a](r),l=n.value}catch(e){return void i(e)}if(!n.done)return Promise.resolve(l).then(function(e){s("next",e)},function(e){s("throw",e)});e(l)}("next")})})()},methods:{rowClass:function(e){if(0!=e.columnIndex&1!=e.columnIndex)return"color: #28a8e0"},getSummaries:function(e){var t=this.reportList.total,i=e.columns,s=(e.data,[]);return i.forEach(function(e,i){if(0!==i)if(1!==i)for(var a in t)a==e.property&&(s[i]=t[a]);else s[i]="合计";else s[i]=""}),s},changeCtype:function(e){var t=this;this.chartIndex=0,this.chartsTitle.list=a.a.deepCopy(this.getTitle(e)),this.changeTitlechart(0,this.chartsTitle.list[0]),console.log(this.chartsTitle),this.isTrue=!1,this.$nextTick(function(){t.isTrue=!0})},getTitle:function(e){for(var t=this.headList,i=[],s=0;s<t.length;s++)0!==e||"orderNum"!=t[s].column&&"originalPrice"!=t[s].column&&"price"!=t[s].column&&"paymentPrice"!=t[s].column?1==e&&(t[s].name.indexOf("数量")>-1&&"freeNum"!=t[s].column&&"returnNum"!=t[s].column||"goodsNum"==t[s].column||"salesNum"==t[s].column)?i.push(t[s]):2==e&&t[s].name.indexOf("金额")>-1&&"discountPrice"!=t[s].column&&"freePrice"!=t[s].column&&"returnPrice"!=t[s].column?i.push(t[s]):(3!=e||"discountPrice"!=t[s].column&&"freeNum"!=t[s].column&&"freePrice"!=t[s].column)&&(4!=e||"returnNum"!=t[s].column&&"returnPrice"!=t[s].column&&"goodsNum"!=t[s].column&&"originalPrice"!=t[s].column)&&(5!=e||"change"!=t[s].column&&"bitPrice"!=t[s].column&&"chargePrice"!=t[s].column&&"profit"!=t[s].column&&"originalPrice"!=t[s].column)&&(6!=e||"cash"!=t[s].column&&"bank"!=t[s].column&&"wx"!=t[s].column&&"ali"!=t[s].column&&"vip"!=t[s].column&&"zxwx"!=t[s].column&&"zxali"!=t[s].column&&"other"!=t[s].column&&"price"!=t[s].column)||i.push(t[s]):i.push(t[s]);return i},light:function(e){this.buttonList.flag=e,this.$emit("search",e)},getColor:function(e,t){for(var i=0;i<e.length;i++)if(e[i].className==t)return!1;return!0},chartColor:function(e,t){for(var i=0;i<this.series.length;i++)if(this.series[i].name==e){this.selSeries.push(this.series[i]);for(var s=0;s<this.ChartShopName.length;s++)e==this.ChartShopName[s].name&&this.ChartSelShop.push(this.ChartShopName[s])}for(var a=0;a<this.ChartShopName.length;a++)e==this.ChartShopName[a].name&&(this.ChartShopName[a].className=t)},changeColor:function(){for(var e=0;e<this.selSeries.length;e++){this.selSeries[e].itemStyle={normal:{lineStyle:{color:"#00FF00"}}};for(var t=0;t<this.ChartShopName.length;t++)this.selSeries[e].name==this.ChartShopName[t].name&&("chyellow"==this.ChartShopName[t].className?(this.selSeries[e].itemStyle.normal.lineStyle.color="#ffc801",this.selSeries[e].itemStyle.normal.color="#ffc801"):"chblue"==this.ChartShopName[t].className?(this.selSeries[e].itemStyle.normal.lineStyle.color="#1b88ee",this.selSeries[e].itemStyle.normal.color="#1b88ee"):"chgreen"==this.ChartShopName[t].className&&(this.selSeries[e].itemStyle.normal.lineStyle.color="red",this.selSeries[e].itemStyle.normal.color="red"))}},chartShop:function(e){if(e.className){for(var t=0;t<this.selSeries.length;t++)this.selSeries[t].name==e.name&&this.selSeries.splice(t,1);for(var i=0;i<this.ChartSelShop.length;i++)this.ChartSelShop[i].name==e.name&&this.ChartSelShop.splice(i,1);for(var s=0;s<this.ChartShopName.length;s++)e.name==this.ChartShopName[s].name&&(this.ChartShopName[s].className="")}else if(3==this.selSeries.length){for(var r=a.a.deepCopy(this.ChartShopName),n=a.a.deepCopy(this.ChartSelShop),l=n[0].className,h=0;h<r.length;h++)n[0].name===r[h].name&&(r[h].className="");for(var o=0;o<r.length;o++)e.name===r[o].name&&(r[o].className=l,(n=n.splice(1,3)).push(r[o]));this.ChartSelShop=n,this.ChartShopName=r,this.selSeries=[];for(var c=0;c<this.ChartSelShop.length;c++)for(var u=0;u<this.series.length;u++)this.ChartSelShop[c].name==this.series[u].name&&this.selSeries.push(this.series[u])}else this.getColor(this.ChartShopName,"chyellow")?this.chartColor(e.name,"chyellow"):this.getColor(this.ChartShopName,"chblue")?this.chartColor(e.name,"chblue"):this.getColor(this.ChartShopName,"chgreen")&&this.chartColor(e.name,"chgreen");0===this.flag?this.showEchart():this.showPercent()},showEchart:function(){for(var e={},t=0;t<this.ChartShopName.length;t++)e[this.ChartShopName[t].name]=!1;for(var i=0;i<this.selSeries.length;i++)e[this.selSeries[i].name]=!0;this.changeColor();var s=r.init(this.$refs.myflow),a={tooltip:{trigger:"axis"},legend:{selected:e},toolbox:{show:!0,x:"1100",feature:{saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:this.dataTime}],yAxis:[{type:"value"}],series:this.selSeries};s.setOption(a,!0)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},showPercent:function(){for(var e={},t=0;t<this.ChartShopName.length;t++)e[this.ChartShopName[t].name]=!1;for(var i=0;i<this.selSeries.length;i++)e[this.selSeries[i].name]=!0;for(var s=0;s<this.selSeries.length;s++)for(var a=0;a<this.selSeries[s].data.length;a++)this.isString(this.selSeries[s].data[a])&&(this.selSeries[s].data[a]=this.selSeries[s].data[a].replace("%",""));for(var n=r.init(this.$refs.percent),l=0;l<this.selSeries.length;l++)this.selSeries[l].barGap="1%";var h="",o=this.chartsTitle.list;1!=this.flag&&2!=this.flag||"orderNum"!==o[this.chartsTitle.flag].column&&"originalPrice"!==o[this.chartsTitle.flag].column&&"goodsNum"!==o[this.chartsTitle.flag].column||(h="isok"),this.changeColor();var c={tooltip:{trigger:"axis",formatter:h?"":function(e){var t=e[0].name+"<br/>";return 1==e.length?t+=e[0].seriesName+" : "+e[0].value+"%":2==e.length?(t+=e[0].seriesName+" : "+e[0].value+"%<br/>",t+=e[1].seriesName+" : "+e[1].value+"%"):(t+=e[0].seriesName+" : "+e[0].value+"%<br/>",t+=e[1].seriesName+" : "+e[1].value+"%<br/>",t+=e[2].seriesName+" : "+e[2].value+"%"),t}},legend:{selected:e},toolbox:{show:!0,x:"1100",feature:{saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",data:this.dataTime}],yAxis:[{type:"value",name:h?"":"单位: %"}],series:this.selSeries};n.setOption(c,!0)},changeTitlechart:function(e,t){this.chartsTitle.flag=e,this.getCharts(t.column),this.dataTime=this.dataTime.reverse(),0===this.flag?this.showEchart():this.showPercent()},judgeShop:function(e,t){for(var i=0;i<e.length;i++)if(t==e[i].shopName)return i;return!1},chartDatas:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];for(var s=t[0],a=t[1],r=t[2],n=t[3],l=t[4],h=0;h<a.length;h++){r[a[h].name]=[];for(var o=0;o<s.length;o++){n[o]=s[o].time;var c=this.judgeShop(s[o].list,a[h].name);!1!==this.judgeShop(s[o].list,a[h].name)?r[a[h].name][o]=s[o].list[c][l]:r[a[h].name][o]=0}}},getCharts:function(e){var t=this.ChartShopName,i={};this.dataTime=[],this.chartDatas(this.chartsOrder,t,i,this.dataTime,e),this.series=[];for(var s=0;s<t.length;s++)for(var a in this.series[s]={},i)t[s].name==a&&(this.series[s].name=t[s].name,this.series[s].data=i[a],0===this.flag?this.series[s].type="line":this.series[s].type="bar");if(3==this.flag||4==this.flag)for(var r=0;r<this.series.length;r++)for(var n=0;n<this.series[r].data.length;n++)"-"==this.series[r].data[n][0]?this.series[r].data[n]=0:0==this.series[r].data[n]?this.series[r].data[n]=0:this.series[r].data[n]=this.series[r].data[n][0];this.selSeries=[];for(var l=0;l<this.series.length;l++)this.series[l].data.reverse();for(var h=0;h<this.ChartSelShop.length;h++)for(var o=0;o<this.series.length;o++)this.ChartSelShop[h].name==this.series[o].name&&this.selSeries.push(this.series[o])},toPage:function(){this.selShopid.length<=3?this.num=8:this.selShopid.length>3&&this.selShopid.length<=5?this.num=5:this.selShopid.length>5&&this.selShopid.length<10?this.num=3:this.selShopid.length>=10&&this.selShopid.length<20?this.num=2:this.num=1,this.page=1,this.total=Math.ceil(this.chartsOrder.length/this.num),this.total<10?this.len=this.total:this.len=10,this.page>=this.total?this.page=this.total>=0?this.total:0:this.page=this.page,this.chartsPageList=this.chartsOrder.slice((this.page-1)*this.num,(this.page-1)*this.num+this.num)},pageChange:function(e){this.chartsPageList=this.chartsOrder.slice((e-1)*this.num,(e-1)*this.num+this.num),console.log(this.chartsPageList)},timeTodate:function(e){return e.replace(/\//g,"-")},timeToweek:function(e){var t=e.split("/");return t[0]+"第"+t[1]+"周"},timeToquarter:function(e){var t=e.split("/");return t[0]+"第"+t[1]+"季度"},timeToyear:function(e){return e+"年度"},weekTotime:function(e){var t=e.split("/"),i="",s="",r="";if(1==new Date(t[0],0,1).getDay())s=(i=new Date(t[0],0,1).setHours(0,0,0,0)+864e5)-864e5+24*t[1]*3600*1e3*7-1e3,r=i+24*(t[1]-1)*3600*1e3*7-1e3;else if(new Date(t[0],0,1).getDay()>1){var n=8-new Date(t[0],0,1).getDay();s=(i=new Date(t[0],0,1).setHours(0,0,0,0)+864e5*n)+24*t[1]*3600*1e3*7-1e3,r=i+24*(t[1]-1)*3600*1e3*7}else new Date(t[0],0,1).getDay()<1&&(s=(i=new Date(t[0],0,1).setHours(0,0,0,0)+864e5)+24*t[1]*3600*1e3*7-1e3,r=i+24*(t[1]-1)*3600*1e3*7);var l=a.a.format(new Date(s),"yyyy.MM.dd");return"("+a.a.format(new Date(r),"yyyy.MM.dd")+"~"+l+")"},timeToday:function(e){var t=e.split("/");return["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][new Date(t[0],t[1]-1,t[2]).getDay()]}},components:{page:function(){return i.e("page_element").then(i.bind(null,"5921"))},comTable:function(){return i.e("table").then(i.bind(null,"4360"))}}},l=(i("84c1"),i("f67d"),i("6ceb")),h=Object(l.a)(n,s,[],!1,null,"01f58e27",null);h.options.__file="src\\module\\cashier\\anslysis_charts.vue";t.default=h.exports},f67d:function(e,t,i){"use strict";var s=i("0d89");i.n(s).a}}]);