(window.webpackJsonp=window.webpackJsonp||[]).push([["output_select_supplies_ware"],{"09f6":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"output-select-goods"}},[t._m(0),t._v(" "),s("div",[s("div",{staticClass:"table-select"},[s("div",{staticClass:"select-title"},[t._v("\n\t\t\t\t货品信息\n\t\t\t\t"),s("span",{staticClass:"circle"}),t._v(" 共\n\t\t\t\t"),s("span",{staticClass:"select-num"},[t._v(t._s(t.sleList.length))]),t._v(" 个条目\n\t\t\t\t"),s("a",{staticClass:"packUp",on:{click:function(e){t.show=!t.show}}},[t._v("\n\t\t\t\t\t"+t._s(t.show?"收起":"展开")+"\n\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"select-body"},[t._m(1),t._v(" "),t._l(t.sleList,function(e,i){return t.show?s("div",{key:i,staticClass:"select-item"},[s("div",{staticClass:"select-row"},[s("li",{staticStyle:{color:"#ff3c04"},on:{click:function(s){t.delList(e,i)}}},[t._v("删除")]),t._v(" "),s("li",i<9?[t._v(t._s("0"+(i+1)))]:[t._v(t._s(i+1))]),t._v(" "),s("li",[t._v(t._s(e.name))]),t._v(" "),s("li",[t._v(t._s(t.typeCate[Number(e.type)+1].label))]),t._v(" "),s("li",[t._v(t._s(t.getString(e.cate,"name")))]),t._v(" "),s("li",[t._v(t._s(t.setUnit(e.surplus,e.unit)))]),t._v(" "),s("li",[t._v(t._s(e.batch))])])]):t._e()}),t._v(" "),0==t.sleList.length?s("div",{attrs:{id:"emptyData"}},[t._v("-----暂无条目-----")]):t._e()],2)]),t._v(" "),s("div",{staticClass:"search-module"},[s("div",{staticClass:"inline-box"},[s("div",{staticClass:"sleType"},[s("el-input",{attrs:{placeholder:"请输入物料名称"},model:{value:t.mName,callback:function(e){t.mName=e},expression:"mName"}})],1),t._v(" "),s("div",{staticClass:"sleType"},[s("el-select",{attrs:{placeholder:"全部类型"},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.typeCate,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("div",{staticClass:"sleBtn"},[s("select-store",{attrs:{sorts:t.oneCate,isSingle:!0,tipName:"请选择一级分类"},on:{emit:t.getDrop}})],1)]),t._v(" "),s("div",{staticClass:"inline-box sleBtn",on:{click:t.checkOne}},[s("select-store",{ref:"twosel",attrs:{sorts:t.twoCate,isSingle:!0,tipName:"请选择二级分类"},on:{emit:t.getNext}})],1),t._v(" "),s("div",{staticClass:"inline-box setSpeen"},[s("div",{staticClass:"blue filter",on:{click:t.search}},[t._v("筛选")]),t._v(" "),s("div",{staticClass:"gray reset",on:{click:t.reset}},[t._v("重置")])])]),t._v(" "),s("div",{staticClass:"table-select"},[s("div",{staticClass:"select-title"},[t._v("\n\t\t\t\t物料列表\n\t\t\t\t"),s("span",{staticClass:"circle"}),t._v(" 共\n\t\t\t\t"),s("span",{staticClass:"select-num"},[t._v(t._s(t.listTotal))]),t._v(" 个条目\n\t\t\t")]),t._v(" "),s("div",{staticClass:"select-body"},[t._m(2),t._v(" "),t._l(t.goodsList,function(e,i){return s("div",{key:i,staticClass:"select-item",class:{active:e.select}},[s("div",{staticClass:"select-row"},[e.select?s("li",[t._v("已添加")]):t._e(),t._v(" "),!e.select&&e.surplus>0?s("li",{staticClass:"add",on:{click:function(s){t.addList(e,i)}}},[t._v("添加")]):t._e(),t._v(" "),e.surplus<=0?s("li",{staticClass:"surplus-empty",on:{click:t.addEmpty}},[t._v("添加")]):t._e(),t._v(" "),i+1+10*(t.page-1)<10?s("li",[t._v(t._s("0"+(i+1)))]):s("li",[t._v(t._s(i+1+10*(t.page-1)))]),t._v(" "),s("li",[t._v(t._s(e.name||"--"))]),t._v(" "),s("li",[t._v(t._s(t.typeCate[Number(e.type)+1].label))]),t._v(" "),s("li",[t._v(t._s(t.getString(e.cate,"name")))]),t._v(" "),s("li",[t._v(t._s(t.setUnit(e.surplus,e.unit)))]),t._v(" "),s("li",[t._v(t._s(e.batch))])])])}),t._v(" "),0==t.goodsList.length?s("div",{attrs:{id:"emptyData"}},[t._v("-----暂无条目-----")]):t._e()],2)]),t._v(" "),s("div",{staticClass:"page-box"},[s("pageBtn",{attrs:{isNoPaging:!1,isNoJump:!0,total:t.pageTotal,page:t.page},on:{pageNum:t.pageChange}})],1)])])};i._withStripped=!0;var a=s("81a2"),n=s("bbb9"),r=s("05dd");function l(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function i(a,n){try{var r=e[a](n),l=r.value}catch(t){return void s(t)}if(!r.done)return Promise.resolve(l).then(function(t){i("next",t)},function(t){i("throw",t)});t(l)}("next")})}}var o={data:function(){return{page:1,selType:0,goodsList:"",allGoods:"全部类型",pageTotal:0,num:10,tebData:["物料"],sleList:[],mName:"",oneCate:[],twoCate:[],oneSle:"",twoSle:"",cataList:"",listTotal:0,sinSle:[],show:!0,typeValue:-1,typeCate:[{value:-1,label:"全部类型"},{value:0,label:"成品"},{value:1,label:"半成品"},{value:2,label:"普通物料"}]}},props:["type","sleSupplies","wid","addBtn","dstShopId","srcShopId","shopId"],methods:{init:function(){var t=this;return l(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.whGetInventoryMaterialList({data:{wid:t.wid,page:t.page,num:t.num,name:t.mName,cid:t.twoSle?t.twoSle.id?t.twoSle.id:"":t.oneSle.id?t.oneSle.id:"",shopId:t.shopId,type:t.typeValue}});case 2:s=e.sent,t.goodsList=s.list,t.pageTotal=Number(s.total),t.listTotal=Number(s.count),t.checkSle();case 7:case"end":return e.stop()}},e,t)}))()},getCate:function(){var t=this;return l(regeneratorRuntime.mark(function e(){var s,i,n,r,l,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.invoiv_getCategoryList();case 2:for(s=e.sent,t.cataList=s,i=!0,n=!1,r=void 0,e.prev=7,l=t.cataList[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)0==(c=o.value).pid&&t.oneCate.push(c);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),n=!0,r=e.t0;case 15:e.prev=15,e.prev=16,!i&&l.return&&l.return();case 18:if(e.prev=18,!n){e.next=21;break}throw r;case 21:return e.finish(18);case 22:return e.finish(15);case 23:case"end":return e.stop()}},e,t,[[7,11,15,23],[16,,18,22]])}))()},addEmpty:function(){this.alert("该商品库存数量不足")},checkIn:function(){var t=[];for(var e in this.sleSupplies)this.sleSupplies[e].noPrev?this.sinSle.push(this.sleSupplies[e]):t.push(this.sleSupplies[e]);this.sleList=t},checkSle:function(){var t=!0,e=!1,s=void 0;try{for(var i,a=this.goodsList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.select=!1}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}var n=!0,r=!1,l=void 0;try{for(var o,c=this.goodsList[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var u=o.value,v=!0,p=!1,h=void 0;try{for(var d,_=this.sleList[Symbol.iterator]();!(v=(d=_.next()).done);v=!0){var f=d.value;u.id==f.id&&(u.select=!0)}}catch(t){p=!0,h=t}finally{try{!v&&_.return&&_.return()}finally{if(p)throw h}}var m=!0,y=!1,g=void 0;try{for(var w,b=this.sinSle[Symbol.iterator]();!(m=(w=b.next()).done);m=!0){var C=w.value;u.id==C.id&&(u.select=!0)}}catch(t){y=!0,g=t}finally{try{!m&&b.return&&b.return()}finally{if(y)throw g}}}}catch(t){r=!0,l=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw l}}},setUnit:function(t,e){var s="",i="",a=1,n=!0,l=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done);n=!0){var v=c.value;1==v.isMin?(i=v.name,1==v.isDefault&&(s=v.name,a=v.value)):1==v.isDefault&&(s=v.name,a=v.value)}}catch(t){l=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(l)throw o}}return r.a.comUnit(t,a,s,i)},getString:function(t,e){if("string"!=typeof t&&t){var s=[],i=!0,a=!1,n=void 0;try{for(var r,l=t[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){var o=r.value;s.push(o[e])}}catch(t){a=!0,n=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw n}}return s.join(",")}return t},selectList:function(t){this.selType=t-1},pageChange:function(t){this.page=t.page,this.init()},tebClick:function(t){this.tabactive=t},checkOne:function(){0==this.oneSle.length&&(this.$refs.twosel.sortShow=!1,this.alert("请选择一级分类"))},addList:function(t){var e=this;return l(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.checkGoods(t);case 2:s.sent&&(t.select=!0,e.sleList.push(t));case 4:case"end":return s.stop()}},s,e)}))()},delList:function(t,e){this.sleList.splice(e,1),t.select=!1,this.checkSle()},search:function(){this.init()},reset:function(){this.page=1,this.mName="",this.oneSle="",this.twoSle="",this.typeValue=-1;var t=!0,e=!1,s=void 0;try{for(var i,a=this.oneCate[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.selected=!1}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}this.oneCate=n.a.deepCopy(this.oneCate);var r=!0,l=!1,o=void 0;try{for(var c,u=this.twoCate[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){c.value.selected=!1}}catch(t){l=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(l)throw o}}this.twoCate=n.a.deepCopy(this.twoCate),this.init()},getDrop:function(t){for(var e in t){if(t[e].selected){this.oneSle=t[e];break}this.oneSle=""}for(var s in this.twoCate=[],this.cataList)this.cataList[s].pid==this.oneSle.id&&this.twoCate.push(this.cataList[s])},getNext:function(t){for(var e in t){if(t[e].selected){this.twoSle=t[e];break}this.twoSle=""}},alert:function(t,e){this.$store.commit("setWin",{title:e,content:t})},checkGoods:function(t){var e=this;return l(regeneratorRuntime.mark(function s(){var i,n;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i={material:[{id:t.id,name:t.name}]},s.next=3,a.a.invoic_getMatchItemList({data:{itemList:i,srcShopId:e.srcShopId,dstShopId:e.dstShopId}});case 3:if(!((n=s.sent).material&&n.material.length>0)){s.next=8;break}return s.abrupt("return",!0);case 8:e.alert("出入货物料不匹配");case 9:case"end":return s.stop()}},s,e)}))()}},mounted:function(){var t=this;return l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.sleSupplies&&(t.sleList=t.sleSupplies),t.type||t.$store.commit("setPageTools",[{name:"确定",className:["firstBtn wearhouse"],fn:function(){t.$store.commit("setPageTools",[]),t.$emit("select",t.sleList)}},{name:"取消",className:["abrogate"],fn:function(){t.$store.commit("setPageTools",[]),t.$emit("select",!1)}}]),t.getCate(),t.init(),e.next=6,t.checkIn();case 6:case"end":return e.stop()}},e,t)}))()},components:{pageBtn:function(){return s.e("page_element").then(s.bind(null,"5921"))},selectBtn:function(){return s.e("select_btn").then(s.bind(null,"3d41"))},selectStore:function(){return s.e("win").then(s.bind(null,"cb83"))}}},c=(s("305f"),s("6ceb")),u=Object(c.a)(o,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i"),this._v(" "),e("h3",[this._v("选择添加物料")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-head"},[s("li",[t._v("操作")]),t._v(" "),s("li",[t._v("序号")]),t._v(" "),s("li",[t._v("物料名称")]),t._v(" "),s("li",[t._v("类型")]),t._v(" "),s("li",[t._v("分类")]),t._v(" "),s("li",[t._v("库存数量/重量")]),t._v(" "),s("li",[t._v("批次数量")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-head"},[s("li",[t._v("操作")]),t._v(" "),s("li",[t._v("序号")]),t._v(" "),s("li",[t._v("物料名称")]),t._v(" "),s("li",[t._v("类型")]),t._v(" "),s("li",[t._v("分类")]),t._v(" "),s("li",[t._v("库存数量/重量")]),t._v(" "),s("li",[t._v("批次数量")])])}],!1,null,"5772c23d",null);u.options.__file="src\\module\\invoicing_system\\warehouse_manage\\output_select_supplies_ware.vue";e.default=u.exports},"2f6c":function(t,e,s){},"305f":function(t,e,s){"use strict";var i=s("2f6c");s.n(i).a}}]);