(window.webpackJsonp=window.webpackJsonp||[]).push([["enter_goods_batch"],{"4c89":function(t,e,i){},"500a":function(t,e,i){"use strict";i.r(e);var s=i("bbb9"),n={data:function(){return{title:"批次选择",titleList:["序号","批次编号","生产日期","供应商","进价","出库数量","所属仓库","入货数量","耗损数量"],btnOk:{},btnCancel:{},cate:"",allList:"",selList:"",batchNum:"",supplier:""}},props:["goods","material","selGoods","selMat","type"],watch:{type:"init"},methods:{init:function(){if(0==this.type){if(this.allList=this.selGoods.length?s.a.deepCopy(this.selGoods):s.a.deepCopy(this.goods.batchInfo),!this.selGoods.length){var t=!0,e=!1,i=void 0;try{for(var n,a=this.allList[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;o.intoNum="",o.consumeNum=""}}catch(t){e=!0,i=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw i}}}}else if(1==this.type&&(this.allList=this.selMat.length?s.a.deepCopy(this.selMat):s.a.deepCopy(this.material.batchInfo),!this.selMat.length)){var l=!0,r=!1,c=void 0;try{for(var u,v=this.allList[Symbol.iterator]();!(l=(u=v.next()).done);l=!0){var _=u.value;_.intoNum="",_.consumeNum=""}}catch(t){r=!0,c=t}finally{try{!l&&v.return&&v.return()}finally{if(r)throw c}}}},clearInput:function(){var t=s.a.deepCopy(this.allList),e=!0,i=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;l.intoNum="",l.consumeNum=""}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}this.allList=t},chooseTime:function(){this.showTime=!this.showTime},transFormDate:function(t){return s.a.format(new Date(t),"yyyy-MM-dd")},getReturnInfo:function(t){this.startTime=t.startTime,this.endTime=t.endTime,this.showTime=!1},closeSelfWin:function(t){var e="goods";if(0==this.type?e="goods":1==this.type&&(e="mat"),"ok"==t){var i=!0,s=!1,n=void 0;try{for(var a,o=this.allList[Symbol.iterator]();!(i=(a=o.next()).done);i=!0){var l=a.value;if(Number(l.intoNum)+Number(l.consumeNum)>l.num)return void this.$store.commit("setWin",{title:"操作提示",content:"批次编号:"+l.batchCode+",剩余可入货数量不足"})}}catch(t){s=!0,n=t}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}this.$emit(e,t,this.allList)}else this.$emit(e,t)},initBtn:function(){this.btnOk={content:"确定",style:"background-color:#ff9200;"}},reset:function(){this.supplier="",this.batchNum="",this.startTime=(new Date).setHours(0,0,0,0),this.endTime=(new Date).getTime(),this.changeList=this.allList},getTime:function(t){return s.a.format(1e3*parseInt(t),"yyyy年MM月dd日")}},mounted:function(){this.initBtn(),this.init()},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))},canMulti:function(){return i.e("can_multi").then(i.bind(null,"742e"))}}},a=(i("ad79"),i("d801")),o=Object(a.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("win",{attrs:{align:"center",width:1024,height:450,ok:t.btnOk},on:{winEvent:t.closeSelfWin}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),i("div",{attrs:{slot:"content",id:"select-batch"},slot:"content"},[0==t.type?[i("div",{staticClass:"batch-title"},[i("li",[t._v("商品名称："+t._s(t.goods.name))]),t._v(" "),i("li",[t._v("单位："+t._s(t.goods.unit))]),t._v(" "),i("li",[i("span",{staticClass:"clear",on:{click:t.clearInput}},[t._v("清空输入")])])])]:t._e(),t._v(" "),1==t.type?[i("div",{staticClass:"batch-title"},[i("li",[t._v("物料名称："+t._s(t.material.name))]),t._v(" "),i("li",[t._v("单位："+t._s(t.material.unit))]),t._v(" "),i("li",[i("span",{staticClass:"clear",on:{click:t.clearInput}},[t._v("清空输入")])])])]:t._e(),t._v(" "),i("div",{staticClass:"table"},[i("div",{staticClass:"table-head"},t._l(t.titleList,function(e,s){return i("span",{key:s},[t._v(t._s(e))])})),t._v(" "),i("div",{staticClass:"table-body"},t._l(t.allList,function(e,s){return i("div",{key:s,staticClass:"table-row"},[i("div",{staticClass:"cell"},[t._v(t._s(s+1))]),t._v(" "),i("div",{staticClass:"cell"},[t._v(t._s(e.batchCode))]),t._v(" "),i("div",{staticClass:"cell"},[t._v(t._s(t.getTime(e.productionTime)))]),t._v(" "),i("div",{staticClass:"cell"},[t._v(t._s(e.supplier))]),t._v(" "),i("div",{staticClass:"cell"},[0==t.type?[t._v(t._s(e.purchasePrice)+"元/"+t._s(t.goods.unit))]:t._e(),t._v(" "),1==t.type?[t._v(t._s(e.purchasePrice)+"元/"+t._s(e.purchaseUnitName))]:t._e()],2),t._v(" "),i("div",{staticClass:"cell"},[0==t.type?[t._v(t._s(e.numShow)+t._s(t.goods.unit))]:t._e(),t._v(" "),1==t.type?[t._v(t._s(e.numShow)+t._s(t.material.unit))]:t._e()],2),t._v(" "),i("div",{staticClass:"cell"},[t._v(t._s(e.wName)+"-"+t._s(e.aName))]),t._v(" "),i("div",{staticClass:"cell unit-box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.intoNum,expression:"item.intoNum"}],staticClass:"input-num",attrs:{type:"text",placeholder:"输入数字"},domProps:{value:e.intoNum},on:{input:function(i){i.target.composing||t.$set(e,"intoNum",i.target.value)}}})]),t._v(" "),i("div",{staticClass:"cell unit-box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.consumeNum,expression:"item.consumeNum"}],staticClass:"input-num",attrs:{type:"text",placeholder:"输入数字"},domProps:{value:e.consumeNum},on:{input:function(i){i.target.composing||t.$set(e,"consumeNum",i.target.value)}}})])])}))])],2)])},[],!1,null,"e62319ac",null);e.default=o.exports},"954f":function(t,e,i){"use strict";var s=i("4c89");i.n(s).a},ad79:function(t,e,i){"use strict";var s=i("e07c");i.n(s).a},d2b4:function(t,e,i){"use strict";i.r(e);var s={data:function(){return{errorType:1,goodsList:[],matList:[]}},props:["errorList"],methods:{winEvent:function(t){this.$emit("errorEmit",t)},initData:function(){this.goodsList=this.errorList.goods,this.matList=this.errorList.material,!this.goodsList.length&&this.matList.length&&(this.errorType=2)}},mounted:function(){this.initData()},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))}}},n=(i("954f"),i("d801")),a=Object(n.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("win",{attrs:{align:"center",type:"alert",width:600,height:"auto",ok:{style:{backgroundColor:"#f8941f"},content:"确定"}},on:{winEvent:t.winEvent}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v("无法匹配")]),t._v(" "),i("div",{attrs:{slot:"content",id:"enter-goods-error"},slot:"content"},[i("div",{staticClass:"tab"},[i("span",{class:{active:1==t.errorType},on:{click:function(e){t.errorType=1}}},[t._v("商品")]),t._v(" "),i("span",{class:{active:2==t.errorType},on:{click:function(e){t.errorType=2}}},[t._v("物料")])]),t._v(" "),1==t.errorType?i("div",{staticClass:"list"},[i("div",{staticClass:"title"},[i("span",[t._v("序号")]),t._v(" "),i("span",[t._v("商品名称")]),t._v(" "),i("span",[t._v("条码")]),t._v(" "),i("span",[t._v("原因")])]),t._v(" "),i("ul",[t._l(t.goodsList,function(e,s){return i("li",{key:s},[i("span",[t._v(t._s(s+1))]),t._v(" "),i("span",{attrs:{title:e.itemName}},[t._v(t._s(e.itemName))]),t._v(" "),i("span",[t._v(t._s(e.barCode))]),t._v(" "),i("span",[t._v(t._s(e.reason))])])}),t._v(" "),i("li",{staticClass:"empty"},[t._v("- 暂无条目 -")])],2)]):t._e(),t._v(" "),2==t.errorType?i("div",{staticClass:"list material"},[i("div",{staticClass:"title"},[i("span",[t._v("序号")]),t._v(" "),i("span",[t._v("物料名称")]),t._v(" "),i("span",[t._v("原因")])]),t._v(" "),i("ul",[t._l(t.matList,function(e,s){return i("li",{key:s},[i("span",[t._v(t._s(s+1))]),t._v(" "),i("span",{attrs:{title:e.name}},[t._v(t._s(e.name))]),t._v(" "),i("span",[t._v(t._s(e.reason))])])}),t._v(" "),i("li",{staticClass:"empty"},[t._v("- 暂无条目 -")])],2)]):t._e()])])},[],!1,null,"648375a2",null);e.default=a.exports},e07c:function(t,e,i){}}]);