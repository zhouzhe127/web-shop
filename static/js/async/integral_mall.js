(window.webpackJsonp=window.webpackJsonp||[]).push([["integral_mall"],{"2f87":function(t,e,i){"use strict";var a=i("9d79");i.n(a).a},"5b04":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mall-box",attrs:{id:"inte"}},[i("div",{staticClass:"firstFun"},[i("div",{staticClass:"firstTitle fl",on:{click:t.openUse}},[i("span",{staticClass:"fl",class:{on:"shop"==t.isShop}},[t._v("商品管理")]),t._v(" "),i("span",{staticClass:"fl",class:{on:"exchange"==t.isShop}},[t._v("兑换管理")])])]),t._v(" "),"shop"==t.isShop?i("div",{staticClass:"gooodsTable",staticStyle:{"margin-bottom":"20px"}},[i("com-table",{attrs:{listHeight:80,listName:"商品列表",showTitle:2,listWidth:1400,introData:t.goodLists,titleData:t.titleList,allTotal:t.count},scopedSlots:t._u([{key:"con-1",fn:function(e){return i("div",{},[t._v("\n\t\t\t\t"+t._s(t.statusType[e.data.type])+"\n\t\t\t")])}},{key:"con-3",fn:function(e){return i("div",{staticClass:"imgshow"},[i("img",{attrs:{src:t.imgHost+e.data.imageName}})])}},{key:"con-11",fn:function(e){return i("div",{staticClass:"operateParent"},["0"==t.ischain||"3"==t.ischain?i("div",{staticClass:"operate"},[0==e.data.status?i("a",{staticClass:"jun shelves",attrs:{href:"javascript:void(0);"},on:{click:function(i){t.shelves(e.index,e.data.id,e.data.status)}}},[t._v("下架")]):t._e(),t._v(" "),1==e.data.status?i("a",{staticClass:"jun shelves",attrs:{href:"javascript:void(0);"},on:{click:function(i){t.shelves(e.index,e.data.id,e.data.status)}}},[t._v("上架")]):t._e(),t._v(" "),i("a",{staticClass:"jun eit",attrs:{href:"javascript:void(0);"},on:{click:function(i){t.edit(e.index,e.data.id)}}},[t._v("编辑")]),t._v(" "),i("a",{staticClass:"jun del",attrs:{href:"javascript:void(0);"},on:{click:function(i){t.del(e.index,e.data.id)}}},[t._v("删除")])]):t._e(),t._v(" "),"1"==t.ischain||"2"==t.ischain?i("div",[i("a",{staticStyle:{width:"100%",height:"100%",color:"#333","line-height":"80px"},attrs:{href:"javascript:void(0);"}},[t._v("当前无权限")])]):t._e()])}}])}),t._v(" "),t.total>1?i("page",{staticStyle:{float:"left","margin-bottom":"100px"},attrs:{page:t.pages,total:t.total,isNoJump:!0,isNoPaging:!0},on:{pageNum:t.pageChange}}):t._e()],1):t._e(),t._v(" "),"exchange"==t.isShop?i("exchange",{attrs:{shopId:t.shopId,ischain:t.ischain,imgHost:t.imgHost}}):t._e(),t._v(" "),t.isTemplate?i("temset",{attrs:{shopId:t.shopId},on:{getTemplate:t.templateResult}}):t._e(),t._v(" "),t.isWin?i("addwin",{attrs:{editInfos:t.editInfos,uid:t.uid,imgHost:t.imgHost,ischain:t.ischain},on:{winEvent:t.getAdd}}):t._e()],1)};a._withStripped=!0;var s=i("81a2"),n=i("f6ce"),o=i("bbb9");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(s,n){try{var o=e[s](n),r=o.value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(r).then(function(t){a("next",t)},function(t){a("throw",t)});t(r)}("next")})}}var c={data:function(){return{shopId:null,imgHost:null,ischain:null,goodLists:[],len:null,total:null,pages:1,index:null,uid:null,isTemplate:!1,isShop:"shop",isWin:!1,editInfos:"",titleList:[{titleName:"序号",titleStyle:{width:"100px",flex:"none"},dataName:"id"},{titleName:"商品类型"},{titleName:"商品名称",dataName:"name"},{titleName:"展示图片",dataName:"imageName"},{titleName:"创建时间",dataName:"createTime"},{titleName:"兑换所需积分",dataName:"price"},{titleName:"兑换所需现金",dataName:"cash"},{titleName:"库存",dataName:"inventory"},{titleName:"已兑换数量",dataName:"exchangeNum"},{titleName:"排序",dataName:"sort"},{titleName:"状态",dataName:"status"},{titleName:"操作"}],allTotal:100,page:1,pageTotal:10,createUser:"",dataList:[],count:0,statusType:{0:"品牌商品",1:"门店商品"}}},mounted:function(){var t=n.a.session("userShop");this.shopId=t.currentShop.id,this.imgHost=t.uploadUrl,this.ischain=t.currentShop.ischain,this.uid=t.user.id,this.getActivityGoodsList(),"0"!=this.ischain&&"3"!=this.ischain||"shop"!=this.isShop||this.initBtn()},methods:{initBtn:function(){var t=this,e={setTemplateType:function(){t.isTemplate=!0},addIntegral:function(){t.editInfos="",t.isWin=!0}};this.$store.commit("setPageTools",e)},ActivityGoodsedit:function(t){var e=this;return r(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.a.ActivityGoodsedit({data:t});case 2:e.getActivityGoodsList();case 3:case"end":return i.stop()}},i,e)}))()},ActivityGoodsadd:function(t){var e=this;return r(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.a.ActivityGoodsadd({data:t});case 2:e.getActivityGoodsList();case 3:case"end":return i.stop()}},i,e)}))()},getActivityGoodsList:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var i,a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getActivityGoodsList({data:{page:t.pages,num:10}});case 2:for(i=e.sent,t.goodLists=i.list,t.total=i.total,t.total<10?t.len=t.total:t.len=10,a=t.goodLists,t.count=i.count,n=0;n<a.length;n++)a[n].createTime=o.a.getTime({time:a[n].createTime,type:!0,format:"yyyy.MM.dd"}).format,a[n].status=0==a[n].status?"已上架":"已下架";case 9:case"end":return e.stop()}},e,t)}))()},ActivityShelves:function(t,e,i){var a=this;return r(regeneratorRuntime.mark(function n(){var r,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.ActivityShelves({data:{id:e,status:0==i?1:0,uid:a.uid}});case 2:r=n.sent,(c=r).createTime=o.a.getTime({time:c.createTime,type:!0,format:"yyyy.MM.dd"}).format,a.$set(a.goodLists,t,c);case 6:case"end":return n.stop()}},n,a)}))()},ActivityDel:function(t,e){var i=this;return r(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.a.ActivityDel({data:{id:e,uid:i.uid}});case 2:i.goodLists.splice(t,1);case 3:case"end":return a.stop()}},a,i)}))()},del:function(t,e){var i=this;this.$store.commit("setWin",{title:"提示信息",winType:"confirm",content:"确认删除商品",callback:function(a){"ok"==a&&i.ActivityDel(t,e)}})},pageChange:function(t){this.pages=t.page,this.getActivityGoodsList()},openUse:function(){var t=this;"shop"==this.isShop?this.isShop="exchange":this.isShop="shop","0"!=this.ischain&&"3"!=this.ischain||"shop"!=this.isShop||setTimeout(function(){t.initBtn()})},setTemplateType:function(){this.isTemplate=!0},openWin:function(){this.editInfos="",this.isWin=!0},shelves:function(t,e,i){this.ActivityShelves(t,e,i)},edit:function(t,e){for(var i=0;i<this.goodLists.length;i++)this.goodLists[i].id==e&&(this.editInfos=this.goodLists[i]);this.isWin=!0},templateResult:function(){this.isTemplate=!1},getAdd:function(t,e){if("close"==t)return!1;this.isWin=!1,"ok"==t&&(this.editInfos?this.ActivityGoodsedit(e):this.ActivityGoodsadd(e))}},components:{page:function(){return i.e("page_element").then(i.bind(null,"5921"))},temset:function(){return i.e("template_win").then(i.bind(null,"bef4"))},exchange:function(){return i.e("exchange").then(i.bind(null,"6cf9"))},addwin:function(){return i.e("addintegral_win").then(i.bind(null,"7a1e"))},comTable:function(){return i.e("table").then(i.bind(null,"4360"))}},destroyed:function(){this.$store.commit("setPageTools",{})}},l=(i("2f87"),i("6ceb")),u=Object(l.a)(c,a,[],!1,null,"6df63eea",null);u.options.__file="src\\module\\marketing_tools\\integral\\integral_mall.vue";e.default=u.exports},"9d79":function(t,e,i){}}]);