(window.webpackJsonp=window.webpackJsonp||[]).push([["change_price_record"],{"82b1":function(t,e,i){"use strict";var n=i("f704");i.n(n).a},c015:function(t,e,i){"use strict";i.r(e);var n=i("81a2"),s=i("f6ce"),a=i("bbb9");var o={data:function(){return{titleList:[{name:"非时价商品",type:0},{name:"时价商品",type:1}],selectTab:0,searchName:"",recordList:[],currentList:[],newrecordList:[],list:{},num:10,count:0,total:0,page:1,userData:Object,isShow:!1,id:"",title:"",item:Object,titleData:[],bannerStyle:null,contentStyle:null}},created:function(){this.titleData=[{titleName:"操作",titleStyle:{width:"15%"}},{titleName:"菜品",dataName:"goodsName",titleStyle:{width:"30%"}},{titleName:"当前价格",dataName:"price",titleStyle:{width:"15%"}},{titleName:"操作员",dataName:"name",titleStyle:{width:"15%"}},{titleName:"最后修改时间",titleStyle:{width:"25%"}}],this.bannerStyle={backgroundColor:"#F2F2F2",color:"#434149",fontSize:"16px"},this.contentStyle={color:"#666666",fontSize:"14px"}},mounted:function(){this.userData=s.a.session("userShop"),this.init()},methods:{pageChange:function(t){this.page=t.page,this.num=t.num,this.total=Math.ceil(this.newrecordList.length/this.num),this.currentList=this.newrecordList.slice((this.page-1)*this.num,(this.page-1)*this.num+this.num)},pageClick:function(t){this.page=t,this.total=Math.ceil(this.newrecordList.length/this.num),this.currentList=this.newrecordList.slice((this.page-1)*this.num,(this.page-1)*this.num+this.num)},numChange:function(t){this.num=t,this.total=Math.ceil(this.newrecordList.length/this.num),this.currentList=this.newrecordList.slice((this.page-1)*this.num,(this.page-1)*this.num+this.num)},init:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.GetGoodsListBySeasonal({data:{shopId:e.userData.currentShop.id}});case 2:(i=t.sent)&&(e.list=i,e.recordList=i.noSeasonal,e.newrecordList=i.noSeasonal,e.paging());case 4:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(s,a){try{var o=e[s](a),r=o.value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(r).then(function(t){n("next",t)},function(t){n("throw",t)});t(r)}("next")})})()},paging:function(){this.total=Math.ceil(this.newrecordList.length/this.num),this.count=this.newrecordList.length,this.page=1,this.currentList=this.newrecordList.slice((this.page-1)*this.num,(this.page-1)*this.num+this.num)},resetSearch:function(){this.searchName="",this.searchGoods()},searchGoods:function(){for(var t=[],e=0;e<this.recordList.length;e++)-1!=this.recordList[e].goodsName.indexOf(this.searchName)&&t.push(this.recordList[e]);this.newrecordList=t,this.paging(),""==this.searchName&&this.chooseTab(this.selectTab)},chooseTab:function(t){this.selectTab=t,this.recordList=0==this.selectTab?this.list.noSeasonal:this.list.seasonal,this.newrecordList=0==this.selectTab?this.list.noSeasonal:this.list.seasonal,this.paging()},openDetail:function(t){this.id=t.gid,this.title=t.goodsName,this.item=t,this.isShow=!0},getDate:function(t){return a.a.format(new Date(1e3*t),"yyyy年MM月dd日 hh:mm:ss")},doThrowWinResult:function(t){this.isShow=!1}},components:{changePriceWin:function(){return i.e("change_price_win").then(i.bind(null,"9c5f"))}}},r=(i("82b1"),i("d801")),c=Object(r.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{attrs:{id:"change-price"}},[i("section",{staticClass:"allSection"},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入名称",clearable:""},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),t._v(" "),i("section",{staticClass:"allSection"},[i("el-button",{attrs:{type:"primary"},on:{click:t.searchGoods}},[t._v("搜索")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:t.resetSearch}},[t._v("重置")])],1),t._v(" "),i("div",{staticStyle:{clear:"both",height:"20px"}}),t._v(" "),i("el-radio-group",{on:{change:t.chooseTab},model:{value:t.selectTab,callback:function(e){t.selectTab=e},expression:"selectTab"}},[i("el-radio-button",{attrs:{label:"0"}},[t._v("非时价商品")]),t._v(" "),i("el-radio-button",{attrs:{label:"1"}},[t._v("时价商品")])],1),t._v(" "),i("div",{staticStyle:{margin:"10px 0"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"","header-cell-style":{"background-color":"#f5f7fa"},data:t.currentList,border:""}},[i("el-table-column",{attrs:{width:"250",align:"center",prop:"totalDay",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{color:"#00AAE7",cursor:"pointer"},on:{click:function(i){t.openDetail(e.row)}}},[t._v("查看详情")])]}}])}),t._v(" "),i("el-table-column",{attrs:{"min-width":"160","show-overflow-tooltip":"",align:"center",prop:"goodsName",label:"菜品"}}),t._v(" "),i("el-table-column",{attrs:{"min-width":"120","show-overflow-tooltip":"",align:"center",prop:"price",label:"当前价格"}}),t._v(" "),i("el-table-column",{attrs:{"min-width":"100","show-overflow-tooltip":"",align:"center",prop:"name",label:"操作员"}}),t._v(" "),i("el-table-column",{attrs:{"min-width":"250","show-overflow-tooltip":"",align:"center",prop:"returnNum",label:"最后修改时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t.getDate(e.row.updateTime)))])]}}])})],1)],1),t._v(" "),i("section",{staticStyle:{"margin-top":"10px"}},[i("el-pagination",{attrs:{background:"","current-page":Number(t.page),"page-count":Number(t.total),"page-size":Number(t.num),layout:"sizes, prev, pager, next","page-sizes":[10,20,30]},on:{"size-change":t.numChange,"current-change":t.pageClick}})],1),t._v(" "),t.isShow?i("changePriceWin",{attrs:{userData:t.userData,id:t.id,title:t.title,item:t.item},on:{throwWinResult:t.doThrowWinResult}}):t._e()],1)},[],!1,null,"3bbdac66",null);e.default=c.exports},f704:function(t,e,i){}}]);