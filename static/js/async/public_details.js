(window.webpackJsonp=window.webpackJsonp||[]).push([["public_details"],{"27c0":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{attrs:{id:"materials-putin-storage"}},[e.materialShow?i("div",{staticClass:"material-info"},[i("div",{staticClass:"titleTop"},[i("div",{staticClass:"topbox"},[i("i"),e._v(" "),i("h3",[e._v("物料信息")]),e._v(" "),e._l(32,function(e){return i("div",{key:e,staticClass:"dian"})})],2)]),e._v(" "),i("ul",{staticClass:"material-info-body"},[i("li",[i("div",[e._v("物料名称："+e._s(e.materialInfo.name))]),e._v(" "),i("div",[e._v("物料单位："+e._s(e.unitInfoName))]),e._v(" "),i("div",[e._v("单位换算："+e._s(e.unitInfoConversion?e.unitInfoConversion:e.sameUnitConver))])]),e._v(" "),i("li",[i("div",[e._v("物料简码："+e._s(e.materialInfo.BC))]),e._v(" "),i("div",[e._v("默认单位："+e._s(e.unitInfoDefault))]),e._v(" "),i("div",[e._v("分类："+e._s(e.cateInfoName))])]),e._v(" "),i("li",[i("div",[e._v("品牌："+e._s(e.materialInfo.brandName||"无"))]),e._v(" "),i("div",[e._v("最小单位："+e._s(e.unitInfoMin))]),e._v(" "),i("div",[e._v("保质期："+e._s(e.materialInfo.validity+e.validityType))])])])]):e._e(),e._v(" "),1==e.detailsType?i("div",{staticClass:"new-inventory"},[i("div",{staticClass:"titleTop"},[i("div",{staticClass:"topbox"},[i("i"),e._v(" "),i("h3",[e._v("操作记录")]),e._v(" "),e._l(32,function(e){return i("div",{key:e,staticClass:"dian"})})],2)]),e._v(" "),i("ul",{staticClass:"new-inventory-body"},[i("li",[i("section",[i("h6",[e._v("操作类型:")]),e._v(" "),i("span",[e._v(e._s(e.operationRecordsList.typeName||"--"))])]),e._v(" "),i("section",[i("h6",[e._v("操作时间:")]),e._v(" "),i("span",[e._v(e._s(e.timeConversion(e.operationRecordsList.createTime)))])])]),e._v(" "),i("li",[i("section",[i("h6",[e._v("操作前数量/重量:")]),e._v(" "),i("span",[e._v(e._s(e.operationRecordsList.createBefore))])]),e._v(" "),i("section",[i("h6",[e._v("数量/重量变化:")]),e._v(" "),i("span",[e._v(e._s(e.operationRecordsList.createChange))])])]),e._v(" "),i("li",[i("section",[i("h6",[e._v("操作后数量/重量:")]),e._v(" "),i("span",[e._v(e._s(e.operationRecordsList.createAfter))])]),e._v(" "),i("section",[i("h6",[e._v("操作人:")]),e._v(" "),i("span",[e._v(e._s(e.operationRecordsList.createName||"--"))])])]),e._v(" "),e.pickingShow?i("li",[i("section",[i("h6",[e._v("领料人:")]),e._v(" "),i("span",[e._v(e._s(e.operationRecordsList.ownerName||"--"))])])]):e._e(),e._v(" "),i("li",[i("section",[i("h6",[e._v("备注:")]),e._v(" "),i("span",[e._v(e._s(e.operationRecordsList.remark))])])])])]):e._e(),e._v(" "),2==e.detailsType?i("div",{staticClass:"operationTable"},[e.operationRecordsList[0]?i("p",[e._v("操作记录 · 日期："+e._s(e.timeConversionDay(e.operationRecordsList[0].createTime)))]):e._e(),e._v(" "),e._m(0),e._v(" "),e._l(e.operationRecordsList,function(t,n){return i("ul",{key:n,staticClass:"table-body"},[i("li",[e._v(e._s(e.timeConversionHourse(t.createTime)))]),e._v(" "),i("li",[e._v(e._s(t.goodsName||"--"))]),e._v(" "),i("li",[e._v(e._s(t.createChange||"--"))]),e._v(" "),i("li",[e._v(e._s(t.createBefore||"--"))]),e._v(" "),i("li",[e._v(e._s(t.createAfter||"--"))])])})],2):e._e(),e._v(" "),3==e.detailsType?i("div",{staticClass:"operationTableEdit"},[e.operationRecordsList[0]?i("p",[e._v("修改批次信息 · 操作时间："+e._s(e.timeConversion(Number(e.operationRecordsList[0].createTime))))]):e._e(),e._v(" "),e._m(1),e._v(" "),i("div",{staticClass:"table-body-edit"},[e._m(2),e._v(" "),i("ul",{staticClass:"table-body-edit-info"},[e.operationRecordsContent[4]?i("li",[e._v(e._s(e.operationRecordsContent[4].modifyBefore))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[0]?i("li",[e._v(e._s(e.timeConversion(e.operationRecordsContent[0].modifyBefore)))]):e._e(),e._v(" "),e.operationRecordsContent[1]?i("li",[e._v(e._s(e.timeConversion(e.operationRecordsContent[1].modifyBefore)))]):e._e(),e._v(" "),e.operationRecordsContent[2]?i("li",[e._v(e._s(e.operationRecordsContent[2].modifyBefore))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[5]?i("li",[e._v(e._s(e.operationRecordsContent[5].modifyBefore))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[6]?i("li",[e._v(e._s(e.operationRecordsContent[6].modifyBefore))]):i("li",[e._v("--")])]),e._v(" "),i("ul",{staticClass:"table-body-edit-info"},[e.operationRecordsContent[4]?i("li",[e._v(e._s(e.operationRecordsContent[4].modifyAfter))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[0]?i("li",[e._v(e._s(e.timeConversion(e.operationRecordsContent[0].modifyAfter)))]):e._e(),e._v(" "),e.operationRecordsContent[1]?i("li",[e._v(e._s(e.timeConversion(e.operationRecordsContent[1].modifyAfter)))]):e._e(),e._v(" "),e.operationRecordsContent[2]?i("li",[e._v(e._s(e.operationRecordsContent[2].modifyAfter))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[5]?i("li",[e._v(e._s(e.operationRecordsContent[5].modifyAfter))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[6]?i("li",[e._v(e._s(e.operationRecordsContent[6].modifyAfter))]):i("li",[e._v("--")])])])]):e._e(),e._v(" "),4==e.detailsType?i("div",{staticClass:"operationTableEdit"},[e.operationRecordsList[0]?i("p",[e._v("修改物料信息 · 操作时间："+e._s(e.timeConversion(Number(e.operationRecordsList[0].createTime))))]):e._e(),e._v(" "),e._m(3),e._v(" "),i("div",{staticClass:"table-body-edit"},[e._m(4),e._v(" "),i("ul",{staticClass:"table-body-edit-info"},[e.operationRecordsContent[0]?i("li",[e._v(e._s(e.operationRecordsContent[0].modifyBefore))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[1]?i("li",[e._v(e._s(e.operationRecordsContent[1].modifyBefore))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[2]?i("li",[e._v(e._s(e.operationRecordsContent[2].modifyBefore))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[3]?i("li",[e._v(e._s(e.operationRecordsContent[3].modifyBefore.name))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[4]?i("li",[e._v(e._s(e.operationRecordsContent[4].modifyBefore))]):i("li",[e._v("--")])]),e._v(" "),i("ul",{staticClass:"table-body-edit-info"},[e.operationRecordsContent[0]?i("li",[e._v(e._s(e.operationRecordsContent[0].modifyAfter))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[1]?i("li",[e._v(e._s(e.operationRecordsContent[1].modifyAfter))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[2]?i("li",[e._v(e._s(e.operationRecordsContent[2].modifyAfter))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[3]?i("li",[e._v(e._s(e.operationRecordsContent[3].modifyAfter.name))]):i("li",[e._v("--")]),e._v(" "),e.operationRecordsContent[4]?i("li",[e._v(e._s(e.operationRecordsContent[4].modifyAfter))]):i("li",[e._v("--")])])])]):e._e(),e._v(" "),!e.materialShow&&5==e.detailsType&&e.materialInfo&&e.operationRecordsList?i("details-unit",{attrs:{materialInfo:e.materialInfo,detailList:e.operationRecordsList}}):e._e()],1)};n._withStripped=!0;var o=i("81a2"),a=i("f6ce"),r=i("bbb9");function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(o,a){try{var r=t[o](a),s=r.value}catch(e){return void i(e)}if(!r.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}var v={data:function(){return{materialShow:!0,pickingShow:!1,detailsType:1,unitReady:[],unitInfo:[],unitInfoName:"",unitInfoDefault:"",unitInfoMin:"",unitInfoValue:"",unitInfoConversion:"",cateInfo:[],cateInfoName:"",getInfo:{},materialInfo:"",operationRecords:[],operationRecordsList:"",operationRecordsTime:"",operationRecordsContent:[],validityType:"",sameUnitConver:""}},methods:{dealData:function(e,t){var i=[],n=!0,o=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(n=(r=s.next()).done);n=!0){var v=r.value;i.push(v[t])}}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return i},timeConversion:function(e){return r.a.format(new Date(1e3*e),"yyyy-MM-dd hh:mm")},timeConversionDay:function(e){return r.a.format(new Date(1e3*e),"yyyy-MM-dd")},timeConversionHourse:function(e){return r.a.format(new Date(1e3*e),"hh:mm")},init:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var i,n,r,s,v,_,l,c,d,f,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getMaterialDetail({data:{mid:e.getInfo.mid}});case 2:for(i=t.sent,e.materialInfo=i,e.unitInfo=i.unit,0==e.materialInfo.validityType?e.validityType="月":1==e.materialInfo.validityType?e.validityType="日":2==e.materialInfo.validityType&&(e.validityType="年"),n=[],r=0;r<e.unitInfo.length;r++)1==e.unitInfo[r].isDefault&&1==e.unitInfo[r].isMin&&(e.unitInfoDefault=e.unitInfo[r].name,e.unitInfoMin=e.unitInfo[r].name,e.sameUnitConver="1"+e.unitInfo[r].name+"="+e.unitInfo[r].value+e.unitInfoMin),1==e.unitInfo[r].isDefault&&(e.unitInfoDefault=e.unitInfo[r].name),1==e.unitInfo[r].isMin&&(e.unitInfoMin=e.unitInfo[r].name),0==e.unitInfo[r].isMin&&(n.push(e.unitInfo[r]),e.unitInfo[r].unitConversion="1"+e.unitInfo[r].name+"="+e.unitInfo[r].value+e.unitInfoMin);return e.conversionArr=n,e.unitInfoName=e.dealData(e.unitInfo,"name").join("、"),e.unitInfoConversion=e.dealData(e.conversionArr,"unitConversion").join("|"),e.cateInfo=i.cate,e.cateInfoName=e.dealData(e.cateInfo,"name").join("、"),t.next=15,o.a.getLogDetail({data:{id:e.getInfo.tid,type:e.getInfo.type,mid:e.getInfo.mid,createTime:e.getInfo.time}});case 15:s=t.sent,console.log(s),e.operationRecords=s,e.operationRecordsList=s.list,e.operationRecordsTime=s.list.length?s.list[0].creatTime:"",v=a.a.session("operttypeList"),_=!0,l=!1,c=void 0,t.prev=24,d=v[Symbol.iterator]();case 26:if(_=(f=d.next()).done){t.next=34;break}if(u=f.value,e.operationRecordsList.actId!=u.type){t.next=31;break}return e.operationRecordsList.typeName=u.typeName,t.abrupt("break",34);case 31:_=!0,t.next=26;break;case 34:t.next=40;break;case 36:t.prev=36,t.t0=t.catch(24),l=!0,c=t.t0;case 40:t.prev=40,t.prev=41,!_&&d.return&&d.return();case 43:if(t.prev=43,!l){t.next=46;break}throw c;case 46:return t.finish(43);case 47:return t.finish(40);case 48:console.log(e.operationRecordsList),e.operationRecordsContent=s.list.content;case 50:case"end":return t.stop()}},t,e,[[24,36,40,48],[41,,43,47]])}))()},addEduce:function(){var e,t=this;this.$store.commit("setPageTools",[{name:"返回",className:"",fn:(e=s(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.a.session("publicDetailReturn",!0),t.$router.push({path:"/admin/inventoryManagement/suppliesDetail",query:t.$route.query});case 2:case"end":return e.stop()}},e,t)})),function(){return e.apply(this,arguments)}),type:4}])}},mounted:function(){this.getInfo=this.$route.query,this.addEduce(),1==this.getInfo.type?this.detailsType=1:8==this.getInfo.type?(this.detailsType=1,this.pickingShow=!0):5==this.getInfo.type?this.detailsType=2:4==this.getInfo.type?this.detailsType=3:10==this.getInfo.type?(this.detailsType=4,this.materialShow=!1):15==this.getInfo.type&&(this.detailsType=5,this.materialShow=!1),this.init()},distryed:function(){a.a.session("operttypeList","")},components:{detailsUnit:function(){return i.e("public_details_unit").then(i.bind(null,"e62b"))}}},_=(i("6138"),i("6ceb")),l=Object(_.a)(v,n,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"table-head"},[i("li",[e._v("操作时间")]),e._v(" "),i("li",[e._v("商品")]),e._v(" "),i("li",[e._v("数量/重量变化")]),e._v(" "),i("li",[e._v("操作前数量/重量")]),e._v(" "),i("li",[e._v("操作后数量/重量")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"table-head-edit"},[t("li"),this._v(" "),t("li",[this._v("修改前")]),this._v(" "),t("li",[this._v("修改后")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"table-body-edit-info"},[i("li",[e._v("批次编号")]),e._v(" "),i("li",[e._v("生产日期")]),e._v(" "),i("li",[e._v("失效日期")]),e._v(" "),i("li",[e._v("供应商")]),e._v(" "),i("li",[e._v("进价")]),e._v(" "),i("li",[e._v("备注")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{staticClass:"table-head-edit"},[t("li"),this._v(" "),t("li",[this._v("修改前")]),this._v(" "),t("li",[this._v("修改后")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"table-body-edit-info"},[i("li",[e._v("物料名称")]),e._v(" "),i("li",[e._v("物料简码")]),e._v(" "),i("li",[e._v("分类")]),e._v(" "),i("li",[e._v("品牌")]),e._v(" "),i("li",[e._v("保质期")])])}],!1,null,"62640c6c",null);l.options.__file="src\\module\\invoicing_system\\invoicing\\public_details.vue";t.default=l.exports},"4ace":function(e,t,i){},6138:function(e,t,i){"use strict";var n=i("4ace");i.n(n).a}}]);