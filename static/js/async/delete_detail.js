(window.webpackJsonp=window.webpackJsonp||[]).push([["delete_detail"],{4102:function(t,s,a){"use strict";var e=a("b25a");a.n(e).a},"603c":function(t,s,a){"use strict";a.r(s);var e=a("81a2"),i=a("f6ce"),r=a("bbb9");var n={props:["detail","isDelete"],data:function(){return{tabList:["商品详情","赠品详情","退品详情"],tabIndex:0,ordeDetail:"",order:"",staff:"",paymentList:[],ordeDetailList:"",isListData:!1,tipShow:!1,tipHtml:"",posiEm:"",posiTips:"",helpIconDom:null,shopId:"",isBrand:"",htmlList:["营业额：该订单中所有商品原价累加所得（退品金额除外）<br/>优惠总计：“订单原价”中所有商品优惠金额和整单优惠金额统加所得（退品金额不计入优惠金额）<br/>应收金额：订单原价-优惠总计=应收金额   顾客该订单应支付的金额<br/>实收金额：该订单实际收入的金额（不计入未入实账的支付方式的金额）<br/>利润：菜品应收金额-成本（如果未填写成本则计为0）=利润<br/>销量：商品总数-退品数=销量<br/>赠品：该订单赠品的数量 <br/>退品：该订单退品的数量","赠品中原价和口味价格都计入优惠金额，退品优惠金额和应收金额都记为“0”<br/>实收金额:（单价+口味价格）*数量-优惠金额=应收金额”<br/>商品应收金额未计算整单减免优惠（整单减免优惠券、整单强减优惠券及整单减免）"],userData:"",btnArr:[]}},watch:{detail:"getData"},created:function(){this.userData=i.a.session("userShop")},mounted:function(){this.initBtn(),this.shopId=this.userData.currentShop.id,this.isBrand="3"==this.userData.currentShop.ischain?1:0,this.getData()},methods:{initBtn:function(){var t=this,s=[];s.push({name:"返回",className:["back"],fn:function(){t.back()}}),this.$store.commit("setPageTools",s)},tabChange:function(t){switch(this.tabIndex=t,this.tabIndex){case 0:this.ordeDetailList=this.ordeDetail.order;break;case 1:this.ordeDetailList=this.ordeDetail.free;break;case 2:this.ordeDetailList=this.ordeDetail.return}this.isListData=!(!this.ordeDetailList||!this.ordeDetailList.length)},getData:function(){this.ordeDetail=this.detail.ordeDetail,this.ordeDetailList=this.ordeDetail.order,this.order=this.detail.order,this.staff=this.detail.staff,this.isListData=!(!this.ordeDetailList||!this.ordeDetailList.length);for(var t=this.order.paymentList,s=0;s<t.length;s++)t[s].num>0&&this.paymentList.push(t[s])},toFloatStr:function(t){var s=t+"";return r.a.toFloatStr(s,2)},printOrder:function(){var t,s=this;return(t=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.order.oid){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.a.printOrderDetail({data:{trueShopId:s.detail.fromId?s.detail.fromId:s.shopId,oid:s.order.oid}});case 4:t.sent&&s.$store.commit("setWin",{title:"操作提示",winType:"alert",content:"打印数据已发送！"});case 6:case"end":return t.stop()}},t,s)}),function(){var s=t.apply(this,arguments);return new Promise(function(t,a){return function e(i,r){try{var n=s[i](r),o=n.value}catch(t){return void a(t)}if(!n.done)return Promise.resolve(o).then(function(t){e("next",t)},function(t){e("throw",t)});t(o)}("next")})})()},tipClick:function(t){var s=t.target;if(s.className.indexOf("help-icon")>=0)if(this.tipShow&&s==this.helpIconDom)this.tipShow=!1,document.removeEventListener("click",this.closeTip);else{var a=s.getAttribute("data-index"),e=s.offsetTop,i=s.offsetLeft;0==a?(this.posiTips="top:"+(e+30)+"px;left:"+(i-30)+"px",this.posiEm="left:30px"):(this.posiTips="top:"+(e+30)+"px;left:"+(i-420)+"px",this.posiEm="right:30px"),this.tipShow=!0,this.tipHtml=this.htmlList[a],this.helpIconDom=s,document.addEventListener("click",this.closeTip)}},closeTip:function(t){t.target.className.indexOf("help-icon")<0&&(this.tipShow=!1,document.removeEventListener("click",this.closeTip))},back:function(){this.$store.commit("setPageTools",[]),this.detailShow=!1,this.$emit("detailShow",!1)}}},o=(a("4102"),a("d801")),l=Object(o.a)(n,function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"scroll"},[a("div",{staticClass:"detail",on:{click:t.tipClick}},[a("div",{staticClass:"head"},[a("div",{staticClass:"button-box"},[a("span",{staticClass:"back",on:{click:t.back}},[t._v("返回")])])]),t._v(" "),a("div",{staticClass:"left"},[a("div",{staticClass:"block"},[a("div",{staticClass:"wide"},[a("span",[t._v("订单号："+t._s(t.order.oid))]),t._v(" "),a("span",{attrs:{title:t.order.areaName+"--"+t.order.tableName}},[t._v("桌台："+t._s(t.order.areaName)+" -- "+t._s(t.order.tableName))])]),t._v(" "),a("div",{staticClass:"narrow"},[a("span",[t._v("单据状态："+t._s(t.order.status))]),t._v(" "),a("span",[t._v("人数："+t._s(t.order.person))])])]),t._v(" "),a("div",{staticClass:"block"},[a("div",{staticClass:"wide"},[a("span",[t._v("消费金额：￥"+t._s(t.toFloatStr(t.order.originalPrice)))]),t._v(" "),a("span",[t._v("含服务费：￥"+t._s(t.toFloatStr(t.order.chargePrice)))]),t._v(" "),a("span",[t._v("优惠总计：￥"+t._s(t.toFloatStr(t.order.discount)))]),t._v(" "),a("span",[t._v("应收金额：￥"+t._s(t.toFloatStr(t.order.price)))]),t._v(" "),a("span",[t._v("实收金额：￥"+t._s(t.toFloatStr(t.order.paymentPrice)))]),t._v(" "),a("span",[t._v("利润：￥"+t._s(t.toFloatStr(t.order.profit)))])]),t._v(" "),a("div",{staticClass:"narrow"},[a("span",[t._v("销量："+t._s(t.order.salesNum)+"\n\t\t\t\t\t\t"),a("em",{staticClass:"help-icon float-right",attrs:{"data-index":0}})]),t._v(" "),a("span",[t._v("赠品："+t._s(t.order.freeNum))]),t._v(" "),a("span",[t._v("退品："+t._s(t.order.returnNum))])])]),t._v(" "),a("div",{staticClass:"block"},[a("div",{staticClass:"wide"},[a("span",[t._v("支付方式")]),t._v(" "),t._l(t.paymentList,function(s,e){return a("span",{key:e},[t._v(t._s(s.paymentName)+"：￥"+t._s(s.num))])}),t._v(" "),t.paymentList&&0==t.paymentList.length?a("span",[t._v("支付：￥0.00")]):t._e()],2),t._v(" "),a("span",{staticClass:"full align-right"},[t._v("找零：￥"+t._s(t.order.change))])]),t._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"full"},[t._v("开台时间："+t._s(t.order.createTime))]),t._v(" "),a("span",{staticClass:"full"},[t._v("结束时间："+t._s(t.order.updateTime))])]),t._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"full align-right"},[t._v("员工："+t._s(t.staff))])])]),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"tab-head"},t._l(t.tabList,function(s,e){return a("span",{key:e,class:{active:e==t.tabIndex},on:{click:function(s){t.tabChange(e)}}},[t._v(t._s(s)+"\n\t\t\t\t\t"),e==t.tabIndex?a("em"):t._e()])})),t._v(" "),a("div",{staticClass:"tab-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.tabIndex,expression:"tabIndex == 0"}],staticClass:"total"},[a("span",[t._v("商品实收总额："+t._s(t.toFloatStr(t.ordeDetail.totalPrice)))]),t._v(" "),0!=t.ordeDetail.orderMinus?a("span",[t._v("整单减免："+t._s(t.toFloatStr(t.ordeDetail.orderMinus)))]):t._e(),t._v(" "),0!=t.order.bitPrice?a("span",[t._v("系统取整："+t._s(t.order.bitPrice))]):t._e(),t._v(" "),a("span",[t._v("应收金额："+t._s(t.toFloatStr(t.ordeDetail.price)))]),t._v(" "),a("span",[t._v("销量："+t._s(t.order.salesNum))]),t._v(" "),a("span",[t._v("赠品："+t._s(t.order.freeNum))]),t._v(" "),a("span",[t._v("退品："+t._s(t.order.returnNum))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.tabIndex,expression:"tabIndex == 1"}],staticClass:"total"},[a("span",{staticClass:"half"},[t._v("赠品："+t._s(t.order.freeNum))]),t._v(" "),a("span",{staticClass:"half align-center light"},[t._v("赠品总额：￥"+t._s(t.order.freePrice))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.tabIndex,expression:"tabIndex == 2"}],staticClass:"total"},[a("span",{staticClass:"half"},[t._v("退品："+t._s(t.order.returnNum))]),t._v(" "),a("span",{staticClass:"half align-center light"},[t._v("退品总额：￥"+t._s(t.order.returnPrice))])]),t._v(" "),a("div",{staticClass:"list"},[a("div",{staticClass:"title"},[a("span",{staticClass:"narrow"},[t._v("序号")]),t._v(" "),a("span",{staticClass:"wide"},[t._v("商品名")]),t._v(" "),a("span",{staticClass:"narrow"},[t._v("单价")]),t._v(" "),a("span",{staticClass:"narrow"},[t._v("口味价钱")]),t._v(" "),a("span",{staticClass:"narrow"},[t._v("商品数量")]),t._v(" "),a("span",{class:{wide:1==t.tabIndex}},[t._v("小计")]),t._v(" "),0==t.tabIndex?a("span",[t._v("优惠金额")]):t._e(),t._v(" "),2==t.tabIndex?a("span",{staticClass:"narrow"},[t._v("原因")]):t._e(),t._v(" "),0==t.tabIndex?a("span",[t._v("实收金额(元)\n\t\t\t\t\t\t\t"),a("em",{staticClass:"help-icon",attrs:{"data-index":1}})]):t._e(),t._v(" "),1==t.tabIndex||2==t.tabIndex?a("span",{class:{wide:1==t.tabIndex}},[t._v("操作员")]):t._e()]),t._v(" "),a("ul",[t._l(t.ordeDetailList,function(s,e){return a("li",{key:e},[a("span",{staticClass:"narrow"},[t._v(t._s(e+1))]),t._v(" "),a("span",{staticClass:"wide"},[t._v(t._s(s.goodsName))]),t._v(" "),a("span",{staticClass:"narrow"},[t._v(t._s(t.toFloatStr(s.unitPrice)))]),t._v(" "),a("span",{staticClass:"narrow"},[t._v(t._s(t.toFloatStr(s.attrsPrice)))]),t._v(" "),a("span",{staticClass:"narrow"},[t._v(t._s(s.num)+t._s(s.unit))]),t._v(" "),a("span",{class:{wide:1==t.tabIndex}},[t._v(t._s(t.toFloatStr(s.totalPrice)))]),t._v(" "),0==t.tabIndex?a("span",[t._v(t._s(t.toFloatStr(s.discountPrice)))]):t._e(),t._v(" "),2==t.tabIndex?a("span",{staticClass:"narrow"},[t._v(t._s(s.reason.reasonName))]):t._e(),t._v(" "),0==t.tabIndex?a("span",[t._v(t._s(t.toFloatStr(s.price))+"\n\t\t\t\t\t\t\t\t"),a("em")]):t._e(),t._v(" "),1==t.tabIndex||2==t.tabIndex?a("span",{class:{wide:1==t.tabIndex}},[t._v(t._s(s.user.name))]):t._e()])}),t._v(" "),0!=t.tabIndex||t.isListData?t._e():a("li",{staticClass:"list-empty"},[t._v("此单里面没有商品")]),t._v(" "),1!=t.tabIndex||t.isListData?t._e():a("li",{staticClass:"list-empty"},[t._v("此单没有赠品")]),t._v(" "),2!=t.tabIndex||t.isListData?t._e():a("li",{staticClass:"list-empty"},[t._v("此单没有退品")])],2)])])]),t._v(" "),t.tipShow?a("div",{staticClass:"tipBox",style:t.posiTips},[a("em",{style:t.posiEm}),t._v(" "),a("p",{key:t.tipHtml,domProps:{innerHTML:t._s(t.tipHtml)}})]):t._e()])])},[],!1,null,"58be3ce6",null);s.default=l.exports},b25a:function(t,s,a){}}]);