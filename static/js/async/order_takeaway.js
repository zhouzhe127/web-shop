(window.webpackJsonp=window.webpackJsonp||[]).push([["order_takeaway"],{"0fa8":function(t,e,a){},"22be":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"statistics-order"}},[t.showDayAllDetail?t._e():a("div",{staticClass:"button"},[a("a",{attrs:{href:"javascript:void(0);"},on:{click:t.toOrder}},[t._v("堂吃")]),t._v(" "),a("a",{staticClass:"select",attrs:{href:"javascript:void(0);"}},[t._v("外卖")]),t._v(" "),a("a",{attrs:{id:"returncolor",href:"javascript:void(0);"},on:{click:t.toProprietary}},[t._v("自营外卖")])]),t._v(" "),t.isBrand?a("section",{staticStyle:{width:"100%",overflow:"hidden"}},[a("section",{staticClass:"oShopDel",staticStyle:{width:"80px"}},[t._v("选择店铺：")]),t._v(" "),a("section",{staticClass:"oShopDel",staticStyle:{margin:"0 5px"}},[t._v(t._s(t.dataDetial.itemDetial.shopName)+" |")]),t._v(" "),a("section",{staticClass:"oShopDel",staticStyle:{width:"80px"}},[t._v("选择时间：")]),t._v(" "),a("section",{staticClass:"oShopDel"},[t._v(t._s(t.timeToday(t.startTime))+"--"+t._s(t.timeToday(t.endTime)))])]):t._e(),t._v(" "),t.showDayAllDetail?t._e():a("div",{staticClass:"order-order-data",staticStyle:{margin:"15px 0"}},[a("ul",{staticStyle:{width:"100%"}},[t.isBrand?t._e():a("li",[a("section",{staticClass:"statisticsList fl"},[a("calendar",{staticStyle:{width:"245px",height:"41px",float:"left"},attrs:{pObj:t.startObj},on:{throwTime:t.getStartTime}})],1),t._v(" "),a("span",{staticStyle:{float:"left",width:"25px","line-height":"40px","text-align":"center"}},[t._v(" - ")]),t._v(" "),a("section",{staticClass:"statisticsList fl"},[a("calendar",{staticStyle:{width:"245px",height:"41px",float:"left"},attrs:{pObj:t.endObj},on:{throwTime:t.getEndTime}})],1),t._v(" "),t.showAllDay||t.showDay?a("span",{staticClass:"order-order-searchA fi fi-search",staticStyle:{"margin-right":"15px"},on:{click:t.sreachOrderInDays}}):t._e()]),t._v(" "),t.isBrand?t._e():a("li",{staticStyle:{"line-height":"46px"}},[a("div",{class:{selected:t.isOpenTime},staticStyle:{width:"20px",height:"20px",cursor:"pointer",border:"1px solid #28A8E0",margin:"13px 10px",float:"left"},on:{click:t.selectBusinessHours}}),t._v(" "),a("span",{staticStyle:{"font-size":"16px"}},[t._v("按营业时间")])]),t._v(" "),t.showDay||t.showAllDay?a("li",[a("section",{staticClass:"staList fl"},[a("section",{staticClass:"tableList",on:{click:t.showtakeawaytypeList}},[a("span",{staticClass:"oSpan"},[t._v(t._s(t.allTakeawaytype))]),t._v(" "),t._m(0)]),t._v(" "),t.takeawaytypeBtn?a("section",{staticClass:"tableListUl"},t._l(t.takeawaytypeList,function(e,i){return a("section",{key:i,staticClass:"tableListLi",on:{click:function(a){t.selectTakeawayType(i,e)}}},[t._v(t._s(e.takeawaytypeName))])})):t._e()])]):t._e(),t._v(" "),t.isBrand||!t.isBrand&&t.showDay?a("li",[a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.orderNumber,expression:"orderNumber"}],attrs:{type:"text",placeholder:"请输入订单号",maxlength:"20"},domProps:{value:t.orderNumber},on:{input:function(e){e.target.composing||(t.orderNumber=e.target.value)}}}),t._v(" "),a("a",{staticClass:"order-order-searchA fi fi-search",on:{click:function(e){t.getInfoByOrder()}}})])]):t._e(),t._v(" "),t.showDay||t.showAllDay?a("a",{staticClass:"fl gray",staticStyle:{width:"80px",height:"40px","line-height":"40px","margin-left":"10px"},attrs:{href:"javascript:void(0)"},on:{click:function(e){t.reset()}}},[t._v("重置")]):t._e()])]),t._v(" "),t.showDay?a("section",{staticClass:"oCont",staticStyle:{width:"100%",height:"60px"}},[a("div",{staticClass:"Box",staticStyle:{float:"left",width:"650px"}},[a("section",{staticClass:"oDe",class:{act:1==t.status},staticStyle:{"border-left":"none"},on:{click:function(e){t.getOidList(1)}}},[t._v("已完成")]),t._v(" "),a("section",{staticClass:"oDe",class:{act:0==t.status},on:{click:function(e){t.getOidList(0)}}},[t._v("进行中")]),t._v(" "),a("section",{staticClass:"oDe",class:{act:2==t.status},on:{click:function(e){t.getOidList(2)}}},[t._v("已取消")]),t._v(" "),a("section",{staticClass:"oDe",class:{act:3==t.status},on:{click:function(e){t.getOidList(3)}}},[t._v("售后退款")])])]):t._e(),t._v(" "),a("div",{staticClass:"table-container"},[a("section",{staticStyle:{display:"inline-block","min-width":"1626px"}},[a("div",{staticClass:"aLeft"},[t.showAllDay||t.showDay?a("ul",{staticClass:"aUl",staticStyle:{"background-color":"#f2f2f2"}},[a("li",{staticClass:"aLi",staticStyle:{width:"250px","text-align":"center",float:"right"}},[t._v("天数")])]):t._e(),t._v(" "),t.showAllDay||t.showDay?a("ul",{staticClass:"aUl",staticStyle:{"background-color":"#ffffff"}},[a("li",{staticClass:"aLi",staticStyle:{color:"#F8941F",width:"250px","text-align":"center"}},[t._v(t._s(t.payTotalNum.days))])]):t._e(),t._v(" "),t.showAllDay&&!t.showDay?a("div",[t.showAllDay?a("section",{staticStyle:{width:"100%",overflow:"auto","margin-top":"30px"}},[a("div",{staticStyle:{width:"100%",height:"50px","text-align":"center","line-height":"50px","border-top":"1px solid #d2d2d2"}},[t._v("订单统计·共\n\t\t\t\t\t\t\t"),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.paginationList.length))]),t._v("条记录")]),t._v(" "),t._m(1),t._v(" "),t._l(t.paginationList,function(e,i){return t.paginationList.length>0?[a("ul",{key:i,staticClass:"aUl",staticStyle:{background:"#ffffff","border-bottom":"1px solid #d2d2d2"}},[a("li",{staticClass:"width100"},[a("a",{staticStyle:{width:"100%",color:"#23b4e9"},attrs:{href:"javascript:void(0);"},on:{click:function(a){t.openDayDetial(e.date||e.time)}}},[t._v("查看详情")])]),t._v(" "),a("li",{staticClass:"width150"},[t._v(t._s(e.time))])])]:t._e()}),t._v(" "),0==t.paginationList.length?[t._m(2)]:t._e()],2):t._e()]):t._e(),t._v(" "),t.showDay?a("div",{staticStyle:{width:"100%",height:"50px","text-align":"center","line-height":"50px","border-top":"1px solid #d2d2d2","margin-top":"30px"}},[t._v("订单统计·共\n\t\t\t\t\t"),a("span",{staticStyle:{color:"red"}},[t._v(t._s(t.paginationList.length))]),t._v("条记录")]):t._e(),t._v(" "),t.showDay?a("div",{staticStyle:{width:"100%",height:"auto"}},[t._m(3),t._v(" "),a("section",{staticStyle:{width:"100%",height:"auto"}},[0==t.paginationList.length?a("ul",{staticClass:"aUl",staticStyle:{"background-color":"#ffffff"}},[a("li",{staticClass:"aLi",staticStyle:{width:"250px"}})]):t._e(),t._v(" "),a("ul",{staticClass:"aUl",staticStyle:{color:"#333333",overflow:"hidden",width:"100%",height:"auto"}},t._l(t.paginationList,function(e,i){return a("li",{key:i,staticClass:"aLi",staticStyle:{color:"#29A7E1",cursor:"pointer",width:"250px",background:"#ffffff","border-bottom":"1px solid #d2d2d2"},on:{click:function(a){t.orderDetails(e,i)}}},[t._v(t._s(e.orderId))])}))])]):t._e()]),t._v(" "),a("div",{staticClass:"aRight",staticStyle:{height:"auto",float:"right"}},[t.showAllDay||t.showDay?a("section",{style:{width:t.showWidth+"px"}},[a("ul",{staticClass:"aUl",staticStyle:{"background-color":"#f2f2f2"}},[a("li",{class:{width80:t.cancelledShow,cancel:!t.cancelledShow}},[t._v("订单数")]),t._v(" "),a("li",{class:{cancelback110:t.cancelledShow,cancel:!t.cancelledShow}},[t._v("商品总数\n\t\t\t\t\t\t\t"),a("detailsDes",{attrs:{title:"该时间段内的商品总数包含了订单中所有的商品数量（包括赠品）"}})],1),t._v(" "),a("li",{class:{cancelback80:t.cancelledShow,cancel:!t.cancelledShow}},[t._v("销量\n\t\t\t\t\t\t\t"),a("detailsDes",{attrs:{title:"该时间段内的已销售的商品数量（不计入赠品）"}})],1),t._v(" "),a("li",{class:{width110:t.cancelledShow,cancel:!t.cancelledShow}},[t._v("赠品数")]),t._v(" "),a("li",{staticClass:"width110"},[t._v("部分退款")]),t._v(" "),t.afterRefundShow?a("li",{staticClass:"width110"},[t._v("退款总额")]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width110"},[t._v("配送总额")]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width110"},[t._v("优惠总额")]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width110"},[t._v("消费总额\n\t\t\t\t\t\t\t"),a("div",{staticStyle:{position:"absolute","margin-left":"115px",top:"0"}},[a("detailsDes",{attrs:{title:"该时间段内所有商品原价以及餐盒费的金额总计"}})],1)]):t._e(),t._v(" "),t.cancelledShow&&t.afterAmountShow?a("li",{staticClass:"width110"},[t._v("入账总额\n\t\t\t\t\t\t\t"),t._e()]):t._e()]),t._v(" "),a("ul",{staticClass:"order-content-show",staticStyle:{color:"#333333",overflow:"hidden",width:"100%",background:"#ffffff"}},[a("li",{class:{width80:t.cancelledShow,cancel:!t.cancelledShow},staticStyle:{color:"#F8941F"}},[t._v(t._s(t.payTotalNum.orderNum))]),t._v(" "),a("li",{class:{cancelback110:t.cancelledShow,cancel:!t.cancelledShow},staticStyle:{color:"#F8941F"}},[t._v(t._s(t.payTotalNum.totalNum))]),t._v(" "),a("li",{class:{cancelback80:t.cancelledShow,cancel:!t.cancelledShow},staticStyle:{color:"#F8941F"}},[t._v(t._s(t.payTotalNum.goodsNum))]),t._v(" "),a("li",{class:{width110:t.cancelledShow,cancel:!t.cancelledShow},staticStyle:{color:"#F8941F"}},[t._v(t._s(parseFloat(t.payTotalNum.discountNum).toFixed(2)))]),t._v(" "),a("li",{staticClass:"width110",staticStyle:{color:"#F8941F"}},[t._v(t._s(t.payTotalNum.partRefund))]),t._v(" "),t.afterRefundShow?a("li",{staticClass:"width110",staticStyle:{color:"#F8941F"}},[t._v(t._s(parseFloat(t.payTotalNum.goodsTotalPrice).toFixed(2)))]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width110",staticStyle:{color:"#F8941F"}},[t._v(t._s(parseFloat(t.payTotalNum.deliverFee).toFixed(2)))]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width110",staticStyle:{color:"#F8941F"}},[t._v(t._s(parseFloat(t.payTotalNum.activityFee).toFixed(2)))]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width110",staticStyle:{color:"#F8941F"}},[t._v(t._s(parseFloat(t.payTotalNum.goodsTotalPrice).toFixed(2)))]):t._e(),t._v(" "),t.cancelledShow&&t.afterAmountShow?a("li",{staticClass:"width110",staticStyle:{color:"#F8941F"}},[t._v(t._s(parseFloat(t.payTotalNum.income).toFixed(2)))]):t._e()])]):t._e(),t._v(" "),t.showDay?t._e():a("div",{style:{width:t.showWidth+"px"}},[t.showAllDay?a("section",{staticStyle:{width:"100%",overflow:"auto","margin-top":"30px"}},[a("div",{staticStyle:{width:"100%",height:"50px","border-top":"1px solid #d2d2d2"}}),t._v(" "),a("ul",{staticStyle:{"background-color":"#f2f2f2"}},[a("li",{staticClass:"width80"},[t._v("订单数")]),t._v(" "),a("li",{staticClass:"width110"},[t._v("商品总数\n\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{position:"absolute",top:"0"}},[a("detailsDes",{attrs:{title:"该日商品总数包含订单中所有商品数量（包括赠品）"}})],1)]),t._v(" "),a("li",{staticClass:"width80"},[t._v("销量\n\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{position:"absolute",top:"-56px","margin-left":"100px"}},[a("detailsDes",{attrs:{title:"该日已销售的商品数量（不包含赠品）"}})],1)]),t._v(" "),a("li",{staticClass:"width80"},[t._v("赠品数")]),t._v(" "),a("li",{staticClass:"width110"},[t._v("部分退款")]),t._v(" "),a("li",{staticClass:"width110"},[t._v("配送金额")]),t._v(" "),a("li",{staticClass:"width110"},[t._v("优惠总额\n\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{position:"absolute",top:"0","margin-left":"126px"}},[a("detailsDes",{attrs:{title:"该日所有的优惠金额总计"}})],1)]),t._v(" "),a("li",{staticClass:"width110"},[t._v("消费金额\n\t\t\t\t\t\t\t\t"),t._e()],2),t._v(" "),a("li",{staticClass:"width110",staticStyle:{position:"relative"}},[t._v("\n\t\t\t\t\t\t\t\t入账金额\n\t\t\t\t\t\t\t\t"),a("div",{staticStyle:{position:"absolute",top:"0","margin-left":"114px"}},[a("detailsDes",{attrs:{title:"该日实际收入的金额"}})],1)])]),t._v(" "),t.paginationList.length>0?[t._l(t.paginationList,function(e,i){return[a("ul",{key:i,staticStyle:{overflow:"hidden",width:"100%",background:"#ffffff","border-bottom":"1px solid #d2d2d2"}},[a("li",{staticClass:"width80"},[t._v(t._s(e.orderNum))]),t._v(" "),a("li",{staticClass:"width110"},[t._v(t._s(e.totalNum))]),t._v(" "),a("li",{staticClass:"width80"},[t._v(t._s(e.goodsNum))]),t._v(" "),a("li",{staticClass:"width80"},[t._v(t._s(e.discountNum))]),t._v(" "),a("li",{staticClass:"width110"},[t._v(t._s(e.partRefund))]),t._v(" "),a("li",{staticClass:"width110"},[t._v(t._s(parseFloat(e.deliverFee).toFixed(2)))]),t._v(" "),a("li",{staticClass:"width110"},[t._v(t._s(parseFloat(e.activityFee).toFixed(2)))]),t._v(" "),a("li",{staticClass:"width110"},[t._v(t._s(parseFloat(e.goodsTotalPrice).toFixed(2)))]),t._v(" "),a("li",{staticClass:"width110"},[t._v(t._s(parseFloat(e.income).toFixed(2)))])])]})]:a("ul",{staticStyle:{width:"100%",height:"50px"}},[a("li",{staticStyle:{color:"orange","text-align":"left",width:"100%","padding-left":"200px",height:"80px","line-height":"80px"}},[t._v("该时间段并没有订单数据")])])],2):t._e()]),t._v(" "),t.showDay?a("div",{style:{width:t.showWidth+"px"}},[a("div",{staticStyle:{width:"100%",height:"50px","border-top":"1px solid #d2d2d2","margin-top":"30px"}}),t._v(" "),a("ul",{staticClass:"first",staticStyle:{color:"#333333",width:"100%",background:"#f2f2f2"},style:{width:t.showWidth+"px"}},[a("li",{class:{width80:t.cancelledShow,cancel:!t.cancelledShow}},[t._v("类型")]),t._v(" "),a("li",{class:{width80:t.cancelledShow,cancel:!t.cancelledShow}},[t._v("状态")]),t._v(" "),a("li",{class:{width160:t.cancelledShow,cancel:!t.cancelledShow}},[t._v("下单时间")]),t._v(" "),a("li",{class:{cancelback110:t.cancelledShow,cancel:!t.cancelledShow}},[t._v("商品总数\n\t\t\t\t\t\t\t"),a("div",{staticStyle:{position:"absolute",top:"0"}},[a("detailsDes",{attrs:{title:"该日商品总数包含订单中所有商品数量（包括赠品）"}})],1)]),t._v(" "),a("li",{class:{cancelback80:t.cancelledShow,cancel:!t.cancelledShow}},[t._v("销量\n\t\t\t\t\t\t\t"),a("detailsDes",{attrs:{title:"该日已销售的商品数量（不包含赠品）"}})],1),t._v(" "),a("li",{class:{cancelback80:t.cancelledShow,cancel:!t.cancelledShow}},[t._v("赠品数")]),t._v(" "),a("li",{staticStyle:{width:"60px","text-align":"center"}},[t._v("部分退款")]),t._v(" "),t.afterRefundShow?a("li",{staticClass:"width110"},[t._v("退款金额")]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width80"},[t._v("配送金额")]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width110"},[t._v("优惠总额\n\t\t\t\t\t\t\t"),a("div",{staticStyle:{position:"absolute",top:"0","margin-left":"-80px"}},[a("detailsDes",{attrs:{title:"该订单所有的优惠金额总计"}})],1)]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width110"},[t._v("消费金额\n\t\t\t\t\t\t\t"),t._e()],2):t._e(),t._v(" "),t.cancelledShow&&t.afterAmountShow?a("li",{staticClass:"width110"},[t._v("\n\t\t\t\t\t\t\t入账金额\n\t\t\t\t\t\t\t"),a("div",{staticStyle:{border:"1px solid #0000ff",position:"absolute",top:"0","margin-left":"-60px"}},[a("detailsDes",{attrs:{title:"该日实际收入的金额"}})],1)]):t._e()]),t._v(" "),t.paginationList.length>0?[t._l(t.paginationList,function(e,i){return[a("ul",{key:i,staticClass:"order-content-show detialList",staticStyle:{color:"#333333",overflow:"hidden",width:"100%",background:"#ffffff","border-bottom":"1px solid #D2D2D2"},style:{width:t.showWidth+"px"}},[a("li",{class:{width80:t.cancelledShow,cancel:!t.cancelledShow}},[t._v(t._s(e.takeoutName))]),t._v(" "),a("li",{class:{width80:t.cancelledShow,cancel:!t.cancelledShow}},[t._v(t._s(e.status))]),t._v(" "),a("li",{class:{width160:t.cancelledShow,cancel:!t.cancelledShow}},[t._v(t._s(e.time))]),t._v(" "),a("li",{class:{cancelback110:t.cancelledShow,cancel:!t.cancelledShow}},[t._v(t._s(e.totalNum))]),t._v(" "),a("li",{class:{cancelback80:t.cancelledShow,cancel:!t.cancelledShow}},[t._v(t._s(e.goodsNum))]),t._v(" "),a("li",{class:{cancelback80:t.cancelledShow,cancel:!t.cancelledShow}},[t._v(t._s(e.discountNum))]),t._v(" "),a("li",{staticStyle:{width:"60px","text-align":"center"}},[t._v(t._s(e.partRefund))]),t._v(" "),t.afterRefundShow?a("li",{staticClass:"width110"},[t._v(t._s(parseFloat(e.goodsTotalPrice).toFixed(2)))]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width80"},[t._v(t._s(parseFloat(e.deliverFee).toFixed(2)))]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width110"},[t._v(t._s(parseFloat(e.activityFee).toFixed(2)))]):t._e(),t._v(" "),t.cancelledShow?a("li",{staticClass:"width110"},[t._v(t._s(parseFloat(e.goodsTotalPrice).toFixed(2)))]):t._e(),t._v(" "),t.cancelledShow&&t.afterAmountShow?a("li",{staticClass:"width110"},[t._v(t._s(parseFloat(e.income).toFixed(2)))]):t._e()])]})]:a("ul",{style:{width:t.showWidth+"px"}},[a("li",{staticStyle:{width:"100%",height:"50px","line-height":"50px","background-color":"#FFFFFF",color:"#F8931F"}},[t._v("没有订单")])])],2):t._e()])])]),t._v(" "),!t.showDay&&t.showAllDay?a("div",{staticStyle:{float:"right","margin-right":"30px"}},[a("pageElement",{attrs:{page:t.allDayPage.page+1,total:t.allDayPage.pageNum,num:t.allDayPage.num,isNoJump:!0},on:{pageNum:t.getOrderListMonPage}})],1):t._e(),t._v(" "),t.showDay?a("div",{staticStyle:{float:"right","margin-right":"30px"}},[a("pageElement",{attrs:{page:t.dayPage.page+1,total:t.dayPage.pageNum,num:t.dayPage.num,isNoJump:!0},on:{pageNum:t.getOrderListInDayPage}})],1):t._e()])};i._withStripped=!0;var s=a("81a2"),n=a("f6ce"),l=a("bbb9");function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(s,n){try{var l=e[s](n),o=l.value}catch(t){return void a(t)}if(!l.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})}}var r={data:function(){return{dataDetial:{},brandId:"",shopId:"",isBrand:"",showDayAllDetail:!1,startTime:"",endTime:"",newStartTime:"",newEndTime:"",showAllDay:!1,showDay:!1,isOpenTime:"",timeBtn:!1,timeBtnKind:!1,allArea:"选择区域",timeArea:"选择时间类别",timeKind:"选择时间",allTakeawaytype:"请选择类型",takeawaytypeBtn:!1,orderNumber:"",allDayPage:{page:0,num:10,pageNum:1},dayPage:{page:0,num:10,pageNum:1},status:1,selectTypeNum:null,payTotalNum:{},paginationList:[],showWidth:1940,cancelledShow:!0,afterRefundShow:!1,afterAmountShow:!0,countList:[{name:10},{name:50}],takeawaytypeList:[{id:"0",takeawaytypeName:"全部"},{id:"1",takeawaytypeName:"饿了么"},{id:"2",takeawaytypeName:"美团外卖"},{id:"3",takeawaytypeName:"百度外卖"}],exportUrl:"javascript:void(0);",startObj:{},endObj:{}}},methods:{initBtn:function(t){var e=this,a=[];a=[{name:"返回",style:{backgroundColor:"#fff",border:"1px solid #ff8c01",color:"#ff8c01"},fn:function(){e.initBtn(!0),e.returnPage()}},{name:"打印",style:{backgroundColor:"#fff",border:"1px solid #20a7dd",color:"#20a7dd"},fn:function(){e.printOrderTakeout(),console.log("2")}},{name:"导出",style:{},fn:function(){e.exportOrderTakeaway(),console.log("3")}}],t&&a.shift(),this.$store.commit("setPageTools",a)},toOrder:function(){var t;t={name:"order",startTime:this.startTime,endTime:this.endTime,isOpenTime:this.isOpenTime},n.a.session("orderTakeout",t),this.$router.push({path:"/admin/orderStatistics/orderMore",query:this.$route.query})},toProprietary:function(){this.$router.push({path:"/admin/orderStatistics/orderProprietary",query:this.$route.query})},selectBusinessHours:function(){var t=this.isOpenTime;this.isOpenTime=!t},getStartTime:function(t){this.newStartTime=t,this.startObj.time=t},getEndTime:function(t){this.newEndTime=t,this.endObj.time=t},showTimeList:function(t){t.stopPropagation(),this.timeBtn=!this.timeBtn},init:function(){var t=new Date(this.startTime),e=new Date(this.endTime),a=l.a.format(t,"yyyy"),i=l.a.format(t,"MM"),s=l.a.format(t,"dd"),n=l.a.format(e,"yyyy"),o=l.a.format(e,"MM"),r=l.a.format(e,"dd");a==n&&i==o&&s==r?(this.showDay=!0,this.showAllDay=!1,this.takeoutOnedayList(a+"-"+i+"-"+s),this.showWidth=1376):(this.takeoutMultidayList(),this.showWidth=1376),0==this.selectTypeNum?this.allTakeawaytype="全部":1==this.selectTypeNum?this.allTakeawaytype="饿了么":2==this.selectTypeNum?this.allTakeawaytype="美团外卖":3==this.selectTypeNum&&(this.allTakeawaytype="百度外卖")},sreachOrderInDays:function(){return this.newEndTime-this.newStartTime>80352e5?(this.$store.commit("setWin",{title:"操作提示",content:"最大只能查询三个月时间!"}),!1):parseInt(this.newStartTime/1e3)-parseInt(this.newEndTime/1e3)>0?(this.$store.commit("setWin",{title:"操作提示",content:"时间选择错误!"}),!1):(this.startTime=this.newStartTime,this.endTime=this.newEndTime,this.dayPage.page=0,void this.takeoutMultidayList())},timeToday:function(t){return l.a.format(new Date(t),"yyyy年MM月dd日")},showtakeawaytypeList:function(t){t.stopPropagation(),this.takeawaytypeBtn=!this.takeawaytypeBtn},getTime:function(t){var e=/(\d{4})(?:-(\d{1,2})(?:-(\d{1,2}))?)?(?:\s+(\d{1,2}):(\d{1,2}):(\d{1,2}))?/.exec(t);return new Date(e[1],(e[2]||1)-1,e[3]||1,e[4]||0,e[5]||0,e[6]||0).getTime()/1e3},openDayDetial:function(t){this.dayPage.page=0,this.initBtn(),this.status=1,this.takeoutOnedayList(t),this.detailTime=t},getOidList:function(t){this.allDayPage.page=0,this.dayPage.page=0,this.status=t,2==this.status?(this.cancelledShow=!1,this.afterRefundShow=!1):3==this.status?(this.afterAmountShow=!1,this.afterRefundShow=!0,this.cancelledShow=!0):(this.afterAmountShow=!0,this.cancelledShow=!0,this.afterRefundShow=!1),this.takeoutOnedayList(this.dateTime)},isZero:function(t){for(var e=this.isZeroPays,a={},i=0;i<e.length;i++)a[e[i]]||(a[e[i]]="110");return!!a[t]},reset:function(){null==this.detailTime&&(this.detailTime=l.a.format(new Date,"yyyy-MM-dd")),this.newStartTime=(new Date).setHours(0,0,0,0),this.newEndTime=(new Date).setHours(23,59,59,0),this.startObj.time=this.newStartTime,this.endObj.time=this.newEndTime,this.orderNumber=null,this.allTakeawaytype="请选择类型",1==this.showDay?this.takeoutOnedayList(this.detailTime):1==this.showAllDay&&this.takeoutMultidayList(),this.startObj=l.a.deepCopy(this.startObj),this.endObj=l.a.deepCopy(this.endObj)},selectTakeawayType:function(t,e){null==this.detailTime&&(this.detailTime=l.a.format(new Date(this.startTime),"yyyy-MM-dd")),this.selectTypeNum=t,this.allTakeawaytype=e.takeawaytypeName,this.takeawaytypeBtn=!1,1==this.showDay?this.takeoutOnedayList(this.detailTime):1==this.showAllDay&&this.takeoutMultidayList()},getOrderListInDayPage:function(t){this.dayPage.page=t.page-1,this.dayPage.num=t.num,this.takeoutOnedayList(this.dateTime)},getOrderListMonPage:function(t){this.allDayPage.page=t.page-1,this.allDayPage.num=t.num,this.takeoutMultidayList()},takeoutOnedayList:function(t){var e=this;return o(regeneratorRuntime.mark(function a(){var i,n,l,o,r,c,d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.orderNumber="",e.dateTime=t,e.showAllDay=!1,i=t+" "+e.startH+":"+e.startM+":"+e.startS,n=t+" "+e.endH+":"+e.endM+":"+e.endS,l=new Date(e.startTime),o=new Date(e.endTime),a.next=9,s.a.getOrderOneDayStat({data:{trueShopId:e.dataDetial?e.dataDetial.itemDetial.shopId:e.shopId,startTime:t==l?e.getTime(i):e.getTime(t+" 00:00:00"),endTime:t==o?e.getTime(n):e.getTime(t+" 23:59:59"),isOpenTime:Number(e.isOpenTime),page:e.dayPage.page+1,num:e.dayPage.num,status:e.status+1,type:e.selectTypeNum}});case 9:for(r=a.sent,e.returnAll=!1,e.payTotalNum=r.total,e.payTotalNum.totalDay=1,e.payTotalNum.days=1,r&&(e.showDay=!0,c=r.list,e.oneDayOrderList=c),d=0;d<e.oneDayOrderList.length;d++)1==e.oneDayOrderList[d].type?e.oneDayOrderList[d].takeoutName="饿了么":2==e.oneDayOrderList[d].type?e.oneDayOrderList[d].takeoutName="美团外卖":3==e.oneDayOrderList[d].type&&(e.oneDayOrderList[d].takeoutName="百度外卖");e.setPage();case 17:case"end":return a.stop()}},a,e)}))()},takeoutMultidayList:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var a,i,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.showDay=!1,t.showAllDay=!0,a=new Date(t.startTime),i=new Date(t.endTime),t.startH=l.a.format(a,"hh"),t.startM=l.a.format(a,"mm"),t.startS=l.a.format(a,"ss"),t.endH=l.a.format(i,"hh"),t.endM=l.a.format(i,"mm"),t.endS=l.a.format(i,"ss"),(1*t.startH>0||1*t.startM>0||1*t.startS||1*t.endH<23||1*t.endM<59||1*t.endS<59)&&(t.isOpenTime=!1),e.next=13,s.a.getOrderManyDaysStat({data:{trueShopId:t.dataDetial?t.dataDetial.itemDetial.shopId:t.shopId,startTime:parseInt(t.startTime/1e3),endTime:parseInt(t.endTime/1e3),isOpenTime:Number(t.isOpenTime),page:t.allDayPage.page+1,num:t.allDayPage.num,type:t.selectTypeNum}});case 13:n=e.sent,t.returnAll=!0,n&&n.total&&(t.payTotalNum=n.total,t.orderListInDays=n.list,t.setPage());case 16:case"end":return e.stop()}},e,t)}))()},orderDetails:function(t,e){var a=this;return o(regeneratorRuntime.mark(function i(){var l,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return void 0!=t.orderId&&(a.orderNumber=t.orderId,a.orderBOrder=t),a.orderIdTakeoutNum=e,i.next=4,s.a.getOrderDetail({data:{trueShopId:a.dataDetial?a.dataDetial.itemDetial.shopId:a.shopId,oid:void 0!=t.orderId?t.orderId:t,type:void 0!=t.type?t.type:a.selectTypeNum,brandId:a.brandId}});case 4:(l=i.sent).type=t.type,o={startTime:a.startTime,endTime:a.endTime,isOpenTime:a.isOpenTime},n.a.session("orderTakeout",o),n.a.session("takeawayDetail",l),a.$router.push({path:"/admin/orderStatistics/takeawayDetail",query:a.$route.query});case 10:case"end":return i.stop()}},i,a)}))()},printOrderTakeout:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var a,i,n,o,r,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.a.format(new Date(t.startTime),"yyyy-MM-dd"),i=l.a.format(new Date(t.endTime),"yyyy-MM-dd"),n=t.dateTime+" "+t.startH+":"+t.startM+":"+t.startS,o=t.dateTime+" "+t.endH+":"+t.endM+":"+t.endS,r={},r=t.payTotalNum,t.showDay||t.showDayAllDetail){e.next=26;break}if(r.startTime=parseInt(t.startTime/1e3),r.endTime=parseInt(t.endTime/1e3),0!=t.orderListInDays.length){e.next=12;break}return t.$store.commit("setWin",{content:"没有订单可以打印"}),e.abrupt("return",!1);case 12:if(c=80352e5,!(t.endTime-t.startTime>c)){e.next=18;break}return t.$store.commit("setWin",{content:"最大只能查询三个月时间"}),e.abrupt("return",!1);case 18:if(!(parseInt(t.startTime/1e3)-parseInt(t.endTime/1e3)>0)){e.next=21;break}return t.$store.commit("setWin",{content:"时间选择错误"}),e.abrupt("return",!1);case 21:return e.next=23,s.a.printOrderStat({data:{shopId:t.dataDetial?t.dataDetial.itemDetial.shopId:t.shopId,printData:JSON.stringify(r)}});case 23:t.$store.commit("setWin",{content:"打印数据已发送！"}),e.next=32;break;case 26:if(!t.showDay||t.showDayAllDetail){e.next=32;break}return r.startTime=t.dateTime==a?t.getTime(n):t.getTime(t.dateTime+" 00:00:00"),r.endTime=t.dateTime==i?t.getTime(o):t.getTime(t.dateTime+" 23:59:59"),e.next=31,s.a.printOrderStat({data:{shopId:t.dataDetial?t.dataDetial.itemDetial.shopId:t.shopId,printData:JSON.stringify(r)}});case 31:t.$store.commit("setWin",{content:"打印数据已发送！"});case 32:case"end":return e.stop()}},e,t)}))()},exportOrderTakeaway:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var a,i,n,l,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.dateTime+" "+t.startH+":"+t.startM+":"+t.startS,i=t.dateTime+" "+t.endH+":"+t.endM+":"+t.endS,n=new Date(t.startTime),l=new Date(t.endTime),null==t.selectTypeNum&&(t.selectTypeNum=0),t.showDay||t.showDayAllDetail){e.next=24;break}if(0!=t.orderListInDays.length){e.next=10;break}return t.exportUrl="javascript:void 0",t.$store.commit("setWin",{content:"没有订单可以导出"}),e.abrupt("return",!1);case 10:if(o=80352e5,!(t.endTime-t.startTime>o)){e.next=16;break}return t.$store.commit("setWin",{content:"最大只能查询三个月时间"}),e.abrupt("return",!1);case 16:if(!(parseInt(t.startTime/1e3)-parseInt(t.endTime/1e3)>0)){e.next=19;break}return t.$store.commit("setWin",{content:"时间选择错误"}),e.abrupt("return",!1);case 19:return e.next=21,s.a.exportOrderStat({data:{trueShopId:t.dataDetial?t.dataDetial.itemDetial.shopId:t.shopId,startTime:parseInt(t.startTime/1e3),endTime:parseInt(t.endTime/1e3),isOpenTime:Number(t.isOpenTime),exportType:1,type:t.selectTypeNum,status:0,format:"csv"}});case 21:t.exportUrl=e.sent,e.next=34;break;case 24:if(!t.showDay||t.showDayAllDetail){e.next=34;break}if(0==t.oneDayOrderList.length){e.next=31;break}return e.next=28,s.a.exportOrderStat({data:{trueShopId:t.dataDetial?t.dataDetial.itemDetial.shopId:t.shopId,startTime:t.dateTime==n?t.getTime(a):t.getTime(t.dateTime+" 00:00:00"),endTime:t.dateTime==l?t.getTime(i):t.getTime(t.dateTime+" 23:59:59"),isOpenTime:Number(t.isOpenTime),exportType:2,type:t.selectTypeNum,status:t.status+1,format:"csv"}});case 28:t.exportUrl=e.sent,e.next=34;break;case 31:return t.exportUrl="javascript:void 0",t.$store.commit("setWin",{content:"没有订单可以导出"}),e.abrupt("return",!1);case 34:case"end":return e.stop()}},e,t)}))()},getInfoByOrder:function(){var t=this.orderNumber;return null==t||void 0==t||""==t?(this.$store.commit("setWin",{content:"请输入订单号码!"}),!1):t.split("").length<10||!/\d+/g.test(t)?(this.$store.commit("setWin",{content:"请输入正确订单号码!"}),!1):void("请选择类型"!=this.allTakeawaytype&&0!=this.selectTypeNum?this.orderDetails(t):this.$store.commit("setWin",{content:"请选择外卖类型!"}))},returnPage:function(){return this.showDay&&!this.showDayAllDetail?(this.showAllDay=!0,this.showDay=!1,void this.takeoutMultidayList()):1==this.returnAll?(this.orderNumber="",this.showAllDay=!0,this.showDay=!1,void(this.showDayAllDetail=!1)):void 0},returnBrand:function(){n.a.session("brandorderDetial",this.dataDetial),this.$router.push({path:"/admin/orderStatistics/takeawayBrand",query:this.$route.query})},setPage:function(){if(1==this.showDay){this.dayPage.pageNum=Math.ceil(this.oneDayOrderList.length/this.dayPage.num);var t=this.dayPage.page*this.dayPage.num,e=(this.dayPage.page+1)*this.dayPage.num,a=this.oneDayOrderList.slice(t,e);this.paginationList=a}else if(1==this.showAllDay){this.allDayPage.pageNum=Math.ceil(this.orderListInDays.length/this.allDayPage.num);var i=this.allDayPage.page*this.allDayPage.num,s=(this.allDayPage.page+1)*this.allDayPage.num,n=this.orderListInDays.slice(i,s);this.paginationList=n}}},mounted:function(){this.initBtn(!0);var t=n.a.session("userShop"),e=void 0,a=void 0;e=t.currentShop.brandId?t.currentShop.brandId:0,t&&t.accessToken&&t.currentShop&&(a=t.currentShop.id);var i=n.a.session("orderTakeout"),s=n.a.session("brandDetial");this.startTime=s?s.startTime:i?i.startTime:(new Date).setHours(0,0,0,0),this.endTime=s?s.endTime:i?i.endTime:(new Date).setHours(23,59,59,999),this.newStartTime=s?s.startTime:i?i.startTime:(new Date).setHours(0,0,0,0),this.newEndTime=s?s.endTime:i?i.endTime:(new Date).setHours(23,59,59,999),this.isOpenTime=s?s.isOpenTime:!i||i.isOpenTime,this.isBrand="3"==t.currentShop.ischain,this.dataDetial=s,this.selectTypeNum=s?s.type:null,this.brandId=e,this.shopId=a,this.startObj={time:this.startTime},this.endObj={time:this.endTime},this.init(),sessionStorage.removeItem("orderTakeout")},components:{win:function(){return a.e("win").then(a.bind(null,"f60a"))},calendar:function(){return a.e("calendar_result").then(a.bind(null,"9265"))},detailsDes:function(){return a.e("details_des").then(a.bind(null,"33d1"))},pageElement:function(){return a.e("page_element").then(a.bind(null,"5921"))}}},c=(a("9359"),a("7610")),d=Object(c.a)(r,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("i")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"aUl",staticStyle:{"background-color":"#f2f2f2"}},[e("li",{staticClass:"aLi",staticStyle:{width:"100px"}},[this._v("操作")]),this._v(" "),e("li",{staticClass:"aLi",staticStyle:{width:"150px"}},[this._v("日期")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticStyle:{"background-color":"#fff"}},[e("li",{staticClass:"width100"}),this._v(" "),e("li",{staticClass:"width150"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",{staticClass:"aUl",staticStyle:{"background-color":"#f2f2f2"}},[e("li",{staticClass:"aLi",staticStyle:{width:"250px"}},[this._v("订单号")])])}],!1,null,"9593e796",null);d.options.__file="src\\module\\statistics\\order_takeaway.vue";e.default=d.exports},9359:function(t,e,a){"use strict";var i=a("0fa8");a.n(i).a}}]);