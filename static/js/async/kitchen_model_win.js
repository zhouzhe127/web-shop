(window.webpackJsonp=window.webpackJsonp||[]).push([["kitchen_model_win"],{6848:function(t,e,i){},c813:function(t,e,i){"use strict";i.r(e);var s=i("81a2");function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function s(n,a){try{var o=e[n](a),r=o.value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(r).then(function(t){s("next",t)},function(t){s("throw",t)});t(r)}("next")})}}var a={data:function(){return{list:["后厨加工","出品台"],isGoodsShow:!1,info:Object}},props:{item:Object,isAdd:null,Area:Array,allName:Array},created:function(){var t=this.item,e="string"==typeof t.goodsIds;this.info={id:t.id?t.id:"",type:t.type?t.type:0,name:t.name?t.name:"",sort:t.sort?t.sort:1,areaIds:t.areaIds?e?t.areaIds.split(","):t.areaIds:[],goodsIds:t.goodsIds?e?t.goodsIds.split(","):t.goodsIds:[],packageIds:t.packageIds?e?t.packageIds.split(","):t.packageIds:[]},this.name=t.name?t.name:"";for(var i=0;i<this.Area.length;i++)this.Area[i].selected=this.info.areaIds.includes(this.Area[i].id)},methods:{changeSelect:function(t){this.isAdd?this.info.type=t:this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"不能修改操作台类型"})},edit:function(){this.isGoodsShow=!0},doThrowWinGoods:function(t,e){"ok"==t&&(this.info.goodsIds=e.goodArr,this.info.packageIds=e.packArr),this.isGoodsShow=!1},isAddFun:function(t){var e=this;return n(regeneratorRuntime.mark(function i(){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.a.KitchenAdd({data:{type:e.info.type,name:e.info.name,goodsIds:e.info.goodsIds.toString(),packageIds:e.info.packageIds.toString(),areaIds:e.info.areaIds.toString(),sort:e.info.sort}});case 2:(n=i.sent)&&(e.info.id=n.id,e.$emit("throwWinResult",t,e.info));case 4:case"end":return i.stop()}},i,e)}))()},isEditFun:function(t){var e=this;return n(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.a.KitchenUpdate({data:{id:e.info.id,type:e.info.type,name:e.info.name,goodsIds:e.info.goodsIds.toString(),packageIds:e.info.packageIds.toString(),areaIds:e.info.areaIds.toString(),sort:e.info.sort}});case 2:i.sent&&e.$emit("throwWinResult",t,e.info);case 4:case"end":return i.stop()}},i,e)}))()},clickResult:function(t){if("ok"==t){if(this.info.name.length>10)return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"操作台名称不能超过10个字"}),!1;if(""==this.info.name.trim())return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"操作台名称不能为空"}),!1;if(-1!=this.allName.indexOf(this.info.name.trim())&&this.info.name!=this.name)return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"操作台名称不能重复"}),!1;if(this.info.goodsIds.length+this.info.packageIds.length==0)return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"请关联商品"}),!1;this.info.areaIds=[];for(var e=0;e<this.Area.length;e++)this.Area[e].selected&&this.info.areaIds.push(this.Area[e].id);if(0==this.info.areaIds.length)return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"请选择区域"}),!1;this.info.goodsNum=this.info.goodsIds.length+this.info.packageIds.length,this.isAdd?this.isAddFun(t):this.isEditFun(t)}else this.$emit("throwWinResult",t)}},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))},goodListWin:function(){return i.e("good_list_win").then(i.bind(null,"8bf4"))}}},o=(i("da75"),i("d801")),r=Object(o.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("win",{attrs:{align:"right",width:480,height:"auto"},on:{winEvent:t.clickResult}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.isAdd?"添加操作台":"编辑操作台"))]),t._v(" "),i("div",{staticStyle:{"background-color":"#F2F2F2"},attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"jobWin"},[i("h2",{staticClass:"required tag"},[t._v("操作台类型")]),t._v(" "),t._l(t.list,function(e,s){return[i("div",{key:s,staticClass:"computeStyle",class:{icSelect:s==t.info.type},on:{click:function(e){t.changeSelect(s)}}},[t._v("\n\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t")])]}),t._v(" "),i("div",{staticClass:"clear"}),t._v(" "),i("h2",{staticClass:"required tag"},[t._v("操作台名称")]),t._v(" "),i("div",{staticClass:"mes"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.info.name,expression:"info.name"}],staticClass:"input",staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"10",placeholder:"请输入操作台名称"},domProps:{value:t.info.name},on:{input:function(e){e.target.composing||t.$set(t.info,"name",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"clear"}),t._v(" "),i("h2",{staticClass:"required tag"},[t._v("关联商品")]),t._v(" "),i("div",{staticClass:"mes",staticStyle:{color:"#999",height:"40px","line-height":"40px"}},[t._v("\n\t\t\t\t\t已关联商品："+t._s(t.info.goodsIds.length+t.info.packageIds.length)+" 种\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"clear"}),t._v(" "),i("h2",{staticClass:"tag"}),t._v(" "),i("div",{staticClass:"mes"},[i("a",{staticClass:"addclassify",staticStyle:{width:"220px"},attrs:{href:"javascript:void(0);"},on:{click:t.edit}},[t._v("关联商品")])]),t._v(" "),i("div",{staticClass:"clear"}),t._v(" "),i("h2",{staticClass:"required tag"},[t._v("区域")]),t._v(" "),i("div",{staticClass:"mes"},t._l(t.Area,function(e,s){return i("el-checkbox",{key:s,staticClass:"mesLi",attrs:{label:e.areaName,border:"",size:"medium"},model:{value:e.selected,callback:function(i){t.$set(e,"selected",i)},expression:"item.selected"}})})),t._v(" "),i("div",{staticClass:"clear"}),t._v(" "),i("h2",{staticClass:"required tag"},[t._v("排序")]),t._v(" "),i("div",{staticClass:"mes"},[i("el-input-number",{attrs:{min:1,max:255},model:{value:t.info.sort,callback:function(e){t.$set(t.info,"sort",e)},expression:"info.sort"}})],1),t._v(" "),i("div",{staticClass:"clear"})],2),t._v(" "),t.isGoodsShow?i("goodListWin",{attrs:{goodsIds:t.info.goodsIds,isGoods:!0,packages:t.info.packageIds,goInName:"isKitchen"},on:{goodListWin:t.doThrowWinGoods}}):t._e()],1)])],1)},[],!1,null,"4de7d586",null);e.default=r.exports},da75:function(t,e,i){"use strict";var s=i("6848");i.n(s).a}}]);