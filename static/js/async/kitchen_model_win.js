(window.webpackJsonp=window.webpackJsonp||[]).push([["kitchen_model_win"],{"89f9":function(t,i,e){},a6b5:function(t,i,e){"use strict";var n=e("89f9");e.n(n).a},c813:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("win",{attrs:{align:"right",width:480,height:"auto"},on:{winEvent:t.clickResult}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.isAdd?"添加操作台":"编辑操作台"))]),t._v(" "),e("div",{staticStyle:{"background-color":"#F2F2F2"},attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"jobWin"},[e("h2",{staticClass:"required tag"},[t._v("操作台类型")]),t._v(" "),t._l(t.list,function(i,n){return[e("div",{key:n,staticClass:"computeStyle",class:{icSelect:n==t.info.type},on:{click:function(i){t.changeSelect(n)}}},[t._v("\n\t\t\t\t\t\t"+t._s(i)+"\n\t\t\t\t\t")])]}),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("h2",{staticClass:"required tag"},[t._v("操作台名称")]),t._v(" "),e("div",{staticClass:"mes"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.info.name,expression:"info.name"}],staticClass:"input",staticStyle:{width:"100%"},attrs:{type:"text",maxlength:"10",placeholder:"请输入操作台名称"},domProps:{value:t.info.name},on:{input:function(i){i.target.composing||t.$set(t.info,"name",i.target.value)}}})]),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("h2",{staticClass:"required tag"},[t._v("关联商品")]),t._v(" "),e("div",{staticClass:"mes",staticStyle:{color:"#999",height:"40px","line-height":"40px"}},[t._v("\n\t\t\t\t\t已关联商品："+t._s(t.info.goodsIds.length+t.info.packageIds.length)+" 种\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("h2",{staticClass:"tag"}),t._v(" "),e("div",{staticClass:"mes"},[e("a",{staticClass:"addclassify",staticStyle:{width:"220px"},attrs:{href:"javascript:void(0);"},on:{click:t.edit}},[t._v("关联商品")])]),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("h2",{staticClass:"required tag"},[t._v("区域")]),t._v(" "),e("div",{staticClass:"mes"},[e("mulSelect",{attrs:{list:t.Area,selects:t.info.areaIds,name:"areaName",keys:"id"},on:{selOn:t.doMore}})],1),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("h2",{staticClass:"required tag"},[t._v("排序")]),t._v(" "),e("div",{staticClass:"mes"},[e("subadd",{attrs:{bindnum:t.info.sort,maxnum:255,minnum:1,sign:!1},on:{toClick:t.change}})],1),t._v(" "),e("div",{staticClass:"clear"})],2),t._v(" "),t.isGoodsShow?e("goodListWin",{attrs:{goodsIds:t.info.goodsIds,isGoods:!0,packages:t.info.packageIds,goInName:"isKitchen"},on:{goodListWin:t.doThrowWinGoods}}):t._e()],1)])],1)};n._withStripped=!0;var s=e("81a2");function o(t){return function(){var i=t.apply(this,arguments);return new Promise(function(t,e){return function n(s,o){try{var a=i[s](o),r=a.value}catch(t){return void e(t)}if(!a.done)return Promise.resolve(r).then(function(t){n("next",t)},function(t){n("throw",t)});t(r)}("next")})}}var a={data:function(){return{list:["后厨加工","出品台"],isGoodsShow:!1,info:Object}},props:{item:Object,isAdd:null,Area:Array,allName:Array},created:function(){var t=this.item,i="string"==typeof t.goodsIds;this.info={id:t.id?t.id:"",type:t.type?t.type:0,name:t.name?t.name:"",sort:t.sort?t.sort:1,areaIds:t.areaIds?i?t.areaIds.split(","):t.areaIds:[],goodsIds:t.goodsIds?i?t.goodsIds.split(","):t.goodsIds:[],packageIds:t.packageIds?i?t.packageIds.split(","):t.packageIds:[]},this.name=t.name?t.name:""},methods:{changeSelect:function(t){this.isAdd?this.info.type=t:this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"不能修改操作台类型"})},doMore:function(t){this.info.areaIds=t},change:function(t){this.info.sort=t},edit:function(){this.isGoodsShow=!0},doThrowWinGoods:function(t,i){"ok"==t&&(this.info.goodsIds=i.goodArr,this.info.packageIds=i.packArr),this.isGoodsShow=!1},isAddFun:function(t){var i=this;return o(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.KitchenAdd({data:{type:i.info.type,name:i.info.name,goodsIds:i.info.goodsIds.toString(),packageIds:i.info.packageIds.toString(),areaIds:i.info.areaIds.toString(),sort:i.info.sort}});case 2:(n=e.sent)&&(i.info.id=n.id,i.$emit("throwWinResult",t,i.info));case 4:case"end":return e.stop()}},e,i)}))()},isEditFun:function(t){var i=this;return o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.KitchenUpdate({data:{id:i.info.id,type:i.info.type,name:i.info.name,goodsIds:i.info.goodsIds.toString(),packageIds:i.info.packageIds.toString(),areaIds:i.info.areaIds.toString(),sort:i.info.sort}});case 2:e.sent&&i.$emit("throwWinResult",t,i.info);case 4:case"end":return e.stop()}},e,i)}))()},clickResult:function(t){if("ok"==t){if(this.info.name.length>10)return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"操作台名称不能超过10个字"}),!1;if(""==this.info.name.trim())return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"操作台名称不能为空"}),!1;if(-1!=this.allName.indexOf(this.info.name.trim())&&this.info.name!=this.name)return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"操作台名称不能重复"}),!1;if(0==this.info.areaIds.length)return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"请选择区域"}),!1;if(this.info.goodsIds.length+this.info.packageIds.length==0)return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"请关联商品"}),!1;this.info.goodsNum=this.info.goodsIds.length+this.info.packageIds.length,this.isAdd?this.isAddFun(t):this.isEditFun(t)}else this.$emit("throwWinResult",t)}},components:{win:function(){return e.e("win").then(e.bind(null,"f60a"))},subadd:function(){return e.e("subadd").then(e.bind(null,"e7ea"))},mulSelect:function(){return e.e("mul_select").then(e.bind(null,"7d09"))},goodListWin:function(){return e.e("good_list_win").then(e.bind(null,"8bf4"))}}},r=(e("a6b5"),e("6ceb")),d=Object(r.a)(a,n,[],!1,null,"2d632810",null);d.options.__file="src\\module\\shop_config\\kitchen_model_win.vue";i.default=d.exports}}]);