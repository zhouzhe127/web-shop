(window.webpackJsonp=window.webpackJsonp||[]).push([["mall_pro"],{"011b":function(t,e,i){},"38ae":function(t,e,i){"use strict";var n=i("011b");i.n(n).a},"855a":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[t.isEdit?t._e():i("div",{staticClass:"mall-box",attrs:{id:"pro"}},["1"!=t.ischain&&"2"!=t.ischain?i("div",{staticClass:"addFun"},[i("a",{staticClass:"firstBtn fr",staticStyle:{position:"absolute",top:"12px",right:"60px","line-height":"40px",display:"block","background-color":"#f8931f",color:"#fff",width:"150px"},attrs:{href:"javascript:void(0);"},on:{click:t.openEdit}},[t._v("添加推广素材")])]):t._e(),t._v(" "),i("div",{staticClass:"fl",staticStyle:{width:"75%","margin-right":"5%"}},[i("com-table",{key:t.index,attrs:{listHeight:80,showHand:!1,listName:"推广素材列表",showTitle:2,listWidth:1300,introData:t.proList,titleData:t.titleList,allTotal:t.allTotal},scopedSlots:t._u([{key:"con-1",fn:function(e){return i("div",{},[i("div",{on:{click:function(i){t.openImg(e.data.imageName)}}},[t._v(t._s(e.data.name))])])}},{key:"con-3",fn:function(e){return 3==t.ischain||0==t.ischain?i("div",{staticClass:"operate"},[1==e.data.status?i("a",{staticClass:"fl blue",attrs:{href:"javascript:void(0);"},on:{click:function(i){t.changeStuas(e.data.id,e.data.status)}}},[t._v("启用")]):t._e(),t._v(" "),0==e.data.status?i("a",{staticClass:"fl blue",attrs:{href:"javascript:void(0);"},on:{click:function(i){t.changeStuas(e.data.id,e.data.status)}}},[t._v("禁用")]):t._e(),t._v(" "),i("a",{staticClass:"fl yellow",attrs:{href:"javascript:void(0);"},on:{click:function(i){t.proedit(e.data.id)}}},[t._v("编辑")]),t._v(" "),i("a",{staticClass:"fl red",attrs:{href:"javascript:void(0);"},on:{click:function(i){t.dels(e.data.id)}}},[t._v("删除")])]):t._e()}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.seen,expression:"seen"}],staticClass:"linkImgs fl"},[null!=t.linkImg?i("img",{attrs:{src:t.linkImg}}):t._e()])]),t._v(" "),t.isEdit?i("mall-pedit",{attrs:{position:t.position},on:{closePedit:t.closePedit}}):t._e()],1)};n._withStripped=!0;var a=i("81a2"),s=i("f6ce"),r=i("bbb9");function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(a,s){try{var r=e[a](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var l={data:function(){return{isEdit:!1,ischain:"",proList:[],linkImg:null,imgHost:"",token:"",uid:"",index:null,position:"",titleList:[{titleName:"序号",titleStyle:{width:"100px",flex:"none"},dataName:"id"},{titleName:"素材",dataName:"name"},{titleName:"素材创建时间",dataName:"createTime"},{titleName:"操作"}],allTotal:0,page:1,pageTotal:10,seen:!1}},methods:{closePedit:function(t){this.isEdit=!1,t&&(this.linkImg=null,this.openProList())},openProList:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var i,n,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.Activitymaterial({data:{page:1,num:10}});case 2:for(i=e.sent,console.log(i),t.proList=i.list,n=t.proList,t.allTotal=n.length,s=0;s<n.length;s++)n[s].createTime=r.a.format(new Date(1e3*Number(n[s].createTime)),"yyyy.MM.dd/hh:mm");case 8:case"end":return e.stop()}},e,t)}))()},openImg:function(t){console.log(t,"info"),this.linkImg=this.imgHost+t,this.seen=!0},closeImg:function(){this.linkImg="",this.seen=!1},setInter:function(){var t=this;setInterval(function(){t.closeImg()},5e3)},changeStuas:function(t,e){var i=this;return o(regeneratorRuntime.mark(function n(){var s,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return s=Number(e),s=Boolean(s),r=Number(!s),n.next=5,a.a.Shelves({data:{id:t,status:r,uid:i.uid}});case 5:i.openProList();case 6:case"end":return n.stop()}},n,i)}))()},proedit:function(t){var e=this;return o(regeneratorRuntime.mark(function i(){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.a.getDetail({data:{id:t}});case 2:n=i.sent,e.isEdit=!0,e.position=n;case 5:case"end":return i.stop()}},i,e)}))()},dels:function(t){var e=this;this.$store.commit("setWin",{winType:"confirm",title:"操作提示！",content:"确认删除商品？",callback:function(i){"ok"==i&&e.delsMaterial(t)}})},delsMaterial:function(t){var e=this;return o(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.a.delsMaterial({data:{id:t,uid:e.uid}});case 2:e.openProList(),e.linkImg=null;case 4:case"end":return i.stop()}},i,e)}))()},openEdit:function(){this.isEdit=!0,this.position=null}},mounted:function(){window.innerWidth<1440&&this.setInter();var t=s.a.session("userShop");this.uid=t.user.id,this.imgHost=t.uploadUrl,this.ischain=t.currentShop.ischain,this.openProList()},components:{"mall-pedit":function(){return i.e("mall_pedit").then(i.bind(null,"c909"))},comTable:function(){return i.e("table").then(i.bind(null,"4360"))}}},c=(i("38ae"),i("6ceb")),u=Object(c.a)(l,n,[],!1,null,"3add4114",null);u.options.__file="src\\module\\marketing_tools\\mall_pro.vue";e.default=u.exports}}]);