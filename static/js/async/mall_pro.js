(window.webpackJsonp=window.webpackJsonp||[]).push([["mall_pro"],{"426b":function(t,e,n){"use strict";var i=n("914c");n.n(i).a},"855a":function(t,e,n){"use strict";n.r(e);var i=n("81a2"),a=n("f6ce"),r=n("bbb9");function s(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(a,r){try{var s=e[a](r),o=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})}}var o={data:function(){return{isEdit:!1,ischain:"",proList:[],linkImg:null,imgHost:"",token:"",uid:"",index:null,position:"",allTotal:1,page:1,num:10,pageTotal:10,seen:!1,count:0}},methods:{closePedit:function(t){this.isEdit=!1,t&&(this.linkImg=null,this.openProList())},openProList:function(){var t=this;return s(regeneratorRuntime.mark(function e(){var n,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.Activitymaterial({data:{page:t.page,num:t.num}});case 2:for(n=e.sent,t.proList=n.list,t.count=n.count,t.allTotal=n.total,a=t.proList,s=0;s<a.length;s++)a[s].createTime=r.a.format(new Date(1e3*Number(a[s].createTime)),"yyyy.MM.dd/hh:mm");case 8:case"end":return e.stop()}},e,t)}))()},openImg:function(t){console.log(t,"info"),this.linkImg=this.imgHost+t,this.seen=!0},closeImg:function(){this.linkImg="",this.seen=!1},setInter:function(){var t=this;setInterval(function(){t.closeImg()},5e3)},changeStuas:function(t,e){var n=this;return s(regeneratorRuntime.mark(function a(){var r,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=Number(e),r=Boolean(r),s=Number(!r),a.next=5,i.a.Shelves({data:{id:t,status:s,uid:n.uid}});case 5:n.openProList();case 6:case"end":return a.stop()}},a,n)}))()},proedit:function(t){var e=this;return s(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.getDetail({data:{id:t}});case 2:a=n.sent,e.isEdit=!0,e.position=a;case 5:case"end":return n.stop()}},n,e)}))()},dels:function(t){var e=this;this.$store.commit("setWin",{winType:"confirm",title:"操作提示！",content:"确认删除商品？",callback:function(n){"ok"==n&&e.delsMaterial(t)}})},delsMaterial:function(t){var e=this;return s(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.delsMaterial({data:{id:t,uid:e.uid}});case 2:e.openProList(),e.linkImg=null;case 4:case"end":return n.stop()}},n,e)}))()},openEdit:function(){this.isEdit=!0,this.position=null},handleSizeChange:function(t){this.num=t,this.openProList()},pageChange:function(t){this.page=t,this.openProList()}},mounted:function(){window.innerWidth<1440&&this.setInter();var t=a.a.session("userShop");this.uid=t.user.id,this.imgHost=t.uploadUrl,this.ischain=t.currentShop.ischain,this.openProList()},components:{"mall-pedit":function(){return n.e("mall_pedit").then(n.bind(null,"c909"))},comTable:function(){return n.e("table").then(n.bind(null,"4360"))}}},l=(n("426b"),n("d801")),c=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.isEdit?t._e():n("div",{staticClass:"mall-box",attrs:{id:"pro"}},["1"!=t.ischain&&"2"!=t.ischain?n("div",{staticClass:"addFun"},[n("a",{staticClass:"firstBtn fr",staticStyle:{position:"absolute",top:"12px",right:"60px","line-height":"40px",display:"block","background-color":"#f8931f",color:"#fff",width:"150px"},attrs:{href:"javascript:void(0);"},on:{click:t.openEdit}},[t._v("添加推广素材")])]):t._e(),t._v(" "),n("div",{staticClass:"list_box",staticStyle:{width:"100%"}},[n("div",{staticClass:"list_title"},[n("div",{staticClass:"list_title_l fl"},[n("span",[t._v("素材列表")]),t._v(" "),n("span"),t._v(" "),n("span",[t._v("共\n\t\t\t\t\t\t\t"),n("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.count))]),t._v("条记录")])]),t._v(" "),n("div",{staticClass:"list_title_r fr"})]),t._v(" "),n("el-table",{attrs:{data:t.proList,border:"",stripe:!0,"header-cell-style":{"background-color":"#f5f7fa"},"header-row-style":{height:"40px"},"row-style":{height:"70px"}}},[n("el-table-column",{attrs:{fixed:"",prop:"id",label:"序号",width:"120",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"素材",prop:"name",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{prop:"createTime",label:"素材创建时间",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{staticStyle:{color:"rgb(40, 168, 224)"},attrs:{size:"medium",type:"text"},on:{click:function(n){t.changeStuas(e.row.id,e.row.status)}}},[t._v(t._s("1"==e.row.status?"启用":"禁用"))]),t._v(" "),n("span",{staticStyle:{padding:"0 5px",color:"#D2D2D2"}},[t._v("|")]),t._v(" "),n("el-button",{staticStyle:{color:"#ff8d00"},attrs:{size:"medium",type:"text"},on:{click:function(n){t.proedit(e.row.id)}}},[t._v("编辑")]),t._v(" "),n("span",{staticStyle:{padding:"0 5px",color:"#D2D2D2"}},[t._v("|")]),t._v(" "),n("el-button",{staticStyle:{color:"#fd3f1f"},attrs:{size:"medium",type:"text"},on:{click:function(n){t.dels(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),n("div",{staticClass:"pageWrap"},[n("el-pagination",{attrs:{background:"","current-page":t.page,"page-size":t.num,layout:"sizes, prev, pager, next","page-count":t.allTotal,"page-sizes":[10,20,30]},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1)]),t._v(" "),t.isEdit?n("mall-pedit",{attrs:{position:t.position},on:{closePedit:t.closePedit}}):t._e()],1)},[],!1,null,"588197f0",null);e.default=c.exports},"914c":function(t,e,n){}}]);