(window.webpackJsonp=window.webpackJsonp||[]).push([["invent_detail"],{"11b0":function(t,e,s){"use strict";s.r(e);var i=s("81a2"),a=s("f6ce"),o=s("bbb9");function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function i(a,o){try{var n=e[a](o),r=n.value}catch(t){return void s(t)}if(!n.done)return Promise.resolve(r).then(function(t){i("next",t)},function(t){i("throw",t)});t(r)}("next")})}}var r={data:function(){return{shopGoods:"",shopList:"",shopId:"",allList:"",newbatchDetail:"",wareAll:"",awayAll:"",shelvesGoods:"",wareNum:"",total:"",times:"",pageTotal:0,page:1,num:10,wareshow:!1,storageshow:!1,putawayshow:!1,wareType:0,winTitle:"",chooseShelf:"",shelfIndex:null,tebData:["批次列表","操作记录"],goodsCate:[],soldShow:!1,shelveNum:0,loseShow:!1,loseItem:"",titleList:[{titleName:"操作",titleStyle:{width:"200px"}},{titleName:"序号",titleStyle:{width:"50px"}},{titleName:"批次编码",dataName:"batchCode"},{titleName:"生产日期"},{titleName:"供应商",dataName:"supplier"},{titleName:1==a.a.session("goodsDetail").type?"重量":"数量"},{titleName:"进价",dataName:"distributionPrice"},{titleName:"所属仓库"}]}},methods:{init:function(){var t=this;return n(regeneratorRuntime.mark(function e(){var s,a,o,n,r,h,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.getDetails({data:{gid:t.shopList.id}});case 2:for(s=e.sent,console.log(s),t.shopGoods=s,t.shelvesGoods=s.shelves,t.shelveNum=s.shelveNum,t.goodsCate=[],a=!0,o=!1,n=void 0,e.prev=11,r=t.shopGoods.cate[Symbol.iterator]();!(a=(h=r.next()).done);a=!0)l=h.value,t.goodsCate.push(l.name);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),o=!0,n=e.t0;case 19:e.prev=19,e.prev=20,!a&&r.return&&r.return();case 22:if(e.prev=22,!o){e.next=25;break}throw n;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return t.goodsCate=t.goodsCate.join(","),console.log(t.shopList),t.wareGoods=t.shopGoods.shelves,t.shopGoods.lossNum=t.shopGoods.lossNum,e.next=33,i.a.getGoodsBatch({data:{gid:t.shopList.id}});case 33:c=e.sent,t.allList=c.list,console.log(t.shopList),console.log(c),t.resetGoods();case 38:case"end":return e.stop()}},e,t,[[11,15,19,27],[20,,22,26]])}))()},resetGoods:function(){this.pageTotal=Math.ceil(this.allList.length/this.num),this.newbatchDetail=this.allList.slice(10*(this.page-1),10*(this.page-1)+10)},wareModify:function(){this.wareshow=!0,this.wareType=0,this.winTitle="仓库选择"},addDetailhouse:function(t,e){console.log(t),this.$route.query.gid=this.shopList.gid,this.$route.query.batchId=t.batchId,this.$route.query.isStatus=e,a.a.session("goodsneed",t),this.$router.push({path:"putStroage",query:this.$route.query})},revamp:function(t){this.addDetailhouse(t,2)},batchLose:function(t){this.loseShow=!0,this.loseItem=t,this.$store.commit("setPageTools",[])},shelfModify:function(t,e){this.wareType=1,this.wareshow=!0,this.winTitle="货架选择",this.shelfIndex=t,this.chooseShelf=e},delNum:function(t,e){var s,a=this;this.$store.commit("setWin",{title:"提示信息",winType:"confirm",content:"确定删除",callback:(s=n(regeneratorRuntime.mark(function s(o){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(console.log(o),"ok"!=o){s.next=6;break}return s.next=4,i.a.invent_deleteShelves({data:{goodsId:a.shopList.gid,areaId:t.areaId}});case 4:s.sent?(a.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"货架删除成功"}),a.wareGoods.splice(e,1)):a.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"操作失败"});case 6:case"end":return s.stop()}},s,a)})),function(t){return s.apply(this,arguments)})})},addCount:function(t){return t?(/^0+/.test(t+="")&&(t=t.replace(/^0+/,"")),/\./.test(t)||(t+=".000"),/^\./.test(t)&&(t="0"+t),t=(t+="000").match(/([+-]?)\d+\.\d{3}/)[0]):0},changePage:function(t){this.page=t.page,this.newbatchDetail=this.allList.slice(10*(this.page-1),10*(this.page-1)+10)},wareEvent:function(t){this.wareshow=!1,"ok"==t&&this.wareClose()},wareClose:function(){var t=this;return n(regeneratorRuntime.mark(function e(){var s,a,o,n,r,h,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((s=t.$refs.warehouse).chooseWare){e.next=5;break}return t.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"请选择区域"}),t.wareshow=!0,e.abrupt("return",!1);case 5:a=!0,o=!1,n=void 0,e.prev=8,r=t.shelvesGoods[Symbol.iterator]();case 10:if(a=(h=r.next()).done){e.next=19;break}if(l=h.value,s.chooseWare.id!=l.areaId){e.next=16;break}return t.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"该商品已经和该区域关联"}),t.wareshow=!0,e.abrupt("return",!1);case 16:a=!0,e.next=10;break;case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(8),o=!0,n=e.t0;case 25:e.prev=25,e.prev=26,!a&&r.return&&r.return();case 28:if(e.prev=28,!o){e.next=31;break}throw n;case 31:return e.finish(28);case 32:return e.finish(25);case 33:return e.next=35,i.a.invent_editShelves({data:{goodsId:t.shopList.gid,oldAreaId:t.chooseShelf.areaId,areaId:s.chooseWare.id}});case 35:t.chooseShelf.shelfName=s.searchList[s.homeSel].name,t.chooseShelf.areaName=s.chooseWare.name,t.chooseShelf.areaId=s.chooseWare.id;case 38:case"end":return e.stop()}},e,t,[[8,21,25,33],[26,,28,32]])}))()},putawayEvent:function(t){this.putawayshow=!1,"ok"==t&&this.putawayClose()},getString:function(t){return"string"==typeof t?t:t.join(",")},putawayClose:function(){var t=this;return n(regeneratorRuntime.mark(function e(){var s,a,o,n,r,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.$refs.putaway,a=[],""!=s.willAway){e.next=6;break}return t.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"请选择货架"}),t.putawayshow=!0,e.abrupt("return",!1);case 6:if(0!=s.indexArr.length){e.next=8;break}return e.abrupt("return",!1);case 8:for(o={gid:t.shopList.gid,shelfId:s.willAway.shelfId,areaId:s.willAway.areaId},n=0;n<s.indexArr.length;n++)r=new Object,h=s.indexArr[n],r.wid=s.searList[h].wid,r.areaId=s.searList[h].areaId,r.batchId=s.searList[h].batchId,r.num=s.awayNum[h],a.push(r);return o.batchList=JSON.stringify(a),s.willAway.id=s.willAway.areaId,e.next=14,i.a.inventoryPutAway({data:o});case 14:e.sent&&(t.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"上架成功"}),s.checkPush&&t.wareGoods.push(s.willAway),t.init());case 16:case"end":return e.stop()}},e,t)}))()},getTime:function(t){return o.a.format(1e3*parseInt(t),"yyyy年MM月dd日")},handBtn:function(){var t=this;this.$store.commit("setPageTools",[{name:"返回",className:["back"],fn:function(){a.a.session("tabactive",0),window.history.go(-1)}},{name:"下架",className:["wearhouse create"],fn:function(){t.soldShow=!0,t.$store.commit("setPageTools",[])}},{name:"上架",className:["wearhouse handle"],fn:function(){t.putawayshow=!0}}])},soldBack:function(t){t?(console.log(t),this.shelveNum=t.shelfAmount,this.init()):(this.soldShow=!1,this.handBtn())},loseBack:function(t){t?this.init():(this.loseShow=!1,this.handBtn())}},mounted:function(){this.shopList=a.a.session("goodsDetail"),this.shopId=a.a.session("itemId"),this.handBtn(),this.init()},components:{pageTurn:function(){return s.e("page_element").then(s.bind(null,"5921"))},warehouseWin:function(){return s.e("warehouse_win").then(s.bind(null,"0c7d"))},putawayWin:function(){return s.e("putaway_win").then(s.bind(null,"7cdb"))},inventSoldout:function(){return s.e("invent_soldout").then(s.bind(null,"a543"))},loseManage:function(){return s.e("lose_manage").then(s.bind(null,"f8050"))},comTable:function(){return s.e("table").then(s.bind(null,"4360"))}}},h=(s("f834"),s("d801")),l=Object(h.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"invendetail"},[i("section",{staticStyle:{"vertical-align":"top"}},[i("section",{staticClass:"titleTop",staticStyle:{width:"100%",height:"40px",overflow:"hidden"}},[i("div",{staticStyle:{width:"98%",height:"40px",margin:"10px","line-height":"40px",position:"relative"}},[i("i",{staticStyle:{width:"2px",height:"28px",position:"absolute",top:"6px",left:"0","background-color":"#28A8E0"}}),t._v(" "),i("h3",{staticStyle:{width:"70px",height:"40px","margin-left":"10px",float:"left","font-size":"16px","font-family":"'微软雅黑'"}},[t._v("库存详情")]),t._v(" "),t._l(70,function(t){return i("div",{key:t,staticClass:"dian"})})],2)]),t._v(" "),i("section",{staticStyle:{height:"auto"}},[i("div",{staticClass:"other-clist",staticStyle:{clear:"both"}},[i("div",{staticClass:"cList-one",staticStyle:{width:"25%",height:"auto"}},[i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("商品名:")]),t._v(" "),t.shopGoods.gName?i("div",{staticClass:"shopAfter",attrs:{title:t.shopGoods.gName}},[t._v(t._s(t.shopGoods.gName))]):i("div",{staticClass:"shopAfter"},[t._v("--")])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("条形码:")]),t._v(" "),t.shopGoods.barCode?i("div",{staticClass:"shopAfter",attrs:{title:t.shopGoods.barCode}},[t._v(t._s(t.shopGoods.barCode))]):i("div",{staticClass:"shopAfter"},[t._v("--")])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("品牌:")]),t._v(" "),t.shopGoods.brandName?i("div",{staticClass:"shopAfter"},[t._v(t._s(t.shopGoods.brandName))]):i("div",{staticClass:"shopAfter"},[t._v("--")])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("序号:")]),t._v(" "),t.shopGoods.barCode?i("div",{staticClass:"shopAfter"},[t._v(t._s(t.shopList.index+1))]):i("div",{staticClass:"shopAfter"},[t._v("--")])])]),t._v(" "),i("div",{staticClass:"cList-two",staticStyle:{width:"20%",height:"auto"}},[i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("分类:")]),t._v(" "),i("div",{staticClass:"shopAfter"},[t._v(t._s(t.goodsCate||"--"))])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("单位:")]),t._v(" "),t.shopGoods.unit?i("div",{staticClass:"shopAfter"},[t._v(t._s(t.shopGoods.unit))]):i("div",{staticClass:"shopAfter"},[t._v("--")])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("售价:")]),t._v(" "),t.shopGoods.price?i("div",{staticClass:"shopAfter"},[t._v(t._s(t.shopGoods.price))]):i("div",{staticClass:"shopAfter"},[t._v("--")])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("批次数:")]),t._v(" "),i("div",{staticClass:"shopAfter"},[t._v(t._s(t.shopGoods.batchNum||0))])])]),t._v(" "),i("div",{staticClass:"cList-three",staticStyle:{width:"33%",height:"auto"}},[i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("规格:")]),t._v(" "),t.shopGoods.specifications?i("div",{staticClass:"shopAfter"},[t._v(t._s(t.shopGoods.specifications))]):i("div",{staticClass:"shopAfter"},[t._v("--")])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("保质期:")]),t._v(" "),t.shopGoods.validity?i("div",{staticClass:"shopAfter"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.shopGoods.validity)+"\n\t\t\t\t\t\t\t"),1==t.shopGoods.validityType?i("span",[t._v("日")]):t._e(),t._v(" "),0==t.shopGoods.validityType?i("span",[t._v("月")]):t._e(),t._v(" "),2==t.shopGoods.validityType?i("span",[t._v("年")]):t._e()]):i("div",{staticClass:"shopAfter"},[t._v("--")])]),t._v(" "),i("div",{staticClass:"cList-five",staticStyle:{height:"auto"}},[i("div",{staticClass:"clearfix ",staticStyle:{width:"100%"}},[i("h3",{staticClass:"showBefore"},[t._v("货架位置:")]),t._v(" "),t.shopGoods&&t.shopGoods.shelves.length>0?i("section",{staticClass:"clearfix",staticStyle:{float:"left",width:"70%"}},[t._l(t.shelvesGoods,function(e,a){return[i("div",{key:a,staticStyle:{position:"relative",width:"100%",overflow:"hidden","padding-right":"20px"}},[i("span",{staticClass:"shopAfter",staticStyle:{display:"inline-block","min-width":"130px"}},[t._v(t._s(e.shelfName||"暂无")+"/"+t._s(e.areaName||"暂无"))]),t._v(" "),t.soldShow||t.loseShow?t._e():i("span",{staticClass:"modify",on:{click:function(s){t.shelfModify(a,e)}}},[t._v("修改")]),t._v(" "),1==t.shelvesGoods.length||t.soldShow||t.loseShow?t._e():i("img",{attrs:{src:s("8e1a")},on:{click:function(s){t.delNum(e,a)}}})])]})],2):i("div",{staticClass:"shopAfter"},[t._v("--")])])])]),t._v(" "),i("div",{staticClass:"cList-four",staticStyle:{width:"20%",height:"auto"}},[i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("仓存数量/重量:")]),t._v(" "),i("div",{staticClass:"shopAfter"},[t._v(t._s(t.addCount(t.shopGoods.surplus))+t._s(t.shopGoods.unit))])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("上架数量:")]),t._v(" "),i("div",{staticClass:"shopAfter"},[t._v(t._s(t.addCount(t.shelveNum))+t._s(t.shopGoods.unit))])]),t._v(" "),i("div",{staticStyle:{width:"100%",height:"40px"}},[i("h3",{staticClass:"showBefore"},[t._v("总量:")]),t._v(" "),i("div",{staticClass:"shopAfter"},[t._v(t._s(t.addCount(t.shopGoods.total))+t._s(t.shopGoods.unit))])])])])])]),t._v(" "),t.soldShow||t.loseShow?t._e():i("section",{staticStyle:{display:"block","margin-top":"20px"}},[i("section",{staticClass:"listBox",staticStyle:{width:"100%",height:"auto","margin-top":"20px"}},[i("com-table",{attrs:{listName:"批次列表",titleData:t.titleList,allTotal:t.allList.length,introData:t.newbatchDetail},scopedSlots:t._u([{key:"con-0",fn:function(e){return i("div",{staticClass:"infoDetail"},[i("a",{staticStyle:{color:"#5ebee8"},attrs:{href:"javascript:void(0);"},on:{click:function(s){t.addDetailhouse(e.data,1)}}},[t._v("入库")]),t._v("|\n\t\t\t\t\t"),i("a",{staticStyle:{color:"red"},attrs:{href:"javascript:void(0);"},on:{click:function(s){t.batchLose(e.data)}}},[t._v("耗损")])])}},{key:"con-1",fn:function(e){return i("span",{},[t._v(t._s(e.index+1+10*(t.page-1)))])}},{key:"con-3",fn:function(e){return i("span",{},[t._v(t._s(t.getTime(e.data.productionTime)))])}},{key:"con-5",fn:function(e){return i("span",{},[t._v(t._s(e.data.surplus)+t._s(t.shopGoods.unit))])}},{key:"con-7",fn:function(e){return i("span",{},[t._v(t._s(e.data.wName||"暂无")+"/"+t._s(e.data.aName||"暂无"))])}}])})],1),t._v(" "),i("div",{staticStyle:{"margin-top":"10px","padding-bottom":"30px"}},[i("page-turn",{ref:"pageTurn",attrs:{isNoJump:!1,isNoPaging:!0,total:t.pageTotal,page:t.page},on:{pageNum:t.changePage}})],1)]),t._v(" "),t.wareshow?i("warehouse-win",{ref:"warehouse",attrs:{title:t.winTitle,wareType:t.wareType},on:{wareEvent:t.wareEvent}}):t._e(),t._v(" "),t.putawayshow?i("putaway-win",{ref:"putaway",attrs:{goods:t.shopGoods,list:t.allList,wareGoods:t.wareGoods},on:{putawayEvent:t.putawayEvent}}):t._e(),t._v(" "),t.soldShow?i("invent-soldout",{attrs:{allNum:t.shelveNum,detail:t.shopGoods,gid:t.shopList.id},on:{soldBack:t.soldBack}}):t._e(),t._v(" "),t.loseShow?i("lose-manage",{attrs:{detail:t.loseItem,gid:t.shopList.id},on:{loseBack:t.loseBack}}):t._e()],1)},[],!1,null,"b1df03e8",null);e.default=l.exports},"8e1a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTA0ODZBOUIwQkFFMTFFNzk3RDJCQzVDOEI2MTFBNjgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTA0ODZBOUMwQkFFMTFFNzk3RDJCQzVDOEI2MTFBNjgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1MDQ4NkE5OTBCQUUxMUU3OTdEMkJDNUM4QjYxMUE2OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MDQ4NkE5QTBCQUUxMUU3OTdEMkJDNUM4QjYxMUE2OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pkpzd28AAAC/SURBVHjaYvz//z8DNQELNsGFCxeyAqmJQBwBxIJo0u+BeAUQ58fHx/9G18uEw6JsIM7EYhgDVAwkl0W0C4HAGEpnAV0xHc31GUAKJGaCTSMuF8LEP2KR+4RPLyMsUoA2UxQ7QJ8w4nMh2YCR2smG6i5kQovB/8hhSSqf9i4cNZB6pQ166sfFHxAX/gBiDmDaMgDSDwnolUfSg9PA9UAcCcTnSXDUenwGpgPxVyD2BrmUgEEgl20F4iJkQYAAAwB53EHrkKaJbQAAAABJRU5ErkJggg=="},c776:function(t,e,s){},f834:function(t,e,s){"use strict";var i=s("c776");s.n(i).a}}]);