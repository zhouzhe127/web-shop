(window.webpackJsonp=window.webpackJsonp||[]).push([["employee_manage_win"],{"8e35":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAyRTk3N0U3NjkwOTExRTY4MzI2OEU1NkY3Qjg2QTA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAyRTk3N0U4NjkwOTExRTY4MzI2OEU1NkY3Qjg2QTA3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDJFOTc3RTU2OTA5MTFFNjgzMjY4RTU2RjdCODZBMDciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDJFOTc3RTY2OTA5MTFFNjgzMjY4RTU2RjdCODZBMDciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7A3duJAAAANElEQVR42mL6//8/Ax6MDPCpY2BioBIYNYiOBrEA8X8i1f4fel5jJNI7jKPpaNQgHAAgwAAuLjvvigxAWAAAAABJRU5ErkJggg=="},adf5:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("win",{attrs:{align:"right",width:580,height:"380",ok:e.okStyle,cancel:e.cancelStyle},on:{winEvent:e.clickResult}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.isAdd?"新建员工信息":"修改员工信息"))]),e._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("ul",{staticClass:"employmes",class:{edit:!e.isAdd}},[n("li",[n("h2",{staticClass:"tag",class:{required:e.isAdd}},[e._v("手机号码")]),e._v(" "),n("div",{staticClass:"mes"},[e.isAdd?n("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],attrs:{type:"text",maxlength:"11",placeholder:"请输入手机号码"},domProps:{value:e.mobile},on:{input:[function(t){t.target.composing||(e.mobile=t.target.value)},e.checkMobile]}}):n("span",[e._v(e._s(e.info.mobile))]),e._v(" "),n("b",{directives:[{name:"show",rawName:"v-show",value:3==e.phoneStatus,expression:"phoneStatus==3"}]},[e._v("该账户已经存在!")])])]),e._v(" "),n("li",[n("h2",{staticClass:"tag",class:{required:e.isAdd}},[e._v("真实姓名")]),e._v(" "),n("div",{staticClass:"mes"},[e.isAdd?n("input",{directives:[{name:"model",rawName:"v-model",value:e.info.name,expression:"info.name"}],attrs:{type:"text",maxlength:"14",disabled:1!==e.phoneStatus,placeholder:"请输入姓名"},domProps:{value:e.info.name},on:{input:function(t){t.target.composing||e.$set(e.info,"name",t.target.value)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.info.name,expression:"info.name"}],attrs:{type:"text",maxlength:"14",placeholder:"请输入姓名"},domProps:{value:e.info.name},on:{input:function(t){t.target.composing||e.$set(e.info,"name",t.target.value)}}})])]),e._v(" "),this.isAdd?[n("li",{class:{sdHidden:2==e.phoneStatus}},[n("h2",{staticClass:"tag"},[e._v("设置登录密码")]),e._v(" "),n("div",{staticClass:"mes"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.info.password,expression:"info.password"}],attrs:{type:"password",maxlength:"20",disabled:0==e.phoneStatus||3==e.phoneStatus,placeholder:"请输入登录密码"},domProps:{value:e.info.password},on:{input:function(t){t.target.composing||e.$set(e.info,"password",t.target.value)}}})])]),e._v(" "),n("li",{class:{sdHidden:2==e.phoneStatus}},[n("h2",{staticClass:"tag"},[e._v("确认登录密码")]),e._v(" "),n("div",{staticClass:"mes"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.repeatPwd,expression:"repeatPwd"}],attrs:{type:"password",maxlength:"20",disabled:0==e.phoneStatus||3==e.phoneStatus,placeholder:"请确认登录密码"},domProps:{value:e.repeatPwd},on:{input:function(t){t.target.composing||(e.repeatPwd=t.target.value)}}})])])]:e._e(),e._v(" "),n("li",[n("h2",{staticClass:"tag"},[e._v("职位")]),e._v(" "),n("div",{staticClass:"mes"},[e.jobList[e.index]?[n("span",{staticClass:"jobName",class:0==e.ischain?"":e.jobList[e.index]&&(e.jobList[e.index].id>=1e5||0==e.jobList[e.index].id)?"sdOrange":"sdBlue"},[e._v(e._s(e.jobList[e.index]?e.jobList[e.index].name:""))]),e._v(" "),n("span",{staticClass:"editJob",on:{click:e.showJobFn}})]:n("a",{staticClass:"addJob",class:{disabled:0==e.phoneStatus||3==e.phoneStatus},attrs:{href:"javascript:;"},on:{click:e.showJobFn}},[n("img",{attrs:{src:i("8e35"),alt:""}}),e._v(" "),n("span",[e._v("添加职位")])])],2)]),e._v(" "),!e.isAdd&&e.info.sellerRole?n("li",[n("h2",{staticClass:"tag"},[e._v("卖手职位")]),e._v(" "),n("div",{staticClass:"mes seller"},[n("span",[e._v(e._s(e.info.sellerRole))])])]):e._e(),e._v(" "),n("li",[e.isWarrantCode?n("h2",{staticClass:"tag"},[e._v("授权码")]):e._e(),e._v(" "),e.isWarrantCode?n("div",{staticClass:"mes"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.info.warrantCode,expression:"info.warrantCode"}],staticClass:"input",attrs:{type:"text",maxlength:"4",placeholder:"请输入授权码"},domProps:{value:e.info.warrantCode},on:{input:function(t){t.target.composing||e.$set(e.info,"warrantCode",t.target.value)}}})]):e._e()])],2)])]),e._v(" "),e.showJobs?n("select-job",{attrs:{jobList:e.jobList,title:"选择员工职位",index:e.index,ischain:+e.ischain},on:{winEvent:e.jobWinFn}}):e._e()],1)};n._withStripped=!0;var s=i("81a2");function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function n(s,o){try{var a=t[s](o),r=a.value}catch(e){return void i(e)}if(!a.done)return Promise.resolve(r).then(function(e){n("next",e)},function(e){n("throw",e)});e(r)}("next")})}}var a={data:function(){return{index:-1,indexCopy:-1,info:{},isWarrantCode:!1,cancelStyle:null,okStyle:null,showJobs:!1,phoneStatus:0,repeatPwd:""}},props:{employeeId:"",employeeIndex:"",list:Array,isAdd:null,jobList:Array,ischain:Number},mounted:function(){this.cancelStyle={content:"取消",style:{backgroundColor:"#a0a0a0",color:"#fff "}},this.okStyle={content:"保存",style:{backgroundColor:"orange",color:"#fff"}},this.initEmployeeInfo()},methods:{userCheckExist:function(e){var t=this;return o(regeneratorRuntime.mark(function i(){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.a.userCheckExist({data:{mobile:e}});case 2:(n=i.sent)?(t.info.name=n.name,t.info.id=n.id,n.isShopUser?t.phoneStatus=3:t.phoneStatus=2):t.phoneStatus=1;case 4:case"end":return i.stop()}},i,t)}))()},addShopUser:function(e){var t=this;return o(regeneratorRuntime.mark(function i(){var n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.a.addShopUser({data:{roleId:t.info.roleId,mobile:t.info.mobile,name:t.info.name,password:t.info.password,warrantCode:t.info.warrantCode}});case 2:(n=i.sent)&&void 0!==n.userId?((o=t.info).roleName=t.jobList[t.index].name,o.nodeIds=t.jobList[t.index].name,o.userName=o.name,o.userId=n.userId,t.$emit("throwWinResult",e,o)):t.$store.commit("setWin",{title:"错误提示",winType:"alter",content:"数据返回为空"});case 4:case"end":return i.stop()}},i,t)}))()},editShopUser:function(e){var t=this;return o(regeneratorRuntime.mark(function i(){var n;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n={userId:t.employeeId,roleId:t.info.roleId,userName:t.info.name},t.info.warrantCode&&(n.warrantCode=t.info.warrantCode),i.next=4,s.a.editShopUser({data:n});case 4:i.sent?t.$emit("throwWinResult",e):t.$store.commit("setWin",{title:"错误提示",winType:"alter",content:"数据返回为空"});case 6:case"end":return i.stop()}},i,t)}))()},initEmployeeInfo:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var i,n,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isAdd)e.isAdd&&(e.info={roleId:0,roleName:"",password:"",name:"",title:"",mobile:"",sort:255,isWarrantCode:!1});else{for((i=e.list[e.employeeIndex]).name=i.userName,e.info=i,n=0;n<e.jobList.length;n++)e.jobList[n].id+""==e.info.roleId+""&&(e.index=n);s=e.jobList[e.index],e.isWarrantCode=-1!=s.nodeIds.indexOf("3051")}case 1:case"end":return t.stop()}},t,e)}))()},sdAlert:function(e){this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:e})},clickResult:function(e){var t=/^[\s]*$/;function i(){var e=this.info.name+"";if(t.test(e))return this.sdAlert("真实姓名不能为空"),!1;if(!/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9]|-|——|—)*$/.test(e))return this.sdAlert("姓名只能有中文和英文及数字组成，请输入正确的名称"),!1;if(-1===this.index)return this.sdAlert("请选择职位"),!1;var i=this.info.warrantCode+"";if(this.isWarrantCode){if(!/^[\d]*$/.test(i)||i.split("").length<4)return this.sdAlert("授权码格式错误,必须为四位数字"),!1}else this.info.warrantCode="";return!0}if("ok"==e){if(!this.info)return!0;var n=this.info;if(this.isAdd){var s=n.password+"";if(1!=this.phoneStatus&&2!=this.phoneStatus){if(0==this.phoneStatus){var o=n.mobile+"";return t.test(o)?(this.sdAlert("手机号码不能为空"),!1):(/^1[3|4|5|7|8]\d{9}$/.test(o)||this.sdAlert("填写正确的手机号码"),!1)}return this.sdAlert("该账户已经存在"),!1}if(!i.call(this))return!1;if(1==this.phoneStatus){if(t.test(s))return this.sdAlert("密码不能为空"),!1;if(!/^[a-zA-Z0-9]*$/.test(s))return this.sdAlert("密码只能由数字和字母组成"),!1;if(s.length<6||s.length>20)return this.sdAlert("密码长度6到20位"),!1;if(s!==this.repeatPwd+"")return this.sdAlert("两次密码输入不一致"),!1}this.addShopUser(e)}else{if(!i.call(this))return!1;this.editShopUser(e)}}"cancel"==e&&this.$emit("throwWinResult",e),"close"==e&&this.$emit("throwWinResult",e)},checkMobile:function(){var e=this.info.mobile+"";11!==e.length?(this.info={roleId:0,roleName:"",roleType:"0",password:"",name:"",mobile:e,isWarrantCode:!1,sellerRole:""},this.phoneStatus=0):/^1\d{10}$/.test(e)?this.userCheckExist(e):(this.sdAlert("手机号码格式错误"),this.phoneStatus=0)},showJobFn:function(){1!=this.phoneStatus&&2!=this.phoneStatus&&0!=this.isAdd||(this.showJobs=!0)},jobWinFn:function(e,t){"ok"===e&&(this.index=t,this.info&&this.jobList&&-1!=t&&(this.info.roleId=this.jobList[t].id,this.isWarrantCode=-1!=this.jobList[t].nodeIds.indexOf("3051"))),this.showJobs=!1}},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))},SelectJob:function(){return i.e("select_job").then(i.bind(null,"96e4"))},radioBtn:function(){return i.e("radio_btn").then(i.bind(null,"4dfe"))}},computed:{mobile:{get:function(){return this.info.mobile},set:function(e){this.info.mobile=e.replace(/[^\d]/g,"")}}}},r=(i("b165"),i("6ceb")),l=Object(r.a)(a,n,[],!1,null,"27ffcbd0",null);l.options.__file="src\\module\\shop_config\\employee_manage_win.vue";t.default=l.exports},b165:function(e,t,i){"use strict";var n=i("db1f");i.n(n).a},db1f:function(e,t,i){}}]);