(window.webpackJsonp=window.webpackJsonp||[]).push([["conclusion_list"],{"0a55":function(t,e,a){"use strict";var i=a("e94d");a.n(i).a},b082:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"waredeliver"}},[a("div",{staticClass:"serBox"},[a("h1",[t._v("提交时间：")]),t._v(" "),a("div",{staticClass:"timer"},[a("calendar",{attrs:{only:!1,time:t.startTime,format:"yyyy年MM月dd日"},on:{emit:t.startTimeChange}})],1),t._v(" "),a("span",[t._v("-")]),t._v(" "),a("div",{staticClass:"timer",staticStyle:{"margin-right":"10px"}},[a("calendar",{attrs:{only:!1,time:t.endTime,format:"yyyy年MM月dd日"},on:{emit:t.endTimeChange}})],1),t._v(" "),a("div",{staticClass:"rightEvt"},[a("h1",[t._v("审批时间：")]),t._v(" "),a("div",{staticClass:"timer"},[a("calendar",{ref:"auditstart",attrs:{only:!1,time:t.auditStartTime,format:"yyyy年MM月dd日"},on:{emit:t.auditStartTimeChange}})],1),t._v(" "),a("span",[t._v("-")]),t._v(" "),a("div",{staticClass:"timer",staticStyle:{"margin-right":"10px"}},[a("calendar",{ref:"auditend",attrs:{only:!1,time:t.auditEndTime,format:"yyyy年MM月dd日"},on:{emit:t.auditEndTimeChange}})],1)])]),t._v(" "),a("div",{staticClass:"inpBox"},[a("selectBtn",{ref:"select1",staticStyle:{"margin-right":"10px"},attrs:{sorts:t.auditStatus,name:"审核状态"},on:{selOn:t.changeBtn}}),t._v(" "),a("selectBtn",{ref:"select2",attrs:{sorts:t.dispatchStatus,name:"调度状态"},on:{selOn:t.dispatchBtn}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.upUser,expression:"upUser"}],staticClass:"search-input",attrs:{type:"text",maxlength:"10",placeholder:"请输入申请人"},domProps:{value:t.upUser},on:{input:function(e){e.target.composing||(t.upUser=e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.checkUser,expression:"checkUser"}],staticClass:"search-input",attrs:{type:"text",maxlength:"10",placeholder:"请输入审核人"},domProps:{value:t.checkUser},on:{input:function(e){e.target.composing||(t.checkUser=e.target.value)}}})],1),t._v(" "),a("div",{staticClass:"sleBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.bathcode,expression:"bathcode"}],staticClass:"search-input",attrs:{type:"text",maxlength:"20",placeholder:"请输入申请单号"},domProps:{value:t.bathcode},on:{input:function(e){e.target.composing||(t.bathcode=e.target.value)}}}),t._v(" "),a("div",{staticClass:"btnChange"},[a("a",{staticClass:"blue",attrs:{href:"javascript:void(0);"},on:{click:t.searchList}},[t._v("筛选")]),t._v(" "),a("a",{staticClass:"gray",attrs:{href:"javascript:void(0);"},on:{click:t.searchReset}},[t._v("重置")])])]),t._v(" "),a("com-table",{attrs:{listName:"调度审核列表",titleData:t.titleList,allTotal:t.count,introData:t.introData,listWidth:1200},scopedSlots:t._u([{key:"con-0",fn:function(e){return a("div",{},[1==e.data.auditStatus&&1==e.data.dispatchStatus?a("span",{staticClass:"orBtn",on:{click:function(a){t.detailBtn(e.data)}}},[t._v("审核")]):t._e(),t._v(" "),1==e.data.auditStatus&&2==e.data.dispatchStatus?a("span",{staticClass:"orBtn",on:{click:function(a){t.detailBtn(e.data)}}},[t._v("继续审核")]):t._e(),t._v(" "),1!=e.data.auditStatus||e.data.dispatchStatus>2?a("span",{staticClass:"detailsBtn",on:{click:function(a){t.detailBtn(e.data)}}},[t._v("查看详情")]):t._e()])}},{key:"con-1",fn:function(e){return a("span",{},[t._v(t._s(e.index+1+10*(t.page-1)))])}},{key:"con-2",fn:function(e){return a("span",{},[t._v(t._s(t.auditStatus[e.data.auditStatus]))])}},{key:"con-3",fn:function(e){return a("span",{},[t._v(t._s(t.dispatchStatus[e.data.dispatchStatus]))])}},{key:"con-5",fn:function(e){return a("span",{},[t._v(t._s(t.shopName(e.data.shopId)))])}},{key:"con-7",fn:function(e){return a("span",{},[t._v(t._s(t.getTime(e.data.createTime)))])}},{key:"con-6",fn:function(e){return a("span",{},[t._v(t._s(t.getUserName(e.data.createUid)))])}},{key:"con-8",fn:function(e){return a("span",{},[t._v(t._s(t.getUserName(e.data.auditUid)))])}},{key:"con-9",fn:function(e){return a("span",{},[t._v(t._s(t.getTime(e.data.auditTime)))])}}])}),t._v(" "),a("div",{staticClass:"page-box"},[a("page-turn",{attrs:{isNoPaging:!0,total:t.pageTotal,page:t.page},on:{pageNum:t.pageChange}})],1)],1)};i._withStripped=!0;var n=a("81a2"),r=a("bbb9"),s=a("f6ce"),u=a("05dd");function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,r){try{var s=e[n](r),u=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(u).then(function(t){i("next",t)},function(t){i("throw",t)});t(u)}("next")})}}var c=s.a.session("userShop").shopList,d={data:function(){return{startTime:r.a.getTime({time:new Date}).start-u.a.timeConst.ONEMONTH,endTime:r.a.getTime({time:new Date}).end,auditStartTime:0,auditEndTime:0,upUser:"",checkUser:"",bathcode:"",page:1,pageTotal:0,titleList:[{titleName:"操作",titleStyle:{width:"150px"}},{titleName:"序号"},{titleName:"审核状态"},{titleName:"调度状态"},{titleName:"申请单号",dataName:"code"},{titleName:"申请店铺/品牌"},{titleName:"申请人"},{titleName:"申请时间"},{titleName:"审核人"},{titleName:"审批时间",dataName:"auditTime"}],auditStatus:["全部","审核中","已取消","审核未通过","审核通过"],user:"",auditType:0,dispatchStatus:["全部","未调度","配货中","未出货","全部取消","待入货","已完成","已完成（异常）","配货完成"],dispatchType:0,wareIds:"",introData:"",count:""}},methods:{init:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var a,i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return parseInt(t.startTime)>parseInt(t.endTime)&&(a=[t.endTime,t.startTime],t.startTime=a[0],t.endTime=a[1]),parseInt(t.auditStartTime)>parseInt(t.auditEndTime)&&(i=[t.auditEndTime,t.auditStartTime],t.auditStartTime=i[0],t.auditEndTime=i[1]),e.next=4,n.a.invoic_getAuditList({data:{applyStartTime:parseInt(t.startTime/1e3),applyEndTime:parseInt(t.endTime/1e3),auditTimeStart:parseInt(t.auditStartTime/1e3),auditTimeEnd:parseInt(t.auditEndTime/1e3),auditStatus:t.auditType,dispatchStatus:t.dispatchType,uName:t.upUser,auditor:t.checkUser,code:t.bathcode,wids:t.wareIds,page:t.page,type:1,num:10,isAuditor:1}});case 4:r=e.sent,t.introData=r.list,t.pageTotal=r.total,t.count=r.rows;case 8:case"end":return e.stop()}},e,t)}))()},getWare:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var a,i,r,u,o,c,d,m,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.warehouseList();case 2:return a=e.sent,e.next=5,n.a.getUserList();case 5:for(i=e.sent,r=[],u=!0,o=!1,c=void 0,e.prev=10,d=a[Symbol.iterator]();!(u=(m=d.next()).done);u=!0)l=m.value,r.push(l.id);e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),o=!0,c=e.t0;case 18:e.prev=18,e.prev=19,!u&&d.return&&d.return();case 21:if(e.prev=21,!o){e.next=24;break}throw c;case 24:return e.finish(21);case 25:return e.finish(18);case 26:t.wareIds=r.join(","),t.auditStartTime=0,t.auditEndTime=0,t.user=i,s.a.session("user",t.user),t.init();case 32:case"end":return e.stop()}},e,t,[[10,14,18,26],[19,,21,25]])}))()},getUserName:function(t){var e=!0,a=!1,i=void 0;try{for(var n,r=this.user[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var s=n.value;if(Number(s.userId)===Number(t))return s.userName}}catch(t){a=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw i}}return"--"},getUserId:function(t){var e=[],a=!0,i=!1,n=void 0;try{for(var r,s=this.user[Symbol.iterator]();!(a=(r=s.next()).done);a=!0){var u=r.value;u.userName===t&&e.push(u.userId)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}return e.length>0?e.join(","):""},getTime:function(t){return t&&0!=Number(t)?r.a.format(1e3*parseInt(t),"yyyy-MM-dd"):"--"},startTimeChange:function(t){this.startTime=r.a.getTime({time:t}).start},endTimeChange:function(t){this.endTime=r.a.getTime({time:t}).end},auditStartTimeChange:function(t){this.auditStartTime=r.a.getTime({time:t}).start},auditEndTimeChange:function(t){this.auditEndTime=r.a.getTime({time:t}).end},changeBtn:function(t){this.auditType=t},dispatchBtn:function(t){this.dispatchType=t},searchList:function(){this.upUser&&""==this.getUserId(this.upUser)||this.checkUser&&""==this.getUserId(this.checkUser)?(this.introData="",this.pageTotal=1,this.count=0):this.init()},searchReset:function(){this.auditType=0,this.dispatchType=0,this.upUser="",this.checkUser="",this.bathcode="",this.startTime=r.a.getTime({time:new Date}).start,this.endTime=r.a.getTime({time:new Date}).end,this.auditStartTime=0,this.auditEndTime=0,this.$refs.auditstart.timestr="--",this.$refs.auditend.timestr="--",this.$refs.select1.sortName="审核状态",this.$refs.select1.selected=0,this.$refs.select2.sortName="调度状态",this.$refs.select2.selected=0,this.init()},detailBtn:function(t){this.$route.query.id=t.id,this.$router.push({path:"/admin/conclusionList/shipmentVerify",query:this.$route.query})},pageChange:function(t){this.page=t.page,this.init()},shopName:function(t){var e=!0,a=!1,i=void 0;try{for(var n,r=c.brand[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var s=n.value;if(s.id==t)return s.name;if(s.direct){var u=!0,o=!1,d=void 0;try{for(var m,l=s.direct[Symbol.iterator]();!(u=(m=l.next()).done);u=!0){var h=m.value;if(h.id==t)return s.name+"-"+h.name}}catch(t){o=!0,d=t}finally{try{!u&&l.return&&l.return()}finally{if(o)throw d}}}if(s.franchise){var p=!0,f=!1,v=void 0;try{for(var y,g=s.franchise[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var T=y.value;if(T.id==t)return s.name+"-"+T.name}}catch(t){f=!0,v=t}finally{try{!p&&g.return&&g.return()}finally{if(f)throw v}}}}}catch(t){a=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw i}}var _=!0,S=!1,b=void 0;try{for(var w,x=c.noBrand[Symbol.iterator]();!(_=(w=x.next()).done);_=!0){var N=w.value;if(N.id==t)return N.name}}catch(t){S=!0,b=t}finally{try{!_&&x.return&&x.return()}finally{if(S)throw b}}},addEduce:function(){var t=this;this.$store.commit("setPageTools",[{name:"批量审核",className:"primary",fn:function(){t.$router.push({path:"/admin/conclusionList/multipleExamine"})},type:4},{name:"批量调度",className:"primary",fn:function(){t.$router.push({path:"/admin/conclusionList/selectDispatch"})},type:4}])}},mounted:function(){"/admin/conclusionList"==this.$route.path&&this.addEduce()},activated:function(){this.getWare()},updated:function(){this.$refs.auditstart&&0===this.auditStartTime&&(this.$refs.auditstart.timestr="--"),this.$refs.auditend&&0===this.auditEndTime&&(this.$refs.auditend.timestr="--")},watch:{bathcode:function(t){/[\u4e00-\u9fa5]/g.test(t)&&(this.bathcode="")},$route:function(){"/admin/conclusionList"==this.$route.path&&this.addEduce()}},components:{comTable:function(){return a.e("table").then(a.bind(null,"4360"))},calendar:function(){return a.e("calendar_type").then(a.bind(null,"f2dd"))},pageTurn:function(){return a.e("page_element").then(a.bind(null,"5921"))},selectBtn:function(){return a.e("select_btn").then(a.bind(null,"3d41"))}}},m=(a("0a55"),a("6ceb")),l=Object(m.a)(d,i,[],!1,null,"c5005ee2",null);l.options.__file="src\\module\\invoicing_system\\conclusion\\conclusion_list.vue";e.default=l.exports},e94d:function(t,e,a){}}]);