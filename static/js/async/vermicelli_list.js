(window.webpackJsonp=window.webpackJsonp||[]).push([["vermicelli_list"],{de91:function(e,t,n){},e0e5:function(e,t,n){"use strict";var r=n("de91");n.n(r).a},febe:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"vermiceli_list"}},[e.showVermicelliList?[n("header",{staticClass:"vermiceli_list_header"},[n("span",[e._v("用户分组")]),e._v(" "),n("select-btn",{attrs:{sorts:e.sorts,name:e.defaultName,width:184},on:{selOn:e.selectGroup}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.recommendNames,expression:"recommendNames",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"推荐人昵称"},domProps:{value:e.recommendNames},on:{input:function(t){t.target.composing||(e.recommendNames=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.userName,expression:"userName",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"用户昵称"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("button",{staticClass:"select",on:{click:function(t){e.selectUser("header")}}},[e._v("筛选")]),e._v(" "),n("button",{staticClass:"resert",on:{click:e.resertUser}},[e._v("重置")])],1),e._v(" "),n("com-table",{key:e.index,attrs:{listHeight:80,fixed:2,listName:"粉丝列表",showTitle:1,introData:e.vermiceList,listWidth:1437,titleData:e.titleList,allTotal:e.count,widthType:!0},scopedSlots:e._u([{key:"con-0",fn:function(t){return n("div",{staticClass:"cli_radios"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectInfo,expression:"selectInfo"}],ref:"input",attrs:{id:e.index,type:"checkbox"},domProps:{value:t.data,checked:Array.isArray(e.selectInfo)?e._i(e.selectInfo,t.data)>-1:e.selectInfo},on:{change:[function(n){var r=e.selectInfo,i=n.target,s=!!i.checked;if(Array.isArray(r)){var a=t.data,o=e._i(r,a);i.checked?o<0&&(e.selectInfo=r.concat([a])):o>-1&&(e.selectInfo=r.slice(0,o).concat(r.slice(o+1)))}else e.selectInfo=s},function(n){e.changeSelect(n,t.index)}]}})])}},{key:"con-1",fn:function(t){return n("div",{staticClass:"detail_info"},[n("span",{on:{click:function(n){e.showDetailInfo(t.data,e.index)}}},[e._v("详细信息")]),e._v(" "),n("span",{on:{click:function(){e.showVermicelliList=!1,e.interData=t.data}}},[e._v("积分记录")]),e._v(" "),n("span",{on:{click:function(n){e.adjustRecord(t.data)}}},[e._v("调整积分")])])}},{key:"con-2",fn:function(t){return n("div",{},[""!=t.data.recommendedImageUrl&&""!=t.data.recommendedName?n("div",[n("div",[""!=t.data.recommendedImageUrl?n("img",{attrs:{src:t.data.recommendedImageUrl,alt:t.data.recommendedName}}):e._e()]),e._v(" "),n("div",[n("span",[e._v("\n\t\t\t\t\t\t\t"+e._s(t.data.recommendedName)+"\n\t\t\t\t\t\t")])])]):n("div",[e._v("--")])])}},{key:"con-3",fn:function(t){return n("div",{staticClass:"detail_img"},[n("div",[""!=t.data.imageUrl?n("img",{attrs:{src:t.data.imageUrl,alt:t.data.name}}):e._e()]),e._v(" "),n("div",[n("span",[e._v("\n\t\t\t\t\t\t"+e._s(t.data.name)+"\n\t\t\t\t\t")])])])}},{key:"con-4",fn:function(t){return n("div",{},[e._v(e._s(e._f("filterSex")(t.data.sex)))])}},{key:"con-6",fn:function(t){return n("div",{},[e._v(e._s(t.data.tagsStr||"无"))])}},{key:"con-7",fn:function(t){return n("div",{},[e._v(e._s(t.data.memberId>"0"?t.data.memberPoint:t.data.point))])}}])},[n("div",{staticClass:"content_select_all",attrs:{slot:"title-0"},on:{click:e.selectAll},slot:"title-0"},[e._v("全部")])]),e._v(" "),n("section",{staticClass:"turn-page"},[n("pageElement",{attrs:{page:Number(e.page),total:Number(e.pageNum),numArr:[10,20,30,40,50],isNoJump:!0},on:{pageNum:e.pageChange}})],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.isShowGroup?n("set-user-group",{attrs:{showList:e.list,index:e.setType},on:{closeWin:e.getUserGroup}}):e._e(),e._v(" "),e.isShowDetailInfo?n("details-win",{attrs:{detailInfo:e.detailInfo},on:{closeWin:e.editUserInfo}}):e._e(),e._v(" "),e.isShowIntegral?n("integral-win",{attrs:{pointData:e.pointData},on:{adjustInter:e.adjustInter}}):e._e()],1)]:[n("integral-record",{attrs:{interData:e.interData},on:{closeInter:e.closeInter}})]],2)};r._withStripped=!0;var i=n("81a2"),s=n("05dd");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,s){try{var a=t[i](s),o=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});e(o)}("next")})}}var o={data:function(){return{index:null,titleList:[{titleName:"",titleStyle:{fontSize:"16px",width:"147px",flex:"none"}},{titleName:"操作",titleStyle:{fontSize:"16px",width:"363px",flex:"none"}},{titleName:"推荐人",titleStyle:{fontSize:"16px",width:"185.5px",flex:"none"}},{titleName:"用户昵称",titleStyle:{fontSize:"16px",width:"185.5px",flex:"none"}},{titleName:"性别",titleStyle:{fontSize:"16px",width:"136px",flex:"none"}},{titleName:"分组",dataName:"groupName",titleStyle:{fontSize:"16px",width:"146px",flex:"none"}},{titleName:"标签",titleStyle:{fontSize:"16px",width:"136px",flex:"none"}},{titleName:"积分",titleStyle:{fontSize:"16px",width:"136px",flex:"none"}}],allTotal:0,page:1,num:10,pageNum:1,defaultName:"全部",showVermicelliList:!0,vermiceList:[],selectInfo:[],isShowGroup:!1,groupList:[],labelList:[],list:[],setType:"",sorts:[],detailInfo:[],isShowDetailInfo:!1,isShowIntegral:!1,tagList:[],total:"",userList:[],pointData:[],interData:[],recommendNames:"",userName:"",selects:["-1"],isOwer:"",editIndex:[],interIndex:"",count:0,selAll:!1,timer:""}},methods:{selectAll:function(){this.editIndex=[],this.selAll=!this.selAll;var e=document.querySelectorAll(".cli_radios input");if(e){for(var t=0;t<e.length;t++)e[t].checked=this.selAll,e[t].className=this.selAll?"select_icon":"",this.editIndex.push(t);this.selectInfo=this.selAll?[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.vermiceList)):[],this.selAll?this.editIndex=this.editIndex:this.editIndex=[]}},selectGroup:function(e){this.selects=0==e?["-1"]:[this.userList[[e-1]].id]},pageChange:function(e){this.page=e.page,this.num=e.num,this.selectInfo=[],this.selectUser("foot")},selectUser:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("header"==e&&(t.page=1),t.selectInfo=[],t.editIndex=[],t.selAll=!1,t.$refs.input)for(r=0;r<t.$refs.input.length;r++)t.$refs.input[r].className="",t.$refs.input[r].checked=!1;return n.next=7,i.a.getAssistantfans({data:{count:t.num,startIndex:t.page,groupId:""===t.selects[0]?"-1":t.selects[0],nickname:t.userName,recommendedName:t.recommendNames}});case 7:s=n.sent,"1"==t.page&&(t.count=s.count),t.pageNum=Math.ceil(t.count/t.num),t.vermiceList=s.fansList;case 11:case"end":return n.stop()}},n,t)}))()},resertUser:function(){this.recommendNames="",this.userName="",this.defaultName="全部",this.page=1,this.selects=["-1"],this.selectUser(1)},adjustInter:function(e){if(this.isShowIntegral=!1,e)for(var t=0;t<this.vermiceList.length;t++)e.id==this.vermiceList[t].id&&(this.vermiceList[t].memberId>"0"?this.vermiceList[t].memberPoint=e.point:this.vermiceList[t].point=e.point)},changeSelect:function(e,t){if(e.target.checked?e.target.className="select_icon":e.target.className="",-1!=this.editIndex.indexOf(t)){var n=this.editIndex.indexOf(t);this.editIndex.splice(n,1)}else this.editIndex.push(t)},setGroup:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!e.selectInfo.length>0)){t.next=3;break}return e.valiData("请选择用户"),t.abrupt("return",!1);case 3:e.isShowGroup=!0,e.list=e.userList,e.setType=1;case 6:case"end":return t.stop()}},t,e)}))()},exportUser:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,r,s,a,o,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!e.selectInfo.length>0)){t.next=3;break}return e.valiData("请选择需要导出的粉丝"),t.abrupt("return",!1);case 3:for(n=[],r=!0,s=!1,a=void 0,t.prev=7,o=e.selectInfo[Symbol.iterator]();!(r=(c=o.next()).done);r=!0)u=c.value,n.push(u.id);t.next=15;break;case 11:t.prev=11,t.t0=t.catch(7),s=!0,a=t.t0;case 15:t.prev=15,t.prev=16,!r&&o.return&&o.return();case 18:if(t.prev=18,!s){t.next=21;break}throw a;case 21:return t.finish(18);case 22:return t.finish(15);case 23:return t.next=25,i.a.exportAssistantfans({data:{format:"csv",fansIds:n.join(",")}});case 25:case"end":return t.stop()}},t,e,[[7,11,15,23],[16,,18,22]])}))()},setLabel:function(){if(!this.selectInfo.length>0)return this.valiData("请选择用户"),!1;this.isShowGroup=!0,this.list=this.tagList,this.setType=2},valiData:function(e,t,n){this.$store.commit("setWin",{content:e,title:t,winType:n})},getUserGroup:function(e){this.isShowGroup=!1,e&&(1===this.setType?this.setGroupUser(e.data):this.setUserLabel(e.data))},setUserLabel:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,s,a,o,c,u,l,d,f,p,m,h,v,x,g,w,b,I,_,k,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(r=[],s=[],a=!0,o=!1,c=void 0,n.prev=5,u=t.selectInfo[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)d=l.value,r.push(d.id);n.next=13;break;case 9:n.prev=9,n.t0=n.catch(5),o=!0,c=n.t0;case 13:n.prev=13,n.prev=14,!a&&u.return&&u.return();case 16:if(n.prev=16,!o){n.next=19;break}throw c;case 19:return n.finish(16);case 20:return n.finish(13);case 21:return n.next=23,i.a.setUserTag({data:{tagIds:e.join(","),fansIds:r.join(",")}});case 23:if(!n.sent){n.next=69;break}t.$store.commit("setWin",{content:"设置成功",title:"操作提示",winType:"alert"}),f=0;case 27:if(!(f<t.tagList.length)){n.next=50;break}for(p=!0,m=!1,h=void 0,n.prev=31,v=e[Symbol.iterator]();!(p=(x=v.next()).done);p=!0)g=x.value,t.tagList[f].id==g&&s.push(t.tagList[f].name);n.next=39;break;case 35:n.prev=35,n.t1=n.catch(31),m=!0,h=n.t1;case 39:n.prev=39,n.prev=40,!p&&v.return&&v.return();case 42:if(n.prev=42,!m){n.next=45;break}throw h;case 45:return n.finish(42);case 46:return n.finish(39);case 47:f++,n.next=27;break;case 50:for(w=!0,b=!1,I=void 0,n.prev=53,_=t.editIndex[Symbol.iterator]();!(w=(k=_.next()).done);w=!0)y=k.value,t.vermiceList[y].tagsStr=s.join("、");n.next=61;break;case 57:n.prev=57,n.t2=n.catch(53),b=!0,I=n.t2;case 61:n.prev=61,n.prev=62,!w&&_.return&&_.return();case 64:if(n.prev=64,!b){n.next=67;break}throw I;case 67:return n.finish(64);case 68:return n.finish(61);case 69:case"end":return n.stop()}},n,t,[[5,9,13,21],[14,,16,20],[31,35,39,47],[40,,42,46],[53,57,61,69],[62,,64,68]])}))()},setGroupUser:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){var r,s,a,o,c,u,l,d,f,p,m,h,v,x,g,w,b,I,_,k,y,S;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(r=[],s=[],a=e[0],o="",c=!0,u=!1,l=void 0,n.prev=7,d=t.userList[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)p=f.value,e[0]==p.id&&(o=p.name);n.next=15;break;case 11:n.prev=11,n.t0=n.catch(7),u=!0,l=n.t0;case 15:n.prev=15,n.prev=16,!c&&d.return&&d.return();case 18:if(n.prev=18,!u){n.next=21;break}throw l;case 21:return n.finish(18);case 22:return n.finish(15);case 23:for(m=!0,h=!1,v=void 0,n.prev=26,x=t.selectInfo[Symbol.iterator]();!(m=(g=x.next()).done);m=!0)w=g.value,r.push(w.openId),s.push(w.id);n.next=34;break;case 30:n.prev=30,n.t1=n.catch(26),h=!0,v=n.t1;case 34:n.prev=34,n.prev=35,!m&&x.return&&x.return();case 37:if(n.prev=37,!h){n.next=40;break}throw v;case 40:return n.finish(37);case 41:return n.finish(34);case 42:return n.next=44,i.a.setGroupAssistant({data:{groupId:a,openIdList:r.join(","),idList:s.join(",")}});case 44:if(!n.sent){n.next=66;break}for(t.$store.commit("setWin",{content:"设置成功",title:"操作提示",winType:"alert"}),b=!0,I=!1,_=void 0,n.prev=50,k=t.editIndex[Symbol.iterator]();!(b=(y=k.next()).done);b=!0)S=y.value,t.vermiceList[S].groupName=o;n.next=58;break;case 54:n.prev=54,n.t2=n.catch(50),I=!0,_=n.t2;case 58:n.prev=58,n.prev=59,!b&&k.return&&k.return();case 61:if(n.prev=61,!I){n.next=64;break}throw _;case 64:return n.finish(61);case 65:return n.finish(58);case 66:case"end":return n.stop()}},n,t,[[7,11,15,23],[16,,18,22],[26,30,34,42],[35,,37,41],[50,54,58,66],[59,,61,65]])}))()},showDetailInfo:function(e,t){this.interIndex=t,this.isShowDetailInfo=!0,this.detailInfo=e},adjustRecord:function(e){this.isShowIntegral=!0,this.pointData=e},editUserInfo:function(e){this.isShowDetailInfo=!1,e&&(this.vermiceList[this.interIndex].realName=e.name,this.vermiceList[this.interIndex].mobile=e.mobile)},getUserGroups:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n,r,a,o,c,u,l,d,f,p,m,h,v,x;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.getUserGroups({data:{}});case 2:if(!(n=t.sent)||""==n){t.next=51;break}for(e.userList=Object.values(n),r=[],a=!0,o=!1,c=void 0,t.prev=9,u=e.userList[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)d=l.value,r.push(d.name);t.next=17;break;case 13:t.prev=13,t.t0=t.catch(9),o=!0,c=t.t0;case 17:t.prev=17,t.prev=18,!a&&u.return&&u.return();case 20:if(t.prev=20,!o){t.next=23;break}throw c;case 23:return t.finish(20);case 24:return t.finish(17);case 25:if(r.unshift("全部"),e.sorts=r,!e.isOwer){t.next=50;break}for(f=!0,p=!1,m=void 0,t.prev=31,h=e.userList[Symbol.iterator]();!(f=(v=h.next()).done);f=!0)(x=v.value).id==s.a.groupFansList.groupId&&(e.defaultName=x.name);t.next=39;break;case 35:t.prev=35,t.t1=t.catch(31),p=!0,m=t.t1;case 39:t.prev=39,t.prev=40,!f&&h.return&&h.return();case 42:if(t.prev=42,!p){t.next=45;break}throw m;case 45:return t.finish(42);case 46:return t.finish(39);case 47:e.selectUser(1),t.next=51;break;case 50:e.selectUser(1);case 51:case"end":return t.stop()}},t,e,[[9,13,17,25],[18,,20,24],[31,35,39,47],[40,,42,46]])}))()},getlabelList:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.getlabelList({data:{}});case 2:n=t.sent,e.tagList=n;case 4:case"end":return t.stop()}},t,e)}))()},addPublic:function(){var e=this;this.$store.commit("setWin",{title:"温馨提示",winType:"confirm",content:"确定一键同步微信公众号粉丝吗？",callback:function(t){"ok"==t&&e.syncFans()}})},syncFans:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.syncFans({data:{}});case 2:t.sent&&(e.$store.commit("setWin",{content:"正在同步微信用户与用户组,请勿关闭页面...",title:"操作提示",winType:"alert"}),n=e,e.timer=setInterval(function(){n.getSyncStatus()},4e3));case 4:case"end":return t.stop()}},t,e)}))()},getSyncStatus:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.getSyncStatus({data:{}});case 2:t.sent&&(clearInterval(e.timer),e.$store.commit("setWin",{content:"同步成功",title:"操作提示",winType:"alert"}),e.getUserGroups());case 4:case"end":return t.stop()}},t,e)}))()},closeInter:function(){var e=this;this.showVermicelliList=!0,this.$store.commit("setPageTools",{addPublic:function(){e.addPublic()},setGroup:function(){e.setGroup()},exportUser:function(){e.exportUser()}})}},filters:{filterSex:function(e){return 0==e?"未知":1==e?"男":"女"}},mounted:function(){var e=this;this.$store.commit("setPageTools",{addPublic:function(){e.addPublic()},setGroup:function(){e.setGroup()},exportUser:function(){e.exportUser()}}),this.isOwer=s.a.groupFansList.isOwer,this.selects=[s.a.groupFansList.groupId],this.getUserGroups(),this.getlabelList()},components:{pageElement:function(){return n.e("page_element").then(n.bind(null,"5921"))},"details-win":function(){return n.e("details_win").then(n.bind(null,"cc4c"))},"set-user-group":function(){return n.e("set_user_group").then(n.bind(null,"1ed7"))},"select-btn":function(){return n.e("select_btn").then(n.bind(null,"3d41"))},"integral-win":function(){return n.e("integral_win").then(n.bind(null,"cf95"))},"integral-record":function(){return n.e("integral_record").then(n.bind(null,"5a13"))},selectBtn:function(){return n.e("select_btn").then(n.bind(null,"3d41"))},comTable:function(){return n.e("table").then(n.bind(null,"4360"))}},beforeDestroy:function(){s.a.groupFansList={isOwer:!1,data:[],groupId:""}}},c=(n("e0e5"),n("6ceb")),u=Object(c.a)(o,r,[],!1,null,"67180071",null);u.options.__file="src\\module\\seller_assistant\\vermicelli_list.vue";t.default=u.exports}}]);