(window.webpackJsonp=window.webpackJsonp||[]).push([["vermicelli_list"],{"5e69":function(e,t,r){},c104:function(e,t,r){"use strict";var n=r("5e69");r.n(n).a},febe:function(e,t,r){"use strict";r.r(t);var n=r("81a2"),i=r("05dd");function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,s){try{var a=t[i](s),c=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(c).then(function(e){n("next",e)},function(e){n("throw",e)});e(c)}("next")})}}var a={data:function(){return{index:null,titleList:[{titleName:"",titleStyle:{fontSize:"16px",width:"147px",flex:"none"}},{titleName:"操作",titleStyle:{fontSize:"16px",width:"363px",flex:"none"}},{titleName:"推荐人",titleStyle:{fontSize:"16px",width:"185.5px",flex:"none"}},{titleName:"用户昵称",titleStyle:{fontSize:"16px",width:"185.5px",flex:"none"}},{titleName:"性别",titleStyle:{fontSize:"16px",width:"136px",flex:"none"}},{titleName:"分组",dataName:"groupName",titleStyle:{fontSize:"16px",width:"146px",flex:"none"}},{titleName:"标签",titleStyle:{fontSize:"16px",width:"136px",flex:"none"}},{titleName:"积分",titleStyle:{fontSize:"16px",width:"136px",flex:"none"}}],allTotal:0,page:1,num:10,pageNum:1,defaultName:"全部",showVermicelliList:!0,vermiceList:[],selectInfo:[],isShowGroup:!1,groupList:[],labelList:[],list:[],setType:"",sorts:[],detailInfo:[],isShowDetailInfo:!1,isShowIntegral:!1,tagList:[],total:"",userList:[],pointData:[],interData:[],recommendNames:"",userName:"",selects:["-1"],isOwer:"",editIndex:[],interIndex:"",count:0,selAll:!1,timer:"",selectedList:[],allselect:!1}},methods:{selectGroup:function(e){this.selects=0==e?["-1"]:[this.userList[[e-1]].id]},pageChange:function(e){this.page=e.page,this.num=e.num,this.selectUser("foot")},selectUser:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var i,s,a,c,o,l,u,d,f,p,m,h,v,x;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("header"==e&&(t.page=1),t.editIndex=[],t.selAll=!1,t.$refs.input)for(i=0;i<t.$refs.input.length;i++)t.$refs.input[i].className="",t.$refs.input[i].checked=!1;return r.next=6,n.a.getAssistantfans({data:{count:t.num,startIndex:t.page,groupId:""===t.selects[0]?"-1":t.selects[0],nickname:t.userName,recommendedName:t.recommendNames}});case 6:s=r.sent,"1"==t.page&&(t.count=s.count),t.pageNum=Math.ceil(t.count/t.num),a=!0,c=!1,o=void 0,r.prev=12,l=s.fansList[Symbol.iterator]();case 14:if(a=(u=l.next()).done){r.next=55;break}if(d=u.value,0!=t.selectedList.length){r.next=20;break}d.selected=!1,r.next=50;break;case 20:f=!0,p=!1,m=void 0,r.prev=23,h=t.selectedList[Symbol.iterator]();case 25:if(f=(v=h.next()).done){r.next=36;break}if((x=v.value).id!=d.id){r.next=32;break}return d.selected=x.selected,r.abrupt("break",36);case 32:d.selected=!1;case 33:f=!0,r.next=25;break;case 36:r.next=42;break;case 38:r.prev=38,r.t0=r.catch(23),p=!0,m=r.t0;case 42:r.prev=42,r.prev=43,!f&&h.return&&h.return();case 45:if(r.prev=45,!p){r.next=48;break}throw m;case 48:return r.finish(45);case 49:return r.finish(42);case 50:t.allselect=!0,d.selected||(t.allselect=!1);case 52:a=!0,r.next=14;break;case 55:r.next=61;break;case 57:r.prev=57,r.t1=r.catch(12),c=!0,o=r.t1;case 61:r.prev=61,r.prev=62,!a&&l.return&&l.return();case 64:if(r.prev=64,!c){r.next=67;break}throw o;case 67:return r.finish(64);case 68:return r.finish(61);case 69:t.vermiceList=s.fansList;case 70:case"end":return r.stop()}},r,t,[[12,57,61,69],[23,38,42,50],[43,,45,49],[62,,64,68]])}))()},resertUser:function(){this.recommendNames="",this.userName="",this.defaultName="全部",this.page=1,this.selects=["-1"],this.selectUser(1)},adjustInter:function(e){if(this.isShowIntegral=!1,e)for(var t=0;t<this.vermiceList.length;t++)e.id==this.vermiceList[t].id&&(this.vermiceList[t].memberId>"0"?this.vermiceList[t].memberPoint=e.point:this.vermiceList[t].point=e.point)},changeSelect:function(e,t){if(e.target.checked?e.target.className="select_icon":e.target.className="",-1!=this.editIndex.indexOf(t)){var r=this.editIndex.indexOf(t);this.editIndex.splice(r,1)}else this.editIndex.push(t)},setGroup:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!e.selectedList.length>0)){t.next=3;break}return e.valiData("请选择用户"),t.abrupt("return",!1);case 3:e.isShowGroup=!0,e.list=e.userList,e.setType=1;case 6:case"end":return t.stop()}},t,e)}))()},exportUser:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var r,i,s,a,c,o,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!e.selectedList.length>0)){t.next=3;break}return e.valiData("请选择需要导出的粉丝"),t.abrupt("return",!1);case 3:for(r=[],i=!0,s=!1,a=void 0,t.prev=7,c=e.selectedList[Symbol.iterator]();!(i=(o=c.next()).done);i=!0)l=o.value,r.push(l.id);t.next=15;break;case 11:t.prev=11,t.t0=t.catch(7),s=!0,a=t.t0;case 15:t.prev=15,t.prev=16,!i&&c.return&&c.return();case 18:if(t.prev=18,!s){t.next=21;break}throw a;case 21:return t.finish(18);case 22:return t.finish(15);case 23:return t.next=25,n.a.exportAssistantfans({data:{format:"csv",fansIds:r.join(",")}});case 25:case"end":return t.stop()}},t,e,[[7,11,15,23],[16,,18,22]])}))()},setLabel:function(){if(!this.selectedList.length>0)return this.valiData("请选择用户"),!1;this.isShowGroup=!0,this.list=this.tagList,this.setType=2},valiData:function(e,t,r){this.$store.commit("setWin",{content:e,title:t,winType:r})},getUserGroup:function(e){this.isShowGroup=!1,e&&(1===this.setType?this.setGroupUser(e.data):this.setUserLabel(e.data))},setUserLabel:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var i,s,a,c,o,l,u,d,f,p,m,h,v,x,g,b,w,L,k,_,S;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(i=[],s=[],a=!0,c=!1,o=void 0,r.prev=5,l=t.selectedList[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)d=u.value,i.push(d.id);r.next=13;break;case 9:r.prev=9,r.t0=r.catch(5),c=!0,o=r.t0;case 13:r.prev=13,r.prev=14,!a&&l.return&&l.return();case 16:if(r.prev=16,!c){r.next=19;break}throw o;case 19:return r.finish(16);case 20:return r.finish(13);case 21:return r.next=23,n.a.setUserTag({data:{tagIds:e.join(","),fansIds:i.join(",")}});case 23:if(!r.sent){r.next=69;break}t.$store.commit("setWin",{content:"设置成功",title:"操作提示",winType:"alert"}),f=0;case 27:if(!(f<t.tagList.length)){r.next=50;break}for(p=!0,m=!1,h=void 0,r.prev=31,v=e[Symbol.iterator]();!(p=(x=v.next()).done);p=!0)g=x.value,t.tagList[f].id==g&&s.push(t.tagList[f].name);r.next=39;break;case 35:r.prev=35,r.t1=r.catch(31),m=!0,h=r.t1;case 39:r.prev=39,r.prev=40,!p&&v.return&&v.return();case 42:if(r.prev=42,!m){r.next=45;break}throw h;case 45:return r.finish(42);case 46:return r.finish(39);case 47:f++,r.next=27;break;case 50:for(b=!0,w=!1,L=void 0,r.prev=53,k=t.editIndex[Symbol.iterator]();!(b=(_=k.next()).done);b=!0)S=_.value,t.vermiceList[S].tagsStr=s.join("、");r.next=61;break;case 57:r.prev=57,r.t2=r.catch(53),w=!0,L=r.t2;case 61:r.prev=61,r.prev=62,!b&&k.return&&k.return();case 64:if(r.prev=64,!w){r.next=67;break}throw L;case 67:return r.finish(64);case 68:return r.finish(61);case 69:case"end":return r.stop()}},r,t,[[5,9,13,21],[14,,16,20],[31,35,39,47],[40,,42,46],[53,57,61,69],[62,,64,68]])}))()},setGroupUser:function(e){var t=this;return s(regeneratorRuntime.mark(function r(){var i,s,a,c,o,l,u,d,f,p,m,h,v,x,g,b,w,L,k,_,S,I;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:for(i=[],s=[],a=e[0],c="",o=!0,l=!1,u=void 0,r.prev=7,d=t.userList[Symbol.iterator]();!(o=(f=d.next()).done);o=!0)p=f.value,e[0]==p.id&&(c=p.name);r.next=15;break;case 11:r.prev=11,r.t0=r.catch(7),l=!0,u=r.t0;case 15:r.prev=15,r.prev=16,!o&&d.return&&d.return();case 18:if(r.prev=18,!l){r.next=21;break}throw u;case 21:return r.finish(18);case 22:return r.finish(15);case 23:for(m=!0,h=!1,v=void 0,r.prev=26,x=t.selectedList[Symbol.iterator]();!(m=(g=x.next()).done);m=!0)b=g.value,i.push(b.openId),s.push(b.id);r.next=34;break;case 30:r.prev=30,r.t1=r.catch(26),h=!0,v=r.t1;case 34:r.prev=34,r.prev=35,!m&&x.return&&x.return();case 37:if(r.prev=37,!h){r.next=40;break}throw v;case 40:return r.finish(37);case 41:return r.finish(34);case 42:return r.next=44,n.a.setGroupAssistant({data:{groupId:a,openIdList:i.join(","),idList:s.join(",")}});case 44:if(!r.sent){r.next=68;break}for(t.$store.commit("setWin",{content:"设置分组成功",title:"操作提示",winType:"alert"}),t.selectUser(1),t.selectedList=[],w=!0,L=!1,k=void 0,r.prev=52,_=t.editIndex[Symbol.iterator]();!(w=(S=_.next()).done);w=!0)I=S.value,t.vermiceList[I].groupName=c;r.next=60;break;case 56:r.prev=56,r.t2=r.catch(52),L=!0,k=r.t2;case 60:r.prev=60,r.prev=61,!w&&_.return&&_.return();case 63:if(r.prev=63,!L){r.next=66;break}throw k;case 66:return r.finish(63);case 67:return r.finish(60);case 68:case"end":return r.stop()}},r,t,[[7,11,15,23],[16,,18,22],[26,30,34,42],[35,,37,41],[52,56,60,68],[61,,63,67]])}))()},showDetailInfo:function(e,t){this.interIndex=t,this.isShowDetailInfo=!0,this.detailInfo=e},adjustRecord:function(e){this.isShowIntegral=!0,this.pointData=e},editUserInfo:function(e){this.isShowDetailInfo=!1,e&&(this.vermiceList[this.interIndex].realName=e.name,this.vermiceList[this.interIndex].mobile=e.mobile)},getUserGroups:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var r,s,a,c,o,l,u,d,f,p,m,h,v,x;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.getUserGroups({data:{}});case 2:if(!(r=t.sent)||""==r){t.next=51;break}for(e.userList=Object.values(r),s=[],a=!0,c=!1,o=void 0,t.prev=9,l=e.userList[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)d=u.value,s.push(d.name);t.next=17;break;case 13:t.prev=13,t.t0=t.catch(9),c=!0,o=t.t0;case 17:t.prev=17,t.prev=18,!a&&l.return&&l.return();case 20:if(t.prev=20,!c){t.next=23;break}throw o;case 23:return t.finish(20);case 24:return t.finish(17);case 25:if(s.unshift("全部"),e.sorts=s,!e.isOwer){t.next=50;break}for(f=!0,p=!1,m=void 0,t.prev=31,h=e.userList[Symbol.iterator]();!(f=(v=h.next()).done);f=!0)(x=v.value).id==i.a.groupFansList.groupId&&(e.defaultName=x.name);t.next=39;break;case 35:t.prev=35,t.t1=t.catch(31),p=!0,m=t.t1;case 39:t.prev=39,t.prev=40,!f&&h.return&&h.return();case 42:if(t.prev=42,!p){t.next=45;break}throw m;case 45:return t.finish(42);case 46:return t.finish(39);case 47:e.selectUser(1),t.next=51;break;case 50:e.selectUser(1);case 51:case"end":return t.stop()}},t,e,[[9,13,17,25],[18,,20,24],[31,35,39,47],[40,,42,46]])}))()},getlabelList:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.getlabelList({data:{}});case 2:r=t.sent,e.tagList=r;case 4:case"end":return t.stop()}},t,e)}))()},addPublic:function(){var e=this;this.$store.commit("setWin",{title:"温馨提示",winType:"confirm",content:"确定一键同步微信公众号粉丝吗？",callback:function(t){"ok"==t&&e.syncFans()}})},syncFans:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.syncFans({data:{}});case 2:t.sent&&(e.$store.commit("setWin",{content:"正在同步微信用户与用户组,请勿关闭页面...",title:"操作提示",winType:"alert"}),r=e,e.timer=setInterval(function(){r.getSyncStatus()},4e3));case 4:case"end":return t.stop()}},t,e)}))()},getSyncStatus:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.getSyncStatus({data:{}});case 2:t.sent&&(clearInterval(e.timer),e.$store.commit("setWin",{content:"同步成功",title:"操作提示",winType:"alert"}),e.getUserGroups());case 4:case"end":return t.stop()}},t,e)}))()},closeInter:function(){var e=this;this.showVermicelliList=!0,this.$store.commit("setPageTools",{addPublic:function(){e.addPublic()},setGroup:function(){e.setGroup()},exportUser:function(){e.exportUser()}})},ocSelOne:function(e){if(e.selected=!e.selected,e.selected){this.selectedList.push(e);for(var t=0;t<this.vermiceList.length;t++)if(1!=this.vermiceList[t].selected)return;this.allselect=!0}else{this.allselect=!1;for(var r=0;r<this.selectedList.length;r++)this.selectedList[r].id==e.id&&this.selectedList.splice(r,1)}},allSelectedOne:function(){if(1==this.allselect)for(var e=0;e<this.vermiceList.length;e++){this.vermiceList[e].selected=!1;for(var t=0;t<this.selectedList.length;t++)this.selectedList[t].memberId==this.vermiceList[e].memberId&&this.selectedList.splice(t,1)}else for(var r=0;r<this.vermiceList.length;r++)this.vermiceList[r].selected=!0,-1==JSON.stringify(this.selectedList).indexOf(JSON.stringify(this.vermiceList[r]))&&this.selectedList.push(this.vermiceList[r]);this.allselect=!this.allselect}},filters:{filterSex:function(e){return 0==e?"未知":1==e?"男":"女"}},mounted:function(){var e=this;this.$store.commit("setPageTools",{addPublic:function(){e.addPublic()},setGroup:function(){e.setGroup()},exportUser:function(){e.exportUser()}}),this.isOwer=i.a.groupFansList.isOwer,this.selects=[i.a.groupFansList.groupId],this.getUserGroups(),this.getlabelList()},components:{pageElement:function(){return r.e("page_element").then(r.bind(null,"5921"))},"details-win":function(){return r.e("details_win").then(r.bind(null,"cc4c"))},"set-user-group":function(){return r.e("set_user_group").then(r.bind(null,"1ed7"))},"select-btn":function(){return r.e("select_btn").then(r.bind(null,"3d41"))},"integral-win":function(){return r.e("integral_win").then(r.bind(null,"cf95"))},"integral-record":function(){return r.e("integral_record").then(r.bind(null,"5a13"))},selectBtn:function(){return r.e("select_btn").then(r.bind(null,"3d41"))},comTable:function(){return r.e("table").then(r.bind(null,"4360"))}},beforeDestroy:function(){i.a.groupFansList={isOwer:!1,data:[],groupId:""}}},c=(r("c104"),r("d801")),o=Object(c.a)(a,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"vermiceli_list"}},[e.showVermicelliList?[r("header",{staticClass:"vermiceli_list_header"},[r("span",[e._v("用户分组")]),e._v(" "),r("select-btn",{attrs:{sorts:e.sorts,name:e.defaultName,width:184},on:{selOn:e.selectGroup}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.recommendNames,expression:"recommendNames",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"推荐人昵称"},domProps:{value:e.recommendNames},on:{input:function(t){t.target.composing||(e.recommendNames=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.userName,expression:"userName",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"用户昵称"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),r("button",{staticClass:"select",on:{click:function(t){e.selectUser("header")}}},[e._v("筛选")]),e._v(" "),r("button",{staticClass:"resert",on:{click:e.resertUser}},[e._v("重置")])],1),e._v(" "),r("com-table",{key:e.index,attrs:{listHeight:80,fixed:2,listName:"粉丝列表",showTitle:1,introData:e.vermiceList,listWidth:1437,titleData:e.titleList,allTotal:e.count,widthType:!0},scopedSlots:e._u([{key:"con-0",fn:function(t){return r("div",{staticClass:"circle"},[r("span",{class:{actives:t.data.selected},on:{click:function(r){e.ocSelOne(t.data)}}})])}},{key:"con-1",fn:function(t){return r("div",{staticClass:"detail_info"},[r("span",{on:{click:function(r){e.showDetailInfo(t.data,e.index)}}},[e._v("详细信息")]),e._v(" "),r("span",{on:{click:function(){e.showVermicelliList=!1,e.interData=t.data}}},[e._v("积分记录")]),e._v(" "),r("span",{on:{click:function(r){e.adjustRecord(t.data)}}},[e._v("调整积分")])])}},{key:"con-2",fn:function(t){return r("div",{staticClass:"detail_img"},[""!=t.data.recommendedImageUrl&&""!=t.data.recommendedName?[r("div",[""!=t.data.recommendedImageUrl?r("img",{attrs:{src:t.data.recommendedImageUrl,alt:t.data.recommendedName}}):e._e()]),e._v(" "),r("div",[r("span",[e._v("\n\t\t\t\t\t\t\t"+e._s(t.data.recommendedName)+"\n\t\t\t\t\t\t")])])]:r("div",[e._v("--")])],2)}},{key:"con-3",fn:function(t){return r("div",{staticClass:"detail_img"},[r("div",[""!=t.data.imageUrl?r("img",{attrs:{src:t.data.imageUrl,alt:t.data.name}}):e._e()]),e._v(" "),r("div",[r("span",[e._v("\n\t\t\t\t\t\t"+e._s(t.data.name)+"\n\t\t\t\t\t")])])])}},{key:"con-4",fn:function(t){return r("div",{},[e._v(e._s(e._f("filterSex")(t.data.sex)))])}},{key:"con-6",fn:function(t){return r("div",{},[e._v(e._s(t.data.tagsStr||"无"))])}},{key:"con-7",fn:function(t){return r("div",{},[e._v(e._s(t.data.memberId>"0"?t.data.memberPoint:t.data.point))])}}])},[r("div",{staticClass:"list_title_l fl",attrs:{slot:"title-0"},slot:"title-0"},[r("span",{staticStyle:{cursor:"pointer"},on:{click:e.allSelectedOne}},[e._v("全选")]),e._v(" "),r("span"),e._v(" "),r("span",[e._v("已选\n\t\t\t\t\t\t\t"),r("a",{attrs:{href:"javascript:;"}},[e._v(e._s(e.selectedList.length))]),e._v("人")])])]),e._v(" "),r("section",{staticClass:"turn-page"},[r("pageElement",{attrs:{page:Number(e.page),total:Number(e.pageNum),numArr:[10,20,30,40,50],isNoJump:!0},on:{pageNum:e.pageChange}})],1),e._v(" "),r("transition",{attrs:{name:"fade"}},[e.isShowGroup?r("set-user-group",{attrs:{showList:e.list,index:e.setType},on:{closeWin:e.getUserGroup}}):e._e(),e._v(" "),e.isShowDetailInfo?r("details-win",{attrs:{detailInfo:e.detailInfo},on:{closeWin:e.editUserInfo}}):e._e(),e._v(" "),e.isShowIntegral?r("integral-win",{attrs:{pointData:e.pointData},on:{adjustInter:e.adjustInter}}):e._e()],1)]:[r("integral-record",{attrs:{interData:e.interData},on:{closeInter:e.closeInter}})]],2)},[],!1,null,"67929cfe",null);t.default=o.exports}}]);