(window.webpackJsonp=window.webpackJsonp||[]).push([["clusion_store_batch_win"],{"1d28":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("win",{attrs:{align:"center",width:1024,height:600,ok:t.btnOk},on:{winEvent:t.closeSelfWin}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),i("div",{attrs:{slot:"content",id:"select-batch"},slot:"content"},[i("div",{staticClass:"batch-title"},[i("ul",[i("li",[t._v("商品名称:"+t._s(t.needItem.itemName))]),t._v(" "),i("li",[t._v("条码:"+t._s(t.needItem.barCode))]),t._v(" "),i("li",{staticClass:"small-li"},[t._v("商品单位:"+t._s(t.needItem.selectName))])]),t._v(" "),i("ul",[i("li",[t._v("保质期:"+t._s(t.validity))]),t._v(" "),i("li",[t._v("分类:"+t._s(t.cate))]),t._v(" "),i("li",[t._v("需求数量:"+t._s(t.needItem.num))])])]),t._v(" "),i("div",{staticClass:"search-div"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.batchNum,expression:"batchNum"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入批次编号"},domProps:{value:t.batchNum},on:{input:function(e){e.target.composing||(t.batchNum=e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.supplier,expression:"supplier"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入供应商"},domProps:{value:t.supplier},on:{input:function(e){e.target.composing||(t.supplier=e.target.value)}}}),t._v(" "),i("div",{staticClass:"timer"},[i("calendar",{attrs:{only:!1,time:t.startTime,format:"yyyy年MM月dd日"},on:{emit:t.startTimeChange}})],1),t._v(" "),i("div",{staticClass:"timer"},[i("calendar",{attrs:{only:!1,time:t.endTime,format:"yyyy年MM月dd日"},on:{emit:t.endTimeChange}})],1),t._v(" "),i("div",{staticClass:"filter blue",on:{click:t.search}},[t._v("\n\t\t\t\t\t筛选\n\t\t\t\t")]),t._v(" "),i("div",{staticClass:"reset gray",on:{click:t.reset}},[t._v("\n\t\t\t\t\t重置\n\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"table"},[i("div",{staticClass:"table-head"},[i("li",[t._v("序号")]),t._v(" "),i("li",[t._v("批次编号")]),t._v(" "),i("li",[t._v("生产日期")]),t._v(" "),i("li",[t._v("供应商")]),t._v(" "),i("li",{staticStyle:{"line-height":"20px"}},[t._v("当前批次\n\t\t\t\t\t\t"),i("br"),t._v("数量/重量")]),t._v(" "),i("li",[t._v("所属仓库")]),t._v(" "),i("li",[t._v("出库数量/重量")])]),t._v(" "),i("div",{staticClass:"table-body"},t._l(t.changeList,function(e,n){return i("div",{key:n,staticClass:"table-row"},[i("li",[t._v(t._s(n+1))]),t._v(" "),i("li",[t._v(t._s(e.batchCode))]),t._v(" "),i("li",[t._v(t._s(t.getTime(e.productionTime)))]),t._v(" "),i("li",[t._v(t._s(e.supplier))]),t._v(" "),i("li",[t._v(t._s(e.surplus))]),t._v(" "),i("li",[t._v(t._s(e.wName||"暂无"/e.aName||"暂无"))]),t._v(" "),i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.outNum,expression:"item.outNum"}],staticClass:"input-num",attrs:{type:"text",placeholder:"输入数字",maxlength:"9"},domProps:{value:e.outNum},on:{input:[function(i){i.target.composing||t.$set(e,"outNum",i.target.value)},function(i){t.getmin(i,e)}]}}),t._v(" "),i("span",{staticClass:"unitBox"},[t._v(t._s(t.needItem.selectName))])])])}))])])])};n._withStripped=!0;var a=i("bbb9"),s=i("81a2");var r={data:function(){return{title:"批次选择",btnOk:{},btnCancel:{},showTime:!1,startTime:"",endTime:"",cate:"",allList:"",changeList:"",batchNum:"",supplier:"",validity:"",validityType:["月","日","年"]}},props:["needItem","wid","shopId"],methods:{init:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var i,n,a,r,o,u,c,l,d,m,v,h,p,_,f,b,g,y,w,N;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.All([{httpId:"getDetails",data:{gid:e.needItem.gid||e.needItem.id,shopId:e.shopId,shopIds:e.shopId}},{httpId:"getGoodsBatch",data:{gid:e.needItem.gid||e.needItem.id,wid:e.wid||"",shopId:e.shopId}}]);case 2:if(i=t.sent,n=[],!i[0].data){t.next=26;break}for(a=!0,r=!1,o=void 0,t.prev=8,u=i[0].data.cate[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)l=c.value,n.push(l.name);t.next=16;break;case 12:t.prev=12,t.t0=t.catch(8),r=!0,o=t.t0;case 16:t.prev=16,t.prev=17,!a&&u.return&&u.return();case 19:if(t.prev=19,!r){t.next=22;break}throw o;case 22:return t.finish(19);case 23:return t.finish(16);case 24:e.cate=n.join(","),e.validity=""+i[0].data.validity+e.validityType[i[0].data.validityType];case 26:e.allList=i[1].data.list,e.changeList=e.allList,d=!0,m=!1,v=void 0,t.prev=31,h=e.changeList[Symbol.iterator]();case 33:if(d=(p=h.next()).done){t.next=61;break}if(_=p.value,!(e.needItem.batchList&&e.needItem.batchList.length>0)){t.next=57;break}for(f=!0,b=!1,g=void 0,t.prev=39,y=e.needItem.batchList[Symbol.iterator]();!(f=(w=y.next()).done);f=!0)N=w.value,_.batchId==N.batchId&&(_.outNum=N.outNum);t.next=47;break;case 43:t.prev=43,t.t1=t.catch(39),b=!0,g=t.t1;case 47:t.prev=47,t.prev=48,!f&&y.return&&y.return();case 50:if(t.prev=50,!b){t.next=53;break}throw g;case 53:return t.finish(50);case 54:return t.finish(47);case 55:t.next=58;break;case 57:_.outNum="";case 58:d=!0,t.next=33;break;case 61:t.next=67;break;case 63:t.prev=63,t.t2=t.catch(31),m=!0,v=t.t2;case 67:t.prev=67,t.prev=68,!d&&h.return&&h.return();case 70:if(t.prev=70,!m){t.next=73;break}throw v;case 73:return t.finish(70);case 74:return t.finish(67);case 75:case"end":return t.stop()}},t,e,[[8,12,16,24],[17,,19,23],[31,63,67,75],[39,43,47,55],[48,,50,54],[68,,70,74]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(a,s){try{var r=e[a](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})})()},chooseTime:function(){this.showTime=!this.showTime},transFormDate:function(t){return a.a.format(new Date(t),"yyyy-MM-dd")},closeSelfWin:function(t){this.$emit("throwWin",t,this.changeList)},initBtn:function(){this.btnOk={content:"确定",style:"background-color:#ff9200;"}},search:function(){var t=[];for(var e in this.allList){var i=this.allList[e];-1!=i.supplier.indexOf(this.supplier)&&0==i.batchCode.indexOf(this.batchNum)&&1e3*i.productionTime>this.startTime&&1e3*i.productionTime<this.endTime&&t.push(i)}this.changeList=t},reset:function(){this.supplier="",this.batchNum="",this.startTime=(new Date).setHours(0,0,0,0),this.endTime=(new Date).getTime(),this.changeList=this.allList},getmin:function(t,e){e.outNum=/^\d*(\.?)\d+$/.test(e.outNum)?e.outNum:0,""!=e.outNum&&(e.outNum>Number(e.surplus)&&(e.outNum=e.surplus),1==e.type?t.target.value=(e.outNum+"").replace(/^(\d*)\.?\d{4}$/g,parseInt(1e3*e.outNum)/1e3):t.target.value=isNaN(parseInt(e.outNum))?0:parseInt(e.outNum),e.outNum=t.target.value)},startTimeChange:function(t){this.startTime=a.a.getTime({time:t}).start},endTimeChange:function(t){this.endTime=a.a.getTime({time:t}).end},getTime:function(t){return a.a.format(1e3*parseInt(t),"yyyy年MM月dd日")}},mounted:function(){this.startTime=(new Date).setHours(0,0,0,0),this.endTime=(new Date).getTime(),this.initBtn(),this.init()},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))},calendar:function(){return i.e("calendar_type").then(i.bind(null,"f2dd"))}}},o=(i("8c6e"),i("6ceb")),u=Object(o.a)(r,n,[],!1,null,"410d4f6c",null);u.options.__file="src\\module\\invoicing_system\\conclusion\\clusion_store_batch_win.vue";e.default=u.exports},4922:function(t,e,i){},"8c6e":function(t,e,i){"use strict";var n=i("4922");i.n(n).a}}]);