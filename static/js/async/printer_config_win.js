(window.webpackJsonp=window.webpackJsonp||[]).push([["printer_config_win"],{"046e":function(t,e,i){"use strict";var s=i("f780");i.n(s).a},"0bbd":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("win",{attrs:{align:"right",width:600,height:560,ok:t.okStyle,cancel:t.cancelStyle},on:{winEvent:t.printConfigWin}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),i("div",{attrs:{slot:"content",id:"prin_con"},slot:"content"},[i("section",{staticClass:"Pconfig",attrs:{slot:"content"},slot:"content"},[i("el-form",{ref:"printDetial",attrs:{model:t.printDetial,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"单据数据",required:""}},[i("el-radio-group",{model:{value:t.orderTypeIndex,callback:function(e){t.orderTypeIndex=e},expression:"orderTypeIndex"}},[i("div",{staticStyle:{"margin-bottom":"2px"}},t._l(t.docType,function(e,s){return i("el-radio",{key:s,staticClass:"labItem",attrs:{label:s,border:""},on:{change:function(e){t.changeIndex(s)}}},[t._v(t._s(e.name))])}))])],1),t._v(" "),1==t.status||6==t.status?i("el-form-item",{attrs:{required:"",label:"页脚内容"}},[i("el-input",{staticStyle:{width:"450px"},attrs:{type:"textarea",maxlength:"500",autosize:{minRows:3,maxRows:5},placeholder:"请输入页脚内容"},model:{value:t.footerContent,callback:function(e){t.footerContent=e},expression:"footerContent"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{required:"",label:"打印机"}},[i("el-radio-group",{model:{value:t.printerIndex,callback:function(e){t.printerIndex=e},expression:"printerIndex"}},[i("div",{staticStyle:{"margin-bottom":"2px"}},t._l(t.printerList,function(e,s){return i("el-radio",{key:s,staticClass:"labItem",attrs:{label:s,border:""},on:{change:function(e){t.changePrintIndex(s)}}},[t._v(t._s(e.printerName))])}))])],1),t._v(" "),1==t.status||3==t.status||5==t.status?i("el-form-item",{attrs:{required:"",label:"区域"}},[i("el-checkbox-group",{on:{change:t.areaIndexChange},model:{value:t.areaIndex,callback:function(e){t.areaIndex=e},expression:"areaIndex"}},[i("div",{staticStyle:{"margin-bottom":"2px"}},t._l(t.areaIdsList,function(e,s){return i("el-checkbox",{key:s,staticClass:"labItem",attrs:{label:e.id,border:""}},[t._v(t._s(e.areaName))])}))])],1):t._e(),t._v(" "),!t.printerList[t.printerIndex]||"7"==t.status&&"4"==t.printerList[t.printerIndex].type||19==t.orderTypeIndex?[i("el-form-item",{attrs:{required:"",label:"宽度"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{maxlength:"2",placeholder:"请输入宽度(10~80)"},model:{value:t.orderWidth,callback:function(e){t.orderWidth=e},expression:"orderWidth"}}),t._v(" "),i("span",[t._v("毫米(mm)")])],1),t._v(" "),i("el-form-item",{attrs:{required:"",label:"高度"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{maxlength:"2",placeholder:"请输入高度(10~80)"},model:{value:t.orderHeight,callback:function(e){t.orderHeight=e},expression:"orderHeight"}}),t._v(" "),i("span",[t._v("毫米(mm)")])],1),t._v(" "),i("el-form-item",{attrs:{required:"",label:"间距"}},[i("el-input",{staticStyle:{width:"160px"},attrs:{maxlength:"2",placeholder:"请输入间距(1~10)"},model:{value:t.orderSpacing,callback:function(e){t.orderSpacing=e},expression:"orderSpacing"}}),t._v(" "),i("span",[t._v("毫米(mm)")])],1)]:t._e(),t._v(" "),3==t.status||4==t.status||5==t.status?i("el-form-item",{attrs:{label:"头部留白"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{maxlength:"2",placeholder:"请输入空白行数(1~10)"},model:{value:t.blankLine,callback:function(e){t.blankLine=e},expression:"blankLine"}}),t._v(" "),i("span",[t._v("行")])],1):t._e(),t._v(" "),3==t.status||4==t.status?i("el-form-item",{attrs:{required:"",label:"选择菜品"}},[null!==t.goodsLength?i("span",{staticClass:"fl spanCom",staticStyle:{"margin-right":"15px"}},[t._v("已选择菜品："+t._s(t.goodsLength)+"道")]):t._e(),t._v(" "),null===t.packagesLength||t.isOnlyGoods?t._e():i("span",{staticClass:"fl spanCom"},[t._v("已选择套餐："+t._s(t.packagesLength)+"个")]),t._v(" "),i("el-button",{staticStyle:{width:"150px"},attrs:{type:"primary"},on:{click:t.openGood}},[t._v("添加关联菜品")])],1):t._e(),t._v(" "),t.printerList[t.printerIndex]&&"4"===t.printerList[t.printerIndex].type?t._e():i("el-form-item",{attrs:{required:"",label:"打印次数"}},[i("el-input-number",{staticStyle:{width:"150px"},attrs:{min:1,max:10},on:{change:t.changeNum},model:{value:t.printTimes,callback:function(e){t.printTimes=e},expression:"printTimes"}}),t._v(" "),i("span",{staticStyle:{color:"#606266",margin:"0 20px"}},[t._v("蜂鸣")]),t._v(" "),i("el-switch",{attrs:{"active-color":"#E1BB4A","inactive-color":"#e6e6e6"},model:{value:t.isAlam,callback:function(e){t.isAlam=e},expression:"isAlam"}})],1),t._v(" "),2==t.orderTypeIndex?i("el-form-item",{attrs:{label:"打印等叫单"}},[i("el-switch",{attrs:{"active-color":"#E1BB4A","inactive-color":"#e6e6e6"},model:{value:t.isWait,callback:function(e){t.isWait=e},expression:"isWait"}}),t._v(" "),i("span",{staticStyle:{color:"#606266","margin-left":"80px"}},[t._v("打印套餐子菜")]),t._v(" "),i("el-switch",{attrs:{"active-color":"#E1BB4A","inactive-color":"#e6e6e6"},model:{value:t.isSon,callback:function(e){t.isSon=e},expression:"isSon"}})],1):t._e(),t._v(" "),19==t.orderTypeIndex?i("el-form-item",{attrs:{label:"底部标语"}},[i("el-input",{staticStyle:{width:"340px"},attrs:{maxlength:"30",placeholder:"请输入底部标语"},model:{value:t.footerContent,callback:function(e){t.footerContent=e},expression:"footerContent"}})],1):t._e(),t._v(" "),19==t.orderTypeIndex?i("el-form-item",{attrs:{label:"显示店铺名称"}},[i("el-switch",{attrs:{"active-color":"#E1BB4A","inactive-color":"#e6e6e6"},model:{value:t.isShowName,callback:function(e){t.isShowName=e},expression:"isShowName"}})],1):t._e(),t._v(" "),0==t.orderTypeIndex||1==t.orderTypeIndex?i("el-form-item",{attrs:{label:"显示品牌logo"}},[i("el-switch",{attrs:{"active-color":"#E1BB4A","inactive-color":"#e6e6e6"},model:{value:t.isShowLogo,callback:function(e){t.isShowLogo=e},expression:"isShowLogo"}})],1):t._e(),t._v(" "),!t.isShowLogo||0!=t.orderTypeIndex&&1!=t.orderTypeIndex?t._e():i("el-form-item",{attrs:{label:"显示位置"}},[i("el-radio-group",{model:{value:t.isLocal,callback:function(e){t.isLocal=e},expression:"isLocal"}},[i("div",{staticStyle:{"margin-bottom":"2px"}},t._l(t.localArr,function(e,s){return i("el-radio",{key:s,attrs:{label:e.type,border:""}},[t._v(t._s(e.name))])}))])],1),t._v(" "),1==t.orderTypeIndex?i("el-form-item",{attrs:{label:"显示支付二维码"}},[i("el-switch",{attrs:{"active-color":"#E1BB4A","inactive-color":"#e6e6e6"},model:{value:t.isQrcode,callback:function(e){t.isQrcode=e},expression:"isQrcode"}})],1):t._e()],2)],1)])]),t._v(" "),t.showTowWin?i(t.openGoodList,{tag:"component",attrs:{goodsIds:t.goodsIds,packages:t.packages,isGoods:!0,isOnlyGoods:t.isOnlyGoods,goInName:"isChild"},on:{goodListWin:t.goGoodList}}):t._e()],1)};s._withStripped=!0;var r=i("f60a"),n=i("f6ce"),o=i("8bf4"),a={data:function(){return{orderType:null,printTimes:1,isAlam:!1,footerContent:"",printerId:null,areaIds:[],status:"1",orderTypeIndex:-1,areaIndex:[],printerIndex:-1,goodsLength:null,goodsIds:[],packages:[],packagesLength:null,orderWidth:"",orderHeight:"",orderSpacing:"",blankLine:0,orderName:"",title:"",okStyle:null,cancelStyle:null,createUid:"",showTowWin:!1,isOnlyGoods:!1,isWait:!1,isSon:!1,isShowName:!1,isShowLogo:!1,localArr:[{type:"1",name:"顶部"},{type:"2",name:"底部"}],isLocal:"1",isQrcode:!1}},components:{win:r.default},watch:{orderTypeIndex:"orderTypeIndexChange",goodsIds:"goodsNonull",packages:"packagesNonull"},props:{printerConId:String,types:String,printIndex:Number,showWin:!1,docType:Array,areaIdsList:Array,printerList:Array,printDetial:Object},mounted:function(){var t=n.a.session("userShop");this.createUid=t.user.id,"edit"==this.types&&this.getPrintDetial(),"addPcon"==this.types?(this.title="添加打印机配置",this.okStyle={content:"保存",style:{backgroundColor:"#bd823e",color:"#fff"}},this.cancelStyle={content:"取消",style:{backgroundColor:"#a0a0a0",color:"#fff"}}):"edit"==this.types&&(this.title="修改打印机配置",this.okStyle={content:"确定",style:{backgroundColor:"#29ABE2",color:"#fff"}},this.cancelStyle={content:"删除",style:{backgroundColor:"#982c2c",color:"#fff"}})},methods:{goGoodList:function(t,e){this.goodsIds=e.goodArr,this.packages=e.packArr,this.showTowWin=!1},printConfigWin:function(t){var e={};if("ok"==t){if(console.log(this.orderType),!this.SubmitJudgment(t))return!1;e.printsetId=this.printerConId,e.createUid=this.createUid,e.printerId=this.printerId,e.orderType=this.orderType,e.orderName=this.orderName,e.areaIds=this.areaIndex.toString(),e.goodsIds=this.goodsIds.toString(),e.packageIds=this.packages.toString(),e.footerContent=this.footerContent,e.printTimes=this.printTimes,e.isAlam=Number(this.isAlam),e.isPrintWait=Number(this.isWait),e.orderStatus=this.status,e.type=this.printerList[this.printerIndex].type,e.isPackageGoods=Number(this.isSon),e.isShopName=Number(this.isShowName),e.isLogo=Number(this.isShowLogo?this.isLocal:this.isShowLogo),e.isQrcode=Number(this.isQrcode),e.width=17!=this.orderType&&22!=this.orderType||4!=this.printerList[this.printerIndex].type?"":this.orderWidth,e.height=17!=this.orderType&&22!=this.orderType||4!=this.printerList[this.printerIndex].type?"":this.orderHeight,e.spacing=17!=this.orderType&&22!=this.orderType||4!=this.printerList[this.printerIndex].type?"":this.orderSpacing,e.blankLine=3==this.status||4==this.status||5==this.status?this.blankLine:0}this.$emit("printConfigWin",t,e)},changeIndex:function(t){console.log(t),this.docType[t]&&this.docType[t].name&&(this.orderName=this.docType[t].name),this.orderTypeIndex=t,this.isOnlyGoods=19==t},changePrintIndex:function(t){this.printerIndex=t,this.printerIndex>-1&&(this.printerId=this.printerList[this.printerIndex].id)},waitOnOff:function(t){this.isWait=t?1:0},sonOnOff:function(t){this.isSon=t,console.log(t)},isShowOnOff:function(t){this.isShowName=t},orderTypeIndexChange:function(){0==this.orderTypeIndex||1==this.orderTypeIndex?this.status="1":9==this.orderTypeIndex||2==this.orderTypeIndex||19==this.orderTypeIndex||22==this.orderTypeIndex?this.status="4":3==this.orderTypeIndex||11==this.orderTypeIndex?this.status="5":6==this.orderTypeIndex||7==this.orderTypeIndex||21==this.orderTypeIndex?this.status="3":15==this.orderTypeIndex?this.status="6":17==this.orderTypeIndex||18==this.orderTypeIndex?this.status="7":(this.status="2",-1==this.orderTypeIndex&&(this.status="1")),this.orderTypeIndex>-1&&(this.orderType=this.docType[this.orderTypeIndex].type)},areaIndexChange:function(t){console.log(t),this.areaIndex=t},goodsNonull:function(){this.goodsLength=0==this.goodsIds.length?null:this.goodsIds.length},packagesNonull:function(){this.packagesLength=0==this.packages.length?null:this.packages.length},changeNum:function(t){this.printTimes=t},changeOnOff:function(t){this.isAlam=t?1:0},openGood:function(){this.openGoodList=o.default,19==this.orderTypeIndex?this.isOnlyGoods=!0:this.isOnlyGoods=!1,this.showTowWin=!0},getPrintDetial:function(){this.printerId=this.printDetial.printerId;for(var t=0;t<this.printerList.length;t++)this.printerId==this.printerList[t].id&&(this.printerIndex=t);this.orderTypeIndex=1*this.printDetial.orderType,"21"==this.printDetial.orderType?this.orderTypeIndex=18:"22"==this.printDetial.orderType?this.orderTypeIndex=19:"23"==this.printDetial.orderType?this.orderTypeIndex=20:"24"==this.printDetial.orderType?this.orderTypeIndex=21:"25"==this.printDetial.orderType&&(this.orderTypeIndex=22),console.log(this.orderTypeIndex),this.isWait=1==this.printDetial.isPrintWait,this.orderName=this.docType[this.orderTypeIndex].name,this.footerContent=this.printDetial.footerContent,this.printTimes=this.printDetial.printTimes,this.isAlam="0"!=this.printDetial.isAlam,this.areaIndex=""!=this.printDetial.areaIds&&null!=this.printDetial.areaIds?this.printDetial.areaIds.split(","):[],this.goodsIds=""!=this.printDetial.goodsIds&&null!=this.printDetial.goodsIds?this.printDetial.goodsIds.split(","):[],this.packages=""!=this.printDetial.packageIds&&null!=this.printDetial.packageIds?this.printDetial.packageIds.split(","):[],this.orderWidth=this.printDetial.width,this.orderHeight=this.printDetial.height,this.orderSpacing=this.printDetial.spacing,this.blankLine=this.printDetial.blankLine,this.isSon=Boolean(Number(this.printDetial.isPackageGoods)),this.isShowName=Boolean(Number(this.printDetial.isShopName)),1*this.printDetial.isLogo>0&&(this.isShowLogo=!0,this.isLocal=this.printDetial.isLogo),this.isQrcode=Boolean(Number(this.printDetial.isQrcode))},SubmitJudgment:function(t){if("ok"==t){if(null==this.orderType)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"单据数据不能为空！"}),!1;if(0==this.printerIndex.length||-1==this.printerIndex)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"打印机不能不选！"}),!1;if(0==this.orderType||1==this.orderType){if(""==this.footerContent)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"页脚不能为空！"}),!1;if(this.footerContent.split("").length>=30)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"页脚长度不能超过30！"}),!1;if(0==this.areaIndex.length)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"区域不能不选！"}),!1}else if(6==this.orderType||7==this.orderType||24==this.orderType){if(0==this.areaIndex.length)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"区域不能不选！"}),!1;if(0==this.goodsIds.length&&""==this.goodsIds&&0==this.packages.length&&""==this.packages)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"商品或套餐不能全为空！"}),!1}else if(9==this.orderType||2==this.orderType||22==this.orderType||25==this.orderType){if(0==this.goodsIds.length&&""==this.goodsIds&&0==this.packages.length&&""==this.packages)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"商品或套餐不能全为空！"}),!1}else if(3==this.orderTyp||11==this.orderTyp){if(0==this.areaIndex.length)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"区域不能不选！"}),!1}else if(17==this.orderType&&4==this.printerList[this.printerIndex].type){if(""==this.orderWidth||this.orderWidth<=0)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"宽度不能为空且不能小于或等于0"}),!1;if(""==this.orderHeight||this.orderHeight<=0)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"高度不能为空且不能小于或等于0"}),!1;if(""==this.orderSpacing||this.orderSpacing<=0)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"间距不能为空且不能小于或等于0"}),!1}return 3!=this.status&&4!=this.status&&5!=this.status||!(1*this.blankLine>10)||(this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"头部留白最大为10行"}),!1)}}}},l=(i("046e"),i("6ceb")),d=Object(l.a)(a,s,[],!1,null,"274594cf",null);d.options.__file="src\\module\\shop_config\\printer_config_win.vue";e.default=d.exports},f780:function(t,e,i){}}]);