(window.webpackJsonp=window.webpackJsonp||[]).push([["printer_config_win"],{"046e":function(t,e,i){"use strict";var s=i("ef66");i.n(s).a},"0bbd":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("win",{attrs:{align:"right",width:600,height:560,ok:t.okStyle,cancel:t.cancelStyle},on:{winEvent:t.printConfigWin}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),i("div",{attrs:{slot:"content",id:"prin_con"},slot:"content"},[i("section",{staticClass:"Pconfig",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"configOne"},[i("label",{staticClass:"fl"},[i("span",{staticClass:"fl required pNmae"},[t._v("单据数据")]),t._v(" "),i("section",{staticClass:"radio_box",staticStyle:{width:"410px",float:"left"}},[i("radioBtn",{attrs:{list:t.docType,index:t.orderTypeIndex,name:"name"},on:{selOn:t.changeIndex}})],1)]),t._v(" "),1==t.status||6==t.status?i("label",{staticClass:"fl"},[i("span",{staticClass:"fl required pNmae"},[t._v("页脚内容")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.footerContent,expression:"footerContent"}],staticClass:"pInput",attrs:{type:"text",placeholder:"请输入页脚内容"},domProps:{value:t.footerContent},on:{input:function(e){e.target.composing||(t.footerContent=e.target.value)}}})]):t._e(),t._v(" "),i("label",{staticClass:"fl"},[i("span",{staticClass:"fl required pNmae"},[t._v("打印机")]),t._v(" "),i("section",{staticStyle:{width:"410px",float:"left"}},[i("radioBtn",{attrs:{list:t.printerList,index:t.printerIndex,name:"printerName"},on:{selOn:t.changePrintIndex}})],1)]),t._v(" "),1==t.status||3==t.status||5==t.status?i("label",{staticClass:"fl"},[i("span",{staticClass:"fl required pNmae"},[t._v("区域")]),t._v(" "),i("section",{staticStyle:{width:"410px",float:"left"}},[i("selectBtns",{attrs:{list:t.areaIdsList,selects:t.areaIndex,name:"areaName",keys:"id"},on:{selOn:t.areaIndexChange}})],1)]):t._e(),t._v(" "),!t.printerList[t.printerIndex]||"7"==t.status&&"4"==t.printerList[t.printerIndex].type||19==t.orderTypeIndex?[i("label",{staticClass:"fl"},[i("span",{staticClass:"fl required pNmae"},[t._v("宽度")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.orderWidth,expression:"orderWidth"}],staticClass:"input",staticStyle:{width:"140px"},attrs:{type:"text",maxlength:"2",placeholder:"请输入宽度(10~80)"},domProps:{value:t.orderWidth},on:{input:function(e){e.target.composing||(t.orderWidth=e.target.value)}}}),t._v(" "),i("span",[t._v("毫米(mm)")])]),t._v(" "),i("label",{staticClass:"fl"},[i("span",{staticClass:"fl required pNmae"},[t._v("高度")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.orderHeight,expression:"orderHeight"}],staticClass:"input",staticStyle:{width:"140px"},attrs:{type:"text",maxlength:"2",placeholder:"请输入高度(10~80)"},domProps:{value:t.orderHeight},on:{input:function(e){e.target.composing||(t.orderHeight=e.target.value)}}}),t._v(" "),i("span",[t._v("毫米(mm)")])]),t._v(" "),i("label",{staticClass:"fl"},[i("span",{staticClass:"fl required pNmae"},[t._v("间距")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.orderSpacing,expression:"orderSpacing"}],staticClass:"input",staticStyle:{width:"140px"},attrs:{type:"text",maxlength:"2",placeholder:"请输入间距(1~10)"},domProps:{value:t.orderSpacing},on:{input:function(e){e.target.composing||(t.orderSpacing=e.target.value)}}}),t._v(" "),i("span",[t._v("毫米(mm)")])])]:t._e(),t._v(" "),3==t.status||4==t.status||5==t.status?i("label",{staticClass:"fl"},[i("span",{staticClass:"fl pNmae"},[t._v("头部留白")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.blankLine,expression:"blankLine"}],staticClass:"input",staticStyle:{width:"140px"},attrs:{type:"text",maxlength:"2",placeholder:"请输入空白行数(1~10)"},domProps:{value:t.blankLine},on:{input:function(e){e.target.composing||(t.blankLine=e.target.value)}}}),t._v(" "),i("span",[t._v("行")])]):t._e(),t._v(" "),3==t.status||4==t.status?i("label",{staticClass:"fl",staticStyle:{"line-height":"40px"}},[i("span",{staticClass:"fl required pNmae"},[t._v("选择菜品")]),t._v(" "),null!==t.goodsLength?i("span",{staticClass:"fl spanCom",staticStyle:{"margin-right":"15px"}},[t._v("已选择菜品："+t._s(t.goodsLength)+"道")]):t._e(),t._v(" "),null===t.packagesLength||t.isOnlyGoods?t._e():i("span",{staticClass:"fl spanCom"},[t._v("已选择套餐："+t._s(t.packagesLength)+"个")]),t._v(" "),i("a",{staticClass:"addclassify fl",attrs:{href:"javascript:void(0);"},on:{click:t.openGood}},[t._v("添加关联菜品")])]):t._e(),t._v(" "),t.printerList[t.printerIndex]&&"4"===t.printerList[t.printerIndex].type?t._e():i("label",{staticClass:"fl"},[i("span",{staticClass:"fl required pNmae"},[t._v("打印次数")]),t._v(" "),i("div",{staticClass:"fl",staticStyle:{width:"185px"}},[i("subaddBtn",{attrs:{minnum:1,bindnum:t.printTimes,maxnum:10,sign:!1},on:{toClick:t.changeNum}})],1),t._v(" "),i("span",{staticClass:"fl pNmae"},[t._v("蜂鸣")]),t._v(" "),i("onOff",{attrs:{status:t.isAlam,onoff:t.isAlam},on:{statusChange:t.changeOnOff}})],1),t._v(" "),2==t.orderTypeIndex?i("label",{staticClass:"fl"},[i("span",{staticClass:"fl pNmae"},[t._v("打印等叫单")]),t._v(" "),i("onOff",{attrs:{status:t.isWait,onoff:t.isWait},on:{statusChange:t.waitOnOff}}),t._v(" "),i("div",{staticClass:"fl",staticStyle:{"margin-top":"10px"}},[i("span",{staticClass:"fl pNmae"},[t._v("打印套餐子菜")]),t._v(" "),i("onOff",{attrs:{status:t.isSon,onoff:t.isSon},on:{statusChange:t.sonOnOff}})],1)],1):t._e(),t._v(" "),19==t.orderTypeIndex?i("label",{staticClass:"fl"},[i("span",{staticClass:"fl pNmae"},[t._v("底部标语")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.footerContent,expression:"footerContent"}],staticClass:"input fl",staticStyle:{width:"340px"},attrs:{type:"text",maxlength:"30",placeholder:"请输入底部标语"},domProps:{value:t.footerContent},on:{input:function(e){e.target.composing||(t.footerContent=e.target.value)}}}),t._v(" "),i("div",{staticClass:"fl",staticStyle:{"margin-top":"10px"}},[i("span",{staticClass:"fl pNmae"},[t._v("显示店铺名称")]),t._v(" "),i("onOff",{attrs:{status:t.isShowName,onoff:t.isSon},on:{statusChange:t.isShowOnOff}})],1)]):t._e()],2)])])]),t._v(" "),t.showTowWin?i(t.openGoodList,{tag:"component",attrs:{goodsIds:t.goodsIds,packages:t.packages,isGoods:!0,isOnlyGoods:t.isOnlyGoods,goInName:"isChild"},on:{goodListWin:t.goGoodList}}):t._e()],1)};s._withStripped=!0;var n=i("f60a"),r=i("f6ce"),a=i("8bf4"),o={data:function(){return{orderType:null,printTimes:1,isAlam:!1,footerContent:"",printerId:null,areaIds:[],status:"1",orderTypeIndex:-1,areaIndex:[],printerIndex:-1,goodsLength:null,goodsIds:[],packages:[],packagesLength:null,orderWidth:"",orderHeight:"",orderSpacing:"",blankLine:0,orderName:"",title:"",okStyle:null,cancelStyle:null,createUid:"",showTowWin:!1,isOnlyGoods:!1,isWait:!1,isSon:!1,isShowName:!1}},components:{win:n.default,radioBtn:function(){return i.e("radio_btn").then(i.bind(null,"4dfe"))},selectBtns:function(){return i.e("mul_select").then(i.bind(null,"7d09"))},subaddBtn:function(){return i.e("radio_btn").then(i.bind(null,"e7ea"))},onOff:function(){return i.e("radio_btn").then(i.bind(null,"034b"))}},watch:{orderTypeIndex:"orderTypeIndexChange",goodsIds:"goodsNonull",packages:"packagesNonull"},props:{printerConId:String,types:String,printIndex:Number,showWin:!1,docType:Array,areaIdsList:Array,printerList:Array,printDetial:Object},mounted:function(){var t=r.a.session("userShop");this.createUid=t.user.id,"edit"==this.types&&this.getPrintDetial(),"addPcon"==this.types?(this.title="添加打印机配置",this.okStyle={content:"保存",style:{backgroundColor:"#bd823e",color:"#fff"}},this.cancelStyle={content:"取消",style:{backgroundColor:"#a0a0a0",color:"#fff"}}):"edit"==this.types&&(this.title="修改打印机配置",this.okStyle={content:"确定",style:{backgroundColor:"#29ABE2",color:"#fff"}},this.cancelStyle={content:"删除",style:{backgroundColor:"#982c2c",color:"#fff"}})},methods:{goGoodList:function(t,e){this.goodsIds=e.goodArr,this.packages=e.packArr,this.showTowWin=!1},printConfigWin:function(t){var e={};if("ok"==t){if(console.log(this.orderType),!this.SubmitJudgment(t))return!1;e.printsetId=this.printerConId,e.createUid=this.createUid,e.printerId=this.printerId,e.orderType=this.orderType,e.orderName=this.orderName,e.areaIds=this.areaIndex.toString(),e.goodsIds=this.goodsIds.toString(),e.packageIds=this.packages.toString(),e.footerContent=this.footerContent,e.printTimes=this.printTimes,e.isAlam=Number(this.isAlam),e.isPrintWait=Number(this.isWait),e.orderStatus=this.status,e.type=this.printerList[this.printerIndex].type,e.isPackageGoods=Number(this.isSon),e.isShopName=Number(this.isShowName),e.width=17!=this.orderType&&22!=this.orderType||4!=this.printerList[this.printerIndex].type?"":this.orderWidth,e.height=17!=this.orderType&&22!=this.orderType||4!=this.printerList[this.printerIndex].type?"":this.orderHeight,e.spacing=17!=this.orderType&&22!=this.orderType||4!=this.printerList[this.printerIndex].type?"":this.orderSpacing,e.blankLine=3==this.status||4==this.status||5==this.status?this.blankLine:0}this.$emit("printConfigWin",t,e)},changeIndex:function(t){console.log(t),this.docType[t]&&this.docType[t].name&&(this.orderName=this.docType[t].name),this.orderTypeIndex=t,this.isOnlyGoods=19==t},changePrintIndex:function(t){this.printerIndex=t,this.printerIndex>-1&&(this.printerId=this.printerList[this.printerIndex].id)},waitOnOff:function(t){this.isWait=t?1:0},sonOnOff:function(t){this.isSon=t,console.log(t)},isShowOnOff:function(t){this.isShowName=t},orderTypeIndexChange:function(){0==this.orderTypeIndex||1==this.orderTypeIndex?this.status="1":9==this.orderTypeIndex||2==this.orderTypeIndex||19==this.orderTypeIndex?this.status="4":3==this.orderTypeIndex||11==this.orderTypeIndex?this.status="5":6==this.orderTypeIndex||7==this.orderTypeIndex||21==this.orderTypeIndex?this.status="3":15==this.orderTypeIndex?this.status="6":17==this.orderTypeIndex||18==this.orderTypeIndex?this.status="7":(this.status="2",-1==this.orderTypeIndex&&(this.status="1")),this.orderTypeIndex>-1&&(this.orderType=this.docType[this.orderTypeIndex].type)},areaIndexChange:function(t){this.areaIndex=t},goodsNonull:function(){this.goodsLength=0==this.goodsIds.length?null:this.goodsIds.length},packagesNonull:function(){this.packagesLength=0==this.packages.length?null:this.packages.length},changeNum:function(t){this.printTimes=t},changeOnOff:function(t){this.isAlam=t?1:0},openGood:function(){this.openGoodList=a.default,19==this.orderTypeIndex?this.isOnlyGoods=!0:this.isOnlyGoods=!1,this.showTowWin=!0},getPrintDetial:function(){this.printerId=this.printDetial.printerId;for(var t=0;t<this.printerList.length;t++)this.printerId==this.printerList[t].id&&(this.printerIndex=t);this.orderTypeIndex=this.printDetial.orderType,"21"==this.printDetial.orderType?this.orderTypeIndex=18:"22"==this.printDetial.orderType?this.orderTypeIndex=19:"23"==this.printDetial.orderType?this.orderTypeIndex=20:"24"==this.printDetial.orderType&&(this.orderTypeIndex=21),this.isWait=1==this.printDetial.isPrintWait,this.orderName=this.docType[this.orderTypeIndex].name,this.footerContent=this.printDetial.footerContent,this.printTimes=this.printDetial.printTimes,this.isAlam="0"!=this.printDetial.isAlam,this.areaIndex=""!=this.printDetial.areaIds&&null!=this.printDetial.areaIds?this.printDetial.areaIds.split(","):[],this.goodsIds=""!=this.printDetial.goodsIds&&null!=this.printDetial.goodsIds?this.printDetial.goodsIds.split(","):[],this.packages=""!=this.printDetial.packageIds&&null!=this.printDetial.packageIds?this.printDetial.packageIds.split(","):[],this.orderWidth=this.printDetial.width,this.orderHeight=this.printDetial.height,this.orderSpacing=this.printDetial.spacing,this.blankLine=this.printDetial.blankLine,this.isSon=Boolean(Number(this.printDetial.isPackageGoods)),this.isShowName=Boolean(Number(this.printDetial.isShopName))},SubmitJudgment:function(t){if("ok"==t){if(null==this.orderType)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"单据数据不能为空！"}),!1;if(0==this.printerIndex.length||-1==this.printerIndex)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"打印机不能不选！"}),!1;if(0==this.orderType||1==this.orderType){if(""==this.footerContent)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"页脚不能为空！"}),!1;if(this.footerContent.split("").length>=30)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"页脚长度不能超过30！"}),!1;if(0==this.areaIndex.length)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"区域不能不选！"}),!1}else if(6==this.orderType||7==this.orderType||24==this.orderType){if(0==this.areaIndex.length)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"区域不能不选！"}),!1;if(0==this.goodsIds.length&&""==this.goodsIds&&0==this.packages.length&&""==this.packages)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"商品或套餐必须二选一！"}),!1}else if(9==this.orderType||2==this.orderType){if(0==this.goodsIds.length&&""==this.goodsIds&&0==this.packages.length&&""==this.packages)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"商品或套餐必须二选一！"}),!1}else if(3==this.orderTyp||11==this.orderTyp){if(0==this.areaIndex.length)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"区域不能不选！"}),!1}else if(17==this.orderType&&4==this.printerList[this.printerIndex].type){if(""==this.orderWidth||this.orderWidth<=0)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"宽度不能为空且不能小于或等于0"}),!1;if(""==this.orderHeight||this.orderHeight<=0)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"高度不能为空且不能小于或等于0"}),!1;if(""==this.orderSpacing||this.orderSpacing<=0)return this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"间距不能为空且不能小于或等于0"}),!1}return 3!=this.status&&4!=this.status&&5!=this.status||!(1*this.blankLine>10)||(this.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"头部留白最大为10行"}),!1)}}}},l=(i("046e"),i("7610")),d=Object(l.a)(o,s,[],!1,null,"274594cf",null);d.options.__file="src\\module\\shop_config\\printer_config_win.vue";e.default=d.exports},ef66:function(t,e,i){}}]);