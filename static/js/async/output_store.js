(window.webpackJsonp=window.webpackJsonp||[]).push([["output_store"],{"31bf":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFCQThBNjA5NTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFCQThBNjBBNTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUJBOEE2MDc1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUJBOEE2MDg1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4kIzh0AAABmklEQVR42oyUTSgFURTHvdfzke+yYMNiUKOXyIKUCK9slJKPbGyUslBWVhIrK/UUexsLxEaRzxI2Sh4WJDNJsfGRFFHy/I/+U891Z8apX/d0z73/OXPuuTdgWVaSxppAN8cizt2AHbAAtp2FhmH8jCFFwASzoEYjXkL6QQz0gAsnGExY2ACOXURUqwQn3PNLSDJZBWkem8dAOwXEUsC6bdum82sBMAfSPUT2wTj9ZDBPPxUsQywsGTWDKp9fqQMdzHxYiZWBiGTU5SHwClbAPRgE9S7rhkI8Yp1tgiPWbo9zDyBPs7ZWfq1QE7hlzwyAAs5lsj46yxGhD00gF0yAA7DIuSjIdquBCN1p5jM49nLMB30etXwRoUOX4BR4pD/tc6qnQfaQau9glH4jj34GPLsITYrQBjhTAkuSLv03MEI/SyNiS4vI8cfZSzF2qlgpKGYNw6ATVGhEPkErXoC4c/vlFrcwO7lD1eDKpy4iEoHIuXr7d/nVy3/c/mtQzj1/nhEnM5PZrYEn8MWvS1dvgTZ5zxLfIrFvAQYAHHVSK1WxAuMAAAAASUVORK5CYII="},"448e":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.showMain?i("div",{attrs:{id:"out-store"}},[i("div",{staticClass:"scroll-box"},[i("div",{staticClass:"store-list"},[i("label",{staticClass:"label"},[e._v("原因")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.cause,expression:"cause"}],staticClass:"text",attrs:{type:"text",placeholder:"请输入调度原因",maxlength:"20"},domProps:{value:e.cause},on:{input:function(t){t.target.composing||(e.cause=t.target.value)}}}),e._v(" "),e._m(0)]),e._v(" "),i("div",{staticClass:"store-list"},[i("label",{staticClass:"label required"},[e._v("操作人")]),e._v(" "),i("span",{staticClass:"text",staticStyle:{display:"inline-block",color:"#333333"}},[e._v(e._s(e.userName))]),e._v(" "),i("div",{staticClass:"tip-word"})]),e._v(" "),i("div",{staticClass:"store-list",staticStyle:{"margin-top":"-15px"}},[i("label",{staticClass:"label"},[e._v("调度单号")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.receiptNumber,expression:"receiptNumber"}],staticClass:"text",attrs:{type:"text",placeholder:"请输入调度单号",maxlength:"20"},domProps:{value:e.receiptNumber},on:{input:function(t){t.target.composing||(e.receiptNumber=t.target.value)}}}),e._v(" "),e._m(1)]),e._v(" "),i("div",{staticClass:"store-list"},[i("label",{staticClass:"label"},[e._v("备注")]),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.remark,expression:"remark"}],staticClass:"textarea",attrs:{placeholder:"请输入备注",maxlength:"40"},domProps:{value:e.remark},on:{input:function(t){t.target.composing||(e.remark=t.target.value)}}}),e._v(" "),e._m(2)]),e._v(" "),i("div",{staticClass:"store-list",staticStyle:{"margin-bottom":"20px"}},[i("label",{staticClass:"label required"},[e._v("出货仓库")]),e._v(" "),i("div",{staticClass:"add",on:{click:function(t){e.openAddStoreWin("out")}}},[e._v(" 添加仓库")]),e._v(" "),i("span",{staticClass:"select-store"},[e._v("\n                    "+e._s(e.outWarehouse?"(已选择:"+e.outWarehouse.name+")":"请添加仓库")+"\n                ")])]),e._v(" "),i("div",{staticClass:"store-list",staticStyle:{"margin-bottom":"20px"}},[i("label",{staticClass:"label required"},[e._v("入货仓库")]),e._v(" "),i("div",{staticClass:"add",on:{click:function(t){e.openAddStoreWin("in")}}},[e._v("添加仓库")]),e._v(" "),i("span",{staticClass:"select-store"},[e._v("\n                  "+e._s(e.inWarehouse?"(已选择:"+e.inWarehouse.name+")":"请添加仓库")+"\n                ")])]),e._v(" "),i("div",{staticClass:"store-list",staticStyle:{"margin-bottom":"20px"}},[i("label",{staticClass:"label required"},[e._v("出货商品")]),e._v(" "),i("div",{staticClass:"add",on:{click:function(t){e.addGoods("goods")}}},[e._v("添加商品")])]),e._v(" "),i("div",{staticClass:"store-list",staticStyle:{"margin-bottom":"20px"}},[i("label",{staticClass:"label required"},[e._v("出货物料")]),e._v(" "),i("div",{staticClass:"add",on:{click:function(t){e.addGoods("material")}}},[e._v("添加物料")])]),e._v(" "),e.goodsDetails.length>0||e.materialInfo.length>0?[i("div",{staticClass:"tebBox"},[i("div",{staticClass:"chooseBtn"},[i("span",{class:{select:0==e.selectType},on:{click:function(t){e.selectType=0}}},[e._v("商品")]),e._v(" "),i("span",{class:{select:1==e.selectType},on:{click:function(t){e.selectType=1}}},[e._v("物料")])]),e._v(" "),1==e.selectType&&e.isBrand?i("div",{staticClass:"piceType"},[i("el-select",{attrs:{placeholder:"分销价格切换"},on:{change:e.picestyleChange},model:{value:e.picestyle,callback:function(t){e.picestyle=t},expression:"picestyle"}},e._l(e.dispiceArr,function(e){return i("el-option",{key:e.distributionId,attrs:{label:e.name,value:Number(e.distributionId)}})}))],1):e._e()]),e._v(" "),0==e.selectType?i("div",{staticClass:"add-list"},[i("div",{staticClass:"head"},[e._v("\n\t\t\t\t\t\t商品列表 · 共"),i("span",[e._v(e._s(e.goodsDetails.length))]),e._v("个条目\n\t\t\t\t\t")]),e._v(" "),e._m(3),e._v(" "),i("div",{staticClass:"table-body"},[e._l(e.goodsDetails,function(t,s){return i("div",{key:s,staticClass:"ceil goods"},[i("li",[i("span",{staticStyle:{color:"#ff7147",cursor:"pointer"},on:{click:function(t){e.delList(s,0)}}},[e._v("删除")]),e._v(" "),i("span",{staticClass:"split-line"}),e._v(" "),i("span",{staticStyle:{color:"#35aee2",cursor:"pointer"},on:{click:function(i){e.openBatchWin(t,s)}}},[e._v("批次选择")])]),e._v(" "),i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectNum,expression:"item.selectNum"}],staticClass:"text",attrs:{type:"text",placeholder:"输入数字",disabled:t.haveBatch,maxlength:"10"},domProps:{value:t.selectNum},on:{input:function(i){i.target.composing||e.$set(t,"selectNum",i.target.value)}}})]),e._v(" "),i("li",{staticClass:"ellipsis",attrs:{title:t.goodsName}},[e._v(e._s(t.goodsName))]),e._v(" "),i("li",[e._v(e._s(t.batch))]),e._v(" "),i("li",{staticClass:"ellipsis"},[e._v(e._s(t.barCode))]),e._v(" "),i("li",[e._v(e._s(e.typeList[Number(t.type)]))]),e._v(" "),i("li",[e._v(e._s(t.surplus)+e._s(t.unit))])])}),e._v(" "),e.goodsDetails.length?e._e():i("div",{staticClass:"empty"},[e._v("- 暂无条目 -")])],2)]):e._e(),e._v(" "),1==e.selectType?i("div",{staticClass:"add-list"},[i("div",{staticClass:"head"},[e._v("\n\t\t\t\t\t\t物料列表 · 共"),i("span",[e._v(e._s(e.materialInfo.length))]),e._v("个条目\n\t\t\t\t\t")]),e._v(" "),i("div",{staticClass:"title material"},[i("li",[e._v("操作")]),e._v(" "),i("li",[e._v("出货单位选择")]),e._v(" "),i("li",[e._v("出货数量/重量")]),e._v(" "),i("li",[e._v("物料名称")]),e._v(" "),e.isBrand?i("li",[e._v("分销价格")]):e._e(),e._v(" "),e.isBrand?i("li",[e._v("价格单位")]):e._e(),e._v(" "),i("li",[e._v("库存数量/重量")]),e._v(" "),i("li",[e._v("库存批次数")]),e._v(" "),i("li",[e._v("类型")])]),e._v(" "),i("div",{staticClass:"table-body"},[e._l(e.materialInfo,function(t,s){return i("div",{key:s,staticClass:"ceil material"},[i("li",[i("span",{staticStyle:{color:"#ff7147","font-size":"14px",cursor:"pointer"},on:{click:function(t){e.delList(s,1)}}},[e._v("删除")]),e._v(" "),i("span",{staticClass:"split-line"}),e._v(" "),i("span",{staticStyle:{color:"#35aee2","font-size":"14px",cursor:"pointer"},on:{click:function(i){e.openSuppliesWin(t,s)}}},[e._v("批次选择")])]),e._v(" "),i("li",[i("selectBtn",{attrs:{sorts:t.unitList,index:t.index,width:"100"},on:{selOn:function(t){return e.getUnit(t,s)}}})],1),e._v(" "),i("li",[i("div",{staticClass:"input-box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectNum,expression:"item.selectNum"}],attrs:{placeholder:"输入数字",maxlength:"10",disabled:t.haveBatch},domProps:{value:t.selectNum},on:{input:function(i){i.target.composing||e.$set(t,"selectNum",i.target.value)}}}),e._v(" "),i("div",{staticClass:"ellipsis"},[e._v(e._s(t.selectName))])])]),e._v(" "),i("li",{staticClass:"ellipsis",attrs:{title:t.name}},[e._v(e._s(t.name))]),e._v(" "),e.isBrand?i("li",[i("div",{staticClass:"dispice"},[t.piceValue&&t.distributionId>=0?i("span",[e._v(e._s(t.piceValue))]):e._e(),e._v(" "),-2==t.distributionId?i("div",{staticClass:"input-num"},[i("el-input",{attrs:{type:"text",placeholder:"",maxlength:"9"},model:{value:t.piceValue,callback:function(i){e.$set(t,"piceValue",i)},expression:"item.piceValue"}})],1):e._e(),e._v(" "),i("div",{staticClass:"slebox"},[i("el-select",{attrs:{placeholder:"分销价格切换"},on:{change:function(i){e.piceChange(t)}},model:{value:t.distributionId,callback:function(i){e.$set(t,"distributionId",i)},expression:"item.distributionId"}},e._l(t.rela,function(e){return i("el-option",{key:e.distributionId,attrs:{label:e.distributionName,value:Number(e.distributionId)}})}))],1)])]):e._e(),e._v(" "),e.isBrand?i("li",[i("el-select",{attrs:{disabled:-2!=t.distributionId,placeholder:"单位"},model:{value:t.piceUnitid,callback:function(i){e.$set(t,"piceUnitid",i)},expression:"item.piceUnitid"}},e._l(t.unit,function(e){return i("el-option",{key:e.muId,attrs:{label:e.name,value:e.muId}})}))],1):e._e(),e._v(" "),i("li",{staticClass:"ellipsis"},[e._v(e._s(t.numberUnit))]),e._v(" "),i("li",[e._v(e._s(t.batch))]),e._v(" "),i("li",[e._v(e._s(e.typeCate[t.type]))])])}),e._v(" "),e.materialInfo.length?e._e():i("div",{staticClass:"empty"},[e._v("- 暂无条目 -")])],2)]):e._e()]:e._e(),e._v(" "),i("div",{staticClass:"bottom",class:{"have-goods":e.goodsDetails.length>0||e.materialInfo.length>0}},[i("div",{staticClass:"gray",on:{click:e.returnBefore}},[e._v("取消")]),e._v(" "),i("div",{staticClass:"yellow",on:{click:e.sure}},[e._v("确定")])]),e._v(" "),i("transition",{attrs:{name:"fade"}},[i(e.showCom,{tag:"component",attrs:{pObj:e.comObj},on:{throwWin:e.winWarehouse}})],1)],2)]):e._e(),e._v(" "),e.showSleGoods?i("select-goods",{attrs:{wid:e.outWarehouseId,addBtn:!0,dstShopId:e.inShopId,srcShopId:e.outShopId,shopId:e.outShopId,sleCommodity:e.sleGoods},on:{select:e.getSleGoods}}):e._e(),e._v(" "),e.showSleMaterial?i("select-material",{attrs:{wid:e.outWarehouseId,addBtn:!0,sleSupplies:e.sleMaterial,dstShopId:e.inShopId,srcShopId:e.outShopId,shopId:e.outShopId},on:{select:e.getSleMaterial}}):e._e(),e._v(" "),e.goodsBatchShow?i("goods-batch",{attrs:{wid:e.outWarehouseId,needItem:e.goodsItem,selectItem:e.selectGoods,shopId:e.outShopId},on:{throwWin:e.goodsWinClose}}):e._e(),e._v(" "),e.matBatchShow?i("material-batch",{attrs:{wid:e.outWarehouseId,batchInfo:e.materialItem,selectItem:e.selectMaterial,shopId:e.outShopId,type:!1},on:{getWin:e.suppliWinClose}}):e._e()],1)},a=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip-word"},[t("img",{attrs:{src:i("31bf"),alt:""}}),this._v("限20字以内,数字/字母\n                ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip-word"},[t("img",{attrs:{src:i("31bf"),alt:""}}),this._v(" 限20字以内,数字/字母\n                ")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip-word"},[t("img",{attrs:{src:i("31bf"),alt:""}}),this._v("限40字以内\n                ")])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title goods"},[i("li",[e._v("操作")]),e._v(" "),i("li",[e._v("出货数量")]),e._v(" "),i("li",[e._v("商品名")]),e._v(" "),i("li",[e._v("库存批次数")]),e._v(" "),i("li",[e._v("条形码")]),e._v(" "),i("li",[e._v("商品类型")]),e._v(" "),i("li",[e._v("库存数量/重量")])])}];s._withStripped=!0;var r=i("81a2"),n=i("f6ce"),o=i("05dd"),l=i("bbb9"),u=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],s=!0,a=!1,r=void 0;try{for(var n,o=e[Symbol.iterator]();!(s=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){a=!0,r=e}finally{try{!s&&o.return&&o.return()}finally{if(a)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function s(a,r){try{var n=t[a](r),o=n.value}catch(e){return void i(e)}if(!n.done)return Promise.resolve(o).then(function(e){s("next",e)},function(e){s("throw",e)});e(o)}("next")})}}var d={data:function(){return{showCom:"",comObj:{},cause:"",receiptNumber:"",remark:"",goodsInfo:"",userName:"",userId:"",selectType:0,unitName:[],allUnit:[],showMain:!0,showSleGoods:!1,showSleMaterial:!1,tabIndex:0,sleGoods:[],sleMaterial:[],typeList:["普通商品","称重商品"],goodsItem:"",selIndex:"",sleItem:"",nextUnit:[],goodsBatchShow:!1,matBatchShow:!1,suppliesItem:"",materialInfo:[],item:"",winIndex:0,wareList:[],outWarehouse:"",outWarehouseId:"",outWhSelected:"",inWarehouse:"",inWarehouseId:"",inWhSelected:"",isPutIn:null,goodsDetails:[],copyGoodsDetails:[],goodsBatchDetails:[],materialDetail:[],goodsIndex:"",bouncedType:null,goodsDetailsNum:null,materialIndex:"",goodsOut:[],suppliesOut:[],materialItem:{},inShopId:"",outShopId:"",selectGoods:[],selectMaterial:[],clearArr:["goodsDetails","materialInfo","sleGoods","sleMaterial","goodsOut","suppliesOut"],isClick:!1,typeCate:["成品","半成品","普通物料"],dispiceArr:[],isBrand:!1,picestyle:""}},mounted:function(){this.isBrand="3"==n.a.session("userShop").currentShop.ischain,this.initData(),this.getWarehouse(),this.getDistr()},components:{goodsBatch:function(){return i.e("output_store_batch_win").then(i.bind(null,"a74d"))},materialBatch:function(){return i.e("output_material_batch_win").then(i.bind(null,"40a5"))},addStore:function(){return i.e("choose_warehouse_win").then(i.bind(null,"f8b9"))},selectBtn:function(){return i.e("select_btn").then(i.bind(null,"3d41"))},selectGoods:function(){return i.e("output_select_goods_ware").then(i.bind(null,"6dab"))},selectMaterial:function(){return i.e("output_select_supplies_ware").then(i.bind(null,"09f6"))}},methods:{addGoods:function(e){this.addVeri()&&(console.log(this.sleMaterial),"goods"==e?this.showSleGoods=!0:"material"==e&&(this.showSleMaterial=!0),this.showMain=!1)},addVeri:function(){return this.outWarehouseId?!!this.inWarehouseId||(this.myAlert("请选择入货仓库"),!1):(this.myAlert("请选择出货仓库"),!1)},getUnit:function(e,t){var i=this.materialInfo[t];i.selectNum="",i.haveBatch=!1,i.selectName=i.unit[e].name,i.selectValue=i.unit[e].value,this.materialInfo.splice(t,1,i)},warehouseVeri:function(e){return!this.inWarehouseId&&!this.outWarehouseId||this.inWarehouseId!=this.outWarehouseId||(this.myAlert("出货/入货仓库不能相同"),this[e]="",!1)},openAddStoreWin:function(e){this.bouncedType=0,"in"==e?(this.isPutIn="in",this.comObj.owner=this.inWarehouse,this.comObj.title="选择入货仓库",this.showCom="addStore"):"out"==e&&(this.isPutIn="out",this.comObj.owner=this.outWarehouse,this.comObj.title="选择出货仓库",this.showCom="addStore")},winWarehouse:function(e,t){var i=this,s="",a="",r="",n="";if("ok"==e){if("out"==this.isPutIn?(s="out",a="in",r="出货",n="入货"):"in"==this.isPutIn&&(s="in",a="out",r="入货",n="出货"),!t.id)return void this.myAlert(r+"仓库不能为空");if(!this[s+"WarehouseId"]&&!this[a+"WarehouseId"]||t.id!=this[a+"WarehouseId"]){if(t.id!=this[s+"WarehouseId"]){var o=!0,l=!1,u=void 0;try{for(var c,d=this.clearArr[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){this[c.value]=[]}}catch(e){l=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw u}}}this.showCom="",this.setWareInformation(s,t)}else this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"该仓库为"+n+"仓库，是否替换为"+r+"仓库",callback:function(e){if("ok"==e){var n={allList:i.wareList,title:"选择"+r+"仓库",owner:t};i.comObj=n,i.setWareInformation(a,""),i.setWareInformation(s,t),i.showCom="";var o=!0,l=!1,u=void 0;try{for(var c,d=i.clearArr[Symbol.iterator]();!(o=(c=d.next()).done);o=!0){var h=c.value;i[h]=[]}}catch(e){l=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw u}}}}})}else this.showCom=""},setWareInformation:function(e,t){this[e+"WarehouseId"]=t?t.id:"",this[e+"Warehouse"]=t||"",this[e+"ShopId"]=t?t.shopId:""},getSleGoods:function(e){this.$store.commit("setPageTools",[]),this.selectType=0,this.showSleGoods=!1,this.showMain=!0,this.sleGoods=e;var t=[];if(e){for(var i in e){var s=e[i],a={id:s.gid,goodsName:s.goodsName,barCode:s.barCode,unit:s.unit,type:s.type,batch:s.batch,surplus:s.surplus,batchId:"",selectNum:"",haveBatch:!1};t.push(a)}this.goodsDetails=t,this.selectType=this.goodsDetails.length?0:1}},getSleMaterial:function(e){this.$store.commit("setPageTools",[]),this.selectType=1,this.sleMaterial=e,this.showSleMaterial=!1,this.showMain=!0;var t=[];if(e){var i=!0,s=!1,a=void 0;try{for(var r,n=e[Symbol.iterator]();!(i=(r=n.next()).done);i=!0){var o=r.value,l={id:o.id,name:o.name,type:o.type,unit:o.unit,selUnit:"",batch:o.batch,surplus:o.surplus,selectNum:"",index:0,haveBatch:!1,validity:o.validity,validityType:o.validityType},u=[],c=!0,d=!1,h=void 0;try{for(var m,p=o.cate[Symbol.iterator]();!(c=(m=p.next()).done);c=!0){var v=m.value;u.push(v.name)}}catch(e){d=!0,h=e}finally{try{!c&&p.return&&p.return()}finally{if(d)throw h}}l.materialCategoryName=u.join(","),t.push(l)}}catch(e){s=!0,a=e}finally{try{!i&&n.return&&n.return()}finally{if(s)throw a}}this.materialInfo=t,this.picestyle="",this.unitConversion(this.materialInfo),this.getsuppliespice()}},delList:function(e,t){var i=this;this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确认删除？",callback:function(s){"ok"==s&&i.delListEach(e,t)}})},delListEach:function(e,t){var i="",s="",a="",r="";0==t?(i="goodsDetails",s="sleGoods",a="goodsOut",r="id"):(i="materialInfo",s="sleMaterial",a="suppliesOut",r="mid");for(var n=this[i][e].id,o=0;o<this[a].length;o++){n==this[a][o][r]&&(this[a].splice(o,1),o--)}this[i].splice(e,1),this[s].splice(e,1)},unitConversion:function(e){var t=!0,i=!1,s=void 0;try{for(var a,r=e[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var n=a.value,l=[];for(var u in n.unit){var c=n.unit[u];1==c.isDefault&&(n.showName=c.name,n.showValue=c.value,n.defaultValue=c.value,n.defaultName=c.name),1==c.isMin&&(n.minName=c.name,n.selectName=c.name,n.selectValue=c.value,n.index=u),l.push(c.name)}n.unitList=l,n.comNum=n.surplus,n.numberUnit=o.a.comUnit(n.surplus,n.showValue,n.showName,n.minName)}}catch(e){i=!0,s=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw s}}console.log(e)},comUnit:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var s=u(t,5),a=s[0],r=s[1],n=s[2],l=s[3],c=s[4];return o.a.comUnit(a,r,n,l,c)},openBatchWin:function(e,t){this.outWarehouseId?(this.goodsItem=e,this.goodsIndex=t,this.selectGoods=this.goodsItem.batchInfo,this.goodsBatchShow=!0):this.myAlert("请选择出货仓库")},openSuppliesWin:function(e,t){this.inWarehouseId?(this.materialItem=e,this.materialIndex=t,this.selectMaterial=this.materialItem.batchInfo,this.matBatchShow=!0):this.myAlert("请选择入货仓库")},goodsWinClose:function(e,t){if(this.goodsBatchShow=!1,"ok"==e){var i;this.goodsItem.batchInfo=t;var s=[],a=0,r={};for(var n in t){if(Number(t[n].surplus)<Number(t[n].outNum))return void this.myAlert("出货数量不能大于当前库存数量");r={id:this.goodsItem.id,barCode:this.goodsItem.barCode,batchId:t[n].batchId,num:t[n].outNum},t[n].outNum&&(s.push(r),a+=Number(r.num))}s.length>0?this.goodsItem.haveBatch=!0:this.goodsItem.haveBatch=!1,this.goodsItem.selectNum=a,this.spliceArr(this.goodsOut,this.goodsItem.id,"id"),(i=this.goodsOut).push.apply(i,s)}},suppliWinClose:function(e,t,i){if(this.matBatchShow=!1,"ok"==e){var s;console.log(t),this.materialItem.batchInfo=t;var a=[],r=0,n=!0,o=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done);n=!0){var d=u.value;if(Number(d.twoNum)>0){var h={mid:this.materialItem.id,type:0,batchId:d.batchId,num:Number(d.twoNum)*parseInt(i.value),selectUnitName:this.materialItem.selectName};r+=Number(d.twoNum),a.push(h)}}}catch(e){o=!0,l=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw l}}this.materialItem.selectNum=r,a.length>0?this.materialItem.haveBatch=!0:this.materialItem.haveBatch=!1,this.spliceArr(this.suppliesOut,this.materialItem.id,"mid"),(s=this.suppliesOut).push.apply(s,a),console.log(this.materialInfo)}},spliceArr:function(e,t,i){for(var s=0;s<e.length;s++){e[s][i]==t&&(e.splice(s,1),s--)}},initData:function(){var e=n.a.session("userShop");this.userName=e.user.name,this.userId=e.user.id},myAlert:function(e){this.$store.commit("setWin",{title:"操作提示",content:e})},sure:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var i,s,a,r,n,o,l,u,c,d,h,m,p,v,b,f,I,_,g,y,N,w,x,C,k;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.addVeri()){t.next=2;break}return t.abrupt("return");case 2:t.t0=regeneratorRuntime.keys(e.goodsDetails);case 3:if((t.t1=t.t0()).done){t.next=58;break}if(i=t.t1.value,s=e.goodsDetails[i],a=Number(s.selectNum),r=/^[0-9]*$/g,n=/^[0-9]*\.?[0-9]{0,3}$/g,!isNaN(a)){t.next=12;break}return e.myAlert("商品("+s.goodsName+")出货数量必须为数字"),t.abrupt("return");case 12:if(0!=s.type||r.test(a)){t.next=15;break}return e.myAlert("普通商品("+s.goodsName+")出货数量只能为整数"),t.abrupt("return");case 15:if(1!=s.type||n.test(a)){t.next=18;break}return e.myAlert("称重商品("+s.goodsName+")出货数量只能为小数点后三位"),t.abrupt("return");case 18:if(!(a<=0)){t.next=21;break}return e.myAlert("商品("+s.goodsName+")出货数量必须大于0"),t.abrupt("return");case 21:if(!(a>Number(s.surplus))){t.next=24;break}return e.myAlert("商品("+s.goodsName+")出货数量不能大于当前库存数量"),t.abrupt("return");case 24:if(!!s.haveBatch&&s.haveBatch){t.next=56;break}o={id:s.id,barCode:s.barCode,batchId:"",num:s.selectNum||""},l=!1,u=!0,c=!1,d=void 0,t.prev=31,h=e.goodsOut[Symbol.iterator]();case 33:if(u=(m=h.next()).done){t.next=41;break}if(m.value.id!=s.id){t.next=38;break}return l=!0,t.abrupt("break",41);case 38:u=!0,t.next=33;break;case 41:t.next=47;break;case 43:t.prev=43,t.t2=t.catch(31),c=!0,d=t.t2;case 47:t.prev=47,t.prev=48,!u&&h.return&&h.return();case 50:if(t.prev=50,!c){t.next=53;break}throw d;case 53:return t.finish(50);case 54:return t.finish(47);case 55:l||e.goodsOut.push(o);case 56:t.next=3;break;case 58:t.t3=regeneratorRuntime.keys(e.materialInfo);case 59:if((t.t4=t.t3()).done){t.next=118;break}if(p=t.t4.value,v=e.materialInfo[p],b=Number(v.selectNum)*Number(v.selectValue),f=b,I=/^[0-9]*\.?[0-9]{0,3}$/g,!isNaN(f)){t.next=68;break}return e.myAlert("物料("+v.name+")出货物料数量必须为数字"),t.abrupt("return");case 68:if(I.test(Number(v.selectNum))){t.next=71;break}return e.myAlert("物料("+v.name+")出货数量只能为小数点后三位"),t.abrupt("return");case 71:if(!(f<=0)){t.next=74;break}return e.myAlert("物料("+v.name+")出货数量必须大于0"),t.abrupt("return");case 74:if(!(f>Number(v.comNum))){t.next=77;break}return e.myAlert("物料("+v.name+")出货数量不能大于当前库存数量"),t.abrupt("return");case 77:if(v.piceValue||!e.isBrand||0===v.piceValue||1===v.isPurchase||0===v.piceValue){t.next=80;break}return e.$message.error("请选择分销价！"),t.abrupt("return");case 80:if(v.piceUnitid||!e.isBrand||1===v.isPurchase){t.next=83;break}return e.$message.error("请选择分销价单位！"),t.abrupt("return");case 83:if(!!v.haveBatch&&v.haveBatch){t.next=116;break}_={mid:v.id,type:v.type,batchId:"",num:b,selectUnitName:v.selectName},e.isBrand&&Object.assign(_,{distributionPrice:v.piceValue,distributionUnit:"等于进价"==v.piceUnitid?0:v.piceUnitid,isPurchase:v.isPurchase}),g=!1,y=!0,N=!1,w=void 0,t.prev=91,x=e.suppliesOut[Symbol.iterator]();case 93:if(y=(C=x.next()).done){t.next=101;break}if(C.value.mid!=v.id){t.next=98;break}return g=!0,t.abrupt("break",101);case 98:y=!0,t.next=93;break;case 101:t.next=107;break;case 103:t.prev=103,t.t5=t.catch(91),N=!0,w=t.t5;case 107:t.prev=107,t.prev=108,!y&&x.return&&x.return();case 110:if(t.prev=110,!N){t.next=113;break}throw w;case 113:return t.finish(110);case 114:return t.finish(107);case 115:g||e.suppliesOut.push(_);case 116:t.next=59;break;case 118:if(e.goodsOut.length||e.suppliesOut.length){t.next=121;break}return e.myAlert("请先添加商品或物料"),t.abrupt("return");case 121:if(k=/^[0-9a-zA-Z]*$/g,!e.receiptNumber||k.test(e.receiptNumber)){t.next=125;break}return e.myAlert("出货单号只能是英文字母或数字"),t.abrupt("return");case 125:e.addDispatchRecord();case 126:case"end":return t.stop()}},t,e,[[31,43,47,55],[48,,50,54],[91,103,107,115],[108,,110,114]])}))()},returnBefore:function(){window.history.go(-1)},addDispatchRecord:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isClick){t.next=3;break}return e.$store.commit("setWin",{title:"温馨提示",content:"请勿重复点击"}),t.abrupt("return");case 3:return e.isClick=!0,i=null,t.prev=5,t.next=8,r.a.addQuickDispatch({data:{cause:e.cause,receiptNumber:e.receiptNumber,remark:e.remark,outWarehouse:e.outWarehouseId,intoWarehouse:e.inWarehouseId,goodsDetail:e.goodsOut.length?e.goodsOut:"",materialDetail:e.suppliesOut.length?e.suppliesOut:""}},!0);case 8:i=t.sent,t.next=15;break;case 11:t.prev=11,t.t0=t.catch(5),e.$store.commit("setWin",{title:"错误提示",content:t.t0.error.message}),e.isClick=!1;case 15:i?e.$store.commit("setWin",{title:"提示",content:"快速调度成功",callback:function(){i.outWname=e.outWarehouse.name,i.intoWname=e.inWarehouse.name,i.createName=e.userName,n.a.session("outStoreDetails",i),e.$router.push({path:"outputShipper",query:e.$route.query})}}):e.isClick=!1;case 16:case"end":return t.stop()}},t,e,[[5,11]])}))()},getWarehouse:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var i,s,a,n,o,l,u,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.warehouseList();case 2:if(i=t.sent,s=[],!i){t.next=26;break}for(a=!0,n=!1,o=void 0,t.prev=8,l=i[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)c=u.value,d={id:c.id,name:c.name},0!=c.shopId?(d.ischain=0,d.shopId=c.shopId):(d.ischain=1,d.shopId=c.brandId),s.push(d);t.next=16;break;case 12:t.prev=12,t.t0=t.catch(8),n=!0,o=t.t0;case 16:t.prev=16,t.prev=17,!a&&l.return&&l.return();case 19:if(t.prev=19,!n){t.next=22;break}throw o;case 22:return t.finish(19);case 23:return t.finish(16);case 24:e.wareList=s,e.comObj={allList:s};case 26:case"end":return t.stop()}},t,e,[[8,12,16,24],[17,,19,23]])}))()},getDistr:function(){var e=this;return c(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.invoicingGetDistributionConfig();case 2:t.sent.map(function(t){var i={};Object.assign(i,{distributionId:t.id,value:"",name:t.name,unitId:""}),e.dispiceArr.push(i)}),e.dispiceArr=e.dispiceArr.concat([{distributionId:-1,value:"",name:"等于进价",unitId:""},{distributionId:-2,value:"",name:"自定义价格",unitId:""}]);case 5:case"end":return t.stop()}},t,e)}))()},picestyleChange:function(e){this.materialInfo.map(function(t){var i=!0;t.distributionId=Number(e),t.piceUnitid="",t.piceValue="",t.isPurchase=0,-1!=e?t.rela.map(function(e){e.distributionId==t.distributionId&&(i=!1,t.piceValue=e.value,t.piceUnitid=e.unitId)}):(i=!1,t.isPurchase=1,t.piceValue=0,t.piceUnitid="等于进价"),i&&(t.distributionId=-2)})},getsuppliespice:function(){var e=this;return c(regeneratorRuntime.mark(function t(){var i,s,a,n,o,u,c,d,h,m,p,v,b,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=[],e.materialInfo.map(function(e){i.push(e.id)}),t.next=4,r.a.materialGetDistributionByMids({data:{mids:i.join(",")}});case 4:s=t.sent,a=!0,n=!1,o=void 0,t.prev=8,u=s[Symbol.iterator]();case 10:if(a=(c=u.next()).done){t.next=35;break}for((d=c.value).rela=d.rela.concat([{distributionId:-1,value:"",distributionName:"等于进价",unitId:""},{distributionId:-2,value:"",distributionName:"自定义价格",unitId:""}]),h=!0,m=!1,p=void 0,t.prev=16,v=e.materialInfo[Symbol.iterator]();!(h=(b=v.next()).done);h=!0)f=b.value,d.id==f.id&&(f.rela=d.rela);t.next=24;break;case 20:t.prev=20,t.t0=t.catch(16),m=!0,p=t.t0;case 24:t.prev=24,t.prev=25,!h&&v.return&&v.return();case 27:if(t.prev=27,!m){t.next=30;break}throw p;case 30:return t.finish(27);case 31:return t.finish(24);case 32:a=!0,t.next=10;break;case 35:t.next=41;break;case 37:t.prev=37,t.t1=t.catch(8),n=!0,o=t.t1;case 41:t.prev=41,t.prev=42,!a&&u.return&&u.return();case 44:if(t.prev=44,!n){t.next=47;break}throw o;case 47:return t.finish(44);case 48:return t.finish(41);case 49:e.materialInfo=l.a.deepCopy(e.materialInfo),console.log(e.materialInfo),console.log(s);case 52:case"end":return t.stop()}},t,e,[[8,37,41,49],[16,20,24,32],[25,,27,31],[42,,44,48]])}))()},piceChange:function(e){e.piceUnitid="",e.piceValue="",e.isPurchase=0,-1==e.distributionId?(e.isPurchase=1,e.piceValue=0,e.piceUnitid="等于进价"):e.rela.map(function(t){t.distributionId==e.distributionId&&(e.piceValue=t.value,e.piceUnitid=t.unitId)}),this.materialInfo=l.a.deepCopy(this.materialInfo)}}},h=(i("9b4c"),i("6ceb")),m=Object(h.a)(d,s,a,!1,null,"eb90fbc0",null);m.options.__file="src\\module\\invoicing_system\\warehouse_manage\\output_store.vue";t.default=m.exports},"59be":function(e,t,i){},"9b4c":function(e,t,i){"use strict";var s=i("59be");i.n(s).a}}]);