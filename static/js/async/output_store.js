(window.webpackJsonp=window.webpackJsonp||[]).push([["output_store"],{"31bf":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFCQThBNjA5NTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFCQThBNjBBNTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUJBOEE2MDc1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUJBOEE2MDg1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4kIzh0AAABmklEQVR42oyUTSgFURTHvdfzke+yYMNiUKOXyIKUCK9slJKPbGyUslBWVhIrK/UUexsLxEaRzxI2Sh4WJDNJsfGRFFHy/I/+U891Z8apX/d0z73/OXPuuTdgWVaSxppAN8cizt2AHbAAtp2FhmH8jCFFwASzoEYjXkL6QQz0gAsnGExY2ACOXURUqwQn3PNLSDJZBWkem8dAOwXEUsC6bdum82sBMAfSPUT2wTj9ZDBPPxUsQywsGTWDKp9fqQMdzHxYiZWBiGTU5SHwClbAPRgE9S7rhkI8Yp1tgiPWbo9zDyBPs7ZWfq1QE7hlzwyAAs5lsj46yxGhD00gF0yAA7DIuSjIdquBCN1p5jM49nLMB30etXwRoUOX4BR4pD/tc6qnQfaQau9glH4jj34GPLsITYrQBjhTAkuSLv03MEI/SyNiS4vI8cfZSzF2qlgpKGYNw6ATVGhEPkErXoC4c/vlFrcwO7lD1eDKpy4iEoHIuXr7d/nVy3/c/mtQzj1/nhEnM5PZrYEn8MWvS1dvgTZ5zxLfIrFvAQYAHHVSK1WxAuMAAAAASUVORK5CYII="},"3dd8":function(t,e,s){},"448e":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.showMain?s("div",{attrs:{id:"out-store"}},[s("div",{staticClass:"scroll-box"},[s("div",{staticClass:"store-list"},[s("label",{staticClass:"label"},[t._v("原因")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.cause,expression:"cause"}],staticClass:"text",attrs:{type:"text",placeholder:"请输入调度原因",maxlength:"20"},domProps:{value:t.cause},on:{input:function(e){e.target.composing||(t.cause=e.target.value)}}}),t._v(" "),t._m(0)]),t._v(" "),s("div",{staticClass:"store-list"},[s("label",{staticClass:"label required"},[t._v("操作人")]),t._v(" "),s("span",{staticClass:"text",staticStyle:{display:"inline-block",color:"#333333"}},[t._v(t._s(t.userName))]),t._v(" "),s("div",{staticClass:"tip-word"})]),t._v(" "),s("div",{staticClass:"store-list",staticStyle:{"margin-top":"-15px"}},[s("label",{staticClass:"label"},[t._v("调度单号")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.receiptNumber,expression:"receiptNumber"}],staticClass:"text",attrs:{type:"text",placeholder:"请输入调度单号",maxlength:"20"},domProps:{value:t.receiptNumber},on:{input:function(e){e.target.composing||(t.receiptNumber=e.target.value)}}}),t._v(" "),t._m(1)]),t._v(" "),s("div",{staticClass:"store-list"},[s("label",{staticClass:"label"},[t._v("备注")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],staticClass:"textarea",attrs:{placeholder:"请输入备注",maxlength:"40"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}}),t._v(" "),t._m(2)]),t._v(" "),s("div",{staticClass:"store-list",staticStyle:{"margin-bottom":"20px"}},[s("label",{staticClass:"label required"},[t._v("出货仓库")]),t._v(" "),s("div",{staticClass:"add",on:{click:function(e){t.openAddStoreWin("out")}}},[t._v(" 添加仓库")]),t._v(" "),s("span",{staticClass:"select-store"},[t._v("\n                    "+t._s(t.outWarehouse?"(已选择:"+t.outWarehouse.name+")":"请添加仓库")+"\n                ")])]),t._v(" "),s("div",{staticClass:"store-list",staticStyle:{"margin-bottom":"20px"}},[s("label",{staticClass:"label required"},[t._v("入货仓库")]),t._v(" "),s("div",{staticClass:"add",on:{click:function(e){t.openAddStoreWin("in")}}},[t._v("添加仓库")]),t._v(" "),s("span",{staticClass:"select-store"},[t._v("\n                  "+t._s(t.inWarehouse?"(已选择:"+t.inWarehouse.name+")":"请添加仓库")+"\n                ")])]),t._v(" "),s("div",{staticClass:"store-list",staticStyle:{"margin-bottom":"20px"}},[s("label",{staticClass:"label required"},[t._v("出货商品")]),t._v(" "),s("div",{staticClass:"add",on:{click:function(e){t.addGoods("goods")}}},[t._v("添加商品")])]),t._v(" "),s("div",{staticClass:"store-list",staticStyle:{"margin-bottom":"20px"}},[s("label",{staticClass:"label required"},[t._v("出货物料")]),t._v(" "),s("div",{staticClass:"add",on:{click:function(e){t.addGoods("material")}}},[t._v("添加物料")])]),t._v(" "),t.goodsDetails.length>0||t.materialInfo.length>0?[s("div",{staticClass:"chooseBtn"},[s("span",{class:{select:0==t.selectType},on:{click:function(e){t.selectType=0}}},[t._v("商品")]),t._v(" "),s("span",{class:{select:1==t.selectType},on:{click:function(e){t.selectType=1}}},[t._v("物料")])]),t._v(" "),0==t.selectType?s("div",{staticClass:"add-list"},[s("div",{staticClass:"head"},[t._v("\n\t\t\t\t\t\t商品列表 · 共"),s("span",[t._v(t._s(t.goodsDetails.length))]),t._v("个条目\n\t\t\t\t\t")]),t._v(" "),t._m(3),t._v(" "),s("div",{staticClass:"table-body"},[t._l(t.goodsDetails,function(e,i){return s("div",{key:i,staticClass:"ceil goods"},[s("li",[s("span",{staticStyle:{color:"#ff7147",cursor:"pointer"},on:{click:function(e){t.delList(i,0)}}},[t._v("删除")]),t._v(" "),s("span",{staticClass:"split-line"}),t._v(" "),s("span",{staticStyle:{color:"#35aee2",cursor:"pointer"},on:{click:function(s){t.openBatchWin(e,i)}}},[t._v("批次选择")])]),t._v(" "),s("li",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectNum,expression:"item.selectNum"}],staticClass:"text",attrs:{type:"text",placeholder:"输入数字",disabled:e.haveBatch,maxlength:"10"},domProps:{value:e.selectNum},on:{input:function(s){s.target.composing||t.$set(e,"selectNum",s.target.value)}}})]),t._v(" "),s("li",{staticClass:"ellipsis",attrs:{title:e.goodsName}},[t._v(t._s(e.goodsName))]),t._v(" "),s("li",[t._v(t._s(e.batch))]),t._v(" "),s("li",{staticClass:"ellipsis"},[t._v(t._s(e.barCode))]),t._v(" "),s("li",[t._v(t._s(t.typeList[Number(e.type)]))]),t._v(" "),s("li",[t._v(t._s(e.surplus)+t._s(e.unit))])])}),t._v(" "),t.goodsDetails.length?t._e():s("div",{staticClass:"empty"},[t._v("- 暂无条目 -")])],2)]):t._e(),t._v(" "),1==t.selectType?s("div",{staticClass:"add-list"},[s("div",{staticClass:"head"},[t._v("\n\t\t\t\t\t\t物料列表 · 共"),s("span",[t._v(t._s(t.materialInfo.length))]),t._v("个条目\n\t\t\t\t\t")]),t._v(" "),t._m(4),t._v(" "),s("div",{staticClass:"table-body"},[t._l(t.materialInfo,function(e,i){return s("div",{key:i,staticClass:"ceil material"},[s("li",[s("span",{staticStyle:{color:"#ff7147","font-size":"14px",cursor:"pointer"},on:{click:function(e){t.delList(i,1)}}},[t._v("删除")]),t._v(" "),s("span",{staticClass:"split-line"}),t._v(" "),s("span",{staticStyle:{color:"#35aee2","font-size":"14px",cursor:"pointer"},on:{click:function(s){t.openSuppliesWin(e,i)}}},[t._v("批次选择")])]),t._v(" "),s("li",[s("selectBtn",{attrs:{sorts:e.unitList,index:e.index,width:"100"},on:{selOn:function(e){return t.getUnit(e,i)}}})],1),t._v(" "),s("li",[s("div",{staticClass:"input-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectNum,expression:"item.selectNum"}],attrs:{placeholder:"输入数字",maxlength:"10",disabled:e.haveBatch},domProps:{value:e.selectNum},on:{input:function(s){s.target.composing||t.$set(e,"selectNum",s.target.value)}}}),t._v(" "),s("div",{staticClass:"ellipsis"},[t._v(t._s(e.selectName))])])]),t._v(" "),s("li",{staticClass:"ellipsis",attrs:{title:e.name}},[t._v(t._s(e.name))]),t._v(" "),s("li",{staticClass:"ellipsis"},[t._v(t._s(e.numberUnit))]),t._v(" "),s("li",[t._v(t._s(e.batch))]),t._v(" "),s("li",[t._v("物料")])])}),t._v(" "),t.materialInfo.length?t._e():s("div",{staticClass:"empty"},[t._v("- 暂无条目 -")])],2)]):t._e()]:t._e(),t._v(" "),s("div",{staticClass:"bottom",class:{"have-goods":t.goodsDetails.length>0||t.materialInfo.length>0}},[s("div",{staticClass:"gray",on:{click:t.returnBefore}},[t._v("取消")]),t._v(" "),s("div",{staticClass:"yellow",on:{click:t.sure}},[t._v("确定")])]),t._v(" "),s("transition",{attrs:{name:"fade"}},[s(t.showCom,{tag:"component",attrs:{pObj:t.comObj},on:{throwWin:t.winWarehouse}})],1)],2)]):t._e(),t._v(" "),t.showSleGoods?s("select-goods",{attrs:{wid:t.outWarehouseId,addBtn:!0,dstShopId:t.inShopId,srcShopId:t.outShopId,shopId:t.outShopId,sleCommodity:t.sleGoods},on:{select:t.getSleGoods}}):t._e(),t._v(" "),t.showSleMaterial?s("select-material",{attrs:{wid:t.outWarehouseId,addBtn:!0,getSupplies:t.sleMaterial,dstShopId:t.inShopId,srcShopId:t.outShopId,shopId:t.outShopId},on:{select:t.getSleMaterial}}):t._e(),t._v(" "),t.goodsBatchShow?s("goods-batch",{attrs:{wid:t.outWarehouseId,needItem:t.goodsItem,selectItem:t.selectGoods,shopId:t.outShopId},on:{throwWin:t.goodsWinClose}}):t._e(),t._v(" "),t.matBatchShow?s("material-batch",{attrs:{wid:t.outWarehouseId,batchInfo:t.materialItem,selectItem:t.selectMaterial,shopId:t.outShopId,type:!1},on:{getWin:t.suppliWinClose}}):t._e()],1)},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip-word"},[e("img",{attrs:{src:s("31bf"),alt:""}}),this._v("限20字以内,数字/字母\n                ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip-word"},[e("img",{attrs:{src:s("31bf"),alt:""}}),this._v(" 限20字以内,数字/字母\n                ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip-word"},[e("img",{attrs:{src:s("31bf"),alt:""}}),this._v("限40字以内\n                ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title goods"},[s("li",[t._v("操作")]),t._v(" "),s("li",[t._v("出货数量")]),t._v(" "),s("li",[t._v("商品名")]),t._v(" "),s("li",[t._v("库存批次数")]),t._v(" "),s("li",[t._v("条形码")]),t._v(" "),s("li",[t._v("商品类型")]),t._v(" "),s("li",[t._v("库存数量/重量")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title material"},[s("li",[t._v("操作")]),t._v(" "),s("li",[t._v("出货单位选择")]),t._v(" "),s("li",[t._v("出货数量/重量")]),t._v(" "),s("li",[t._v("物料名称")]),t._v(" "),s("li",[t._v("库存数量/重量")]),t._v(" "),s("li",[t._v("库存批次数")]),t._v(" "),s("li",[t._v("类型")])])}];i._withStripped=!0;var r=s("81a2"),o=s("f6ce"),n=s("05dd"),l=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var s=[],i=!0,a=!1,r=void 0;try{for(var o,n=t[Symbol.iterator]();!(i=(o=n.next()).done)&&(s.push(o.value),!e||s.length!==e);i=!0);}catch(t){a=!0,r=t}finally{try{!i&&n.return&&n.return()}finally{if(a)throw r}}return s}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function i(a,r){try{var o=e[a](r),n=o.value}catch(t){return void s(t)}if(!o.done)return Promise.resolve(n).then(function(t){i("next",t)},function(t){i("throw",t)});t(n)}("next")})}}var c={data:function(){return{showCom:"",comObj:{},cause:"",receiptNumber:"",remark:"",goodsInfo:"",userName:"",userId:"",selectType:0,unitName:[],allUnit:[],showMain:!0,showSleGoods:!1,showSleMaterial:!1,tabIndex:0,sleGoods:[],sleMaterial:[],typeList:["普通商品","称重商品"],goodsItem:"",selIndex:"",sleItem:"",nextUnit:[],goodsBatchShow:!1,matBatchShow:!1,suppliesItem:"",isBrand:0,materialInfo:[],item:"",winIndex:0,wareList:[],outWarehouse:"",outWarehouseId:"",outWhSelected:"",inWarehouse:"",inWarehouseId:"",inWhSelected:"",isPutIn:null,goodsDetails:[],copyGoodsDetails:[],goodsBatchDetails:[],materialDetail:[],goodsIndex:"",bouncedType:null,goodsDetailsNum:null,materialIndex:"",goodsOut:[],suppliesOut:[],materialItem:{},inShopId:"",outShopId:"",selectGoods:[],selectMaterial:[],clearArr:["goodsDetails","materialInfo","sleGoods","sleMaterial","goodsOut","suppliesOut"],isClick:!1}},mounted:function(){this.initData(),this.getWarehouse()},components:{goodsBatch:function(){return s.e("output_store_batch_win").then(s.bind(null,"a74d"))},materialBatch:function(){return s.e("output_material_batch_win").then(s.bind(null,"40a5"))},addStore:function(){return s.e("choose_warehouse_win").then(s.bind(null,"f8b9"))},selectBtn:function(){return s.e("select_btn").then(s.bind(null,"3d41"))},selectGoods:function(){return s.e("output_select_goods_ware").then(s.bind(null,"6dab"))},selectMaterial:function(){return s.e("output_select_supplies_ware").then(s.bind(null,"09f6"))}},methods:{addGoods:function(t){this.addVeri()&&("goods"==t?this.showSleGoods=!0:"material"==t&&(this.showSleMaterial=!0),this.showMain=!1)},addVeri:function(){return this.outWarehouseId?!!this.inWarehouseId||(this.myAlert("请选择入货仓库"),!1):(this.myAlert("请选择出货仓库"),!1)},getUnit:function(t,e){var s=this.materialInfo[e];s.selectNum="",s.haveBatch=!1,s.selectName=s.unit[t].name,s.selectValue=s.unit[t].value,this.materialInfo.splice(e,1,s)},warehouseVeri:function(t){return!this.inWarehouseId&&!this.outWarehouseId||this.inWarehouseId!=this.outWarehouseId||(this.myAlert("出货/入货仓库不能相同"),this[t]="",!1)},openAddStoreWin:function(t){this.bouncedType=0,"in"==t?(this.isPutIn="in",this.comObj.owner=this.inWarehouse,this.comObj.title="选择入货仓库",this.showCom="addStore"):"out"==t&&(this.isPutIn="out",this.comObj.owner=this.outWarehouse,this.comObj.title="选择出货仓库",this.showCom="addStore")},winWarehouse:function(t,e){var s=this,i="",a="",r="",o="";if("ok"==t){if("out"==this.isPutIn?(i="out",a="in",r="出货",o="入货"):"in"==this.isPutIn&&(i="in",a="out",r="入货",o="出货"),!e.id)return void this.myAlert(r+"仓库不能为空");if(!this[i+"WarehouseId"]&&!this[a+"WarehouseId"]||e.id!=this[a+"WarehouseId"]){if(e.id!=this[i+"WarehouseId"]){var n=!0,l=!1,u=void 0;try{for(var c,d=this.clearArr[Symbol.iterator]();!(n=(c=d.next()).done);n=!0){this[c.value]=[]}}catch(t){l=!0,u=t}finally{try{!n&&d.return&&d.return()}finally{if(l)throw u}}}this.showCom="",this.setWareInformation(i,e)}else this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"该仓库为"+o+"仓库，是否替换为"+r+"仓库",callback:function(t){if("ok"==t){var o={allList:s.wareList,title:"选择"+r+"仓库",owner:e};s.comObj=o,s.setWareInformation(a,""),s.setWareInformation(i,e),s.showCom="";var n=!0,l=!1,u=void 0;try{for(var c,d=s.clearArr[Symbol.iterator]();!(n=(c=d.next()).done);n=!0){var h=c.value;s[h]=[]}}catch(t){l=!0,u=t}finally{try{!n&&d.return&&d.return()}finally{if(l)throw u}}}}})}else this.showCom=""},setWareInformation:function(t,e){this[t+"WarehouseId"]=e?e.id:"",this[t+"Warehouse"]=e||"",this[t+"ShopId"]=e?e.shopId:""},getSleGoods:function(t){this.$store.commit("setPageTools",[]),this.selectType=0,this.showSleGoods=!1,this.showMain=!0,this.sleGoods=t;var e=[];if(t){for(var s in t){var i=t[s],a={id:i.gid,goodsName:i.goodsName,barCode:i.barCode,unit:i.unit,type:i.type,batch:i.batch,surplus:i.surplus,batchId:"",selectNum:"",haveBatch:!1};e.push(a)}this.goodsDetails=e,this.selectType=this.goodsDetails.length?0:1}},getSleMaterial:function(t){this.$store.commit("setPageTools",[]),this.selectType=1,this.showSleMaterial=!1,this.showMain=!0;var e=[];if(t){var s=!0,i=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(s=(r=o.next()).done);s=!0){var n=r.value,l={id:n.id,name:n.name,type:n.type,unit:n.unit,selUnit:"",batch:n.batch,surplus:n.surplus,selectNum:"",index:0,haveBatch:!1,validity:n.validity,validityType:n.validityType},u=[],c=!0,d=!1,h=void 0;try{for(var m,v=n.cate[Symbol.iterator]();!(c=(m=v.next()).done);c=!0){var p=m.value;u.push(p.name)}}catch(t){d=!0,h=t}finally{try{!c&&v.return&&v.return()}finally{if(d)throw h}}l.materialCategoryName=u.join(","),e.push(l)}}catch(t){i=!0,a=t}finally{try{!s&&o.return&&o.return()}finally{if(i)throw a}}this.materialInfo=e,this.unitConversion(this.materialInfo)}},delList:function(t,e){var s=this;this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确认删除？",callback:function(i){"ok"==i&&s.delListEach(t,e)}})},delListEach:function(t,e){var s="",i="",a="",r="";0==e?(s="goodsDetails",i="sleGoods",a="goodsOut",r="id"):(s="materialInfo",i="sleMaterial",a="suppliesOut",r="mid");for(var o=this[s][t].id,n=0;n<this[a].length;n++){o==this[a][n][r]&&(this[a].splice(n,1),n--)}this[s].splice(t,1),this[i].splice(t,1)},unitConversion:function(t){var e=!0,s=!1,i=void 0;try{for(var a,r=t[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var o=a.value,l=[];for(var u in o.unit){var c=o.unit[u];1==c.isDefault&&(o.showName=c.name,o.showValue=c.value,o.defaultValue=c.value,o.defaultName=c.name),1==c.isMin&&(o.minName=c.name,o.selectName=c.name,o.selectValue=c.value,o.index=u),l.push(c.name)}o.unitList=l,o.comNum=o.surplus,o.numberUnit=n.a.comUnit(o.surplus,o.showValue,o.showName,o.minName)}}catch(t){s=!0,i=t}finally{try{!e&&r.return&&r.return()}finally{if(s)throw i}}},comUnit:function(){for(var t=arguments.length,e=Array(t),s=0;s<t;s++)e[s]=arguments[s];var i=l(e,5),a=i[0],r=i[1],o=i[2],u=i[3],c=i[4];return n.a.comUnit(a,r,o,u,c)},openBatchWin:function(t,e){this.outWarehouseId?(this.goodsItem=t,this.goodsIndex=e,this.selectGoods=this.goodsItem.batchInfo,this.goodsBatchShow=!0):this.myAlert("请选择出货仓库")},openSuppliesWin:function(t,e){this.inWarehouseId?(this.materialItem=t,this.materialIndex=e,this.selectMaterial=this.materialItem.batchInfo,this.matBatchShow=!0):this.myAlert("请选择入货仓库")},goodsWinClose:function(t,e){if(this.goodsBatchShow=!1,"ok"==t){var s;this.goodsItem.batchInfo=e;var i=[],a=0,r={};for(var o in e){if(Number(e[o].surplus)<Number(e[o].outNum))return void this.myAlert("出货数量不能大于当前库存数量");r={id:this.goodsItem.id,barCode:this.goodsItem.barCode,batchId:e[o].batchId,num:e[o].outNum},e[o].outNum&&(i.push(r),a+=Number(r.num))}i.length>0?this.goodsItem.haveBatch=!0:this.goodsItem.haveBatch=!1,this.goodsItem.selectNum=a,this.spliceArr(this.goodsOut,this.goodsItem.id,"id"),(s=this.goodsOut).push.apply(s,i)}},suppliWinClose:function(t,e,s){if(this.matBatchShow=!1,"ok"==t){var i;this.materialItem.batchInfo=e;var a=[],r=0,o=!0,n=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;if(Number(d.twoNum)>0){var h={mid:this.materialItem.id,type:0,batchId:d.batchId,num:Number(d.twoNum)*parseInt(s.value),selectUnitName:this.materialItem.selectName};r+=Number(d.twoNum),a.push(h)}}}catch(t){n=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(n)throw l}}this.materialItem.selectNum=r,a.length>0?this.materialItem.haveBatch=!0:this.materialItem.haveBatch=!1,this.spliceArr(this.suppliesOut,this.materialItem.id,"mid"),(i=this.suppliesOut).push.apply(i,a)}},spliceArr:function(t,e,s){for(var i=0;i<t.length;i++){t[i][s]==e&&(t.splice(i,1),i--)}},initData:function(){var t=o.a.session("userShop");this.userName=t.user.name,this.userId=t.user.id},myAlert:function(t){this.$store.commit("setWin",{title:"操作提示",content:t})},sure:function(){var t=this;return u(regeneratorRuntime.mark(function e(){var s,i,a,r,o,n,l,u,c,d,h,m,v,p,f,b,_,g,I,y,N,w,x,C,S;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.addVeri()){e.next=2;break}return e.abrupt("return");case 2:e.t0=regeneratorRuntime.keys(t.goodsDetails);case 3:if((e.t1=e.t0()).done){e.next=58;break}if(s=e.t1.value,i=t.goodsDetails[s],a=Number(i.selectNum),r=/^[0-9]*$/g,o=/^[0-9]*\.?[0-9]{0,3}$/g,!isNaN(a)){e.next=12;break}return t.myAlert("商品("+i.goodsName+")出货数量必须为数字"),e.abrupt("return");case 12:if(0!=i.type||r.test(a)){e.next=15;break}return t.myAlert("普通商品("+i.goodsName+")出货数量只能为整数"),e.abrupt("return");case 15:if(1!=i.type||o.test(a)){e.next=18;break}return t.myAlert("称重商品("+i.goodsName+")出货数量只能为小数点后三位"),e.abrupt("return");case 18:if(!(a<=0)){e.next=21;break}return t.myAlert("商品("+i.goodsName+")出货数量必须大于0"),e.abrupt("return");case 21:if(!(a>Number(i.surplus))){e.next=24;break}return t.myAlert("商品("+i.goodsName+")出货数量不能大于当前库存数量"),e.abrupt("return");case 24:if(!!i.haveBatch&&i.haveBatch){e.next=56;break}n={id:i.id,barCode:i.barCode,batchId:"",num:i.selectNum||""},l=!1,u=!0,c=!1,d=void 0,e.prev=31,h=t.goodsOut[Symbol.iterator]();case 33:if(u=(m=h.next()).done){e.next=41;break}if(m.value.id!=i.id){e.next=38;break}return l=!0,e.abrupt("break",41);case 38:u=!0,e.next=33;break;case 41:e.next=47;break;case 43:e.prev=43,e.t2=e.catch(31),c=!0,d=e.t2;case 47:e.prev=47,e.prev=48,!u&&h.return&&h.return();case 50:if(e.prev=50,!c){e.next=53;break}throw d;case 53:return e.finish(50);case 54:return e.finish(47);case 55:l||t.goodsOut.push(n);case 56:e.next=3;break;case 58:e.t3=regeneratorRuntime.keys(t.materialInfo);case 59:if((e.t4=e.t3()).done){e.next=111;break}if(v=e.t4.value,p=t.materialInfo[v],f=Number(p.selectNum)*Number(p.selectValue),b=f,_=/^[0-9]*\.?[0-9]{0,3}$/g,!isNaN(b)){e.next=68;break}return t.myAlert("物料("+p.name+")出货物料数量必须为数字"),e.abrupt("return");case 68:if(_.test(Number(p.selectNum))){e.next=71;break}return t.myAlert("物料("+p.name+")出货数量只能为小数点后三位"),e.abrupt("return");case 71:if(!(b<=0)){e.next=74;break}return t.myAlert("物料("+p.name+")出货数量必须大于0"),e.abrupt("return");case 74:if(!(b>Number(p.comNum))){e.next=77;break}return t.myAlert("物料("+p.name+")出货数量不能大于当前库存数量"),e.abrupt("return");case 77:if(!!p.haveBatch&&p.haveBatch){e.next=109;break}g={mid:p.id,type:p.type,batchId:"",num:f,selectUnitName:p.selectName},I=!1,y=!0,N=!1,w=void 0,e.prev=84,x=t.suppliesOut[Symbol.iterator]();case 86:if(y=(C=x.next()).done){e.next=94;break}if(C.value.mid!=p.id){e.next=91;break}return I=!0,e.abrupt("break",94);case 91:y=!0,e.next=86;break;case 94:e.next=100;break;case 96:e.prev=96,e.t5=e.catch(84),N=!0,w=e.t5;case 100:e.prev=100,e.prev=101,!y&&x.return&&x.return();case 103:if(e.prev=103,!N){e.next=106;break}throw w;case 106:return e.finish(103);case 107:return e.finish(100);case 108:I||t.suppliesOut.push(g);case 109:e.next=59;break;case 111:if(t.goodsOut.length||t.suppliesOut.length){e.next=114;break}return t.myAlert("请先添加商品或物料"),e.abrupt("return");case 114:if(S=/^[0-9a-zA-Z]*$/g,!t.receiptNumber||S.test(t.receiptNumber)){e.next=118;break}return t.myAlert("出货单号只能是英文字母或数字"),e.abrupt("return");case 118:t.addDispatchRecord();case 119:case"end":return e.stop()}},e,t,[[31,43,47,55],[48,,50,54],[84,96,100,108],[101,,103,107]])}))()},returnBefore:function(){window.history.go(-1)},addDispatchRecord:function(){var t=this;return u(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isClick){e.next=3;break}return t.$store.commit("setWin",{title:"温馨提示",content:"请勿重复点击"}),e.abrupt("return");case 3:return t.isClick=!0,s=null,e.prev=5,e.next=8,r.a.addQuickDispatch({data:{cause:t.cause,receiptNumber:t.receiptNumber,remark:t.remark,outWarehouse:t.outWarehouseId,intoWarehouse:t.inWarehouseId,goodsDetail:t.goodsOut.length?t.goodsOut:"",materialDetail:t.suppliesOut.length?t.suppliesOut:""}},!0);case 8:s=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),t.$store.commit("setWin",{title:"错误提示",content:e.t0.error.message}),t.isClick=!1;case 15:s&&t.$store.commit("setWin",{title:"提示",content:"快速调度成功",callback:function(){s.outWname=t.outWarehouse.name,s.intoWname=t.inWarehouse.name,s.createName=t.userName,o.a.session("outStoreDetails",s),t.$router.push({path:"outputShipper",query:t.$route.query})}});case 16:case"end":return e.stop()}},e,t,[[5,11]])}))()},getWarehouse:function(){var t=this;return u(regeneratorRuntime.mark(function e(){var s,i,a,o,n,l,u,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.warehouseList();case 2:if(s=e.sent,i=[],!s){e.next=26;break}for(a=!0,o=!1,n=void 0,e.prev=8,l=s[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)c=u.value,d={id:c.id,name:c.name},0!=c.shopId?(d.ischain=0,d.shopId=c.shopId):(d.ischain=1,d.shopId=c.brandId),i.push(d);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),o=!0,n=e.t0;case 16:e.prev=16,e.prev=17,!a&&l.return&&l.return();case 19:if(e.prev=19,!o){e.next=22;break}throw n;case 22:return e.finish(19);case 23:return e.finish(16);case 24:t.wareList=i,t.comObj={allList:i};case 26:case"end":return e.stop()}},e,t,[[8,12,16,24],[17,,19,23]])}))()}}},d=(s("9b4c"),s("7610")),h=Object(d.a)(c,i,a,!1,null,"eb90fbc0",null);h.options.__file="src\\module\\invoicing_system\\warehouse_manage\\output_store.vue";e.default=h.exports},"9b4c":function(t,e,s){"use strict";var i=s("3dd8");s.n(i).a}}]);