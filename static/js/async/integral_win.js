(window.webpackJsonp=window.webpackJsonp||[]).push([["integral_win"],{"8fe2":function(t,n,e){"use strict";var i=e("a78f");e.n(i).a},a78f:function(t,n,e){},cf95:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("win",{attrs:{width:801,height:513,ok:{content:"保存"}},on:{winEvent:t.winEvent}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v("调整积分")]),t._v(" "),e("div",{staticClass:"intergral_content",attrs:{slot:"content"},slot:"content"},[e("section",{staticClass:"intergral_num"},[e("span",[t._v("积分变动量")]),t._v(" "),e("input",{attrs:{maxlength:"5",type:"text",placeholder:"请输入积分"},on:{input:t.changePoint}}),t._v(" "),e("button",{staticClass:"plus",class:t.isAdd?"add_cor":"",on:{click:function(){t.isAdd=!0}}},[t._v("增加")]),t._v(" "),e("button",{staticClass:"plus",class:t.isAdd?"":"add_cor",on:{click:function(){t.isAdd=!1}}},[t._v("减少")])]),t._v(" "),e("section",{staticClass:"intergral_reason"},[e("span",[t._v("原因")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.remark,expression:"remark",modifiers:{trim:!0}}],attrs:{placeholder:"请输入变动原因",maxlength:"30"},domProps:{value:t.remark},on:{input:function(n){n.target.composing||(t.remark=n.target.value.trim())},blur:function(n){t.$forceUpdate()}}}),t._v(" "),e("p",[e("i",{staticClass:"i_icon"}),t._v("最佳十个字，最多30个字，在积分详情显示")])]),t._v(" "),e("section",{staticClass:"intergral_operate"},[e("span",[t._v("操作")]),t._v(" "),e("p",[e("span",[t._v(t._s(t.pointData.point)+" "+t._s(t.isAdd?"+":"-")+" "+t._s(t.point)+" = "+t._s(t.results)+" ")]),t._v(" "),e("span",[e("i",{staticClass:"i_icon"}),t._v("在原有积分上增加或减少")])])]),t._v(" "),e("section",{staticClass:"intergral_remarks"},[e("span",[t._v("备注")]),t._v(" "),e("textarea",{attrs:{placeholder:"操作积分备注",maxlength:"30"}})]),t._v(" "),e("section",{staticClass:"intergral_sms fl"},[e("span",[t._v("短信提醒")]),t._v(" "),e("on-off",{key:1,attrs:{status:t.isOpen},on:{statusChange:t.openModel}}),t._v(" "),e("span",{on:{click:t.usingSmsTemplates}},[t._v("使用短信模板")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.msg,expression:"msg",modifiers:{trim:!0}}],attrs:{maxlength:"150",placeholder:"短信提醒编辑"},domProps:{value:t.msg},on:{input:function(n){n.target.composing||(t.msg=n.target.value.trim())},blur:function(n){t.$forceUpdate()}}})],1)])])};i._withStripped=!0;var s=e("81a2"),a=e("f6ce");var r={data:function(){return{isAdd:!1,point:0,result:"",isOpen:!0,msg:"",remark:"",type:"",userData:a.a.session("userShop"),msgTemplate:""}},computed:{results:function(){return this.isAdd?this.pointData.point-0+this.point:this.pointData.point-this.point<=0?0:this.pointData.point-this.point}},props:["pointData"],methods:{changePoint:function(t){var n=t.target.value.replace(/[^\d]/g,"");t.target.value=n,this.point=Number(n)},openModel:function(t){this.isOpen=t},winEvent:function(t){"ok"==t?this.editIntergral():this.$emit("adjustInter")},usingSmsTemplates:function(){"1"==this.isOpen?this.msgTemplate=String("尊敬的"+this.pointData.name+"用户您好，由于"+(this.pointData.behavior||"")+"原因，您的积分由"+this.pointData.point+"变动至"+this.results+"敬请谅解。如有问题请致电："+this.userData.currentShop.telephone):this.msgTemplate=String("尊敬的"+this.pointData.name+"用户您好，由于"+(this.pointData.behavior||"")+"原因，您的余额由"+this.pointData.point+"变动至"+this.results+"敬请谅解。如有问题请致电："+this.userData.currentShop.telephone),this.msg=this.msgTemplate},editIntergral:function(){var t,n=this;return(t=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.compelUpdatePointAndBalance({data:{fansId:n.pointData.id,memberId:n.pointData.memberId,msg:n.msg||"",msgStatus:Number(n.isOpen),point:n.point,remark:n.remark||"",type:n.isAdd?"10":"11"}});case 2:n.$store.commit("setWin",{content:"修改成功",winType:"alert",time:1e3}),n.$emit("adjustInter",{id:n.pointData.id,point:n.results});case 4:case"end":return t.stop()}},t,n)}),function(){var n=t.apply(this,arguments);return new Promise(function(t,e){return function i(s,a){try{var r=n[s](a),o=r.value}catch(t){return void e(t)}if(!r.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})})()}},mounted:function(){this.pointData.memberId>"0"&&(this.pointData.point=this.pointData.memberPoint)},components:{win:function(){return e.e("win").then(e.bind(null,"f60a"))},"on-off":function(){return e.e("on_off").then(e.bind(null,"034b"))}}},o=(e("8fe2"),e("7610")),p=Object(o.a)(r,i,[],!1,null,"4a913f5d",null);p.options.__file="src\\module\\seller_assistant\\integral_win.vue";n.default=p.exports}}]);