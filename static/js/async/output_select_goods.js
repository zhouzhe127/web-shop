(window.webpackJsonp=window.webpackJsonp||[]).push([["output_select_goods"],{"1fb0":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"output-select-goods"}},[t._m(0),t._v(" "),s("div",[s("div",{staticClass:"table-select"},[s("div",{staticClass:"select-title"},[t._v("\n\t\t\t\t\t货品信息\n\t\t\t\t\t"),s("span",{staticClass:"circle"}),t._v(" 共\n\t\t\t\t\t"),s("span",{staticClass:"select-num"},[t._v(t._s(t.sleList.length))]),t._v(" 个条目\n\t\t\t\t\t"),s("a",{staticClass:"packUp",on:{click:function(e){t.show=!t.show}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.show?"收起":"展开")+"\n\t\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"select-body"},[t._m(1),t._v(" "),t._l(t.sleList,function(e,i){return t.show?s("div",{key:i,staticClass:"select-item"},[s("div",{staticClass:"select-row"},[s("li",{staticStyle:{color:"#ff3c04"},on:{click:function(s){t.delList(e,i)}}},[t._v("删除")]),t._v(" "),e.index<9?s("li",[t._v(t._s("0"+(i+1)))]):s("li",[t._v(t._s(i+1))]),t._v(" "),s("li",[t._v(t._s(e.gName))]),t._v(" "),s("li",[t._v(t._s(e.barCode))]),t._v(" "),s("li",[t._v(t._s(e.price))]),t._v(" "),s("li",[t._v(t._s(t.typeList[Number(e.type)+1]))]),t._v(" "),e.goodsNum?s("li",[t._v(t._s(e.goodsNum.surplus)+t._s(e.unit))]):s("li",[t._v("--")]),t._v(" "),e.goodsNum?s("li",[t._v(t._s(e.goodsNum.batch))]):s("li",[t._v("--")])])]):t._e()}),t._v(" "),0==t.sleList.length?s("div",{attrs:{id:"emptyData"}},[t._v("-----暂无条目-----")]):t._e()],2)]),t._v(" "),s("div",{staticClass:"search-module"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchName,expression:"searchName"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入商品名"},domProps:{value:t.searchName},on:{input:function(e){e.target.composing||(t.searchName=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchCode,expression:"searchCode"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入条形码"},domProps:{value:t.searchCode},on:{input:function(e){e.target.composing||(t.searchCode=e.target.value)}}}),t._v(" "),s("div",{staticClass:"search-select"},[s("select-btn",{ref:"select",attrs:{sorts:t.typeList,name:t.allGoods},on:{selOn:t.selectList}})],1),t._v(" "),s("div",{staticClass:"setspeen"},[s("div",{staticClass:"blue filter",on:{click:t.search}},[t._v("筛选")]),t._v(" "),s("div",{staticClass:"gray reset",on:{click:t.reset}},[t._v("重置")])])]),t._v(" "),s("div",{staticClass:"table-select"},[s("div",{staticClass:"select-title"},[t._v("\n\t\t\t\t\t商品列表\n\t\t\t\t\t"),s("span",{staticClass:"circle"}),t._v(" 共\n\t\t\t\t\t"),s("span",{staticClass:"select-num"},[t._v(t._s(t.listTotal))]),t._v(" 个条目\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"select-body"},[t._m(2),t._v(" "),t._l(t.goodsdetail,function(e,i){return s("div",{key:i,staticClass:"select-item",class:{active:e.select}},[s("div",{staticClass:"select-row"},[e.select?s("li",[t._v("已添加")]):t._e(),t._v(" "),e.checkAdd||e.select?t._e():s("li",{staticStyle:{color:"#27a8e0"},on:{click:function(s){t.addList(e,i)}}},[t._v("添加")]),t._v(" "),e.checkAdd&&!e.select?s("li",{staticStyle:{color:"#cccccc"}},[t._v("添加")]):t._e(),t._v(" "),i+1+10*(t.page-1)<10?s("li",[t._v(t._s("0"+(i+1)))]):s("li",[t._v(t._s(i+1+10*(t.page-1)))]),t._v(" "),s("li",[t._v(t._s(e.goodsName))]),t._v(" "),s("li",[t._v(t._s(e.barCode||"--"))]),t._v(" "),s("li",[t._v(t._s(e.price))]),t._v(" "),s("li",[t._v(t._s(t.typeList[Number(e.type)+1]))]),t._v(" "),e.goodsNum?s("li",[t._v(t._s(e.goodsNum.surplus)+t._s(e.unit))]):s("li",[t._v("--")]),t._v(" "),e.goodsNum?s("li",[t._v(t._s(e.goodsNum.batch))]):s("li",[t._v("--")])])])}),t._v(" "),0==t.goodsdetail.length?s("div",{attrs:{id:"emptyData"}},[t._v("-----暂无条目-----")]):t._e()],2)]),t._v(" "),s("div",{staticClass:"page-box"},[s("pageBtn",{attrs:{isNoJump:!1,isNoPaging:!0,total:t.pageTotal,page:t.page},on:{pageNum:t.pageChange}})],1)])])};i._withStripped=!0;var a=s("81a2"),l=s("bbb9");var o={data:function(){return{page:1,selType:-1,goodsdetail:"",typeList:["全部类型","普通商品","称重商品"],allGoods:"全部类型",pageTotal:0,sleList:[],listTotal:0,searchName:"",searchCode:"",num:10,show:!0}},props:["sleCommodity","getSupplies","wid","addBtn"],methods:{init:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var s,i,o,n,c,r,v,d,_,u,h,p,m,g,f,y;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.inventoryGoodsList({data:{page:e.page,num:e.num,type:e.selType,goodsName:e.searchName,barCode:e.searchCode}});case 2:for(s=t.sent,e.listTotal=s.count,e.goodsdetail=s.list,e.pageTotal=s.total,i=[],o=!0,n=!1,c=void 0,t.prev=10,r=e.goodsdetail[Symbol.iterator]();!(o=(v=r.next()).done);o=!0)d=v.value,i.push(d.id);t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),n=!0,c=t.t0;case 18:t.prev=18,t.prev=19,!o&&r.return&&r.return();case 21:if(t.prev=21,!n){t.next=24;break}throw c;case 24:return t.finish(21);case 25:return t.finish(18);case 26:if(!(i.length>0)){t.next=56;break}return t.next=29,a.a.invent_getGoodsNum({data:{gids:i.join(","),wid:e.wid?e.wid:""}});case 29:_=t.sent,t.t1=regeneratorRuntime.keys(e.goodsdetail);case 31:if((t.t2=t.t1()).done){t.next=55;break}for(u=t.t2.value,h=!0,p=!1,m=void 0,t.prev=36,g=_[Symbol.iterator]();!(h=(f=g.next()).done);h=!0)y=f.value,e.goodsdetail[u].id==y.id&&(e.goodsdetail[u].goodsNum=y);t.next=44;break;case 40:t.prev=40,t.t3=t.catch(36),p=!0,m=t.t3;case 44:t.prev=44,t.prev=45,!h&&g.return&&g.return();case 47:if(t.prev=47,!p){t.next=50;break}throw m;case 50:return t.finish(47);case 51:return t.finish(44);case 52:e.addBtn&&(!_[u]||!_[u].batch||_[u].batch<=0||_[u].surplus<=0)&&(e.goodsdetail[u].checkAdd=!0),t.next=31;break;case 55:e.goodsdetail=l.a.deepCopy(e.goodsdetail);case 56:e.checkSle(),console.log(e.goodsdetail);case 58:case"end":return t.stop()}},t,e,[[10,14,18,26],[19,,21,25],[36,40,44,52],[45,,47,51]])}),function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function i(a,l){try{var o=e[a](l),n=o.value}catch(t){return void s(t)}if(!o.done)return Promise.resolve(n).then(function(t){i("next",t)},function(t){i("throw",t)});t(n)}("next")})})()},selectList:function(t){console.log(t),this.selType=t-1},addList:function(t){t.select=!0,this.sleList.push(t)},checkSle:function(){var t=!0,e=!1,s=void 0;try{for(var i,a=this.goodsdetail[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.select=!1}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}var l=!0,o=!1,n=void 0;try{for(var c,r=this.goodsdetail[Symbol.iterator]();!(l=(c=r.next()).done);l=!0){var v=c.value,d=!0,_=!1,u=void 0;try{for(var h,p=this.sleList[Symbol.iterator]();!(d=(h=p.next()).done);d=!0){var m=h.value;v.id==m.id&&(v.select=!0)}}catch(t){_=!0,u=t}finally{try{!d&&p.return&&p.return()}finally{if(_)throw u}}}}catch(t){o=!0,n=t}finally{try{!l&&r.return&&r.return()}finally{if(o)throw n}}},delList:function(t,e){this.sleList.splice(e,1),t.select=!1,this.checkSle()},search:function(){this.init()},reset:function(){this.page=1,this.searchName="",this.searchCode="",this.$refs.select.sortName="全部类型",this.$refs.select.selected=0,this.selType=-1,this.init()},pageChange:function(t){this.page=t.page,this.init()}},mounted:function(){var t=this;console.log(this.sleSupplies),this.sleCommodity&&(this.sleList=this.sleCommodity),this.$store.commit("setPageTools",[{name:"确定",className:["firstBtn wearhouse"],fn:function(){t.$emit("select",t.sleList)}},{name:"取消",className:["abrogate"],fn:function(){t.$emit("select",!1)}}]),this.init()},components:{pageBtn:function(){return s.e("page_element").then(s.bind(null,"5921"))},selectBtn:function(){return s.e("select_btn").then(s.bind(null,"3d41"))}},destroyed:function(){this.$store.commit("setPageTools",[])}},n=(s("21b4"),s("6ceb")),c=Object(n.a)(o,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i"),this._v(" "),e("h3",[this._v("选择添加商品")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-head"},[s("li",[t._v("操作")]),t._v(" "),s("li",[t._v("序号")]),t._v(" "),s("li",[t._v("商品名")]),t._v(" "),s("li",[t._v("条形码")]),t._v(" "),s("li",[t._v("售价")]),t._v(" "),s("li",[t._v("商品类型")]),t._v(" "),s("li",[t._v("库存数量/重量")]),t._v(" "),s("li",[t._v("批次数量")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-head"},[s("li",[t._v("操作")]),t._v(" "),s("li",[t._v("序号")]),t._v(" "),s("li",[t._v("商品名")]),t._v(" "),s("li",[t._v("条形码")]),t._v(" "),s("li",[t._v("售价")]),t._v(" "),s("li",[t._v("商品类型")]),t._v(" "),s("li",[t._v("库存数量/重量")]),t._v(" "),s("li",[t._v("批次数量")])])}],!1,null,"71399a64",null);c.options.__file="src\\module\\invoicing_system\\warehouse_manage\\output_select_goods.vue";e.default=c.exports},"21b4":function(t,e,s){"use strict";var i=s("5470");s.n(i).a},5470:function(t,e,s){}}]);