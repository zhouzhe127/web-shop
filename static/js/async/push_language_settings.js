(window.webpackJsonp=window.webpackJsonp||[]).push([["push_language_settings"],{"35dd":function(t,e,s){},"7fcb":function(t,e,s){"use strict";var r=s("35dd");s.n(r).a},"86b0":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"msnmodel"}},[t._m(0),t._v(" "),s("addPushlan",{attrs:{msg:t.msg_1,resultArr:t.followerMessage}}),t._v(" "),t._m(1),t._v(" "),s("addPushlan",{attrs:{msg:t.msg_2,resultArr:t.message}}),t._v(" "),t._m(2),t._v(" "),s("addPushlan",{attrs:{msg:t.msg_3,resultArr:t.spreaderMessage}}),t._v(" "),t._m(3),t._v(" "),s("addPushlan",{attrs:{msg:t.msg_4,resultArr:t.imageMessage}}),t._v(" "),s("div",{staticClass:"online-box clearfix"},[s("span",{staticClass:"online-sub fl"}),t._v(" "),s("div",{staticClass:"rightHalf"},[s("a",{staticClass:"yellow fl",staticStyle:{width:"200px"},attrs:{href:"javascript:void(0);"},on:{click:t.addConfig}},[t._v("保存")])])])],1)};r._withStripped=!0;var a=s("81a2"),n=s("f6ce");function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function r(a,n){try{var i=e[a](n),o=i.value}catch(t){return void s(t)}if(!i.done)return Promise.resolve(o).then(function(t){r("next",t)},function(t){r("throw",t)});t(o)}("next")})}}var o={data:function(){return{shopId:n.a.session("userShop").currentShop.id,uploadUrl:n.a.session("userShop").uploadUrl,followerMessage:[],message:[],spreaderMessage:[],imageMessage:[],shopNotice:"",msg_1:"示例:恭喜您,已经成功关注公众号,我们将送您100积分.正值活动期间,快去用积分兑换商品吧!",msg_2:"示例:恭喜您,已经成功关注公众号.正值活动期间,快去用积分兑换商品吧!",msg_3:"示例:恭喜您，已经成功关注公众号，您是通过扫描 {fromName} 的推广二维码的方式关注的，因此我们将送您 100 积分，同时也送给 {fromName} 20 积分。正值活动期间，快去用积分兑换商品吧",msg_4:"示例:憋急，图片正在玩命生成中啦！获得图片后，快去分享给你的盆友们哦，你和好友将同时获得积分奖励哦，齐心协力赚积分兑奖品，看好你哦哇哈哈!"}},mounted:function(){this.getConfig()},methods:{valiData:function(t,e,s){this.$store.commit("setWin",{content:t,title:e,winType:s})},addConfig:function(){this.checkForm(this.followerMessage,"1")&&this.checkForm(this.message,"2")&&this.checkForm(this.spreaderMessage,"3")&&this.checkForm(this.imageMessage,"4")&&this.setConfig()},checkForm:function(t,e){var s={1:"首次关注推送语",2:"二次关注推送语",3:"通过分享后关注推送语",4:"图片加载推送语"},r=!0,a=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value;if("0"==l.typeId&&""==l.content)return this.valiData(s[e]+"请完善文字推送信息!"),!1;if("1"==l.typeId){if(""==l.img)return this.valiData(s[e]+"图文推送请上传图片!"),!1;if(""==l.title)return this.valiData(s[e]+"图文推送请填写标题!"),!1;if(""==l.url)return this.valiData(s[e]+"图文推送请填写链接!"),!1;var c=!0,u=!1,f=void 0;try{for(var d,g=l.secondary[Symbol.iterator]();!(c=(d=g.next()).done);c=!0){var h=d.value;if(""==h.imgUrl)return this.valiData(s[e]+"图文推送二级图文关联请上传图片!"),!1;if(""==h.title)return this.valiData(s[e]+"图文推送二级图文关联请填写标题!"),!1;if(""==h.title)return this.valiData(s[e]+"图文推送二级图文关联请填写链接!"),!1}}catch(t){u=!0,f=t}finally{try{!c&&g.return&&g.return()}finally{if(u)throw f}}}}}catch(t){a=!0,n=t}finally{try{!r&&o.return&&o.return()}finally{if(a)throw n}}return!0},setConfig:function(){var t=this;return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.updateMessageConfig({data:{followerMessage:t.sortingData(t.followerMessage),message:t.sortingData(t.message),spreaderMessage:t.sortingData(t.spreaderMessage),imageMessage:t.sortingData(t.imageMessage),shopNotice:t.shopNotice,shopId:t.shopId}});case 2:e.sent&&(t.valiData("保存成功!"),t.getConfig());case 4:case"end":return e.stop()}},e,t)}))()},getConfig:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getWechatConfig({data:{shopId:t.shopId}});case 2:(s=e.sent)&&(t.followerMessage=t.getData(JSON.parse(s.followerMessage)),t.message=t.getData(JSON.parse(s.message)),t.spreaderMessage=t.getData(JSON.parse(s.spreaderMessage)),t.imageMessage=t.getData(JSON.parse(s.imageMessage)));case 4:case"end":return e.stop()}},e,t)}))()},sortingData:function(t){var e=[],s=!0,r=!1,a=void 0;try{for(var n,i=t[Symbol.iterator]();!(s=(n=i.next()).done);s=!0){var o=n.value;if("0"==o.typeId){var l={type:o.typeId,content:o.content};e.push(l)}if("1"==o.typeId){var c={type:o.typeId,content:[]},u={title:o.title,description:"",url:o.url,picurl:o.img};c.content.push(u);var f=!0,d=!1,g=void 0;try{for(var h,v=o.secondary[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var p=h.value,m={title:p.title,description:"",url:p.url,picurl:p.imgUrl};c.content.push(m)}}catch(t){d=!0,g=t}finally{try{!f&&v.return&&v.return()}finally{if(d)throw g}}e.push(c)}}}catch(t){r=!0,a=t}finally{try{!s&&i.return&&i.return()}finally{if(r)throw a}}return e},getData:function(t){var e=[],s=!0,r=!1,a=void 0;try{for(var n,i=t[Symbol.iterator]();!(s=(n=i.next()).done);s=!0){var o=n.value,l={type:"文字推送",typeId:0,content:"",img:"",title:"",url:"",secondary:[]};if(0==o.type&&(l.type="文字推送",l.typeId=o.type,l.content=o.content,e.push(l)),1==o.type){l.type="图文推送",l.typeId=o.type,l.img=o.content[0].picurl,l.title=o.content[0].title,l.url=o.content[0].url;for(var c=1;c<o.content.length;c++){var u={imgUrl:"",title:"",url:""};u.imgUrl=o.content[c].picurl,u.title=o.content[c].title,u.url=o.content[c].url,l.secondary.push(u)}e.push(l)}}}catch(t){r=!0,a=t}finally{try{!s&&i.return&&i.return()}finally{if(r)throw a}}return e}},components:{selectBtn:function(){return s.e("select_btn").then(s.bind(null,"3d41"))},addPushlan:function(){return s.e("push_language_component").then(s.bind(null,"04cf"))}}},l=(s("7fcb"),s("7610")),c=Object(l.a)(o,r,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"titles"},[this._v("首次关注推送语")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"titles"},[this._v("二次关注推送语")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"titles"},[this._v("通过分享后关注推送语")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"titles"},[this._v("图片加载推送语")]),this._v(" "),e("div",{staticClass:"line"})])}],!1,null,"52d700a4",null);c.options.__file="src\\module\\public_number_configuration\\new_push_language_settings.vue";e.default=c.exports}}]);