(window.webpackJsonp=window.webpackJsonp||[]).push([["list_page"],{"110c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUM3Q0IyMDNCREYxMTFFNkJCMjBCMDk4RUE1RkFBOUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUM3Q0IyMDRCREYxMTFFNkJCMjBCMDk4RUE1RkFBOUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQzdDQjIwMUJERjExMUU2QkIyMEIwOThFQTVGQUE5QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQzdDQjIwMkJERjExMUU2QkIyMEIwOThFQTVGQUE5QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pr9ucPQAAAFaSURBVHjarNQ7LARBHMfx2ROF9/tc4gqJREGhUduLgkYjUUmUOlEqlCqJRojCoxMVtYIoKBUaOc8gItGcZ0Mj1neSWTln/mtu3T/5JLc3s7/Mzvx3vSAIlKVSGEA79IRL7CGnHCpRcJ3GFo4xiDKUYxhnWEfyz1S9UqMXd5hGRd7/oRrM4grdlvFv4Y823GMoarIxhms0SXM8s6cbOMeMcqt5VGFcevw0HlDpsMpQI15RbxvXB9WPXbwp93rCIfqk09dtk1XFl+6QDin0E16M0ITpYevADXpihOp7LqSDSuERtUUcVCteTO+KLbVmNn/KcZWreMdk1BvVgluMOqxyAidRT5Z/0WVewTk0WCYnsYwsjuC7hGrNWMEztrGIJeyYfV9AHTLIScGe8OmrRgadpm1OcVDwgujxTYxgX/pKxeHbVvzfUGtwKUJ/BZcq9EewdFBxy8fHlwADAMK7/x/UqqS7AAAAAElFTkSuQmCC"},c0dfe:function(t,e,i){"use strict";var s=i("d07e");i.n(s).a},d07e:function(t,e,i){},d975:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("win",{attrs:{height:560,width:920,ok:t.btnOK,cancel:t.btnCancel},on:{winEvent:t.closeSelfWin}},[s("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),s("div",{attrs:{slot:"content",id:"list-page"},slot:"content"},[s("div",{staticClass:"body-head"},[s("div",{staticClass:"block-div"},[s("select-store",{attrs:{sorts:t.category,isSingle:t.sortOne.isSingle,tipName:t.sortOne.tipName},on:{emit:function(e){t.getSelectStore(e,"one")}}})],1),t._v(" "),s("div",{staticClass:"block-div"},[s("select-store",{attrs:{sorts:t.child,isSingle:t.sortTwo.isSingle,tipName:t.sortTwo.tipName},on:{emit:function(e){t.getSelectStore(e,"two")}}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.child.length,expression:"child.length==0"}],staticClass:"cover-div",on:{click:t.stopShowSelectStore}})],1),t._v(" "),s("div",{staticClass:"input-div"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"请输入商品名"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),s("span",{staticClass:"search-img",on:{click:t.funSearchGoods}},[s("img",{attrs:{src:i("110c"),alt:""}})])]),t._v(" "),t._e()]),t._v(" "),s("div",{staticClass:"body-content"},[s("div",{staticClass:"list-all"},[t._l(t.goodsList,function(e,i){return[e.alreadySel?s("span",{key:i,class:{"none-select":e.alreadySel},on:{click:t.alreadyClick}},[t._v(t._s(e[t.fieldName]))]):s("span",{key:i,class:{"mul-span":t.goodsRadio&&e.selected,"single-span":!t.goodsRadio&&e.selected},on:{click:function(s){t.initSelectItem(e,i)}}},[t._v(t._s(e[t.fieldName]))])]})],2)]),t._v(" "),s("div",{staticClass:"body-bottom-only"},[s("div",{staticClass:"page-container"},[s("pageElement",{attrs:{page:t.pageObj.currentPage,total:t.pageObj.totalNum,num:t.pageObj.num,showPageNum:t.pageObj.showPageNum,isNoPaging:!0,isNoJump:!t.pageObj.isNoJump},on:{pageNum:t.getPageNum}})],1),t._v(" "),s("span",{staticClass:"select-tips"},[t._v("已选择:"+t._s(t.selectItem.length>1?t.selectItem.length+"个":t.selectItem[0]&&t.selectItem[0][t.fieldName]))])])])])};s._withStripped=!0;var o=i("bbb9"),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var a={data:function(){return{title:"标题",btnOK:{content:"确定",style:"background-color:#ff9800"},btnCancel:{content:"取消"},pageObj:{num:1,currentPage:1,totalNum:1,showPageNum:6,isNoJump:!1},sortOne:{tipName:"请选择一级分类",isSingle:!0,isConfirm:!0,status:-1},sortTwo:{tipName:"请选择二级分类",isSingle:!0,isConfirm:!1,status:-1},category:[],child:[],selectCategory:{parent:[],child:[]},goodsList:[],selectItem:[{}],search:"",goodsRadio:!1,fieldName:"name",onlyCategoryId:!1}},props:{pObj:{type:Object,default:{}},pCategory:{type:Array,default:[]},pGoodsList:{type:Array,default:[]}},methods:{closeSelfWin:function(t){var e=[];"ok"==t&&(e=this.goodsList.filter(function(t){return t.selected})),this.emitEvent(t,e)},alertWin:function(t){this.$store.commit("setWin",{title:"温馨提示",content:t})},getSelectStore:function(t,e){if("one"==e){var i=this.filterSelectStore(t);this.child=this.filterChildCategory(i),this.selectCategory.parent=i,this.sortTwo.tipName="请选择二级分类",this.sortTwo.status=-1,i.length>0?this.sortOne.status=1:this.sortOne.status=-1}else this.selectCategory.child=this.filterSelectStore(t)},stopShowSelectStore:function(){-1!=this.sortOne.status?0!=this.child.length||this.alertWin("该分类下无二级分类!"):this.alertWin("请先选择一级分类!")},funSearchGoods:function(){this.emitEvent("search",[])},emitEvent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i={page:this.pObj.currentPage,search:this.search.trim(),parent:o.a.deepCopy(this.selectCategory.parent),child:o.a.deepCopy(this.selectCategory.child),selList:o.a.deepCopy(e),cid:"",status:t};if(this.onlyCategoryId){var s="";i.child.length>0?s=i.child[0].id:i.parent.length>0&&(s=i.parent[0].id),i.cid=s}this.$emit("selectGoods",i)},initSelectItem:function(t,e){if(this.goodsRadio)t.selected=!t.selected,this.goodsList.splice(e,1,t),this.selectItem=this.goodsList.filter(function(t){return t.selected});else{var i=t.selected?null:[t.id],s=this.initSelectGoods(this.goodsList,i);this.selectItem=s.sel,this.goodsList=s.arr}},alreadyClick:function(){this.alertWin("该商品已被关联，删除关联该商品的bom单，即可取消关联")},getPageNum:function(t){this.pObj.currentPage=parseInt(t.page),this.emitEvent("page",[])},initSelectGoods:function(t,e){Array.isArray(e)||(e=[null]);var i={arr:[],sel:[]},s=!0,o=!1,n=void 0;try{for(var r,a=t[Symbol.iterator]();!(s=(r=a.next()).done);s=!0){var l=r.value,c=!0,d=!1,h=void 0;try{for(var u,p=e[Symbol.iterator]();!(c=(u=p.next()).done);c=!0){u.value==l.id?(i.sel.push(l),l.selected=!0):l.selected=!1,i.arr.push(l)}}catch(t){d=!0,h=t}finally{try{!c&&p.return&&p.return()}finally{if(d)throw h}}}}catch(t){o=!0,n=t}finally{try{!s&&a.return&&a.return()}finally{if(o)throw n}}return i},filterChildCategory:function(t){var e=[],i=!0,s=!1,o=void 0;try{for(var n,a=t[Symbol.iterator]();!(i=(n=a.next()).done);i=!0){var l=n.value;l.child&&e.push.apply(e,r(l.child))}}catch(t){s=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(s)throw o}}return e},filterSelectStore:function(t){var e=[],i=!0,s=!1,o=void 0;try{for(var n,r=t[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var a=n.value;a.selected&&e.push(a)}}catch(t){s=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw o}}return e},initData:function(){this.category=this.pCategory,this.goodsList=this.pGoodsList,Array.isArray(this.category)||(this.category=[]),Array.isArray(this.goodsList)||(this.goodsList=[]);var t=[null];this.pObj&&"object"==n(this.pObj)&&(this.pObj.selGoods&&this.pObj.selGoods.length>0&&(t=this.pObj.selGoods),this.initPro(["title","goodsRadio","fieldName","onlyCategoryId"],this.pObj,this),this.initPro(["num","currentPage","totalNum","showPageNum","isNoJump"],this.pObj,this.pageObj));var e=this.initSelectGoods(this.goodsList,t);this.goodsList=e.arr,this.selectItem=e.sel,0==this.selectItem.length&&(this.selectItem=[{}])},initPro:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=!0,o=!1,n=void 0;try{for(var r,a=t[Symbol.iterator]();!(s=(r=a.next()).done);s=!0){var l=r.value;e[l]&&(i[l]=e[l])}}catch(t){o=!0,n=t}finally{try{!s&&a.return&&a.return()}finally{if(o)throw n}}}},mounted:function(){this.initData()},watch:{pCategory:function(){var t=this.pCategory;Array.isArray(t)||(t=[]),this.category=[].concat(r(t))},pGoodsList:function(){var t=this.pGoodsList;Array.isArray(t)||(t=[]),this.goodsList=[].concat(r(t))},pObj:{handler:function(){this.initPro(["title","goodsRadio","fieldName","onlyCategoryId"],this.pObj,this),this.initPro(["num","currentPage","totalNum","showPageNum","isNoJump"],this.pObj,this.pageObj)},deep:!0}},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))},selectStore:function(){return i.e("win").then(i.bind(null,"cb83"))},pageElement:function(){return i.e("page_element").then(i.bind(null,"5921"))}}},l=(i("c0dfe"),i("6ceb")),c=Object(l.a)(a,s,[],!1,null,"28dc97d0",null);c.options.__file="src\\components\\list_page.vue";e.default=c.exports}}]);