(window.webpackJsonp=window.webpackJsonp||[]).push([["add_category_com"],{"16ef":function(t,e,r){"use strict";r.r(e);var i=r("bbb9"),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],i=!0,o=!1,n=void 0;try{for(var a,l=t[Symbol.iterator]();!(i=(a=l.next()).done)&&(r.push(a.value),!e||r.length!==e);i=!0);}catch(t){o=!0,n=t}finally{try{!i&&l.return&&l.return()}finally{if(o)throw n}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function a(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var l={data:function(){return{selectCategory:[],category:[],selectRadio:0,btnOk:{content:"确认",style:"background-color:#ff8d01"},btnCancel:{content:"取消",style:"background-color:#9fa0a0"}}},props:{title:null,tips:null,showTips:{type:Boolean,default:!0},radio:{type:Boolean,default:!0},list:{type:Array,default:Array},selectList:{type:Array,default:Array},fieldName:{type:String,default:"name"},eleStyle:{type:Object,default:Object}},methods:{closeSelfWin:function(t){var e=[];e="ok"==t?this.selectCategory:[],e=i.a.deepCopy(e),this.$emit("throwCommonWin",e,t)},funShowToggle:function(t,e){t.toggle=!t.toggle,this.category.splice(e,1,t)},chooseCategory:function(t,e,r){if(!t.notAllow)if(t.isSelect=!t.isSelect,this.radio){if(t.isSelect)this.selectCategory.push(t);else for(var i=0,o=this.selectCategory.length;i<o;i+=1)if(this.selectCategory[i].id==t.id){this.selectCategory.splice(i,1);break}this.category.push(this.category.pop())}else t.isSelect?this.selectCategory=[t]:this.selectCategory=[]},operationAll:function(t){var e={};"checkbox"==t?(this.selectRadio=1,e=this.initSelectCategory(this.category,[],!1)):(this.selectRadio=2,e=this.initSelectCategory(this.category,this.selectCategory,!1)),this.selectCategory=[].concat(a(e.no)),this.category=e.arr},assignCategory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[],r=!0,i=!1,o=void 0;try{for(var n,a=t[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var l=n.value;if(0==l.pid){l.child=[];var s=!0,c=!1,y=void 0;try{for(var h,f=t[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var u=h.value;u.pid==l.id&&l.child.push(u)}}catch(t){c=!0,y=t}finally{try{!s&&f.return&&f.return()}finally{if(c)throw y}}e.push(l)}}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return e},getSelectList:function(t){var e=[],r=!0,i=!1,o=void 0;try{for(var n,a=t[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){var l=n.value;l.isSelect&&e.push(l),Array.isArray(l.child)||(l.child=[]);var s=!0,c=!1,y=void 0;try{for(var h,f=l.child[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var u=h.value;u.isSelect&&e.push(u)}}catch(t){c=!0,y=t}finally{try{!s&&f.return&&f.return()}finally{if(c)throw y}}}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return e},initSelectCategory:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=n(e,3),l=i[0],s=void 0===l?[]:l,c=i[1],y=void 0===c?[]:c,h=i[2],f=void 0===h||h,u=[],d={arr:[],sel:[],no:[]};u=0==y.length?[null]:y[0]&&"object"==o(y[0])?this.listGetAttr(y,"id"):y;var g=!0,v=!1,p=void 0;try{for(var b,C=s[Symbol.iterator]();!(g=(b=C.next()).done);g=!0){for(var S=b.value,m=0;m<u.length;m++){if(S.id==u[m]){S.isSelect=f,d.sel.push(S),u.length>1&&u.splice(m,1);break}S.isSelect=!f}S.isSelect==!f&&d.no.push(S),Array.isArray(S.child)||(S.child=[]);var w=!0,_=!1,A=void 0;try{for(var k,x=S.child[Symbol.iterator]();!(w=(k=x.next()).done);w=!0){for(var O=k.value,T=0;T<u.length;T++){if(O.id==u[T]){O.isSelect=f,d.sel.push(O),u.length>1&&u.splice(T,1);break}O.isSelect=!f}O.isSelect==!f&&d.no.push(O)}}catch(t){_=!0,A=t}finally{try{!w&&x.return&&x.return()}finally{if(_)throw A}}if(!this.radio&&1==d.sel.length)break}}catch(t){v=!0,p=t}finally{try{!g&&C.return&&C.return()}finally{if(v)throw p}}return d.arr=[].concat(a(s)),d},listGetAttr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",r=[];return t.forEach(function(t,i){r[i]=t[e]}),r},listAddAttr:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"toggle",r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.map(function(t){return t[e]=r,t})},initData:function(){var t,e=!0;this.category=this.list,this.selectCategory=this.selectList;var r=!0,i=!1,o=void 0;try{for(var n,a=this.category[Symbol.iterator]();!(r=(n=a.next()).done);r=!0){0!=n.value.pid&&(e=!1)}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}e||(this.category=this.assignCategory(this.category)),this.category=this.listAddAttr(this.category,"toggle",!0),t=this.initSelectCategory(this.category,this.selectCategory,!0),this.category=t.arr,this.selectCategory=t.sel}},mounted:function(){this.initData()},watch:{list:function(){this.initData()},selectList:function(){this.initData()}},components:{win:function(){return r.e("win").then(r.bind(null,"f60a"))}}},s=(r("34f4"),r("d801")),c=Object(s.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("win",{attrs:{align:"center",height:650,width:765,ok:t.btnOk,cancel:t.btnCancel},on:{winEvent:t.closeSelfWin}},[r("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title?t.title:"选择分类"))]),t._v(" "),r("div",{style:{"padding-bottom":t.showTips?"50px":"0px"},attrs:{slot:"content",id:"add-category-com"},slot:"content"},[t._l(t.category,function(e,i){return r("section",{key:i,staticClass:"content-box"},[r("section",{staticClass:"parent"},[e.child&&e.child.length>0?r("a",{class:{arrow:!0,"arrow-up":e.toggle},on:{click:function(r){t.funShowToggle(e,i)}}}):t._e(),t._v(" "),r("span",{class:{radio:t.selectCategory[0]&&t.selectCategory[0].id==e.id&&!t.radio,checkbox:e.isSelect&&t.radio,"none-select":e.notAllow},style:t.eleStyle,on:{click:function(r){t.chooseCategory(e,i)}}},[t._v(t._s(e[t.fieldName]))])]),t._v(" "),r("transition",{attrs:{name:"fade"}},[e.toggle?r("div",{staticClass:"child"},t._l(e.child,function(e,o){return r("span",{key:o,staticClass:"list",class:{radio:t.selectCategory[0]&&t.selectCategory[0].id==e.id&&!t.radio,checkbox:e.isSelect&&t.radio,"none-select":e.notAllow},style:t.eleStyle,on:{click:function(r){t.chooseCategory(e,o,i)}}},[t._v(t._s(e[t.fieldName]))])})):t._e()])],1)}),t._v(" "),0==t.category.length?r("div",{staticClass:"none-tips"},[t._v("\n            "+t._s(t.tips?t.tips:"请先新建分类!")+"\n        ")]):t._e(),t._v(" "),t.showTips?r("div",{staticClass:"bottom"},[t.radio?[r("span",{staticClass:"radio",class:{"select-radio":1==t.selectRadio},on:{click:function(e){t.operationAll("checkbox")}}},[t._v("全选")]),t._v(" "),r("span",{staticClass:"radio",class:{"select-radio":2==t.selectRadio},on:{click:function(e){t.operationAll("radio")}}},[t._v("反选")])]:t._e(),t._v(" "),r("span",{staticClass:"tips-word"},[t._v("已选择 : "+t._s(t.selectCategory.length>1?t.selectCategory.length+"个":t.selectCategory[0]&&t.selectCategory[0][t.fieldName]))])],2):t._e()],2)])},[],!1,null,"37e63440",null);e.default=c.exports},"34f4":function(t,e,r){"use strict";var i=r("9bd0");r.n(i).a},"9bd0":function(t,e,r){}}]);