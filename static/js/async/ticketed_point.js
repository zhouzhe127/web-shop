(window.webpackJsonp=window.webpackJsonp||[]).push([["ticketed_point"],{"7b57":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"ticketed"}},[e.detail?e._e():i("div",{staticClass:"set-line"},[i("div",{staticClass:"title"},[e._v("新建开票点管理")]),e._v(" "),i("div",{staticClass:"line"})]),e._v(" "),e.detail?e._e():i("div",{staticClass:"main"},[i("div",{staticClass:"name required"},[e._v("销方名称")]),e._v(" "),i("selectBtn",{attrs:{sorts:e.ticketList.map(function(e){return e.name}),name:e.ticketName},on:{selOn:e.getDrop}})],1),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name required"},[e._v("设备厂商")]),e._v(" "),i("selectBtn",{attrs:{sorts:e.firmList.map(function(e){return e.name}),name:e.firmName},on:{selOn:e.getFirm}})],1),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name required"},[e._v("设备号")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.equipNum,expression:"client.equipNum"}],attrs:{type:"text",maxlength:"12",placeholder:"请输入设备号"},domProps:{value:e.client.equipNum},on:{input:function(t){t.target.composing||e.$set(e.client,"equipNum",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name required"},[e._v("税控盘密码")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.taxDiskPass,expression:"client.taxDiskPass"}],attrs:{type:"text",maxlength:"8",placeholder:"请输入税控盘密码"},domProps:{value:e.client.taxDiskPass},on:{input:function(t){t.target.composing||e.$set(e.client,"taxDiskPass",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name",class:{required:1==e.client.taxEquip}},[e._v("证书密码")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.certiCipher,expression:"client.certiCipher"}],attrs:{type:"text",maxlength:"16",placeholder:"请输入证书密码"},domProps:{value:e.client.certiCipher},on:{input:function(t){t.target.composing||e.$set(e.client,"certiCipher",t.target.value)}}})]),e._v(" "),e.detail?e._e():[i("div",{staticClass:"main"},[i("div",{staticClass:"name"},[e._v("联系地址")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.kpdz,expression:"client.kpdz"}],attrs:{type:"text",maxlength:"50",placeholder:"请输入联系地址"},domProps:{value:e.client.kpdz},on:{input:function(t){t.target.composing||e.$set(e.client,"kpdz",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name"},[e._v("联系电话")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.kpdh,expression:"client.kpdh"}],attrs:{type:"text",maxlength:"11",placeholder:"请输入联系电话"},domProps:{value:e.client.kpdh},on:{input:function(t){t.target.composing||e.$set(e.client,"kpdh",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name"},[e._v("开户银行")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.kpyh,expression:"client.kpyh"}],attrs:{type:"text",maxlength:"100",placeholder:"请输入开户银行"},domProps:{value:e.client.kpyh},on:{input:function(t){t.target.composing||e.$set(e.client,"kpyh",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name"},[e._v("开户账号")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.kpyhzh,expression:"client.kpyhzh"}],attrs:{type:"text",maxlength:"30",placeholder:"请输入开户账号"},domProps:{value:e.client.kpyhzh},on:{input:function(t){t.target.composing||e.$set(e.client,"kpyhzh",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name required"},[e._v("开票人")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.clientDrawer,expression:"client.clientDrawer"}],attrs:{type:"text",maxlength:"8",placeholder:"请输入开票人"},domProps:{value:e.client.clientDrawer},on:{input:function(t){t.target.composing||e.$set(e.client,"clientDrawer",t.target.value)}}})])],e._v(" "),e.detail?e._e():[3==e.ischain?i("div",{staticClass:"main"},[i("div",{staticClass:"name required"},[e._v("关联店铺")]),e._v(" "),i("div",{staticClass:"right"},[i("a",{staticClass:"blue",attrs:{href:"javascript: ;"},on:{click:e.showShopWin}},[i("i",{staticClass:"fi fi-add fi-2x"}),e._v("添加关联店铺")]),e._v(" "),e.shop.shopName?i("span",[e._v("已关联店铺："+e._s(e.shop.shopName))]):e._e()])]):e._e(),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name"},[e._v("复核人")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.clientReviewer,expression:"client.clientReviewer"}],attrs:{type:"text",maxlength:"8",placeholder:"请输入复核人"},domProps:{value:e.client.clientReviewer},on:{input:function(t){t.target.composing||e.$set(e.client,"clientReviewer",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name"},[e._v("收款人")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.clientPayee,expression:"client.clientPayee"}],attrs:{type:"text",maxlength:"8",placeholder:"请输入收款人"},domProps:{value:e.client.clientPayee},on:{input:function(t){t.target.composing||e.$set(e.client,"clientPayee",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name"},[e._v("终端SN")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.deviseSN,expression:"client.deviseSN"}],attrs:{type:"text",maxlength:"8",placeholder:"请输入终端SN"},domProps:{value:e.client.deviseSN},on:{input:function(t){t.target.composing||e.$set(e.client,"deviseSN",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name"},[e._v("终端密码")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.devisePSWD,expression:"client.devisePSWD"}],attrs:{type:"text",maxlength:"8",placeholder:"请输入终端密码"},domProps:{value:e.client.devisePSWD},on:{input:function(t){t.target.composing||e.$set(e.client,"devisePSWD",t.target.value)}}})]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"name"},[e._v("终端秘钥")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.client.deviseKEY,expression:"client.deviseKEY"}],attrs:{type:"text",maxlength:"8",placeholder:"请输入终端秘钥"},domProps:{value:e.client.deviseKEY},on:{input:function(t){t.target.composing||e.$set(e.client,"deviseKEY",t.target.value)}}})])],e._v(" "),i("div",{staticClass:"main foot"},[i("div",{staticClass:"name"}),e._v(" "),i("a",{staticClass:"gray",attrs:{href:"javascript: ;"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("a",{staticClass:"yellow",attrs:{href:"javascript: ;"},on:{click:e.save}},[e._v("保存")])]),e._v(" "),e.showShop?i("shopWin",{attrs:{shopIds:e.client.clientShopId,isTitle:"选择门店",isSingle:!0},on:{shopsSelect:e.getShops}}):e._e()],2)};a._withStripped=!0;var n=i("05dd"),s=i("81a2"),c=i("f6ce");var l={data:function(){return{ischain:"",ticketList:[],ticketName:"请选择销方名称",area:{province:"",city:"",area:"",provinceName:"",cityName:"",areaName:""},firmList:[{id:1,name:"百旺"},{id:2,name:"航信"}],firmName:"请选择设备厂商",showShop:!1,shopIds:"",shop:{id:"",shopName:""},client:{type:"",identifier:"",clientShopId:"",kpdz:"",kpdh:"",kpyh:"",kpyhzh:"",clientDrawer:"",taxEquip:"",equipNum:"",taxDiskPass:"",certiCipher:"",clientPayee:"",clientReviewer:"",deviseSN:"",devisePSWD:"",deviseKEY:""}}},watch:{client:{handler:function(e){e.kpdh=e.kpdh.replace(/[^\d-]/,""),e.kpyhzh=e.kpyhzh.replace(/[^\d\s]/,"")},deep:!0}},components:{radioBtn:function(){return i.e("radio_btn").then(i.bind(null,"4dfe"))},selectBtn:function(){return i.e("select_btn").then(i.bind(null,"3d41"))},shopWin:function(){return i.e("shops_select").then(i.bind(null,"a997"))}},props:["detail","dataList"],mounted:function(){if(this.ticketList=this.dataList,this.ischain=c.a.session("userShop").currentShop.ischain,this.$store.commit("setPageTools",[]),this.detail)for(var e in this.detail)this.client[e]=this.detail[e],"sellName"==e&&(this.ticketName=this.detail.sellName),"clientNO"==e&&(this.client.clientShopId=this.detail.clientNO),this.shop.shopName=this.detail.name},methods:{getDrop:function(e){this.ticketName=this.ticketList[e].name,this.client.identifier=this.ticketList[e].identifier},getFirm:function(e){this.client.taxEquip=this.firmList[e].id,this.firmName=this.firmList[e].name},showShopWin:function(){this.showShop=!0},getShops:function(e,t,i){this.showShop=!1,"ok"==e&&(this.client.clientShopId=t.substring(0,t.length-1),this.shop=i)},ticketSetInvoice:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.detail?t.client.type="02":t.client.type="01",e.next=3,s.a.ticketSetInvoice({data:t.client});case 3:t.$emit("ticket","ok");case 4:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function a(n,s){try{var c=t[n](s),l=c.value}catch(e){return void i(e)}if(!c.done)return Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)});e(l)}("next")})})()},save:function(){if(!n.a.checkData({identifier:"请选择销方"},this.client))return!1;if(!n.a.checkData({taxEquip:"请选择设备厂商"},this.client))return!1;if(!n.a.checkData({equipNum:"请输入设备号"},this.client))return!1;if(!n.a.checkData({equipNum:{cond:"$$.length==12",pro:"设备号为12位"}},this.client))return!1;if(!n.a.checkData({taxDiskPass:"请输入税控盘密码"},this.client))return!1;if(1==this.client.taxEquip&&!n.a.checkData({certiCipher:"请输入证书密码"},this.client))return!1;if(3==this.ischain&&!this.detail&&!n.a.checkData({clientShopId:"请选择关联店铺"},this.client))return!1;if(!this.detail){if(!n.a.checkData({clientDrawer:"请输入开票人"},this.client))return!1;this.client.kpyhzh=this.client.kpyhzh.replace(/[^\d]/,"")}this.ticketSetInvoice()},cancel:function(){this.$emit("ticket","cancel")}}},r=(i("c826"),i("6ceb")),o=Object(r.a)(l,a,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"set-line"},[t("div",{staticClass:"title"},[this._v("其他配置")]),this._v(" "),t("div",{staticClass:"line"})])}],!1,null,"b349a686",null);o.options.__file="src\\module\\ticket_config\\ticketed_point.vue";t.default=o.exports},c826:function(e,t,i){"use strict";var a=i("d16f");i.n(a).a},d16f:function(e,t,i){}}]);