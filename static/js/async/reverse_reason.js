(window.webpackJsonp=window.webpackJsonp||[]).push([["reverse_reason"],{2448:function(e,t,n){"use strict";n.r(t);var o=n("81a2"),i=n("f6ce"),r=n("bbb9");var s={data:function(){return{isAdd:!0,isShow:!1,userData:Object,refundFood:[],refundReasonId:"",refundReasonIndex:""}},mounted:function(){var e=this,t=[{name:"添加反结账原因",className:"pick",fn:function(){e.addReason()}}];this.$store.commit("setPageTools",t),this.userData=i.a.session("userShop"),this.init()},methods:{init:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getReasonList({data:{shopId:t.userData.currentShop.id,type:1}});case 2:(n=e.sent)&&(t.refundFood=n,t.sortList());case 4:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(i,r){try{var s=t[i](r),a=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(a).then(function(e){o("next",e)},function(e){o("throw",e)});e(a)}("next")})})()},addReason:function(){if(this.refundFood.length>=10)return this.$store.commit("setWin",{title:"提示信息",content:"反结账原因添加已满"}),!1;this.isAdd=!0,this.isShow=!0},editInfo:function(e,t){this.refundReasonId=t.id,this.refundReasonIndex=e,this.isAdd=!1,this.isShow=!0},deleteRefundBtn:function(e,t){var n=this;this.$store.commit("setWin",{title:"提示信息",winType:"confirm",content:"确认要删除吗？",callback:function(i){"ok"==i&&o.a.deleteReason({data:{rid:t.id,shopId:n.userData.currentShop.id,type:1}}).then(function(){n.refundFood.splice(e,1)})}})},doThrowWinResult:function(e,t){"ok"==e&&(this.isAdd?this.refundFood.push(t):this.refundFood.splice(this.refundReasonIndex,1,t),this.sortList()),this.isShow=!1},sortList:function(){this.refundFood=r.a.sortByAll(this.refundFood,["sort","id"],!0)}},components:{refundWin:function(){return n.e("reverse_reason_win").then(n.bind(null,"b187"))}}},a=n("d801"),d=Object(a.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("section",[n("el-table",{ref:"multipleTable",staticStyle:{width:"90%"},attrs:{stripe:"","header-cell-style":{"background-color":"#f5f7fa"},data:e.refundFood,border:""}},[n("el-table-column",{attrs:{fixed:"","min-width":"120",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.isDefined?n("span",[n("span",{staticStyle:{color:"#FE8D2C",cursor:"pointer"},on:{click:function(n){e.editInfo(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),n("span",{staticStyle:{padding:"0 5px",color:"#D2D2D2"}},[e._v("|")]),e._v(" "),n("span",{staticStyle:{color:"#FD3F1F",cursor:"pointer"},on:{click:function(n){e.deleteRefundBtn(t.$index,t.row)}}},[e._v("删除")])]):n("span",[e._v("不可操作")])]}}])}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"50",align:"center",prop:"sort",label:"排序"}}),e._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"120",align:"center",prop:"reasonName",label:"反结账原因"}})],1)],1),e._v(" "),e.isShow?n("refund-win",{attrs:{isAdd:e.isAdd,refundReasonId:e.refundReasonId,userData:e.userData},on:{throwWinResult:e.doThrowWinResult}}):e._e()],1)},[],!1,null,null,null);t.default=d.exports}}]);