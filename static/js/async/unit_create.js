(window.webpackJsonp=window.webpackJsonp||[]).push([["unit_create"],{"2e93":function(t,e,n){"use strict";n.r(e);var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"add-content"},[e("img",{attrs:{src:n("f518"),alt:"添加单位"}}),this._v(" "),e("span",[this._v("新建单位")])])}],i=n("81a2");function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(i,a){try{var s=e[i](a),u=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}("next")})}}var s={data:function(){return{units:[],showCom:"",comObj:{},subObj:{name:"",id:""}}},methods:{closeCommonWin:function(t,e){var n=this;return a(regeneratorRuntime.mark(function r(){var i,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i={},t.name=t.name.trim(),"close"!=e){r.next=6;break}n.showCom="",r.next=53;break;case 6:if("ok"!=e){r.next=43;break}if(!n.subObj.id){r.next=26;break}if(t.name&&!(t.name.length>10)){r.next=11;break}return n.$store.commit("setWin",{title:"温馨提示",content:"单位名称由1-10个字符组成!"}),r.abrupt("return");case 11:if(!/^\d+$/.test(t.name)){r.next=15;break}return n.$store.commit("setWin",{title:"温馨提示",content:"单位名称不能是纯数字!"}),r.abrupt("return");case 15:if(!n.checkUnitName(n.units,t.name,n.subObj.id)){r.next=18;break}return n.$store.commit("setWin",{title:"温馨提示",content:"单位重名!"}),r.abrupt("return");case 18:return i={id:n.subObj.id,name:t.name},r.next=21,n.MaterialEditUnit(i);case 21:r.sent&&(n.units=n.units.map(function(t){return t.id==i.id&&(t.name=i.name),t})),n.showCom="",r.next=41;break;case 26:if(t.name&&!(t.name.length>10)){r.next=29;break}return n.$store.commit("setWin",{title:"温馨提示",content:"单位名称由1-10个字符组成!"}),r.abrupt("return");case 29:if(!/^\d+$/.test(t.name)){r.next=33;break}return n.$store.commit("setWin",{title:"温馨提示",content:"单位名称不能是纯数字!"}),r.abrupt("return");case 33:if(!n.checkUnitName(n.units,t.name)){r.next=36;break}return n.$store.commit("setWin",{title:"温馨提示",content:"单位重名!"}),r.abrupt("return");case 36:return r.next=38,n.MaterialAddUnit(t);case 38:(a=r.sent)&&n.units.push(a),n.showCom="";case 41:r.next=53;break;case 43:if("cancel"!=e){r.next=53;break}if(!n.subObj.id){r.next=52;break}return r.next=47,n.MaterialDeleteUnit(n.subObj.id);case 47:r.sent&&(n.units=n.filterUnitsById(n.units,n.subObj.id)),n.showCom="",r.next=53;break;case 52:n.showCom="";case 53:case"end":return r.stop()}},r,n)}))()},openUnitWin:function(t){this.showCom="unitWin",t?(this.subObj={id:t.id,name:t.name},this.comObj={name:t.name,len:10,title:"修改单位",btnOk:{content:"确定",style:"background-color:#f8931f"},btnCancel:{content:"删除",style:"background-color:#f13c3c;"}}):(this.subObj={id:"",name:""},this.comObj={name:"",len:10,title:"新建单位",tips:"请输入单位名称",btnOk:{content:"确定",style:"background-color:#f8931f"},btnCancel:{content:"取消",style:"background-color:#a0a0a0;"}})},filterUnitsById:function(t,e){return t=t.filter(function(t){return t.id!=e})},checkUnitName:function(t,e,n){return n&&(t=this.filterUnitsById(t,n)),t.some(function(t){if(t.name==e)return!0})},MaterialGetUnitList:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.MaterialGetUnitList({data:{}});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},e,t)}))()},MaterialAddUnit:function(t){var e=this;return a(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.MaterialAddUnit({data:{name:t.name}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},n,e)}))()},MaterialDeleteUnit:function(t){var e=this;return a(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.MaterialDeleteUnit({data:{muId:t}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},n,e)}))()},MaterialEditUnit:function(t){var e=this;return a(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.MaterialEditUnit({data:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},n,e)}))()}},mounted:function(){var t=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.MaterialGetUnitList();case 2:t.units=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},components:{unitWin:function(){return n.e("unit_edit_create_win").then(n.bind(null,"7cf9"))}}},u=(n("57b5"),n("d801")),c=Object(u.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"invoicing-unit-create"}},[n("div",{staticClass:"unit-add",on:{click:function(e){t.openUnitWin(null)}}},[t._m(0)]),t._v(" "),n("div",{staticClass:"unit-list-content"},t._l(t.units,function(e,r){return n("li",{key:r,staticClass:"unit-list",on:{click:function(n){t.openUnitWin(e)}}},[n("div",{staticClass:"split-line"}),t._v(" "),n("div",{staticClass:"unit-content"},[n("span",{staticClass:"font"},[t._v(t._s(e.name))]),t._v(" "),n("span",{staticClass:"num"},[t._v(t._s(r+1))])])])})),t._v(" "),n(t.showCom,{tag:"component",attrs:{pObj:t.comObj},on:{throwCommonWin:t.closeCommonWin}})],1)},r,!1,null,"4907c432",null);e.default=c.exports},"566a":function(t,e,n){},"57b5":function(t,e,n){"use strict";var r=n("566a");n.n(r).a},f518:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKxJREFUeNrs2LENgzAQhWE7ygAZgQ2yApsk9S1hGMJeB7ERGzhHh+w0EXdF0P8ky9IV8BVH8Yi11mCdUsqg1/s4E5HJ+j334JMdn5qZOf4W/jjgwYMHDx48ePDgwYMHD/7XxJxzV5aNOuyrmc0eBfxbWfZIYm2ugt/XZtOzGj/3oefZzFbzD9bpj9mo13KciUhkbcCDBw8ePHjw4MGDBw8e/MkC7hGPUt/lI8AAt9oYPL6CVYkAAAAASUVORK5CYII="}}]);