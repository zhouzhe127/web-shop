(window.webpackJsonp=window.webpackJsonp||[]).push([["lose_manage"],{"2e76":function(t,e,i){},e4a0:function(t,e,i){"use strict";var s=i("2e76");i.n(s).a},f8050:function(t,e,i){"use strict";i.r(e);var s=[function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("h6",[this._v("操作类型:")]),this._v(" "),e("span",[this._v("耗损")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"prompt"},[e("img",{attrs:{src:i("fdd3"),alt:""}}),this._v(" "),e("span",[this._v("限40字以内")])])}],n=i("81a2"),a=i("bbb9"),o=i("05dd");var l={data:function(){return{checkHttp:!0,resion:"",loseNum:"",totalSurplus:0,surplus:0}},props:["detail","gid"],mounted:function(){this.totalSurplus=this.detail.totalSurplus,this.surplus=this.detail.surplus},methods:{cancal:function(){this.$emit("loseBack",!1)},changeNum:function(){0==Number(this.detail.type)&&this.loseNum?this.loseNum=parseInt(this.loseNum):this.loseNum.includes(".")&&(this.loseNum=this.loseNum.substr(0,this.loseNum.indexOf(".")+4))},continueLoss:function(t){var e,i=this;return(e=regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Number(i.loseNum)>Number(i.detail.surplus))){e.next=3;break}return i.$store.commit("setWin",{winType:"alert",content:"耗损数量应小于当前批次库存"}),e.abrupt("return",!1);case 3:if(o.a.checkData({loseNum:{pro:"数量输入有误",fn:function(){return this.loseNum>0||!!/^([+]?)\d*\.?\d+$/.test(this.loseNum)}}},i)){e.next=5;break}return e.abrupt("return",!1);case 5:s={gid:i.gid,type:0,num:i.loseNum,cause:i.resion,wid:i.detail.wid,areaId:i.detail.areaId,batchId:i.detail.batchId,surplus:i.surplus,totalSurplus:i.totalSurplus},i.checkHttp&&n.a.invoicing_loss({data:s}).then(function(e){i.totalSurplus=e.totalSurplus,i.surplus-=i.loseNum,i.$emit("loseBack",e),t&&i.cancal(),i.setNone(),i.$store.commit("setWin",{title:"提示",winType:"alert",content:"耗损成功"})});case 7:case"end":return e.stop()}},e,i)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function s(n,a){try{var o=t[n](a),l=o.value}catch(t){return void i(t)}if(!o.done)return Promise.resolve(l).then(function(t){s("next",t)},function(t){s("throw",t)});e(l)}("next")})})()},confirm:function(){this.continueLoss(!0)},setNone:function(){this.loseNum="",this.resion=""},getTime:function(t){return a.a.format(1e3*parseInt(t),"yyyy-MM-dd")}}},r=(i("e4a0"),i("d801")),u=Object(r.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{attrs:{id:"materials-putin-storage"}},[i("div",{staticClass:"new-inventory"},[i("div",{staticClass:"topbox"},[i("i"),t._v(" "),i("h3",[t._v("新增耗损")]),t._v(" "),t._l(32,function(t){return i("div",{key:t,staticClass:"dian"})})],2),t._v(" "),i("ul",{staticClass:"new-inventory-body"},[i("li",[t._m(0),t._v(" "),i("section",[i("h6",[t._v("批次编码:")]),t._v(" "),i("span",[t._v(t._s(t.detail.batchCode||"--"))])])]),t._v(" "),i("li",[i("section",[i("h6",[t._v("仓库:")]),t._v(" "),i("span",[t._v(t._s(t.detail.wName||"暂无")+"-"+t._s(t.detail.aName||"暂无"))])]),t._v(" "),i("section",[i("h6",[t._v("进价:")]),t._v(" "),i("span",[t._v(t._s(t.detail.purchasePrice||"--"))])])]),t._v(" "),i("li",[i("section",[i("h6",[t._v("生产日期:")]),t._v(" "),i("span",[t._v(t._s(t.getTime(t.detail.productionTime)))])]),t._v(" "),i("section",[i("h6",[t._v("失效日期:")]),t._v(" "),i("span",[t._v(t._s(t.getTime(t.detail.expiryTime)))])])]),t._v(" "),i("li",[i("section",[i("h6",[t._v("供应商:")]),t._v(" "),i("span",[t._v(t._s(t.detail.supplier||"--"))])]),t._v(" "),i("section",[i("h6",[t._v("货号:")]),t._v(" "),i("span",[t._v(t._s(t.detail.articleNo||"--"))])])]),t._v(" "),i("li",[i("section",{staticClass:"weightNum"},[i("h6",{staticClass:"required"},[t._v("耗损数量/重量:")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.loseNum,expression:"loseNum"}],attrs:{type:"text",placeholder:"请输入耗损数量",maxlength:"10"},domProps:{value:t.loseNum},on:{input:[function(e){e.target.composing||(t.loseNum=e.target.value)},t.changeNum]}}),t._v(" "),i("span",[t._v("（当前批次库存："+t._s(t.totalSurplus)+"）")])])]),t._v(" "),i("div",{staticClass:"note"},[i("p",[t._v("备注")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.resion,expression:"resion"}],attrs:{placeholder:"请输入备注",maxlength:"40"},domProps:{value:t.resion},on:{input:function(e){e.target.composing||(t.resion=e.target.value)}}})]),t._v(" "),t._m(1)])]),t._v(" "),i("ul",{staticClass:"btn"},[i("li",{staticClass:"gray",on:{click:t.cancal}},[t._v("取消")]),t._v(" "),i("li",{on:{click:function(e){t.continueLoss(!1)}}},[t._v("继续耗损")]),t._v(" "),i("li",{staticClass:"orange",on:{click:t.confirm}},[t._v("确定")])])])},s,!1,null,"c48324fc",null);e.default=u.exports},fdd3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAASCAYAAAC9+TVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTNEMTRBQjQ3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTNEMTRBQjU3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1M0QxNEFCMjdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1M0QxNEFCMzdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoJwRHcAAAF1SURBVHjapNRPKARRHMDx2bGsEiUXB5JEDubktiWlxHUl5eCmlJSDPyfkTykOJOWwxz1ISRxsCUURF21pDi5ulIQD7Zbb+L76jZ7Xm92DV5/27e+9+c37O7EgCJz/lrjv+/r/VsxjCAlL/xOs4TIMeJ7nuFqHETzIbyLipf24wLIeDJMMI4Myy4NqvosYQE5iarTrv9NBA3aLTPkaS1KvwJ7UZ3COUzWSzRLr1oVBtGPaaEuzprG4dLCVPI7xhgl0W/o0oTcekeBM5p/FlcTeUWfpm3QtwWfZgTHUS6wa5REvbLQlqcUqbrEvsQ3URCRxbUmqtHPjyGhGiyz8qxvRsIUPqW9r58VWcirJjRH8xoLUe2T3dvAZsYNZlWTSaDjAl9QLmNMW1yxT3J2CSnKHFa2hGS1oQ4eMZNxyJdQZSofH3pHhV8pRTuKxxCk+Qsq8gKrMyiW7L/Lwk0w/9ed7YnQ6FH3oVAdJpvECX74neTPzjwADADrTSFI39Bw5AAAAAElFTkSuQmCC"}}]);