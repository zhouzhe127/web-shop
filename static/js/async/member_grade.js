(window.webpackJsonp=window.webpackJsonp||[]).push([["member_grade"],{5547:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"commodity-box",attrs:{id:"grade"}},["0"==t.brandId||"3"==t.brandId?i("section",{staticClass:"commodityAdd fl",on:{click:function(e){t.addGrade({type:"add"})}}},[t._m(0)]):t._e(),t._v(" "),t._l(t.gradeList,function(e,s){return i("section",{key:s,staticClass:"fl member-box",on:{click:function(i){t.addGrade({type:"edit",i:s,gid:e.id,memberInfo:e})}}},[i("section",{staticClass:"member-child"},[i("section",{staticClass:"fl member-left"},[i("section",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),i("section",{staticClass:"titles"},[t._v("享受折扣率为"+t._s(e.discount)+"%")])]),t._v(" "),i("section",{staticClass:"fl member-right"},[1==e.sortStatus&&"2"!=e.status?i("h2",[t._v(t._s(s+1))]):t._e(),t._v(" "),1==e.sortStatus&&"2"==e.status?i("h3",[t._v("粉丝")]):t._e(),t._v(" "),0==e.sortStatus?i("h2",[t._v("0")]):t._e()])])])}),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.addEidteWin?i("member-grade-win",t._b({on:{isChangeEdit:t.isChangeEdit}},"member-grade-win",t.obj,!1)):t._e()],1)],2)},r=[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"combox"},[e("img",{attrs:{src:i("f518"),alt:"添加"}}),this._v(" "),e("h3",[this._v("新建会员等级")])])}];s._withStripped=!0;var n=i("81a2"),a=i("f6ce"),o=i("bbb9");var d={data:function(){return{gradeList:[],brandId:a.a.session("userShop").currentShop.ischain,addEidteWin:!1,title:"",obj:{},index:""}},methods:{isChangeEdit:function(t){this.addEidteWin=!1,t?"push"==t.type?(this.gradeList.push(t.payload.data),this.gradeSort(this.gradeList)):(this.gradeList.splice(this.index,t.payload.data),this.gradeSort(this.gradeList)):this.getList()},addGrade:function(t){var e=t.type,i=t.i,s=t.gid,r=t.memberInfo;this.index=i,this.addEidteWin=!0;var n="add"==e?"新建会员等级":"修改会员等级",o=void 0,d=a.a.session("userShop").uploadUrl,c=void 0;o="edit"==e&&this.gradeList[i].imgName?this.gradeList[i].imgName:null,c="add"==e?{imgHost:d,type:e,title:n,gradeList:this.gradeList,brandId:this.brandId,memberInfo:r}:{gid:s,memberInfo:r,gradeList:this.gradeList,wfileName:o,imgHost:d,type:e,title:n,brandId:this.brandId},this.obj=c},getList:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var i,s,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.a.memberGetList({data:{}});case 2:for(i=t.sent,e.gradeList=i,e.gradeSort(e.gradeList),s=void 0,r=[],s=0;s<e.gradeList.length;s++)"1"!=e.gradeList[s].status&&"2"!=e.gradeList[s].status||(r=e.gradeList[s]);o.a.isEmptyObject(r)&&e.$store.commit("setWin",{content:"您还未设置默认等级,所有关联等级将不会启用！",winType:"alert",title:"提示信息"});case 9:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function s(r,n){try{var a=e[r](n),o=a.value}catch(t){return void i(t)}if(!a.done)return Promise.resolve(o).then(function(t){s("next",t)},function(t){s("throw",t)});t(o)}("next")})})()},gradeSort:function(t){for(var e=[],i=void 0,s=t,r=function(){for(var t=0;t<s.length;t++)if(void 0===i){for(var r=0;r<s.length;r++)if("2"==s[r].status&&(e.push(s[r]),s.splice(r,1)),"1"==s[r].status)return i=s[r],e.push(i),s.splice(r,1),!0}else for(var n=0;n<s.length;n++)if(i.nextLevel===s[n].id+"")return i=s[n],e.push(i),s.splice(n,1),!0;return!1};r();)console.log("111");if(console.log(JSON.stringify(e)),console.log(JSON.stringify(s)),s.length>0){for(var n=0;n<s.length;n++)s[n].sortStatus=!1;for(var a=0;a<e.length;a++)e[a].sortStatus=!0;this.gradeList=e.concat(s)}else{for(var o=0;o<e.length;o++)e[o].sortStatus=!0;for(var d=0;d<s.length;d++)s[d].sortStatus=!1;this.gradeList=e}}},mounted:function(){this.getList()},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))},"member-grade-win":function(){return i.e("member_grade_win").then(i.bind(null,"1654"))}}},c=(i("b261"),i("6ceb")),u=Object(c.a)(d,s,r,!1,null,"2de71734",null);u.options.__file="src\\module\\member_system\\member_grade.vue";e.default=u.exports},aca4:function(t,e,i){},b261:function(t,e,i){"use strict";var s=i("aca4");i.n(s).a},f518:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKxJREFUeNrs2LENgzAQhWE7ygAZgQ2yApsk9S1hGMJeB7ERGzhHh+w0EXdF0P8ky9IV8BVH8Yi11mCdUsqg1/s4E5HJ+j334JMdn5qZOf4W/jjgwYMHDx48ePDgwYMHD/7XxJxzV5aNOuyrmc0eBfxbWfZIYm2ugt/XZtOzGj/3oefZzFbzD9bpj9mo13KciUhkbcCDBw8ePHjw4MGDBw8e/MkC7hGPUt/lI8AAt9oYPL6CVYkAAAAASUVORK5CYII="}}]);