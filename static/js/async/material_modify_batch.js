(window.webpackJsonp=window.webpackJsonp||[]).push([["material_modify_batch"],{3401:function(t,e,i){"use strict";var n=i("509c");i.n(n).a},"509c":function(t,e,i){},"5ed4":function(t,e,i){"use strict";i.r(e);var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("p",[this._v("入库类型")]),this._v(" "),e("span",[this._v("修改批次信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl"},[e("span",{staticClass:"addstyle"},[this._v("+")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"prompt"},[e("img",{attrs:{src:i("fdd3"),alt:""}}),this._v(" "),e("span",[this._v("限40字以内")])])}],a=i("81a2"),s=i("f6ce");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(a,s){try{var r=e[a](s),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var o={data:function(){return{allUnit:["只","个"],unitName:"只",startTime:"",endTime:"",newShopdetail:"",wareshow:!1,wareType:0,winTitle:"仓库位置",iswear:"",isarea:"",selectSupply:"选择供应商",win:{title:"供应商",show:!1,list:[],width:980,height:400,isradio:!0,name:"name",selkey:"id",selects:[]},unitReady:[],materialInfo:{},unitInfo:[],unitInfoName:"",unitInfoDefault:"",unitInfoMin:"",unitInfoValue:"",unitInfoConversion:"",cateInfo:[],cateInfoName:"",wid:"",areaId:"",supplierId:"",number:"",weight:"",conversion:"",purchasePrice:"",purchaseUnit:"",batchCode:"",articleNo:"",remark:"",existingBatchInfo:{},conversionArr:[],smallUnit:"",negative:"",validityType:"",sameUnitConver:""}},methods:{getStartTime:function(t){this.startTime=t},getEndTime:function(t){this.endTime=t},getpiceunit:function(t){var e="",i=!0,n=!1,a=void 0;try{for(var s,r=this.unitInfo[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var o=s.value;t==o.muId&&(e=o.name)}}catch(t){n=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw a}}return e},dealData:function(t,e){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var c=r.value;i.push(c[e])}}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return i},init:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var i,n,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getMaterialDetail({data:{mid:t.existingBatchInfo.itemId}});case 2:for(i=e.sent,t.materialInfo=i,t.unitInfo=i.unit,0==t.materialInfo.validityType?t.validityType="月":1==t.materialInfo.validityType?t.validityType="日":2==t.materialInfo.validityType&&(t.validityType="年"),n=[],s=0;s<t.unitInfo.length;s++)t.existingBatchInfo.purchaseUnit==t.unitInfo[s].name?t.conversion=t.unitInfo[s].value:t.conversion=1,1==t.unitInfo[s].isDefault&&1==t.unitInfo[s].isMin&&(t.unitInfoDefault=t.unitInfo[s].name,t.unitInfoMin=t.unitInfo[s].name,t.sameUnitConver="1"+t.unitInfo[s].name+"="+t.unitInfo[s].value+t.unitInfoMin),1==t.unitInfo[s].isDefault&&(t.unitInfoDefault=t.unitInfo[s].name),1==t.unitInfo[s].isMin&&(t.unitInfoMin=t.unitInfo[s].name),0==t.unitInfo[s].isMin&&(n.push(t.unitInfo[s]),t.unitInfo[s].unitConversion="1"+t.unitInfo[s].name+"="+t.unitInfo[s].value+t.unitInfoMin);t.conversionArr=n,t.unitInfoName=t.dealData(t.unitInfo,"name").join("、"),t.unitInfoConversion=t.dealData(t.conversionArr,"unitConversion").join("|"),t.cateInfo=i.cate,t.cateInfoName=t.dealData(t.cateInfo,"name").join("、");case 13:case"end":return e.stop()}},e,t)}))()},wareEvent:function(t){console.log(t),this.wareshow=!1,"ok"==t&&this.wareClose()},wareClose:function(){var t=this.$refs.warehouse;if(!t.chooseWare)return this.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"请选择区域"}),this.wareshow=!0,!1;this.iswear=t.searchList[t.homeSel].name,this.isarea=t.chooseWare.areaName,this.wid=t.homeId,this.areaId=t.chooseWare.id},showHouse:function(){this.wareshow=!0},showSupply:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.win.show=!0,e.next=3,a.a.suppierList();case 3:i=e.sent,t.win.list=i;case 5:case"end":return e.stop()}},e,t)}))()},winSel:function(t){this.win.selects=t,this.supplierId=t[0],void 0==this.supplierId&&(this.supplierId=""),this.win.list.length>0&&t.length>0&&(this.selectSupply=this.win.list.find(function(e){return e.id===t[0]}).name)},winEvent:function(t){this.win.show=!1,"ok"==t&&this.openOrClose()},cancal:function(){window.history.go(-1)},confirm:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.startTime>t.endTime)){e.next=3;break}return t.$store.commit("setWin",{title:"操作提示",content:"生产日期不能大于失效日期"}),e.abrupt("return");case 3:return e.next=5,a.a.updateBatch({data:{type:1,batchId:t.existingBatchInfo.batchId,wid:t.wid,itemId:t.existingBatchInfo.itemId,batchCode:t.batchCode,supplierId:t.supplierId,articleNo:t.articleNo,purchasePrice:t.purchasePrice,productionTime:t.startTime/1e3,expiryTime:t.endTime/1e3,remark:t.remark}});case 5:e.sent&&t.$store.commit("setWin",{title:"温馨提示",content:"修改成功",callback:function(t){"ok"==t&&window.history.go(-1)}});case 7:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.existingBatchInfo=s.a.session("editInfo"),this.wid=this.existingBatchInfo.wid,this.areaId=this.existingBatchInfo.areaId,this.supplierId=this.existingBatchInfo.supplierId,this.batchCode=this.existingBatchInfo.batchCode,this.selectSupply=this.existingBatchInfo.supplier,this.startTime=1e3*Number(this.existingBatchInfo.productionTime),this.endTime=1e3*Number(this.existingBatchInfo.expiryTime),this.purchasePrice=this.existingBatchInfo.purchasePrice,this.articleNo=this.existingBatchInfo.articleNo,this.remark=this.existingBatchInfo.remark,this.init()},components:{selectBtn:function(){return i.e("select_btn").then(i.bind(null,"3d41"))},calendar:function(){return i.e("calendar_type").then(i.bind(null,"f2dd"))},warehouseWin:function(){return i.e("warehouse_win").then(i.bind(null,"0c7d"))},multipleWin:function(){return i.e("multiple_win").then(i.bind(null,"d696"))}}},c=(i("3401"),i("d801")),l=Object(c.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{attrs:{id:"materials-putin-storage"}},[i("div",{staticClass:"material-info"},[i("div",{staticClass:"titleTop"},[i("div",{staticClass:"topbox"},[i("i"),t._v(" "),i("h3",[t._v("物料信息")]),t._v(" "),t._l(32,function(t){return i("div",{key:t,staticClass:"dian"})})],2)]),t._v(" "),i("ul",{staticClass:"material-info-body"},[i("li",[i("div",[t._v("物料名称："+t._s(t.materialInfo.name))]),t._v(" "),i("div",[t._v("物料单位："+t._s(t.unitInfoName))]),t._v(" "),i("div",[t._v("单位换算："+t._s(t.unitInfoConversion?t.unitInfoConversion:t.sameUnitConver))])]),t._v(" "),i("li",[i("div",[t._v("物料简码："+t._s(t.materialInfo.BC))]),t._v(" "),i("div",[t._v("默认单位："+t._s(t.unitInfoDefault))]),t._v(" "),i("div",[t._v("分类："+t._s(t.cateInfoName))])]),t._v(" "),i("li",[i("div",[t._v("品牌："+t._s(t.materialInfo.brandName))]),t._v(" "),i("div",[t._v("最小单位："+t._s(t.unitInfoMin))]),t._v(" "),i("div",[t._v("保质期："+t._s(t.materialInfo.validity+t.validityType))])])])]),t._v(" "),i("div",{staticClass:"new-inventory"},[i("div",{staticClass:"titleTop"},[i("div",{staticClass:"topbox"},[i("i"),t._v(" "),i("h3",[t._v("修改批次信息")]),t._v(" "),t._l(32,function(t){return i("div",{key:t,staticClass:"dian"})})],2)]),t._v(" "),i("ul",{staticClass:"new-inventory-body"},[i("li",[t._m(0),t._v(" "),i("section",[i("p",[t._v("仓库")]),t._v(" "),i("span",[t._v(t._s(t.existingBatchInfo.wName)+t._s("-")+t._s(t.existingBatchInfo.aName))])])]),t._v(" "),i("li",[i("section",[i("h6",[t._v("批次编码")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.batchCode,expression:"batchCode"}],attrs:{type:"text",placeholder:"选填",maxlength:"20"},domProps:{value:t.batchCode},on:{input:function(e){e.target.composing||(t.batchCode=e.target.value)}}})]),t._v(" "),i("section",[i("p",[t._v("供应商")]),t._v(" "),i("section",{staticClass:"tableListInp chairFix",staticStyle:{"vertical-align":"middle"},on:{click:t.showSupply}},[i("span",{staticClass:"inptext"},[t._v(t._s(t.selectSupply))]),t._v(" "),t._m(1)])])]),t._v(" "),i("li",[i("section",[i("p",[t._v("生产日期")]),t._v(" "),i("section",{staticClass:"dateBox"},[i("calendar",{attrs:{time:t.startTime,format:"yyyy-MM-dd"},on:{emit:t.getStartTime}})],1)]),t._v(" "),i("section",[i("p",[t._v("失效日期")]),t._v(" "),i("section",{staticClass:"dateBox"},[i("calendar",{attrs:{time:t.endTime,format:"yyyy-MM-dd"},on:{emit:t.getEndTime}})],1)])]),t._v(" "),i("li",[i("section",[i("h6",[t._v("进价")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.purchasePrice,expression:"purchasePrice"}],attrs:{type:"text",placeholder:"选填",maxlength:"10"},domProps:{value:t.purchasePrice},on:{input:function(e){e.target.composing||(t.purchasePrice=e.target.value)}}})]),t._v(" "),i("section",[i("h6",[t._v("进价单位")]),t._v(" "),t.existingBatchInfo.purchaseUnit?i("span",[t._v(t._s(t.getpiceunit(t.existingBatchInfo.purchaseUnit)))]):t._e()])]),t._v(" "),i("li",[i("section",[i("h6",[t._v("数量/重量")]),t._v(" "),i("span",[t._v(t._s(t.materialInfo.num)+t._s(t.unitInfoMin))])]),t._v(" "),i("section",[i("h6",[t._v("货号")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.articleNo,expression:"articleNo"}],attrs:{type:"text",placeholder:"选填",maxlength:"20"},domProps:{value:t.articleNo},on:{input:function(e){e.target.composing||(t.articleNo=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"note"},[i("p",[t._v("备注")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"remark"}],attrs:{placeholder:"选填",maxlength:"40"},domProps:{value:t.remark},on:{input:function(e){e.target.composing||(t.remark=e.target.value)}}})]),t._v(" "),t._m(2)])]),t._v(" "),i("ul",{staticClass:"btn"},[i("li",{staticClass:"gray",on:{click:t.cancal}},[t._v("取消")]),t._v(" "),i("li",{staticClass:"orange",on:{click:t.confirm}},[t._v("确定")])]),t._v(" "),t.win.show&&t.win.list.length>0?i("multiple-win",{attrs:{styles:{backgroundColor:"#F1F1F1"},isradio:t.win.isradio,selects:t.win.selects,title:t.win.title,name:t.win.name,width:t.win.width,height:t.win.height,list:t.win.list,selkey:t.win.selkey},on:{winEvent:t.winEvent,selArray:t.winSel}}):t._e(),t._v(" "),t.wareshow?i("warehouseWin",{ref:"warehouse",attrs:{title:t.winTitle,wareType:t.wareType},on:{wareEvent:t.wareEvent}}):t._e()],1)},n,!1,null,"638eaddf",null);e.default=l.exports},fdd3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAASCAYAAAC9+TVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTNEMTRBQjQ3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTNEMTRBQjU3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1M0QxNEFCMjdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1M0QxNEFCMzdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoJwRHcAAAF1SURBVHjapNRPKARRHMDx2bGsEiUXB5JEDubktiWlxHUl5eCmlJSDPyfkTykOJOWwxz1ISRxsCUURF21pDi5ulIQD7Zbb+L76jZ7Xm92DV5/27e+9+c37O7EgCJz/lrjv+/r/VsxjCAlL/xOs4TIMeJ7nuFqHETzIbyLipf24wLIeDJMMI4Myy4NqvosYQE5iarTrv9NBA3aLTPkaS1KvwJ7UZ3COUzWSzRLr1oVBtGPaaEuzprG4dLCVPI7xhgl0W/o0oTcekeBM5p/FlcTeUWfpm3QtwWfZgTHUS6wa5REvbLQlqcUqbrEvsQ3URCRxbUmqtHPjyGhGiyz8qxvRsIUPqW9r58VWcirJjRH8xoLUe2T3dvAZsYNZlWTSaDjAl9QLmNMW1yxT3J2CSnKHFa2hGS1oQ4eMZNxyJdQZSofH3pHhV8pRTuKxxCk+Qsq8gKrMyiW7L/Lwk0w/9ed7YnQ6FH3oVAdJpvECX74neTPzjwADADrTSFI39Bw5AAAAAElFTkSuQmCC"}}]);