(window.webpackJsonp=window.webpackJsonp||[]).push([["bom_detail"],{"3629f":function(t,e,n){"use strict";var i=n("cf22");n.n(i).a},cf22:function(t,e,n){},e298:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"bom-detail"}},[n("div",{staticClass:"headBox"},[n("div",{staticClass:"headTitle"},[t._v("BOM单信息")]),t._v(" "),n("div",{staticClass:"innerBox"},[n("ul",[n("li",[n("span",[t._v("商品名称 : "+t._s(t.bom.gName))])]),t._v(" "),n("li",[n("span",[t._v("BOM单编号 : ")]),t._v(" "),n("span",[t._v(t._s(t.bom.bomNum))])]),t._v(" "),n("li",[n("span",[t._v("BOM单类型 : ")]),t._v(" "),n("span",[t._v(t._s(1==t.bom.isPublic?"公开":"保密"))])])]),t._v(" "),n("ul",[n("li",[n("span",[t._v("创建人 : ")]),t._v(" "),n("span",[t._v(t._s(t.bom.createName))])]),t._v(" "),n("li",[n("span",[t._v("自动消耗 : ")]),t._v(" "),n("span",[t._v(t._s(1==t.bom.isAuto?"开":"关"))])]),t._v(" "),n("li",[n("span",[t._v("库存可以为负数 : ")]),t._v(" "),n("span",[t._v(t._s(1==t.bom.isOversold?"是":"否"))])])]),t._v(" "),n("ul",[n("li",[n("span",[t._v("备注 : "+t._s(t.bom.remark))])])])]),t._v(" "),n("div",{staticClass:"search"},[n("div",{staticClass:"blue filter",on:{click:t.turnToEdit}},[t._v("修改")]),t._v(" "),n("div",{staticClass:"gray reset",on:{click:t.deleteBom}},[t._v("删除")])])]),t._v(" "),n("div",{staticClass:"table"},[n("div",{staticClass:"table-title"},[t._v("\n\t\t\t批次列表\n\t\t\t"),n("span",{staticClass:"circle"}),t._v("共\n\t\t\t"),n("span",{staticClass:"tips-num"},[t._v(t._s(t.bomDetail.length))]),t._v("个条目\n\t\t\t"),n("a",{staticClass:"showDetail",on:{click:function(e){t.showDetail=!t.showDetail}}},[t._v(t._s(t.showDetail?"简洁":"详细"))])]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"table-body"},[t._l(t.bomDetail,function(e,i){return n("div",{key:i,staticClass:"table-row"},[n("li",[t._v(t._s(i+1))]),t._v(" "),n("li",[t._v(t._s(e.mName))]),t._v(" "),n("li",[n("div",{staticClass:"unit-div",on:{click:function(n){t.arrestClickEvent(e,i,n)}}},[n("div",{staticClass:"block-btn"},[n("span",{staticClass:"unit",attrs:{title:e.consumeUnitName}},[t._v(t._s(e.consumeUnitName))]),t._v(" "),t._m(1,!0)]),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.toggleUnit,expression:"item.toggleUnit"}]},t._l(e.unit,function(a,s){return n("li",{key:s,on:{click:function(n){t.changeUnit(a,e,i)}}},[t._v(t._s(a.name))])}))])]),t._v(" "),n("li",[t._v(t._s(e.showConsumeNum))]),t._v(" "),n("li",[t._v(t._s(e.wids?e.wids.length:""))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDetail,expression:"showDetail"}],staticClass:"area-detail"},t._l(e.host,function(e,i){return n("li",{key:i},[n("span",[t._v(t._s(i+1))]),t._v(" "),n("i",[t._v(t._s(e))])])}))])}),t._v(" "),0==t.bomDetail.length?n("div",{staticClass:"bom-tips"},[t._v("\n\t\t\t\t无条目信息\n\t\t\t")]):t._e()],2)])])};i._withStripped=!0;var a=n("81a2"),s=n("05dd"),o=n("f6ce"),r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,a=!1,s=void 0;try{for(var o,r=t[Symbol.iterator]();!(i=(o=r.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){a=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(a)throw s}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function l(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(a,s){try{var o=e[a](s),r=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(r).then(function(t){i("next",t)},function(t){i("throw",t)});t(r)}("next")})}}var u={data:function(){return{bomId:"",bom:{},bomDetail:[],showDetail:!1}},methods:{deleteBom:function(){var t=this;this.$store.commit("setWin",{content:"确认删除该BOM单?",winType:"confirm",callback:function(e){"ok"==e&&t.BillmaterialDelBom(t.bomId).then(function(e){if(e){var n=t.$route.query;o.a.session("bomListDestroy",!0),t.$router.push({path:"/admin/bomList",query:n})}else t.$store.commit("setWin",{content:"删除BOM失败!"})})}})},arrestClickEvent:function(t,e,n){n.cancelBubble=!0,this.bomDetail=this.bomDetail.map(function(e){return t.id==e.id?(e.toggleUnit=!e.toggleUnit,e):(e.toggleUnit=!1,e)})},changeUnit:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=r(e,3),a=i[0],o=i[1],l=i[2];o.showConsumeNum=s.a.comUnit(o.consumeMinVal,Number(a.value),a.name,o.minUnitName),o.consumeUnitName=a.name,o.newConsumeNum=Number(o.consumeMinVal)/Number(a.value),this.bomDetail.splice(l,1,o)},BillmaterialGetBomDetail:function(t){var e=this;return l(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.BillmaterialGetBomDetail({data:{bid:t}});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},n,e)}))()},BillmaterialDelBom:function(t){var e=this;return l(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.BillmaterialDelBom({data:{id:t}});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},n,e)}))()},initData:function(){this.bomId=this.$route.query.id},initBtn:function(){var t=this;this.$store.commit("setPageTools",[{name:"返回",className:["back"],fn:function(){o.a.session("bomListDestroy",!0),delete t.$route.query.id,t.$router.push({path:"/admin/bomList",query:t.$route.query})}}])},turnToEdit:function(){var t=this.$route.query;t.id=this.bomId,this.$router.push({path:"bomChange",query:t})},domClick:function(){this.bomDetail=this.bomDetail.map(function(t){return t.toggleUnit=!1,t})}},mounted:function(){var t=this;this.initData(),this.initBtn(),this.BillmaterialGetBomDetail(this.bomId).then(function(e){e instanceof Array&&0==e.length||!e?e=[]:(t.bom=e,e.detail=e.detail.map(function(t){t.toggleUnit=!1,t.wids=t.wids.split(","),t.host=t.warehouseName.map(function(t){return t.name});var e=null,n=null,i=null;t.unit.forEach(function(t){1==t.isMin&&(e=t.muId,i=t.name),1==t.isDefault&&(n=t.muId)}),t.minUnitId=e,t.minUnitName=i,t.defaultUnitId=n;var a=null,o=null,r=null;return t.unit.some(function(e){if(e.muId==t.consumeUnit)return a=Number(t.consumeNum),o=e.name,r=e.value,!0}),t.consumeMinVal=a,t.newConsumeNum=t.consumeNum,t.consumeUnitName=o,t.showConsumeNum=s.a.comUnit(t.consumeMinVal,r,o,i),t}),t.bomDetail=e.detail)}),document.addEventListener("click",this.domClick,!1)},components:{},beforeDestroy:function(){document.removeEventListener("click",this.domClick)}},c=(n("3629f"),n("7610")),m=Object(c.a)(u,i,[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-head"},[n("li",[t._v("序号")]),t._v(" "),n("li",[t._v("物料名称")]),t._v(" "),n("li",[t._v("消耗单位")]),t._v(" "),n("li",[t._v("消耗量(1份商品)")]),t._v(" "),n("li",[t._v("已选仓库数")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"trangile"},[e("i")])}],!1,null,"f5eee8a0",null);m.options.__file="src\\module\\invoicing_system\\invoicing\\bom_detail.vue";e.default=m.exports}}]);