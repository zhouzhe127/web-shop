(window.webpackJsonp=window.webpackJsonp||[]).push([["warehouse_win_enter"],{"11fb":function(e,t,i){"use strict";i.r(t);var s=i("81a2"),r=i("bbb9");var a={data:function(){return{btnOK:{content:"确定",style:"background-color:#ff9800"},btnCancel:{content:"取消",style:"background-color:#a0a0a0"},width:800,height:400,searchText:"",homeList:[],homeSel:-1,selectHomes:[],selWare:[],chooseWare:"",searchList:[],homeItem:"",keyName:"areaName",theShopId:""}},props:{title:{type:String,default:"选择仓库-区域"},wid:{type:String,default:""},areaId:{type:String,default:""},shopId:{type:String,default:"0"},isBrand:{type:Boolean,default:!1}},methods:{init:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.warehouseList({data:{shopId:t.shopId}});case 2:i=e.sent,t.homeList=i,t.isBrand?t.homeList=t.filtrate("brandId",t.shopId):t.homeList=t.filtrate("shopId",t.shopId),t.$nextTick(function(){if(t.wid)for(var e in t.homeList)t.homeList[e].id==t.wid&&(t.homeSel=e,t.homeItem=t.homeList[e],t.selectHomes=t.homeList[e].area);t.areaId&&(t.selWare=[t.areaId])}),t.searchList=r.a.deepCopy(t.homeList),t.renewal();case 8:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function s(r,a){try{var n=t[r](a),o=n.value}catch(e){return void i(e)}if(!n.done)return Promise.resolve(o).then(function(e){s("next",e)},function(e){s("throw",e)});e(o)}("next")})})()},filtrate:function(e,t){var i=[];if("brandId"==e){var s=!0,r=!1,a=void 0;try{for(var n,o=this.homeList[Symbol.iterator]();!(s=(n=o.next()).done);s=!0){var h=n.value;h[e]==t&&0==h.owner.split(",")[1]&&i.push(h)}}catch(e){r=!0,a=e}finally{try{!s&&o.return&&o.return()}finally{if(r)throw a}}}else if("shopId"==e){var l=!0,c=!1,u=void 0;try{for(var d,m=this.homeList[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var f=d.value;f[e]==t&&i.push(f)}}catch(e){c=!0,u=e}finally{try{!l&&m.return&&m.return()}finally{if(c)throw u}}}return i},renewal:function(){this.searchList[0]?this.selectHomes=this.searchList[0].area:this.selectHomes=[]},winEvent:function(e){if("ok"==e){if(!this.homeItem.id)return void this.$message({message:"请选择仓库!",type:"error"});if(!this.selWare.length)return void this.$message({message:"请选择区域!",type:"error"});var t={wid:this.homeItem.id,warehouse:this.homeItem.name,areaId:this.chooseWare.id,wArea:this.chooseWare.areaName};this.$emit("wareEvent",e,t)}else this.$emit("wareEvent",e);this.searchText=""},clearText:function(){if(this.searchText="",this.wid)for(var e in this.homeList)this.homeList[e].id==this.wid&&(this.homeSel=e,this.homeItem=this.homeList[e],this.selectHomes=this.homeList[e].area);else this.homeSel=-1,this.selectHomes=[];this.areaId?this.selWare=[this.areaId]:this.selWare=[]},chooseText:function(){var e=[];if(this.searchText&&""!=this.searchText){this.searchList=[];var t=!0,i=!1,s=void 0;try{for(var a,n=r.a.deepCopy(this.homeList)[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var o=a.value,h=[],l=!1;if(o.name.indexOf(this.searchText)>-1)e.push(o),l=!0;else if(o.area&&!l){var c=!0,u=!1,d=void 0;try{for(var m,f=o.area[Symbol.iterator]();!(c=(m=f.next()).done);c=!0){var v=m.value;v[this.keyName].indexOf(this.searchText)>-1&&(l=!0,e.push(o),h.push(v))}}catch(e){u=!0,d=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw d}}}l&&(h.length>0&&(o.area=h),this.searchList.push(o))}}catch(e){i=!0,s=e}finally{try{!t&&n.return&&n.return()}finally{if(i)throw s}}this.renewal()}},changeHome:function(e,t){this.homeSel=e,this.homeItem=t,this.selectHomes=t.area,this.selWare=[]},wareChange:function(e){this.selWare=e,this.chooseWare=this.selectHomes[e[0]];var t=!0,i=!1,s=void 0;try{for(var r,a=this.selectHomes[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var n=r.value;n.id==e[0]&&(this.chooseWare=n)}}catch(e){i=!0,s=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw s}}}},mounted:function(){this.init()},components:{mulSelect:function(){return i.e("mul_select").then(i.bind(null,"7d09"))},win:function(){return i.e("win").then(i.bind(null,"f60a"))}}},n=(i("9f67"),i("d801")),o=Object(n.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("win",{attrs:{width:e.width,height:e.height,align:"center",ok:e.btnOK,cancel:e.btnCancel},on:{winEvent:e.winEvent},scopedSlots:e._u([{key:"content",fn:function(t){return i("div",{attrs:{id:"tan"}},[i("div",{attrs:{id:"house"}},[i("div",{staticClass:"sousuo"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{type:"text",placeholder:"输入仓库名称/区域"},domProps:{value:e.searchText},on:{input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),e._v(" "),i("el-button",{attrs:{type:"success"},on:{click:e.chooseText}},[e._v("筛选")]),e._v(" "),i("el-button",{attrs:{type:"info"},on:{click:e.clearText}},[e._v("重置")])],1),e._v(" "),i("div",[i("section",[e._l(e.searchList,function(t,s){return[i("span",{key:s,staticClass:"sel",class:{on:e.homeSel==s},on:{click:function(i){e.changeHome(s,t)}}},[e._v(e._s(t.name))])]})],2),e._v(" "),i("div",{staticClass:"dian"}),e._v(" "),i("section",{staticClass:"comList area-box"},[i("mul-select",{attrs:{styles:{backgroundColor:"#F1F1F1",minWidth:"100px",padding:"0 15px",borderRadius:"3px",marginRight:"8px"},list:e.selectHomes,name:e.keyName,isradio:!0,selects:e.selWare,keys:"id"},on:{selOn:e.wareChange}})],1)])])])}}])},[i("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.title))])])},[],!1,null,"757730fd",null);t.default=o.exports},5123:function(e,t,i){},"9f67":function(e,t,i){"use strict";var s=i("5123");i.n(s).a}}]);