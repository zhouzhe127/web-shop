(window.webpackJsonp=window.webpackJsonp||[]).push([["template_list"],{"3fe7":function(t,e,n){},"59f9":function(t,e,n){"use strict";n.r(e);var a=n("81a2");function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(r,i){try{var s=e[r](i),u=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(u).then(function(t){a("next",t)},function(t){a("throw",t)});t(u)}("next")})}}var s={data:function(){return{titleData:[{titleName:"操作"},{titleName:"序号"},{titleName:"模板名称",dataName:"name"}],introData:[],pageObj:{page:1,total:0,num:10},templateList:[],nowList:[],searchList:[],search:""}},methods:{clickBtn:function(t){"reset"==t&&(this.search=""),this.searchList=this.fnSearch(this.templateList,this.search),this.pageObj.total=Math.ceil(this.searchList.length/this.pageObj.num),this.getPageNum({page:1,num:this.pageObj.num})},addItemIndex:function(t){for(var e=0;e<t.length;e++){var n=(this.pageObj.page-1)*this.pageObj.num+1+e;t[e].itemIndex=n>=10?n:"0"+n}return t},deleteTemplate:function(t){var e=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getHttp("deleteApplicationTemplate",{id:t.id});case 2:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:e.templateList=e.templateList.filter(function(e){return e.id!=t.id}),e.searchList=e.searchList.filter(function(e){return e.id!=t.id}),e.pageObj.total=Math.ceil(e.searchList.length/e.pageObj.num),e.getPageNum({page:e.pageObj.page,num:e.pageObj.num}),e.pageObj.page>1&&0==e.nowList.length&&(e.pageObj.page-=1,e.getPageNum({page:e.pageObj.page,num:e.pageObj.num}));case 10:case"end":return n.stop()}},n,e)}))()},deleteUse:function(t,e,n){var a=this;return i(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:"delete"==n?a.$store.commit("setWin",{title:"温馨提示",winType:"confirm",content:"确认删除该模板?",callback:function(n){"ok"==n&&a.deleteTemplate(t,e)}}):((i=a.$route.query).id=t.id,i.tab=2,a.$router.push({path:"schedulingApplication/purchaseRequisition",query:i}));case 1:case"end":return r.stop()}},r,a)}))()},initPage:function(t,e,n){var a=(e-1)*n,r=e*n;return t.slice(a,r)},getPageNum:function(t){this.pageObj.page=t.page,t.num!=this.pageObj.num&&(this.pageObj.num=t.num,this.pageObj.total=Math.ceil(this.searchList.length/this.pageObj.num)),this.nowList=this.initPage(this.searchList,this.pageObj.page,this.pageObj.num),this.nowList=this.addItemIndex(this.nowList)},fnSearch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(e=e.trim())?t.filter(function(t){if("string"==typeof t.name&&t.name.includes(e))return!0}):t},getHttp:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a[t]({data:n});case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}},r,e)}))()}},computed:{},mounted:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getHttp("getApplicationTemplates",{type:1});case 2:n=e.sent,Array.isArray(n)&&(t.templateList=n,(a=t.searchList).push.apply(a,r(n)),t.pageObj.total=Math.ceil(t.searchList.length/t.pageObj.num),t.getPageNum({page:1,num:10}));case 4:case"end":return e.stop()}},e,t)}))()},components:{comTable:function(){return n.e("table").then(n.bind(null,"4360"))},pageElement:function(){return n.e("page_element").then(n.bind(null,"5921"))}}},u=(n("5fdf"),n("d801")),c=Object(u.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"template-list"}},[n("div",{staticClass:"content-head"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"template-name",attrs:{type:"text",maxlength:"30",placeholder:"请输入模板名称"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),n("span",{staticClass:"blue common-btn",on:{click:function(e){t.clickBtn("filter")}}},[t._v("筛选")]),n("span",{staticClass:"gray common-btn",on:{click:function(e){t.clickBtn("reset")}}},[t._v("重置")])]),t._v(" "),n("div",{staticClass:"content-body"},[n("com-table",{attrs:{showHand:!0,listName:"模板列表",listHeight:70,showTitle:1,titleData:t.titleData,introData:t.nowList,allTotal:t.searchList.length,fixed:0,bannerStyle:{color:"#43414a",fontSize:"16px"},widthType:!0,listWidth:1435},scopedSlots:t._u([{key:"con-0",fn:function(e){return n("div",{staticClass:"operation-column"},[n("span",{staticClass:"delete",on:{click:function(n){t.deleteUse(e.data,e.index,"delete")}}},[t._v("删除")]),n("span",{staticClass:"use",on:{click:function(n){t.deleteUse(e.data,e.index,"use")}}},[t._v("使用")])])}},{key:"con-1",fn:function(e){return[t._v("\r\n                "+t._s(e.data.itemIndex)+"\r\n            ")]}}])}),t._v(" "),n("div",[n("page-element",{attrs:{page:t.pageObj.page,total:t.pageObj.total},on:{pageNum:t.getPageNum}})],1)],1)])},[],!1,null,"2a9f38d7",null);e.default=c.exports},"5fdf":function(t,e,n){"use strict";var a=n("3fe7");n.n(a).a}}]);