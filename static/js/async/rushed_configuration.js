(window.webpackJsonp=window.webpackJsonp||[]).push([["rushed_configuration"],{5758:function(t,e,i){},9665:function(t,e,i){"use strict";i.r(e);var a=i("81a2"),n=i("f6ce"),s=i("05dd");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,s){try{var r=e[n](s),l=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(l).then(function(t){a("next",t)},function(t){a("throw",t)});t(l)}("next")})}}var l={data:function(){return{shopId:"",flipSwitch:!0,startObj:{time:(new Date).setHours(0,0,0,0)},endObj:{time:(new Date).setHours(23,59,59,999)},expirationTimeList:[{name:"5",id:0},{name:"10",id:1},{name:"15",id:2},{name:"20",id:3},{name:"25",id:4},{name:"30",id:5}],expirationTimeId:"0",expirationTime:"5",subscribeTimeList:[{name:"0",id:1},{name:"5",id:2},{name:"10",id:3},{name:"15",id:4},{name:"20",id:5},{name:"25",id:6},{name:"30",id:7}],subscribeTimeId:"0",subscribeTime:"0",snapNumber:"",uploadUrl:"",waitingImage:"",waitingImageName:"",startingImage:"",startingImageName:"",endingImage:"",endingImageName:"",importantNote:""}},methods:{openflipSwitch:function(t){this.flipSwitch=t},getStartTime:function(t){this.startObj.time=new Date(t).getTime()},getEndTime:function(t){this.endObj.time=new Date(t).getTime()},checkForm:function(){return!!s.a.checkData({snapNumber:{cond:"$$.length>0 && ((/^[0-9][0-9]{0,1}$/).test($$))",pro:"请输入抢购次数,0-99正整数"}},this)&&(1!=this.flipSwitch||!(this.startObj.time<(new Date).getTime()||this.endObj.time<this.startObj.time)||(this.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"疯抢开始时间应大于当前时间，并且疯抢结束时间应大于疯抢开始时间"}),!1))},selexpirationTime:function(t){this.expirationTime=this.expirationTimeList[t].name,this.expirationTimeId=this.expirationTimeList[t].id},selsubscribeTime:function(t){this.subscribeTime=this.subscribeTimeList[t].name,this.subscribeTimeId=this.subscribeTimeList[t].id},saveConfig:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.checkForm()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.a.openAndClose({data:{startTime:t.startObj.time/1e3,endTime:t.endObj.time/1e3,expireTime:t.expirationTime,statement:t.importantNote,grabCount:t.snapNumber,remindTime:t.subscribeTime,waitImage:t.waitingImage,startImage:t.startingImage,endImage:t.endingImage,status:Number(t.flipSwitch)}});case 4:1==e.sent&&(t.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"保存成功"}),t.getConfig());case 6:case"end":return e.stop()}},e,t)}))()},getConfig:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.buyconfiget({data:{}});case 2:(i=e.sent)&&""!=i&&(t.flipSwitch=Boolean(Number(i.status)),t.startObj.time=1e3*i.startTime,t.endObj.time=1e3*i.endTime,t.expirationTime=i.expireTime,t.importantNote=i.statement,t.snapNumber=i.grabCount,t.subscribeTime=i.remindTime,t.waitingImage=i.waitImage,t.waitingImageName=t.waitingImage.substring(t.waitingImage.lastIndexOf("/")+1,t.waitingImage.length),t.startingImage=i.startImage,t.startingImageName=t.startingImage.substring(t.startingImage.lastIndexOf("/")+1,t.startingImage.length),t.endingImage=i.endImage,t.endingImageName=t.endingImage.substring(t.endingImage.lastIndexOf("/")+1,t.endingImage.length));case 4:case"end":return e.stop()}},e,t)}))()},bgNameChange:function(t,e,i){var n=this;return r(regeneratorRuntime.mark(function t(){var s,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.uploadImg({data:{type:8,shopId:n.shopId},formId:i});case 2:s=t.sent,r="",t.t0=e,t.next=1===t.t0?7:2===t.t0?11:3===t.t0?15:19;break;case 7:return n.waitingImage=s,r=n.waitingImage.lastIndexOf("/"),n.waitingImageName=n.waitingImage.substring(r+1,n.waitingImage.length),t.abrupt("break",19);case 11:return n.startingImage=s,r=n.startingImage.lastIndexOf("/"),n.startingImageName=n.startingImage.substring(r+1,n.startingImage.length),t.abrupt("break",19);case 15:return n.endingImage=s,r=n.endingImage.lastIndexOf("/"),n.endingImageName=n.endingImage.substring(r+1,n.endingImage.length),t.abrupt("break",19);case 19:case"end":return t.stop()}},t,n)}))()}},watch:{},components:{onOff:function(){return i.e("on_off").then(i.bind(null,"034b"))},calendar:function(){return i.e("calendar_result").then(i.bind(null,"9265"))},selectBtn:function(){return i.e("select_btn").then(i.bind(null,"3d41"))}},mounted:function(){this.uploadUrl=n.a.session("userShop").uploadUrl,this.shopId=n.a.session("userShop").currentShop.id,this.getConfig()}},m=(i("dd7e"),i("d801")),o=Object(m.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"rushedConfiguration"}},[t._m(0),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"online-sub fl"},[t._v("疯抢开关")]),t._v(" "),i("onOff",{key:1,attrs:{status:t.flipSwitch},on:{statusChange:t.openflipSwitch}})],1),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"online-sub fl"},[t._v("疯抢时间")]),t._v(" "),i("section",{staticClass:"tableListInp fl"},[i("calendar",{attrs:{pObj:t.startObj},on:{throwTime:t.getStartTime}})],1),t._v(" "),i("span",{staticClass:"fl interval"},[t._v("-")]),t._v(" "),i("section",{staticClass:"tableListInp fl"},[i("calendar",{attrs:{pObj:t.endObj},on:{throwTime:t.getEndTime}})],1)]),t._v(" "),i("div",{staticClass:"online-box clearfix",staticStyle:{"margin-bottom":"10px"}},[i("span",{staticClass:"online-sub fl required"},[t._v("过期时间")]),t._v(" "),i("select-btn",{attrs:{name:t.expirationTime,sorts:t.expirationTimeList.map(function(t){return t.name}),width:157},on:{selOn:t.selexpirationTime}}),t._v(" "),i("span",{staticStyle:{"margin-left":"10px"}},[t._v("分钟")])],1),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"online-box clearfix",staticStyle:{"margin-bottom":"10px"}},[i("span",{staticClass:"online-sub fl"},[t._v("重要提示")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.importantNote,expression:"importantNote"}],staticClass:"txt fl",attrs:{placeholder:"请输入重要提示",maxlength:"100"},domProps:{value:t.importantNote},on:{input:function(e){e.target.composing||(t.importantNote=e.target.value)}}})]),t._v(" "),t._m(2),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"online-sub fl required"},[t._v("抢购次数")]),t._v(" "),i("div",{staticClass:"fl dolls"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.snapNumber,expression:"snapNumber"}],staticClass:"fl",attrs:{type:"text",name:"",placeholder:"请输入数字",maxlength:"2",onkeyup:"value=value.replace(/[^0-9\\.]/g,'')"},domProps:{value:t.snapNumber},on:{input:function(e){e.target.composing||(t.snapNumber=e.target.value)}}}),t._v(" "),i("span",{staticClass:"fl"},[t._v("次")])]),t._v(" "),t._m(3)]),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"online-sub fl required"},[t._v("订阅提醒")]),t._v(" "),i("section",{staticClass:"fl"},[i("select-btn",{attrs:{name:t.subscribeTime,sorts:t.subscribeTimeList.map(function(t){return t.name}),width:157},on:{selOn:t.selsubscribeTime}})],1),t._v(" "),i("span",{staticClass:"fl subscribe"},[t._v("分钟")]),t._v(" "),t._m(4)]),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub required"},[t._v("等待时提示图片")]),t._v(" "),i("div",{staticClass:"uploadImgs fl"},[i("a",{staticClass:"addclassify fl",staticStyle:{"margin-right":"15px"},attrs:{href:"javascript:void(0);"}},[t._v("上传图片")]),t._v(" "),i("form",{attrs:{enctype:"multipart/form-data",id:"waitImage"}},[i("input",{attrs:{type:"file",id:"bg_upload",accept:"image/jpeg,image/png,image/gif,image/tiff",name:"image",onclick:"this.value = ''"},on:{change:function(e){t.bgNameChange("",1,"waitImage")}}})])]),t._v(" "),t._m(5)]),t._v(" "),""!=t.waitingImage?i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"}),t._v(" "),i("div",{staticClass:"uploadImg fl"},[i("img",{attrs:{alt:"logo",src:t.uploadUrl+t.waitingImage}})]),t._v(" "),i("div",{staticClass:"fl updateName"},[t._v("(已上传:"+t._s(t.waitingImageName)+")")])]):t._e(),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub required"},[t._v("开始时提示图片")]),t._v(" "),i("div",{staticClass:"uploadImgs fl"},[i("a",{staticClass:"addclassify fl",staticStyle:{"margin-right":"15px"},attrs:{href:"javascript:void(0);"}},[t._v("上传图片")]),t._v(" "),i("form",{attrs:{enctype:"multipart/form-data",id:"startImage"}},[i("input",{attrs:{type:"file",id:"bg_upload",accept:"image/jpeg,image/png,image/gif,image/tiff",name:"image",onclick:"this.value = ''"},on:{change:function(e){t.bgNameChange("",2,"startImage")}}})])]),t._v(" "),t._m(6)]),t._v(" "),""!=t.startingImage?i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"}),t._v(" "),i("div",{staticClass:"uploadImg fl"},[i("img",{attrs:{alt:"logo",src:t.uploadUrl+t.startingImage}})]),t._v(" "),i("div",{staticClass:"fl updateName"},[t._v("(已上传:"+t._s(t.startingImageName)+")")])]):t._e(),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub required"},[t._v("结束时提示图片")]),t._v(" "),i("div",{staticClass:"uploadImgs fl"},[i("a",{staticClass:"addclassify fl",staticStyle:{"margin-right":"15px"},attrs:{href:"javascript:void(0);"}},[t._v("上传图片")]),t._v(" "),i("form",{attrs:{enctype:"multipart/form-data",id:"endImage"}},[i("input",{attrs:{type:"file",id:"bg_upload",accept:"image/jpeg,image/png,image/gif,image/tiff",name:"image",onclick:"this.value = ''"},on:{change:function(e){t.bgNameChange("",3,"endImage")}}})])]),t._v(" "),t._m(7)]),t._v(" "),""!=t.endingImage?i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"fl online-sub"}),t._v(" "),i("div",{staticClass:"uploadImg fl"},[i("img",{attrs:{alt:"logo",src:t.uploadUrl+t.endingImage}})]),t._v(" "),i("div",{staticClass:"fl updateName"},[t._v("(已上传:"+t._s(t.endingImageName)+")")])]):t._e(),t._v(" "),i("div",{staticClass:"online-box clearfix"},[i("span",{staticClass:"online-sub fl"}),t._v(" "),i("a",{staticClass:"blue fl",staticStyle:{width:"200px"},attrs:{href:"javascript:void(0);"},on:{click:function(e){t.saveConfig()}}},[t._v("保存")])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"titles"},[this._v("疯抢配置")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"online-box clearfix",staticStyle:{"margin-bottom":"10px"}},[e("span",{staticClass:"online-sub fl"}),this._v(" "),e("div",{staticClass:"fl handle-tips"},[e("i"),this._v("\n\t\t\t客户如在规定时间内未完成支付,系统将在过期时间1分钟后取消订单,并返回库存至商品。\n\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"online-box clearfix",staticStyle:{"margin-bottom":"10px"}},[e("span",{staticClass:"online-sub fl"}),this._v(" "),e("div",{staticClass:"fl handle-tips"},[e("i"),this._v("\n\t\t\t显示在顾客兑换详情中的重要声明(限字100)\n\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v("\n\t\t\t一次疯抢活动中，用户最多可抢购99次，0为不限制\n\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:" fl handle-tips"},[e("i"),this._v("\n\t\t\t提前提醒顾客开抢\n\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v("\n\t\t\t尺寸 750px*300px\n\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v("\n\t\t\t尺寸 750px*300px\n\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v("\n\t\t\t尺寸 750px*300px\n\t\t")])}],!1,null,"78635374",null);e.default=o.exports},dd7e:function(t,e,i){"use strict";var a=i("5758");i.n(a).a}}]);