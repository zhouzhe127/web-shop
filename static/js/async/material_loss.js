(window.webpackJsonp=window.webpackJsonp||[]).push([["material_loss"],{"0703":function(n,e,t){},"90cf":function(n,e,t){"use strict";var i=t("0703");t.n(i).a},edb7:function(n,e,t){"use strict";t.r(e);var i=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("section",{attrs:{id:"materials-putin-storage"}},[t("div",{staticClass:"material-info"},[t("div",{staticClass:"titleTop"},[t("div",{staticClass:"topbox"},[t("i"),n._v(" "),t("h3",[n._v("物料信息")]),n._v(" "),n._l(32,function(n){return t("div",{key:n,staticClass:"dian"})})],2)]),n._v(" "),t("ul",{staticClass:"material-info-body"},[t("li",[t("div",[n._v("物料名称："+n._s(n.materialInfo.name))]),n._v(" "),t("div",[n._v("物料单位："+n._s(n.unitInfoName))]),n._v(" "),t("div",[n._v("单位换算："+n._s(n.unitInfoConversion?n.unitInfoConversion:n.sameUnitConver))])]),n._v(" "),t("li",[t("div",[n._v("物料简码："+n._s(n.materialInfo.BC))]),n._v(" "),t("div",[n._v("默认单位："+n._s(n.unitInfoDefault))]),n._v(" "),t("div",[n._v("分类："+n._s(n.cateInfoName))])]),n._v(" "),t("li",[t("div",[n._v("品牌："+n._s(n.materialInfo.brandName))]),n._v(" "),t("div",[n._v("最小单位："+n._s(n.unitInfoMin))]),n._v(" "),t("div",[n._v("保质期："+n._s(n.materialInfo.validity+n.validityType))])])])]),n._v(" "),t("div",{staticClass:"new-inventory"},[t("div",{staticClass:"titleTop"},[t("div",{staticClass:"topbox"},[t("i"),n._v(" "),t("h3",[n._v("新建耗损")]),n._v(" "),n._l(32,function(n){return t("div",{key:n,staticClass:"dian"})})],2)]),n._v(" "),t("ul",{staticClass:"new-inventory-body"},[t("li",[n._m(0),n._v(" "),t("section",[t("h6",[n._v("批次编码:")]),n._v(" "),t("span",[n._v(n._s(n.lossInfo.batchCode))])])]),n._v(" "),t("li",[t("section",[t("h6",[n._v("仓库:")]),n._v(" "),t("span",[n._v(n._s(n.lossInfo.wName)+n._s("-")+n._s(n.lossInfo.aName))])]),n._v(" "),t("section",[t("h6",[n._v("进价:")]),n._v(" "),n.lossInfo.purchaseUnit?t("span",[n._v(n._s(n.lossInfo.purchasePrice)+n._s("/")+n._s(n.lossInfo.purchaseUnit.name))]):n._e()])]),n._v(" "),t("li",[t("section",[t("h6",[n._v("生产日期:")]),n._v(" "),t("span",[n._v(n._s(n.timeConversion(n.startTime)))])]),n._v(" "),t("section",[t("h6",[n._v("失效日期:")]),n._v(" "),t("span",[n._v(n._s(n.timeConversion(n.endTime)))])])]),n._v(" "),t("li",[t("section",[t("h6",[n._v("供应商:")]),n._v(" "),t("span",[n._v(n._s(n.lossInfo.supplier))])]),n._v(" "),t("section",[t("h6",[n._v("货号:")]),n._v(" "),t("span",[n._v(n._s(n.lossInfo.articleNo))])])]),n._v(" "),t("div",{staticClass:"weightNum"},[t("p",[n._v("数量/重量")]),n._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:n.remainNumber,expression:"remainNumber"}],attrs:{type:"text",placeholder:"0",maxlength:"10"},domProps:{value:n.remainNumber},on:{input:function(e){e.target.composing||(n.remainNumber=e.target.value)}}}),n._v(" "),n.lossInfo.purchaseUnit?t("span",[n._v(n._s(n.unitInfoDefault))]):n._e(),n._v(" "),n.unitInfoDefault!=n.unitInfoMin?t("span",[n._v("+")]):n._e(),n._v(" "),n.unitInfoDefault!=n.unitInfoMin?t("input",{directives:[{name:"model",rawName:"v-model",value:n.remainWeight,expression:"remainWeight"}],staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"0",maxlength:"10"},domProps:{value:n.remainWeight},on:{input:function(e){e.target.composing||(n.remainWeight=e.target.value)}}}):n._e(),n._v(" "),n.unitInfoDefault!=n.unitInfoMin?t("div",{staticClass:"weightNum-unit"},[n._v(n._s(n.unitInfoMin))]):n._e(),n._v(" "),n.lossInfo.purchaseUnit?t("span",[n._v("（当前批次库存："+n._s(n.lossInfo.surplus)+n._s(n.unitInfoMin)+"）")]):n._e()]),n._v(" "),n._m(1),n._v(" "),n._m(2)])]),n._v(" "),t("ul",{staticClass:"btn"},[t("li",{staticClass:"gray",on:{click:n.cancal}},[n._v("取消")]),n._v(" "),t("li",{on:{click:n.continueLoss}},[n._v("继续耗损")]),n._v(" "),t("li",{staticClass:"orange",on:{click:n.confirm}},[n._v("确定")])])])},s=[function(){var n=this.$createElement,e=this._self._c||n;return e("section",[e("h6",[this._v("操作类型:")]),this._v(" "),e("span",[this._v("耗损")])])},function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticClass:"note"},[e("p",[this._v("备注")]),this._v(" "),e("textarea",{attrs:{placeholder:"请输入备注",maxlength:"40"}})])},function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticClass:"prompt"},[e("img",{attrs:{src:t("fdd3"),alt:""}}),this._v(" "),e("span",[this._v("限40字以内")])])}];i._withStripped=!0;var o=t("81a2"),a=t("f6ce"),r=t("bbb9");function u(n){return function(){var e=n.apply(this,arguments);return new Promise(function(n,t){return function i(s,o){try{var a=e[s](o),r=a.value}catch(n){return void t(n)}if(!a.done)return Promise.resolve(r).then(function(n){i("next",n)},function(n){i("throw",n)});n(r)}("next")})}}var l={data:function(){return{presenceBatches:"0",allUnit:["只","个"],unitName:"只",startTime:"",endTime:"",lossInfo:{},unitReady:[],materialInfo:{},unitInfo:[],unitInfoName:"",unitInfoDefault:"",unitInfoMin:"",unitInfoValue:"",unitInfoConversion:"",cateInfo:[],cateInfoName:"",conversionArr:[],smallUnit:"",number:"",weight:"",remainNumber:"",remainWeight:"",negative:"",validityType:"",sameUnitConver:""}},methods:{dealData:function(n,e){var t=[],i=!0,s=!1,o=void 0;try{for(var a,r=n[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var u=a.value;t.push(u[e])}}catch(n){s=!0,o=n}finally{try{!i&&r.return&&r.return()}finally{if(s)throw o}}return t},init:function(){var n=this;return u(regeneratorRuntime.mark(function e(){var t,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getMaterialDetail({data:{mid:n.lossInfo.itemId}});case 2:for(t=e.sent,n.materialInfo=t,n.unitInfo=t.unit,0==n.materialInfo.validityType?n.validityType="月":1==n.materialInfo.validityType?n.validityType="日":2==n.materialInfo.validityType&&(n.validityType="年"),i=[],s=0;s<n.unitInfo.length;s++)1==n.unitInfo[s].isDefault&&1==n.unitInfo[s].isMin&&(n.unitInfoDefault=n.unitInfo[s].name,n.unitInfoMin=n.unitInfo[s].name,n.sameUnitConver="1"+n.unitInfo[s].name+"="+n.unitInfo[s].value+n.unitInfoMin,n.conversion=n.unitInfo[s].value),1==n.unitInfo[s].isDefault&&(n.unitInfoDefault=n.unitInfo[s].name,n.conversion=n.unitInfo[s].value),1==n.unitInfo[s].isMin&&(n.unitInfoMin=n.unitInfo[s].name),0==n.unitInfo[s].isMin&&(i.push(n.unitInfo[s]),n.unitInfo[s].unitConversion="1"+n.unitInfo[s].name+"="+n.unitInfo[s].value+n.unitInfoMin);n.conversionArr=i,n.unitInfoName=n.dealData(n.unitInfo,"name").join("、"),n.unitInfoConversion=n.dealData(n.conversionArr,"unitConversion").join("|"),n.cateInfo=t.cate,n.cateInfoName=n.dealData(n.cateInfo,"name").join("、");case 13:case"end":return e.stop()}},e,n)}))()},wareEvent:function(n){console.log(n),this.wareshow=!1,"ok"==n&&this.wareClose()},wareClose:function(){var n=this.$refs.warehouse;if(console.log(n),!n.chooseWare)return this.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"请选择区域"}),this.wareshow=!0,!1;this.iswear=n.searchList[n.homeSel].name,this.isarea=n.chooseWare.areaName,this.newShopdetail.warehouse=[{}],this.newShopdetail.warehouse[0].wid=n.homeId,this.newShopdetail.warehouse[0].areaId=n.chooseWare.id},showHouse:function(){this.wareshow=!0},showSupply:function(){var n=this;return u(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.win.show=!0,e.next=3,o.a.suppierList();case 3:t=e.sent,n.win.list=t;case 5:case"end":return e.stop()}},e,n)}))()},winSel:function(n){this.win.selects=n,this.win.list.length>0&&n.length>0&&(this.selectSupply=this.win.list.find(function(e){return e.id===n[0]}).name)},winEvent:function(n){this.win.show=!1,"ok"==n&&this.openOrClose()},cancal:function(){window.history.go(-1)},continueLoss:function(){var n=this;return u(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.materialLoss({data:{mid:n.lossInfo.itemId,wid:n.lossInfo.wid,batchId:n.lossInfo.batchId,areaId:n.lossInfo.areaId,surplus:n.lossInfo.surplus,totalSurplus:n.lossInfo.totalSurplus,num:Number(n.remainNumber)*Number(n.conversion)+Number(n.remainWeight),nowNum:n.materialInfo.num,remark:n.lossInfo.remark}});case 2:(t=e.sent)&&n.$store.commit("setWin",{title:"温馨提示",content:"耗损成功"}),n.lossInfo.surplus=t.surplus,n.lossInfo.totalSurplus=t.totalSurplus,n.remainNumber="",n.remainWeight="";case 8:case"end":return e.stop()}},e,n)}))()},confirm:function(){var n=this;return u(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.materialLoss({data:{mid:n.lossInfo.itemId,wid:n.lossInfo.wid,batchId:n.lossInfo.batchId,areaId:n.lossInfo.areaId,surplus:n.lossInfo.surplus,totalSurplus:n.lossInfo.totalSurplus,num:""+(Number(n.remainNumber)*Number(n.conversion)+Number(n.remainWeight)),nowNum:n.materialInfo.num,remark:n.lossInfo.remark}});case 2:e.sent&&n.$store.commit("setWin",{title:"温馨提示",content:"耗损成功",callback:function(n){"ok"==n&&window.history.go(-1)}});case 4:case"end":return e.stop()}},e,n)}))()},timeConversion:function(n){return r.a.format(new Date(Number(n)),"yyyy-MM-dd hh:mm:ss")}},mounted:function(){this.lossInfo=a.a.session("lossInfo"),this.startTime=1e3*Number(this.lossInfo.productionTime),this.endTime=1e3*Number(this.lossInfo.expiryTime),this.init()},components:{selectBtn:function(){return t.e("select_btn").then(t.bind(null,"3d41"))},calendar:function(){return t.e("calendar_type").then(t.bind(null,"f2dd"))},warehouseWin:function(){return t.e("warehouse_win").then(t.bind(null,"0c7d"))},multipleWin:function(){return t.e("multiple_win").then(t.bind(null,"d696"))}}},c=(t("90cf"),t("7610")),v=Object(c.a)(l,i,s,!1,null,"5992edeb",null);v.options.__file="src\\module\\invoicing_system\\invoicing\\material_loss.vue";e.default=v.exports},fdd3:function(n,e){n.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAASCAYAAAC9+TVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTNEMTRBQjQ3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTNEMTRBQjU3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1M0QxNEFCMjdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1M0QxNEFCMzdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoJwRHcAAAF1SURBVHjapNRPKARRHMDx2bGsEiUXB5JEDubktiWlxHUl5eCmlJSDPyfkTykOJOWwxz1ISRxsCUURF21pDi5ulIQD7Zbb+L76jZ7Xm92DV5/27e+9+c37O7EgCJz/lrjv+/r/VsxjCAlL/xOs4TIMeJ7nuFqHETzIbyLipf24wLIeDJMMI4Myy4NqvosYQE5iarTrv9NBA3aLTPkaS1KvwJ7UZ3COUzWSzRLr1oVBtGPaaEuzprG4dLCVPI7xhgl0W/o0oTcekeBM5p/FlcTeUWfpm3QtwWfZgTHUS6wa5REvbLQlqcUqbrEvsQ3URCRxbUmqtHPjyGhGiyz8qxvRsIUPqW9r58VWcirJjRH8xoLUe2T3dvAZsYNZlWTSaDjAl9QLmNMW1yxT3J2CSnKHFa2hGS1oQ4eMZNxyJdQZSofH3pHhV8pRTuKxxCk+Qsq8gKrMyiW7L/Lwk0w/9ed7YnQ6FH3oVAdJpvECX74neTPzjwADADrTSFI39Bw5AAAAAElFTkSuQmCC"}}]);