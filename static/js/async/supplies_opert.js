(window.webpackJsonp=window.webpackJsonp||[]).push([["supplies_opert"],{4026:function(t,e,i){"use strict";i.r(e);var a=i("81a2"),n=i("f6ce"),r=i("bbb9"),s=i("05dd"),o=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],a=!0,n=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(a=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);a=!0);}catch(t){n=!0,r=t}finally{try{!a&&o.return&&o.return()}finally{if(n)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function a(n,r){try{var s=e[n](r),o=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}var l=n.a.session("userShop").currentShop,u={data:function(){return{startTime:r.a.getTime({time:new Date}).start,endTime:r.a.getTime({time:new Date}).end,typeList:["全部操作类型"],allGoods:"全部操作类型",type:0,dataList:"",createTime:"",numTotle:0,pageTotal:1,page:1,num:10,createUser:"",shopType:0==l.ischain?0:1,postInfo:{},showDetailsPage:!1,isDefault:"",isMin:"",typeData:""}},props:["mid","unit"],methods:{init:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.invoic_getLogList({data:{startTime:t.startTime/1e3,endTime:t.endTime/1e3,createUser:t.createUser,type:0==t.type?[]:[t.type],page:t.page,pageSize:10,shopType:t.shopType,mid:t.mid}});case 2:i=e.sent,t.dataList=i.list,t.pageTotal=i.allPage,t.numTotle=i.pageSize,t.isDefault=t.getdefUnit(t.unit,1),t.isMin=t.getdefUnit(t.unit,0);case 8:case"end":return e.stop()}},e,t)}))()},getType:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var i,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.invoic_getType();case 2:for(r in i=e.sent,n.a.session("operttypeList",i),t.typeData=i,i)t.typeList.push(i[r].typeName);case 6:case"end":return e.stop()}},e,t)}))()},getdefUnit:function(t,e){var i=1==e?"isDefault":"isMin";for(var a in t)if(1==t[a][i])return t[a]},changTime:function(t){return r.a.format(1e3*parseInt(t),"yyyy-MM-dd hh:mm")},startTimeChange:function(t){this.startTime=r.a.getTime({time:t}).start},endTimeChange:function(t){this.endTime=r.a.getTime({time:t}).end},selectList:function(t){this.type=t},searchReset:function(){this.page=1,this.$refs.select.sortName="全部操作类型",this.$refs.select.selected=0,this.type=0,this.createUser="",this.startTime=(new Date).setHours(0,0,0,0),this.endTime=r.a.getTime({time:new Date}).end,this.init()},searchList:function(){this.page=1,this.init()},changePage:function(t){this.page=t.page,this.init()},showDetail:function(t){this.postInfo=t;var e={id:this.$route.query.id,tid:this.postInfo.id,mid:this.postInfo.objId,type:this.postInfo.type,time:this.postInfo.createTime};this.$router.push({path:"/admin/inventoryManagement/publicDetails",query:e})},comUnit:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var a=o(e,5),n=a[0],r=a[1],c=a[2],l=a[3],u=a[4];return s.a.comUnit(n,r,c,l,u)}},mounted:function(){this.init(),this.getType()},components:{calendar:function(){return i.e("calendar_type").then(i.bind(null,"f2dd"))},pageBtn:function(){return i.e("page_element").then(i.bind(null,"5921"))},selectBtn:function(){return i.e("select_btn").then(i.bind(null,"3d41"))}}},p=(i("6f39"),i("d801")),m=Object(p.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"serBox"},[i("h1",[t._v("操作时间：")]),t._v(" "),i("div",{staticClass:"timer"},[i("calendar",{attrs:{only:!1,time:t.startTime,format:"yyyy年MM月dd日"},on:{emit:t.startTimeChange}})],1),t._v(" "),i("div",{staticClass:"timer"},[i("calendar",{attrs:{only:!1,time:t.endTime,format:"yyyy年MM月dd日"},on:{emit:t.endTimeChange}})],1),t._v(" "),i("div",{staticStyle:{display:"inline-block",margin:"0 10px"}},[i("select-btn",{ref:"select",attrs:{sorts:t.typeList,name:t.allGoods},on:{selOn:t.selectList}})],1),t._v(" "),i("div",{staticClass:"setSpeen"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.createUser,expression:"createUser"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入操作人"},domProps:{value:t.createUser},on:{input:function(e){e.target.composing||(t.createUser=e.target.value)}}}),t._v(" "),i("a",{staticClass:"gray",staticStyle:{width:"100px",height:"40px","line-height":"40px","margin-right":"8px"},attrs:{href:"javascript:void(0);"},on:{click:t.searchReset}},[t._v("重置")]),t._v(" "),i("a",{staticClass:"blue",staticStyle:{width:"100px",height:"40px","line-height":"40px"},attrs:{href:"javascript:void(0);"},on:{click:t.searchList}},[t._v("筛选")])])]),t._v(" "),i("section",{staticClass:"listBox",staticStyle:{width:"100%",height:"auto","margin-top":"20px"}},[i("div",{staticClass:"listTitle"},[i("p",[t._v("操作记录列表\n\t\t\t\t"),i("span",[t._v("·")]),t._v("共\n\t\t\t\t"),i("strong",[t._v(t._s(t.numTotle))]),t._v("个条目")])]),t._v(" "),t._m(0),t._v(" "),t.dataList.length>0?i("div",{staticClass:"homeList batchTitle"},t._l(t.dataList,function(e,a){return i("ol",{key:a},[i("li",[i("a",{staticStyle:{color:"#5ebee8"},attrs:{href:"javascript:void(0);"},on:{click:function(i){t.showDetail(e)}}},[t._v("查看详情")])]),t._v(" "),i("li",[t._v(t._s(t.changTime(e.createTime)||"--"))]),t._v(" "),i("li",t._l(t.typeData,function(a,n){return a.type==e.type?i("strong",{key:n},[t._v(t._s(a.typeName))]):t._e()})),t._v(" "),e.createBefore&&0!=Number(e.createBefore)&&5!=e.type&&t.isDefault?i("li",[t._v(t._s(t.comUnit(e.createBefore,t.isDefault.value,t.isDefault.name,t.isMin.name)))]):i("li",[t._v("--")]),t._v(" "),e.createChange&&0!=Number(e.createChange)&&5!=e.type&&t.isDefault?i("li",[t._v(t._s(t.comUnit(e.createChange,t.isDefault.value,t.isDefault.name,t.isMin.name)))]):i("li",[t._v("--")]),t._v(" "),e.createAfter&&0!=Number(e.createAfter)&&5!=e.type&&t.isDefault?i("li",[t._v(t._s(t.comUnit(e.createAfter,t.isDefault.value,t.isDefault.name,t.isMin.name)))]):i("li",[t._v("--")]),t._v(" "),i("li",[t._v(t._s(e.createUser||"--"))])])})):t._e(),t._v(" "),0==t.dataList.length?i("div",{attrs:{id:"emptyData"}},[t._v("目前没有显示数据")]):t._e()]),t._v(" "),i("div",{staticStyle:{"margin-top":"10px","padding-bottom":"30px"}},[i("page-btn",{ref:"pageTurn",attrs:{total:t.pageTotal,isNoJump:!1,isNoPaging:!0,page:t.page},on:{pageNum:t.changePage}})],1)])},[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"homeTitle batchTitle"},[i("ul",{staticStyle:{width:"100%",float:"left"}},[i("li",[t._v("操作")]),t._v(" "),i("li",[t._v("日期")]),t._v(" "),i("li",[t._v("操作类型")]),t._v(" "),i("li",[t._v("操作前数量/重量")]),t._v(" "),i("li",[t._v("数量/重量变化")]),t._v(" "),i("li",[t._v("操作后数量/重量")]),t._v(" "),i("li",[t._v("操作人")])])])}],!1,null,"583de6dc",null);e.default=m.exports},"5aa7":function(t,e,i){},"6f39":function(t,e,i){"use strict";var a=i("5aa7");i.n(a).a}}]);