(window.webpackJsonp=window.webpackJsonp||[]).push([["attr_manager"],{"0c60":function(t,s,i){"use strict";var n=i("bec9");i.n(n).a},4980:function(t,s,i){"use strict";i.r(s);var n=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"attr_manager"}},[i("div",{staticClass:"taste-show"},[i("ul",{staticClass:"tas-variety"},[i("div",{ref:"addGoods",staticClass:"media-div"},[i("li",{staticClass:"first-list",style:{height:t.listHeight+"px"},on:{click:t.openAttrWin}},[t._m(0)])]),t._v(" "),t._l(t.taste,function(s,n){return i("div",{key:n,staticClass:"media-div"},[i("li",{staticClass:"taste-list",style:{height:t.listHeight+"px"},on:{click:function(i){t.openAttrWin(s)}}},[i("div",{staticClass:"split-line"}),t._v(" "),i("div",{staticClass:"attr-container"},[i("span",{staticClass:"attr-name",attrs:{title:s.name}},[t._v(t._s(s.name))]),t._v(" "),i("span",{staticClass:"attr-num"},[t._v(t._s(n+1))]),t._v(" "),1==t.ischain||2==t.ischain?i("section",{staticClass:"shopTag"},[s.id<1e5?i("span",{staticStyle:{"background-color":"#fcaa30",color:"#fff"}},[t._v("品牌")]):i("span",{staticStyle:{"background-color":"#6cc2e6",color:"#fff"}},[t._v("门店")])]):t._e(),t._v(" "),i("div",{staticClass:"attr-details"},[i("div",{staticClass:"attr-options"},[i("div",[t._v("\r\n\t\t\t\t\t\t\t\t\t\t口味属性（个）\r\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"attr-options-num"},[t._v("\r\n\t\t\t\t\t\t\t\t\t"+t._s(s.optionsNum)+"\r\n\t\t\t\t\t\t\t\t")])]),t._v(" "),i("div",{staticClass:"attr-relative"},[i("div",[t._v("\r\n\t\t\t\t\t\t\t\t\t关联菜品（个）\r\n\t\t\t\t\t\t\t\t")]),t._v(" "),i("div",{staticClass:"attr-options-num"},[t._v("\r\n\t\t\t\t\t\t\t\t\t"+t._s(s.goodsNum)+"\r\n\t\t\t\t\t\t\t\t")])])])])])])})],2)]),t._v(" "),i(t.showCom,{tag:"component",attrs:{pObj:t.comObj},on:{throwAddAttrWin:t.closeGetAddAttrWin,throwSyncAttr:t.funGetSyncAttr}})],1)},e=[function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("span",{staticClass:"tas-add"},[s("img",{attrs:{src:i("f518")}})]),this._v(" "),s("i",{staticClass:"taste-i"},[this._v("新建口味")])])}];n._withStripped=!0;var a=i("f6ce"),r=i("81a2");var o={data:function(){return{taste:[],isBrand:null,ischain:null,shopId:null,showCom:null,comObj:{title:null,editTasteId:null,taste:null},listHeight:200}},methods:{closeGetAddAttrWin:function(t,s){switch(t){case"edit":this.taste=this.taste.map(function(t){return t.id==s.id?s:t}),this.taste=this.sortAttr(this.taste);break;case"add":this.taste.push(s),this.taste=this.sortAttr(this.taste);break;case"delete":this.taste=this.taste.filter(function(t){return t.id!=s})}this.showCom=""},funGetSyncAttr:function(t){this.showCom="","update"==t&&this.funGetAttr()},openAttrWin:function(t){this.showCom="attrAdd";var s=null,i=null;t?(s=t.id,i="编辑口味"):(i="添加口味",s=null),this.comObj={title:i,editId:s,taste:this.taste}},sortAttr:function(t){return t.sort(function(t,s){return t.sort==s.sort?t.id-s.id:Number(t.sort)-Number(s.sort)})},initData:function(){var t=this,s=a.a.session("userShop");this.shopId=s.currentShop.id,this.ischain=s.currentShop.ischain,this.isBrand="1"==s.currentShop.ischain||"2"==s.currentShop.ischain,this.isBrand&&this.$store.commit("setPageTools",{sync:function(){t.showCom="attrAsync"}})},funGetAttr:function(){var t,s=this;return(t=regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.getAttr({data:{shopId:s.shopId}});case 2:i=t.sent,s.taste=i,s.taste=s.sortAttr(s.taste);case 5:case"end":return t.stop()}},t,s)}),function(){var s=t.apply(this,arguments);return new Promise(function(t,i){return function n(e,a){try{var r=s[e](a),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})})()},windowResize:function(){var t=this.$refs.addGoods.offsetWidth-10;this.listHeight=2*t/3}},mounted:function(){this.initData(),this.funGetAttr(),this.windowResize(),window.addEventListener("resize",this.windowResize,!1)},components:{attrAdd:function(){return i.e("attr_add_win").then(i.bind(null,"2593"))},attrAsync:function(){return i.e("attr_sync_win").then(i.bind(null,"c67b"))}},filters:{divide:function(t){return t.length<7?t:t.substr(0,7)+"..."}},beforeDestroy:function(){window.removeEventListener("resize",this.windowResize)}},c=(i("0c60"),i("7610")),u=Object(c.a)(o,n,e,!1,null,"79f11534",null);u.options.__file="src\\module\\goods_config\\attr_manager.vue";s.default=u.exports},bec9:function(t,s,i){},f518:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKxJREFUeNrs2LENgzAQhWE7ygAZgQ2yApsk9S1hGMJeB7ERGzhHh+w0EXdF0P8ky9IV8BVH8Yi11mCdUsqg1/s4E5HJ+j334JMdn5qZOf4W/jjgwYMHDx48ePDgwYMHD/7XxJxzV5aNOuyrmc0eBfxbWfZIYm2ugt/XZtOzGj/3oefZzFbzD9bpj9mo13KciUhkbcCDBw8ePHjw4MGDBw8e/MkC7hGPUt/lI8AAt9oYPL6CVYkAAAAASUVORK5CYII="}}]);