(window.webpackJsonp=window.webpackJsonp||[]).push([["good_sale"],{"550b":function(t,e,i){"use strict";var n=i("c762");i.n(n).a},"68b1":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"joblist"}},[i("section",{staticClass:"top"},[i("section",{staticClass:"fl",staticStyle:{"margin-right":"20px"}},[i("selectBtn",{staticClass:"select-btn",attrs:{sorts:t.options},on:{emit:t.selectType}})],1),t._v(" "),i("section",{staticClass:"fl top_input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.positionName,expression:"positionName"}],staticClass:"searchgoods",attrs:{type:"text",placeholder:"请输入起售商品名称"},domProps:{value:t.positionName},on:{input:function(e){e.target.composing||(t.positionName=e.target.value)}}})]),t._v(" "),i("a",{staticClass:"blue btn",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.searchPosition()}}},[t._v("筛选")]),t._v(" "),i("a",{staticClass:"gray btn",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.resetSearch()}}},[t._v("重置")])]),t._v(" "),i("comTable",{attrs:{titleData:t.titleData,introData:t.currentList,allTotal:t.newrecordList.length,showTitle:2,showHand:!1,fixed:0,bannerStyle:t.bannerStyle,contentStyle:t.contentStyle,listHeight:50,listWidth:1200,widthType:!0},scopedSlots:t._u([{key:"con-0",fn:function(e){return i("span",{staticStyle:{cursor:"pointer"}},[i("span",{staticStyle:{color:"#29ABE2","font-size":"16px"},on:{click:function(i){t.toEdit(e.data,e.index)}}},[t._v("编辑")]),t._v(" "),i("span",{staticStyle:{padding:"0 20px",color:"#D2D2D2"}},[t._v("|")]),t._v(" "),i("span",{staticStyle:{color:"#FD3F1F","font-size":"16px"},on:{click:function(i){t.delJob(e.data,e.index)}}},[t._v("删除")])])}},{key:"con-1",fn:function(e){return i("span",{},[t._v(t._s(1==e.data.type?"单品起售":"多品联动起售"))])}}])}),t._v(" "),i("section",{staticStyle:{"margin-top":"10px"}},[i("pageElement",{attrs:{page:Number(t.page),total:Number(t.total),isNoJump:!0,numArr:[10,20,30]},on:{pageNum:t.pageChange}})],1),t._v(" "),t.isOpenWin?i("goodSaleWin",{attrs:{item:t.item,isAdd:t.isAdd,jobIndex:t.jobIndex,newrecordList:t.newrecordList,allGid:t.allGid},on:{throwWinResult:t.doThrowWinResult}}):t._e()],1)};n._withStripped=!0;var s=i("81a2"),o=i("f6ce");function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function n(s,o){try{var a=e[s](o),r=a.value}catch(t){return void i(t)}if(!a.done)return Promise.resolve(r).then(function(t){n("next",t)},function(t){n("throw",t)});t(r)}("next")})}}var r={data:function(){return{list:[],newrecordList:[],currentList:[],userData:Object,isAdd:!1,isOpenWin:!1,item:Object,jobIndex:"",positionName:"",allGid:[],options:["全部","单品起售","多品联动起售"],selectedType:0,num:10,count:0,total:0,page:1,titleData:[],bannerStyle:null,contentStyle:null}},created:function(){this.titleData=[{titleName:"操作",titleStyle:{width:"200px"}},{titleName:"起售类型",titleStyle:{width:"150px"}},{titleName:"商品名称",dataName:"goodsName"},{titleName:"起售数量",dataName:"num",titleStyle:{width:"200px"}}],this.bannerStyle={backgroundColor:"#F2F2F2",color:"#434149",fontSize:"16px"},this.contentStyle={color:"#666666",fontSize:"14px"}},mounted:function(){this.userData=o.a.session("userShop"),this.$store.commit("setPageTools",[{name:"添加起售商品",className:["addStaff","export-btn"],fn:this.openShop,type:2}]),this.getList()},watch:{currentList:{handler:function(t){0==t.length&&this.page>1&&(this.page=this.page-1,this.paging(1))}}},methods:{selectType:function(t){this.selectedType=t},openShop:function(){this.item={},this.isAdd=!0,this.isOpenWin=!0},getList:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.goodsleastGetList({data:{}});case 2:(i=e.sent)&&(t.list=i,t.newrecordList=i,t.paging(),t.allGid=[],t.getAllGid());case 4:case"end":return e.stop()}},e,t)}))()},getAllGid:function(){for(var t=0;t<this.list.length;t++)this.allGid=this.allGid.concat(this.list[t].gid.split(","))},toEdit:function(t,e){this.item=t,this.jobIndex=(this.page-1)*this.num+e,this.isOpenWin=!0,this.isAdd=!1},deleteJob:function(t,e){var i=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.GoodsleastDelete({data:{id:t.id}});case 2:n.sent&&(i.newrecordList.splice((i.page-1)*i.num+e,1),i.paging(1),i.list=i.newrecordList,i.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"删除成功"}),i.allGid=[],i.getAllGid());case 4:case"end":return n.stop()}},n,i)}))()},delJob:function(t,e){var i=this;this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确定删除该商品的起售配置?",callback:function(n){"ok"==n&&i.deleteJob(t,e)}})},doThrowWinResult:function(t){"ok"==t?(this.paging(1),this.list=this.newrecordList,this.isAdd?(this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"添加成功"}),this.allGid=[],this.getAllGid()):this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"修改成功"}),this.isOpenWin=!1):"cancel"==t?this.isOpenWin=!1:"close"==t&&(this.isOpenWin=!1)},searchPosition:function(){var t=this,e=[];e=""==this.positionName&&0==this.selectedType?this.list:""!=this.positionName&&0==this.selectedType?this.list.filter(function(e){return-1!=e.goodsName.indexOf(t.positionName)}):0!=this.selectedType&&""==this.positionName?this.list.filter(function(e){return Number(e.type)==t.selectedType}):this.list.filter(function(e){return-1!=e.goodsName.indexOf(t.positionName)&&Number(e.type)==t.selectedType}),this.newrecordList=e,this.paging()},resetSearch:function(){this.positionName="",this.selectedType=0,this.options=["全部","单品起售","多品联动起售"],this.getList()},pageChange:function(t){this.page=t.page,this.num=t.num,this.total=Math.ceil(this.newrecordList.length/this.num),this.currentList=this.newrecordList.slice((this.page-1)*this.num,(this.page-1)*this.num+this.num)},paging:function(t){this.total=Math.ceil(this.newrecordList.length/this.num),this.count=this.newrecordList.length,1!=t&&(this.page=1),this.currentList=this.newrecordList.slice((this.page-1)*this.num,(this.page-1)*this.num+this.num)}},components:{goodSaleWin:function(){return i.e("./good_sale_win").then(i.bind(null,"38a7"))},selectBtn:function(){return i.e("select_btn").then(i.bind(null,"3d41"))},pageElement:function(){return i.e("page_element").then(i.bind(null,"5921"))},comTable:function(){return i.e("table").then(i.bind(null,"4360"))}}},l=(i("550b"),i("7610")),c=Object(l.a)(r,n,[],!1,null,"7f76c4a4",null);c.options.__file="src\\module\\shop_config\\good_sale.vue";e.default=c.exports},c762:function(t,e,i){}}]);