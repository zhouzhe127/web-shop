(window.webpackJsonp=window.webpackJsonp||[]).push([["picking_record"],{"975e":function(t,e,n){"use strict";var i=n("c1a6");n.n(i).a},b6f7:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"pickingRecord"}},[n("section",{staticClass:"div_wai"},[n("span",{staticClass:"span_type",class:Number(t.numType)?"sel_false":"sel_true",on:{click:function(e){t.changeType(0)}}},[t._v("领料记录")]),t._v(" "),n("span",{staticClass:"span_type",class:Number(t.numType)?"sel_true":"sel_false",on:{click:function(e){t.changeType(1)}}},[t._v("领料人")])]),t._v(" "),Number(t.numType)?t._e():n("section",[n("div",{staticClass:"filter"},[n("div",{staticClass:"wenZi"},[t._v("\n\t\t\t\t操作时间：\n\t\t\t")]),t._v(" "),n("div",{staticClass:"input-box"},[n("calendar",{staticClass:"data-box",attrs:{time:t.startTime,format:"yyyy年MM月dd日"},on:{emit:t.startTimeChange}})],1),t._v(" "),n("span",{staticClass:"input-word"},[t._v("-")]),t._v(" "),n("div",{staticClass:"input-box input-start"},[n("calendar",{staticClass:"data-box",attrs:{time:t.endTime,format:"yyyy年MM月dd日"},on:{emit:t.endTimeChange}})],1),n("span",{staticClass:"order-order-searchA"},[n("span",{staticClass:"order-order-search",on:{click:function(e){t.searchTime()}}})]),t._v(" "),n("section",{staticClass:"top-box"},[n("selectBtn",{staticClass:"select-btn",attrs:{sorts:t.options,index:t.type},on:{emit:t.selectType}})],1),t._v(" "),n("div",{staticClass:"enquiries"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.creatorName,expression:"creatorName"}],staticClass:"numbering",attrs:{type:"text",placeholder:"请输入操作人",maxlength:"5"},domProps:{value:t.creatorName},on:{input:function(e){e.target.composing||(t.creatorName=e.target.value)}}}),t._v(" "),n("a",{staticStyle:{background:"#2EA8DC"},attrs:{href:"javascript:;"},on:{click:function(e){t.searchTime()}}},[t._v("筛选")]),t._v(" "),n("a",{staticStyle:{background:"#B3B3B3"},attrs:{href:"javascript:;"},on:{click:function(e){t.reset()}}},[t._v("重置")])])]),t._v(" "),n("div",{staticClass:"clear"}),t._v(" "),n("div",{staticClass:"list_num"},[n("com-table",{attrs:{listName:"领料记录",titleData:t.titleList,allTotal:t.rows,introData:t.currentList},scopedSlots:t._u([{key:"con-0",fn:function(e){return n("div",{staticStyle:{cursor:"pointer",color:"#27A8E0"},on:{click:function(n){t.toSee(e.data)}}},[t._v("查看详情")])}},{key:"con-1",fn:function(e){return n("span",{},[t._v(t._s(e.index+1+10*(t.page-1)))])}},{key:"con-2",fn:function(e){return n("span",{},[t._v(t._s(1==e.data.type?"领料":"领料盘库"))])}},{key:"con-4",fn:function(e){return n("span",{},[t._v(t._s(t.transformTime(e.data.createTime)))])}}])}),t._v(" "),n("section",{staticStyle:{"margin-top":"10px"}},[n("pageElement",{attrs:{page:Number(t.page),total:Number(t.total),isNoJump:!0,numArr:[10,20,30]},on:{pageNum:t.pageChange}})],1)],1)]),t._v(" "),Number(t.numType)?n("picker",{on:{throwWinResult:t.doThrowTanResult}}):t._e()],1)};i._withStripped=!0;var s=n("81a2"),a=n("f6ce"),r=n("bbb9");var o={data:function(){return{userData:Object,isShow:!1,numType:0,startTime:(new Date).setHours(0,0,0,0),endTime:(new Date).setHours(23,59,59,999),creatorName:"",options:["全部操作类型","领料","领料盘库"],type:0,currentList:[],rows:0,num:10,total:0,page:1,titleList:[{titleName:"操作"},{titleName:"序号"},{titleName:"操作类型"},{titleName:"操作人",dataName:"creatorName"},{titleName:"操作时间"}]}},mounted:function(){a.a.session("numType")&&(this.numType=a.a.session("numType").num),this.userData=a.a.session("userShop"),this.initBtn(),this.init(),a.a.session("numType",{num:0})},destroyed:function(){a.a.session("isBackPickingRecord",null)},methods:{initBtn:function(){var t=this,e=[{name:"领料",className:"pick",fn:function(){var e={num:t.numType};a.a.session("numType",e),t.getMaterial()}}];this.$store.commit("setPageTools",e)},getMaterial:function(){this.$router.push({path:"pickingList/picking",query:this.$route.query})},changeType:function(t){this.numType=t},startTimeChange:function(t){this.startTime=t},endTimeChange:function(t){this.endTime=new Date(t).setHours(23,59,59,999)},init:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var n,i,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.aa()){t.next=20;break}if(n=a.a.session("saveDataBack"),i=a.a.session("isBackPickingRecord"),!n||!i){t.next=16;break}e.currentList=n.currentList,e.total=n.total,e.rows=n.rows,e.page=n.page,e.num=n.num,e.type=n.type,e.startTime=n.startTime,e.endTime=n.endTime,e.creatorName=n.creatorName,a.a.session("saveDataBack",null),t.next=20;break;case 16:return t.next=18,s.a.getLogList({data:{startTime:e.startTime/1e3,endTime:parseInt(e.endTime/1e3),page:e.page,num:e.num,type:e.type,creatorName:e.creatorName}});case 18:(r=t.sent)&&(e.currentList=r.list,e.total=r.count,e.rows=r.rows);case 20:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(s,a){try{var r=e[s](a),o=r.value}catch(t){return void n(t)}if(!r.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})})()},searchTime:function(){this.aa()&&(this.page=1,this.init())},aa:function(){return this.endTime-this.startTime>26784e5?(this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"时间间隔不能超过31天"}),!1):this.startTime>this.endTime?(this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"开始时间不能大于结束时间"}),!1):!(this.endTime>(new Date).setHours(23,59,59,999))||(this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"结束时间不能大于当前时间"}),!1)},selectType:function(t){this.type=t},reset:function(){this.startTime=(new Date).setHours(0,0,0,0),this.endTime=(new Date).setHours(23,59,59,999),this.type=0,this.creatorName="",this.page=1,this.num=10,this.searchTime()},pageChange:function(t){this.num=t.num,this.page=t.page,this.init()},toSee:function(t){var e={currentList:this.currentList,total:this.total,rows:this.rows,page:this.page,num:this.num,type:this.type,startTime:this.startTime,endTime:this.endTime,creatorName:this.creatorName};a.a.session("listDetail",t),a.a.session("saveDataBack",e),1==t.type?this.$router.push({path:"pickingList/checkDetails",query:this.$route.query}):2==t.type&&this.$router.push({path:"pickingList/plateDetails",query:this.$route.query})},doThrowTanResult:function(t){var e=this;this.isShow=t,Promise.resolve().then(function(){e.initBtn()})},transformTime:function(t){return r.a.format(new Date(1e3*Number(t)),"yyyy-MM-dd hh:mm")}},components:{calendar:function(){return n.e("calendar_type").then(n.bind(null,"f2dd"))},selectBtn:function(){return n.e("select_btn").then(n.bind(null,"3d41"))},picker:function(){return n.e("picker").then(n.bind(null,"bd9b"))},pageElement:function(){return n.e("page_element").then(n.bind(null,"5921"))},comTable:function(){return n.e("table").then(n.bind(null,"4360"))}}},c=(n("975e"),n("7610")),u=Object(c.a)(o,i,[],!1,null,"f16d5b1e",null);u.options.__file="src\\module\\invoicing_system\\picking_list\\picking_record.vue";e.default=u.exports},c1a6:function(t,e,n){}}]);