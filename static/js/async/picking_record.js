(window.webpackJsonp=window.webpackJsonp||[]).push([["picking_record"],{"602c":function(e,t,n){"use strict";var a=n("d267");n.n(a).a},b6f7:function(e,t,n){"use strict";n.r(t);var a=n("81a2"),i=n("f6ce"),s=n("bbb9");var r={data:function(){return{userData:Object,isShow:!1,numType:0,timeDate:[new Date(Date.parse(new Date)-2592e6),new Date],startTime:(new Date).setHours(0,0,0,0)-2592e6,endTime:(new Date).setHours(23,59,59,0),creatorName:"",options:[{value:0,label:"全部操作类型"},{value:1,label:"领料"},{value:2,label:"领料盘库"}],type:0,currentList:[],rows:0,num:10,total:0,page:1}},mounted:function(){i.a.session("numType")&&(this.numType=i.a.session("numType").num),this.userData=i.a.session("userShop"),this.initBtn(),this.init(),i.a.session("numType",{num:0})},destroyed:function(){i.a.session("isBackPickingRecord",null)},methods:{initBtn:function(){var e=this,t=[{name:"领料",className:"primary",type:5,fn:function(){var t={num:e.numType};i.a.session("numType",t),e.getMaterial()}}];this.$store.commit("setPageTools",t)},getMaterial:function(){this.$router.push({path:"pickingList/picking",query:this.$route.query})},changeType:function(e){this.numType=e},timeChange:function(e){this.startTime=new Date(e[0]).setHours(0,0,0,0),this.endTime=new Date(e[1]).setHours(23,59,59,0)},init:function(){var e,t=this;return(e=regeneratorRuntime.mark(function e(){var n,s,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.a.session("saveDataBack"),s=i.a.session("isBackPickingRecord"),!n||!s){e.next=15;break}t.currentList=n.currentList,t.total=n.total,t.rows=n.rows-0,t.page=n.page,t.num=n.num,t.type=n.type,t.startTime=n.startTime,t.endTime=n.endTime,t.creatorName=n.creatorName,i.a.session("saveDataBack",null),e.next=19;break;case 15:return e.next=17,a.a.getLogList({data:{startTime:t.startTime/1e3,endTime:parseInt(t.endTime/1e3),page:t.page,num:t.num,type:t.type,creatorName:t.creatorName}});case 17:(r=e.sent)&&(t.currentList=r.list,t.total=r.count,t.rows=r.rows-0);case 19:case"end":return e.stop()}},e,t)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(i,s){try{var r=t[i](s),o=r.value}catch(e){return void n(e)}if(!r.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}("next")})})()},searchTime:function(){this.page=1,this.init()},selectType:function(e){this.type=e},reset:function(){this.startTime=(new Date).setHours(0,0,0,0)-2592e6,this.endTime=(new Date).setHours(23,59,59,999),this.timeDate=[new Date(Date.parse(new Date)-2592e6),new Date],this.type=0,this.creatorName="",this.page=1,this.num=10,this.searchTime()},pageChange:function(e,t){t?this.page=e:this.num=e,this.init()},indexMethod:function(e){return this.num*(this.page-1)+e+1},toSee:function(e){var t={currentList:this.currentList,total:this.total,rows:this.rows,page:this.page,num:this.num,type:this.type,startTime:this.startTime,endTime:this.endTime,creatorName:this.creatorName};this.$route.query.id=e.id,i.a.session("saveDataBack",t),1==e.type?this.$router.push({path:"pickingList/checkDetails",query:this.$route.query}):2==e.type&&this.$router.push({path:"pickingList/plateDetails",query:this.$route.query})},doThrowTanResult:function(e){var t=this;this.isShow=e,Promise.resolve().then(function(){t.initBtn()})},transformTime:function(e){return s.a.format(new Date(1e3*Number(e)),"yyyy-MM-dd hh:mm")}},components:{calendar:function(){return n.e("calendar_type").then(n.bind(null,"f2dd"))},selectBtn:function(){return n.e("select_btn").then(n.bind(null,"3d41"))},picker:function(){return n.e("picker").then(n.bind(null,"bd9b"))},pageElement:function(){return n.e("page_element").then(n.bind(null,"5921"))},comTable:function(){return n.e("table").then(n.bind(null,"4360"))}}},o=(n("602c"),n("d801")),u=Object(o.a)(r,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"pickingRecord"}},[n("section",{staticClass:"div_wai"},[n("el-radio-group",{model:{value:e.numType,callback:function(t){e.numType=t},expression:"numType"}},[n("el-radio-button",{attrs:{label:"0"}},[e._v("领料记录")]),e._v(" "),n("el-radio-button",{attrs:{label:"1"}},[e._v("领料人")])],1)],1),e._v(" "),Number(e.numType)?e._e():n("section",[n("div",{staticClass:"filter"},[n("div",{staticClass:"input-box"},[n("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:e.timeChange},model:{value:e.timeDate,callback:function(t){e.timeDate=t},expression:"timeDate"}})],1),e._v(" "),n("div",{staticClass:"input-box"},[n("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择调度状态"},on:{change:e.selectType},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("div",{staticClass:"input-box"},[n("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入操作人",maxlength:"10"},model:{value:e.creatorName,callback:function(t){e.creatorName=t},expression:"creatorName"}})],1),e._v(" "),n("div",{staticClass:"input-box"},[n("el-button",{attrs:{type:"primary"},on:{click:e.searchTime}},[e._v("筛选")]),e._v(" "),n("el-button",{attrs:{type:"info"},on:{click:e.reset}},[e._v("重置")])],1)]),e._v(" "),n("div",{staticClass:"list-box"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.currentList,stripe:"",border:""}},[n("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"序号",width:"100"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(1==t.row.type?"领料":"领料盘库"))]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"creatorName",label:"操作人"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ownerName",label:"领料人"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.transformTime(t.row.createTime)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.toSee(t.row)}}},[e._v("查看详情")])]}}])})],1)],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.page,background:"",layout:"sizes,total,prev, pager, next","page-sizes":[10,20,50],total:e.rows},on:{"current-change":function(t){e.pageChange(t,1)},"size-change":e.pageChange}})],1),e._v(" "),Number(e.numType)?n("picker",{on:{throwWinResult:e.doThrowTanResult}}):e._e()],1)},[],!1,null,"7b044174",null);t.default=u.exports},d267:function(e,t,n){}}]);