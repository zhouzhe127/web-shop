(window.webpackJsonp=window.webpackJsonp||[]).push([["member_store_coupon"],{"51fe":function(t,e,n){"use strict";var s=n("f354");n.n(s).a},b9aa:function(t,e,n){"use strict";n.r(e);var s=n("bbb9"),o=n("81a2");var i={props:{couponIds:[Array,Object,String]},data:function(){return{couponList:[],couponsList:[],selects:s.a.deepCopy(this.couponIds),couponType:[{name:"全部"},{name:"满减优惠券"},{name:"折扣优惠券"},{name:"赠优惠券"}],flag:0}},methods:{select:function(t){this.selects=t.selectList,this.$emit("couponChange",t)},winEvent:function(){this.$emit("winEvent")},selectUnselect:function(t,e){var n=this;if("1"==t)for(var s=0;s<e.length;s++)this.selects.push(e[s].id);else this.selects=[],setTimeout(function(){n.$refs.coupon.up()}),this.$emit("couponChange",{selectList:this.selects})},getNoLimitCoupon:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getCouponCondition({data:{}});case 2:n=t.sent,e.couponsList=n,e.couponsList.forEach(function(t){t.num=1}),e.couponList=e.filterList(e.couponsList,0),setTimeout(function(){e.$refs.coupon.up()}),e.$emit("compareArr",s.a.deepCopy(n));case 8:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function s(o,i){try{var c=e[o](i),u=c.value}catch(t){return void n(t)}if(!c.done)return Promise.resolve(u).then(function(t){s("next",t)},function(t){s("throw",t)});t(u)}("next")})})()},showCount:function(t){this.flag=t,this.couponList=this.filterList(this.couponsList,t)},filterList:function(t,e){for(var n=[],o=0;o<t.length;o++)0==e?n=s.a.deepCopy(t):1==e?"1"!=t[o].type&&"2"!=t[o].type&&"3"!=t[o].type||n.push(t[o]):2==e?"4"==t[o].type&&n.push(t[o]):"5"==t[o].type&&n.push(t[o]);return n}},watch:{selects:function(){if(this.selects.length>10)return this.$store.commit("setWin",{content:"最多只能选择十个优惠劵"}),this.selects.splice(this.selects.length-1,1),!1}},mounted:function(){this.getNoLimitCoupon()},components:{Win:function(){return n.e("win").then(n.bind(null,"f60a"))},coupon:function(){return n.e("coupon").then(n.bind(null,"6595"))}}},c=(n("51fe"),n("d801")),u=Object(c.a)(i,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Win",{attrs:{width:900,height:600},on:{winEvent:t.winEvent}},[n("div",{staticClass:"coupon_list",staticStyle:{padding:"20px",overflow:"hidden"},attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"top",staticStyle:{"border-bottom":"1px dashed #ccc","padding-bottom":"20px"}},t._l(t.couponType,function(e,s){return n("span",{key:s,staticClass:"sel",class:{on:t.flag==s},on:{click:function(e){t.showCount(s)}}},[t._v(t._s(e.name))])})),t._v(" "),n("div",{staticStyle:{"padding-top":"10px",position:"relative"}},[n("span",{staticStyle:{"font-size":"14px",color:"#999999"}},[t._v("选择优惠券：")]),t._v(" "),n("section",{staticClass:"fr",staticStyle:{width:"100%",height:"auto","margin-bottom":"10px"}},[n("a",{staticClass:"unselect fr",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.selectUnselect()}}},[t._v("全部取消")])]),t._v(" "),n("section",{staticClass:"comList"},[n("coupon",{ref:"coupon",attrs:{list:t.couponList,selects:t.selects,"max-num":5,name:"name",keyName:"id"},on:{select:t.select}})],1)])])])},[],!1,null,"22443f1c",null);e.default=u.exports},f354:function(t,e,n){}}]);