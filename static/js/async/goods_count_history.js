(window.webpackJsonp=window.webpackJsonp||[]).push([["goods_count_history"],{"649e":function(t,e,a){"use strict";var n=a("fa02");a.n(n).a},e0d8:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"goods-count-history"}},[a("div",{staticClass:"tab-div"},[a("span",{staticClass:"select-tab"},[t._v(t._s(t.tabObj[0].name))]),t._v(" "),a("span",{on:{click:function(e){t.linkToPage("template")}}},[t._v(t._s(t.tabObj[1].name))])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.toggle,expression:"toggle"}]},[a("div",{staticClass:"search-div"},[a("span",{staticClass:"submit-time"},[t._v("提交时间 : ")]),t._v(" "),a("div",{staticClass:"in-block"},[a("calendar",{attrs:{pObj:t.startTime},on:{throwTime:function(e){t.getTime("startTime",e)}}}),t._v(" "),a("span",{staticClass:"line"}),t._v(" "),a("calendar",{attrs:{pObj:t.endTime},on:{throwTime:function(e){t.getTime("endTime",e)}}})],1),t._v(" "),a("div",{staticClass:"in-block"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.operaUser,expression:"operaUser"}],staticClass:"input-txt",attrs:{type:"text",maxlength:"30",placeholder:"请输入操作人"},domProps:{value:t.operaUser},on:{input:function(e){e.target.composing||(t.operaUser=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"in-block"},[a("span",{staticClass:"common-btn blue",on:{click:function(e){t.clickBtn("filter")}}},[t._v("筛选")]),a("span",{staticClass:"common-btn gray",on:{click:function(e){t.clickBtn("reset")}}},[t._v("重置")])])]),t._v(" "),a("div",{staticClass:"content-body"},[a("com-table",{attrs:{showHand:!0,listName:t.tableObj.listName,listHeight:70,showTitle:1,titleData:t.titleData,introData:t.history,allTotal:t.pageObj.listNum,fixed:0,bannerStyle:{color:"#43414a","font-size":"16px"},widthType:!0,listWidth:1435,contentStyle:{color:"#666",fontSize:"14px"}},scopedSlots:t._u([{key:"con-0",fn:function(e){var n=e.data;e.index;return a("div",{},[a("span",{staticClass:"operation",on:{click:function(e){t.linkToPage("detail",n)}}},[t._v("查看详情")])])}}])})],1),t._v(" "),a("div",[a("page-element",{attrs:{page:t.pageObj.page,total:t.pageObj.total,num:t.pageObj.num},on:{pageNum:t.getPageNum}})],1)])])};n._withStripped=!0;var i=a("81a2"),s=a("bbb9");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(i,s){try{var r=e[i](s),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var o={data:function(){return{titleData:[{titleName:"操作"},{titleName:"序号",dataName:"itemIndex"},{titleName:"记录编号",dataName:"logId"},{titleName:"操作时间",dataName:"createTimeZh"},{titleName:"操作人",dataName:"createUName"}],history:[],pageObj:{page:1,total:0,num:10,listNum:0},startTime:{time:"",show:!0,detail:!0,width:160},endTime:{time:"",show:!0,detail:!0,width:160},toggle:!0,operaUser:"",tabObj:[{},{}],tableObj:{listNum:""}}},props:{tab:{type:[String,Number],default:1}},watch:{$route:function(){this.initTableObj(),this.initBtn(),this.clickBtn("reset")}},activated:function(){this.initTableObj(),this.initBtn()},mounted:function(){this.initTableObj(),this.initBtn(),this.clickBtn("reset")},methods:{getTime:function(t,e){this[t].time=e},linkToPage:function(t,e){var a=this.$route.query,n={};if("detail"==t)switch(a.id=e.logId,this.tab+""){case"1":n.path="/admin/goodsCountDetail";break;case"2":n.path="/admin/materialCountDetail"}else if("template"==t)switch(this.tab+""){case"1":n.path="/admin/goodsCountTemplate";break;case"2":n.path="/admin/materialCountTemplate"}this.$router.push({path:n.path,query:a})},clickBtn:function(t){"reset"==t&&(this.operaUser="",this.initDateTime()),this.pageObj.page=1,this.getHistory()},getPageNum:function(t){this.pageObj.page=t.page,this.pageObj.num=t.num,this.getHistory()},getHistory:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var a,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a="",n={},i={},e.t0=t.tab+"",e.next="1"===e.t0?4:"2"===e.t0?4:14;break;case 4:return a="invoicingGetCheckInventoryLogList",n={type:1==t.tab?"1":"0",page:t.pageObj.page,size:t.pageObj.num,createUName:t.operaUser,beginTime:parseInt(t.startTime.time/1e3,10),endTime:parseInt(t.endTime.time/1e3,10)},e.next=8,t.getHttp(a,n);case 8:return 0==(i=e.sent).length&&(t.history=[]),Array.isArray(i.list)&&(t.history=i.list,t.history=t.addItemIndex(t.history)),t.pageObj.total=i.total||0,t.pageObj.listNum=i.count||0,e.abrupt("break",14);case 14:case"end":return e.stop()}},e,t)}))()},initBtn:function(){var t=this,e={name:"",url:""};switch(this.tab+""){case"1":e.name="批量盘库",e.url="/admin/goodsCount";break;case"2":e.name="批量盘库",e.url="/admin/materialCount"}this.$store.commit("setPageTools",[{name:e.name,style:{height:"40px",color:"#fff"},fn:function(){t.$router.push({path:e.url,query:t.$route.query})}}])},addItemIndex:function(t){for(var e=0;e<t.length;e++){var a=(this.pageObj.page-1)*this.pageObj.num+1+e;t[e].itemIndex=a>=10?a:"0"+a,t[e].createTimeZh=s.a.getTime({time:t[e].createTime,format:"yyyy-MM-dd hh:mm"}).format}return t},initTableObj:function(){switch(this.tab+""){case"1":this.tabObj=[{name:"商品盘库"},{name:"模板列表"}],this.tableObj={listName:"商品盘库"};break;case"2":this.tabObj=[{name:"物料盘库"},{name:"模板列表"}],this.tableObj={listName:"物料盘库"}}},generatorDate:function(t){return t?"number"!=typeof t&&"string"!=typeof t||(t=Number(t),t=new Date(t)):t=new Date,{year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),week:0}},initDateTime:function(){var t;this.endTime.time=Date.now(),t=this.generatorDate(this.endTime.time),this.startTime.time=new Date(t.year,t.month,1,0,0,0).getTime()},getHttp:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(regeneratorRuntime.mark(function n(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a[t]({data:a});case 2:return s=e.sent,e.abrupt("return",s);case 4:case"end":return e.stop()}},n,e)}))()}},components:{calendar:function(){return a.e("calendar_result").then(a.bind(null,"9265"))},comTable:function(){return a.e("table").then(a.bind(null,"4360"))},pageElement:function(){return a.e("page_element").then(a.bind(null,"5921"))}}},c=(a("649e"),a("7610")),l=Object(c.a)(o,n,[],!1,null,"1dc4d8eb",null);l.options.__file="src\\module\\invoicing_system\\invoicing\\goods_count_history.vue";e.default=l.exports},fa02:function(t,e,a){}}]);