(window.webpackJsonp=window.webpackJsonp||[]).push([["goods_count_history"],{"0cd4":function(t,e,a){},"273a":function(t,e,a){"use strict";var i=a("0cd4");a.n(i).a},e0d8:function(t,e,a){"use strict";a.r(e);var i=a("81a2"),n=a("05dd");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function i(n,r){try{var s=e[n](r),o=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})}}var s={data:function(){return{titleData:[{titleName:"操作"},{titleName:"序号",dataName:"itemIndex"},{titleName:"记录编号",dataName:"code"},{titleName:"操作时间",dataName:"createTimeZh"},{titleName:"操作人",dataName:"createUName"}],history:[],pageObj:{page:1,total:0,num:10,listNum:0},startTime:{time:"",show:!0,detail:!0,width:160},endTime:{time:"",show:!0,detail:!0,width:160},operaUser:"",tabObj:[{},{}],headTips:"提交时间",tableObj:{listName:""}}},props:{tab:{type:[String,Number],default:1}},watch:{tab:function(){this.initTabObj(),this.initBtn(),this.clickBtn("reset")}},mounted:function(){this.initTabObj(),this.initTableData(),this.initHeadTips(),this.initBtn(),this.clickBtn("reset")},methods:{getTime:function(t,e){this[t].time=e},getPageNum:function(t){this.pageObj.page=t.page,this.pageObj.num=t.num,this.getHistory()},clickBtn:function(t){"reset"==t&&(this.operaUser="",this.initDateTime()),this.pageObj.page=1,this.getHistory()},showTimeZh:function(t,e){var a,i,n={};a=1e3*Number(t[e]),(n=this.generatorDate(a)).hour=n.hour>9?n.hour:"0"+n.hour,n.minute=n.minute>9?n.minute:"0"+n.minute,i=n.year+"-"+(n.month+1)+"-"+n.day+" "+n.hour+":"+n.minute,t.createTimeZh=i},addItemIndex:function(t,e){for(var a=0;a<t.length;a++){var i=(this.pageObj.page-1)*this.pageObj.num+1+a;t[a].itemIndex=i>=10?i:"0"+i,e(t[a])}return[].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(t))},linkToPage:function(t,e){var a,i=this.$route.query,n=[];"detail"==t?(i.id=e.logId,n=[{id:1,path:"/admin/goodsCountDetail"},{id:2,path:"/admin/materialCountDetail"},{id:3,path:"/admin/processHistory/detail"}]):"template"==t&&(n=[{id:1,path:"/admin/goodsCountTemplate"},{id:2,path:"/admin/materialCountTemplate"},{id:3,path:"/admin/processTemplate"}]),a=this.matchList(n,this.tab,"id"),this.$router.push({path:a.path,query:i})},getHistory:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var a,i,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a="",i={},n={},e.t0=t.tab+"",e.next="1"===e.t0?4:"2"===e.t0?4:"3"===e.t0?14:23;break;case 4:return a="invoicingGetCheckInventoryLogList",i={type:1==t.tab?"1":"0",page:t.pageObj.page,size:t.pageObj.num,createUName:t.operaUser,beginTime:parseInt(t.startTime.time/1e3,10),endTime:parseInt(t.endTime.time/1e3,10)+4},e.next=8,t.getHttp(a,i);case 8:return 0==(n=e.sent).length&&(t.history=[]),Array.isArray(n.list)&&(t.history=n.list,t.history=t.addItemIndex(t.history,function(e){t.showTimeZh(e,"createTime")})),t.pageObj.total=n.total||0,t.pageObj.listNum=n.count||0,e.abrupt("break",23);case 14:return a="ProcessbomGetProcessBomLogList",i={page:t.pageObj.page,size:t.pageObj.num,name:t.operaUser,beginTime:parseInt(t.startTime.time/1e3,10),endTime:parseInt(t.endTime.time/1e3,10)},e.next=18,t.getHttp(a,i);case 18:0==(n=e.sent).length&&(t.history=[]),Array.isArray(n.list)&&(t.history=n.list,t.history=t.addItemIndex(t.history,function(e){e.finishedKind=e.finishedKind+"种",t.showTimeZh(e,"createTime")})),t.pageObj.total=n.total||0,t.pageObj.listNum=n.count||0;case 23:case"end":return e.stop()}},e,t)}))()},initHeadTips:function(){this.headTips=this.matchList([{id:1,name:"提交时间"},{id:2,name:"提交时间"},{id:3,name:"加工时间"}],this.tab,"id").name},initBtn:function(){var t,e=this;t=this.matchList([{id:1,name:"批量盘库",path:"/admin/goodsCount"},{id:2,name:"批量盘库",path:"/admin/materialCount"},{id:3,name:"立即加工",path:"/admin/processMaterial"}],this.tab,"id"),this.$store.commit("setPageTools",[{name:t.name,style:{height:"40px",color:"#fff"},fn:function(){e.$router.push({path:t.path,query:e.$route.query})}}])},initTableData:function(){switch(this.tab+""){case"1":case"2":break;case"3":this.titleData=[{titleName:"操作"},{titleName:"序号",dataName:"itemIndex"},{titleName:"产出物料",dataName:"finishedKind"},{titleName:"加工时间",dataName:"createTimeZh"},{titleName:"操作人",dataName:"createUName"}]}},initTabObj:function(){var t="";switch(this.tab+""){case"1":this.tabObj=[{name:"商品盘库"},{name:"模板列表"}],t="商品盘库";break;case"2":this.tabObj=[{name:"物料盘库"},{name:"模板列表"}],t="物料盘库";break;case"3":this.tabObj=[{name:"加工记录"},{name:"加工模板"}],t="加工物料"}this.tableObj.listName=t},matchList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",i={},n=!0,r=!1,s=void 0;try{for(var o,m=t[Symbol.iterator]();!(n=(o=m.next()).done);n=!0){var c=o.value;if(c[a]==e){i=c;break}}}catch(t){r=!0,s=t}finally{try{!n&&m.return&&m.return()}finally{if(r)throw s}}return i},generatorDate:function(t){return t?"number"!=typeof t&&"string"!=typeof t||(t=Number(t),t=new Date(t)):t=new Date,{year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),week:0}},initDateTime:function(){this.endTime.time=Date.now(),this.startTime.time=this.endTime.time-n.a.timeConst.ONEMONTH},getHttp:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a[t]({data:a});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},n,e)}))()}},components:{calendar:function(){return a.e("calendar_result").then(a.bind(null,"9265"))},comTable:function(){return a.e("table").then(a.bind(null,"4360"))},pageElement:function(){return a.e("page_element").then(a.bind(null,"5921"))}}},o=(a("273a"),a("d801")),m=Object(o.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"goods-count-history"}},[a("div",{staticClass:"tab-div"},[a("span",{staticClass:"select-tab"},[t._v(t._s(t.tabObj[0].name))]),t._v(" "),a("span",{on:{click:function(e){t.linkToPage("template")}}},[t._v(t._s(t.tabObj[1].name))])]),t._v(" "),a("div",[a("div",{staticClass:"search-div"},[a("span",{staticClass:"submit-time"},[t._v(t._s(t.headTips)+" : ")]),t._v(" "),a("div",{staticClass:"in-block"},[a("calendar",{attrs:{pObj:t.startTime},on:{throwTime:function(e){t.getTime("startTime",e)}}}),t._v(" "),a("span",{staticClass:"line"}),t._v(" "),a("calendar",{attrs:{pObj:t.endTime},on:{throwTime:function(e){t.getTime("endTime",e)}}})],1),t._v(" "),a("div",{staticClass:"in-block"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.operaUser,expression:"operaUser"}],staticClass:"input-txt",attrs:{type:"text",maxlength:"30",placeholder:"请输入操作人"},domProps:{value:t.operaUser},on:{input:function(e){e.target.composing||(t.operaUser=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"in-block"},[a("span",{staticClass:"common-btn blue",on:{click:function(e){t.clickBtn("filter")}}},[t._v("筛选")]),a("span",{staticClass:"common-btn gray",on:{click:function(e){t.clickBtn("reset")}}},[t._v("重置")])])]),t._v(" "),a("div",{staticClass:"content-body"},[a("com-table",{attrs:{showHand:!0,listName:t.tableObj.listName,listHeight:70,showTitle:1,titleData:t.titleData,introData:t.history,allTotal:t.pageObj.listNum,fixed:0,bannerStyle:{color:"#43414a","font-size":"16px"},widthType:!0,listWidth:1435,contentStyle:{color:"#666",fontSize:"14px"}},scopedSlots:t._u([{key:"con-0",fn:function(e){var i=e.data;return e.index,a("div",{},[a("span",{staticClass:"operation",on:{click:function(e){t.linkToPage("detail",i)}}},[t._v("查看详情")])])}}])})],1),t._v(" "),a("div",[a("page-element",{attrs:{page:t.pageObj.page,total:t.pageObj.total,num:t.pageObj.num},on:{pageNum:t.getPageNum}})],1)])])},[],!1,null,"00b4e1e0",null);e.default=m.exports}}]);