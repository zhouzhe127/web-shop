(window.webpackJsonp=window.webpackJsonp||[]).push([["gold_config"],{"30b5":function(e,t,n){},"9e75":function(e,t,n){"use strict";var i=n("30b5");n.n(i).a},fcdf:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"glod-config"}},[e._m(0),e._v(" "),n("section",{staticClass:"glod-config-content"},[e._m(1),e._v(" "),n("div",[n("p",{staticClass:"required"},[e._v("绑定客户获得")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.gainGold,expression:"gainGold",modifiers:{trim:!0}}],attrs:{onkeyup:"value=value.replace(/[^\\d{1,5}\\.\\d{0,2}$]/g,'')",type:"text",maxlength:"8",placeholder:"请输入金币数额"},domProps:{value:e.gainGold},on:{blur:[e.formatValue,function(t){e.$forceUpdate()}],input:function(t){t.target.composing||(e.gainGold=t.target.value.trim())}}}),e._v(" "),n("i",[e._v("金币")])]),e._v(" "),n("div",[n("div",{staticClass:"scale"},[n("p",{staticClass:"required"},[e._v("客户店内消费获得金币比例")]),e._v(" "),n("div",[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.consumeGold,expression:"consumeGold",modifiers:{trim:!0}}],attrs:{type:"text",maxlength:"5",onkeyup:"value=value.replace(/[^\\d]/g,'')",placeholder:"消费金额"},domProps:{value:e.consumeGold},on:{input:function(t){t.target.composing||(e.consumeGold=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}}),e._v(" "),n("i",[e._v(":")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.gold,expression:"gold",modifiers:{trim:!0}}],attrs:{type:"text",maxlength:"5",onkeyup:"value=value.replace(/[^\\d]/g,'')",placeholder:"金币"},domProps:{value:e.gold},on:{input:function(t){t.target.composing||(e.gold=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])]),e._v(" "),n("div",{staticClass:"info"},[e._v("例：消费10元获得1金币")])]),e._v(" "),n("div",[n("span",{staticClass:"required"},[e._v("消费奖励模式")]),e._v(" "),n("singleSelect",{key:"id",attrs:{index:e.result,styles:{border:"1px solid #cecdcd"},list:e.list,name:"name"},on:{selOn:e.haveIndex}})],1),e._v(" "),n("div",{staticClass:"btn"},[n("button",{on:{click:e.save}},[e._v("保存")])])])])};i._withStripped=!0;var o=n("bbb9"),r=n("81a2"),a=n("05dd");function s(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function i(o,r){try{var a=t[o](r),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)});e(s)}("next")})}}var l={data:function(){return{list:[{name:"奖励给客户的专属顾问",id:0},{name:"奖励给扫码人员",id:1}],gainGold:"",consumeGold:"",gold:"",result:0,type:""}},methods:{haveIndex:function(e){this.result=e},formatValue:function(){this.gainGold=o.a.toFloatStr(this.gainGold,2)},save:function(){var e=this;return s(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.checkData()){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,r.a.addOrUpdate({data:{bindingObtain:e.gainGold,consumptionAmount:e.consumeGold,giveGoldCoins:e.gold,type:e.result}});case 4:e.$store.commit("setWin",{content:"修改成功",winType:"alert",title:"操作提示!"}),e.getCoinsConfig();case 6:case"end":return t.stop()}},t,e)}))()},checkData:function(){return this.gainGold>1e4?(this.$store.commit("setWin",{content:"绑定金币输入上限为0~10000以内允许小数，保留小数后两位",winType:"alert",title:"提示信息"}),!1):this.consumeGold>1e4?(this.$store.commit("setWin",{content:"消费金额输入范围为1~10000",winType:"alert",title:"提示信息"}),!1):this.gold>1e4?(this.$store.commit("setWin",{content:"金币输入范围为1~10000",winType:"alert",title:"提示信息"}),!1):!!a.a.checkData({gainGold:{cond:"$$ !='' && $$>=0",pro:"绑定金币输入上限为0~10000以内允许小数，保留小数后两位"},consumeGold:{cond:"$$ !='' && $$>0",pro:"消费金额输入范围为1~10000"},gold:{cond:"$$ !='' && $$>0",pro:"金币输入范围为1~10000"}},this)},getCoinsConfig:function(){var e=this;return s(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.getCoinsConfig({});case 2:n=t.sent,e.consumeGold=n.consumptionAmount,e.gainGold=n.bindingObtain,e.gold=n.giveGoldCoins,e.result=n.type||0;case 7:case"end":return t.stop()}},t,e)}))()}},mounted:function(){this.getCoinsConfig()},components:{singleSelect:function(){return n.e("mul_select").then(n.bind(null,"7231"))}}},c=(n("9e75"),n("7610")),u=Object(c.a)(l,i,[function(){var e=this.$createElement,t=this._self._c||e;return t("header",{staticClass:"glod-config-header"},[t("span",[this._v("金币配置")]),this._v(" "),t("p",{staticClass:"dashed"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",[this._v("金币规则 : 1金币=1元")])])}],!1,null,"c02e3fc6",null);u.options.__file="src\\module\\seller_assistant\\gold_config.vue";t.default=u.exports}}]);