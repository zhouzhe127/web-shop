(window.webpackJsonp=window.webpackJsonp||[]).push([["job_manage"],{"3d57":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"joblist"}},[n("section",{staticClass:"jobTop"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"input",attrs:{type:"text",placeholder:"请输入职位名称"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),n("div",{staticClass:"blue",on:{click:t.keyUp}},[t._v("筛选")]),t._v(" "),n("div",{staticClass:"gray",on:{click:t.reset}},[t._v("重置")])]),t._v(" "),n("section",{staticClass:"allList"},[n("com-table",{attrs:{listHeight:50,listName:"职位列表",fixed:1,listWidth:770,showTitle:1,introData:t.lists,titleData:t.titleList,allTotal:t.list.length},scopedSlots:t._u([{key:"con-0",fn:function(e){return n("div",{},[n("span",{staticStyle:{color:"#FE8D2C",cursor:"pointer"},on:{click:function(n){t.edit(e.data.id,e.index)}}},[t._v("编辑")]),t._v(" "),n("span",{staticStyle:{padding:"0 20px",color:"#D2D2D2"}},[t._v("|")]),t._v(" "),n("span",{staticStyle:{color:"#FD3F1F",cursor:"pointer"},on:{click:function(n){t.deljob(e.data,e.index)}}},[t._v("删除")])])}},{key:"con-1",fn:function(e){return n("div",{},[t._v(t._s(e.index+1))])}}])}),t._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("pageElement",{attrs:{page:t.currentPage,total:t.totalNum,isNoJump:!0},on:{pageNum:t.pageClick}})],1)],1),t._v(" "),t.showWin?n("job-win",{attrs:{isAdd:t.isAdd,jobId:t.jobId,jobIndex:t.jobIndex,list:t.copyList},on:{throwWinResult:t.doThrowWinResult}}):t._e()],1)};i._withStripped=!0;var s=n("81a2"),r=n("f6ce"),o=n("bbb9");function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(s,r){try{var o=e[s](r),a=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(a).then(function(t){i("next",t)},function(t){i("throw",t)});t(a)}("next")})}}var c={data:function(){return{titleList:[{titleName:"操作",titleStyle:{width:"20%"}},{titleName:"序号",titleStyle:{width:"10%"}},{titleName:"职位名称",titleStyle:{width:"30%"},dataName:"name"},{titleName:"权限数量",titleStyle:{width:"20%"},dataName:"nodeNum"},{titleName:"职位人数",titleStyle:{width:"20%"},dataName:"personNum"}],showWin:!1,userData:Object,list:[],copyList:[],isAdd:!0,jobId:"",jobIndex:"",search:"",num:10,currentPage:1,pagenumArr:[10,20,50]}},mounted:function(){this.userData=r.a.session("userShop"),this.$store.commit("setPageTools",[{name:"添加职位",className:["addStaff","export-btn"],fn:this.add}]),this.init()},computed:{totalNum:function(){return Math.ceil(this.list.length/this.num)},lists:function(){var t=(this.currentPage-1)*this.num,e=this.currentPage*this.num;return this.list.slice(t,e)}},methods:{init:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.newGetJobInfoList({data:{}});case 2:(n=e.sent)&&(t.list=n,t.copyList=n,t.sortList());case 4:case"end":return e.stop()}},e,t)}))()},pageClick:function(t){this.currentPage=t.page,this.num=t.num},keyUp:function(){var t=[];this.currentPage=1;for(var e=this.copyList,n=0;n<e.length;n++){if(""!=this.search)if(-1==(e[n].name+"").indexOf(this.search))continue;t.push(e[n])}this.list=t},reset:function(){this.search="",this.keyUp()},addJob:function(t){var e=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.newAddJob({data:t});case 2:n.sent?(e.init(),e.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"添加成功"})):e.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"返回数据错误，请刷新后重试"});case 4:case"end":return n.stop()}},n,e)}))()},editJob:function(t){var e=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.newEditJob({data:t});case 2:n.sent?(e.init(),e.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"修改成功"})):e.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"返回数据错误，请刷新后重试"});case 4:case"end":return n.stop()}},n,e)}))()},add:function(){this.isAdd=!0,this.showWin=!0},edit:function(t,e){this.isAdd=!1,this.jobId=t,this.jobIndex=e,this.showWin=!0},doThrowWinResult:function(t,e){"ok"==t?(this.isAdd?this.addJob(e):this.editJob(e),this.showWin=!1):this.showWin="cancel"!=t&&"close"!=t},deljob:function(t,e){var n=this;this.$store.commit("setWin",{title:"温馨提示",winType:"confirm",content:"确定删除"+t.name+"职位信息?",callback:function(i){"ok"==i&&n.deleteJob(t.id,e)}})},deleteJob:function(t,e){var n=this;return a(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.a.newDeleteJob({data:{id:t}});case 2:i.sent&&(n.list.splice(e,1),0==n.list.length&&(n.currentPage=n.currentPage-1),n.init());case 4:case"end":return i.stop()}},i,n)}))()},sortList:function(){this.list=o.a.sortByAll(this.list,["sort","id"],!0)}},components:{jobWin:function(){return n.e("job_manage_one").then(n.bind(null,"1090"))},pageElement:function(){return n.e("page_element").then(n.bind(null,"5921"))},comTable:function(){return n.e("table").then(n.bind(null,"4360"))}}},u=(n("e4ca"),n("7610")),l=Object(u.a)(c,i,[],!1,null,"d10a905c",null);l.options.__file="src\\module\\shop_config\\job_manage.vue";e.default=l.exports},"4e36":function(t,e,n){},e4ca:function(t,e,n){"use strict";var i=n("4e36");n.n(i).a}}]);