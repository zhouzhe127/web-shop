(window.webpackJsonp=window.webpackJsonp||[]).push([["warehouse_detail"],{a9e2:function(t,e,a){},bc5e:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"warehouse-detail"},[a("div",{staticClass:"detail-box"},[a("div",{staticClass:"title"},[t._v("\n\t\t\t仓库详情\n\t\t")]),t._v(" "),a("div",{staticClass:"word"},[a("div",{staticClass:"block"},[a("div",{staticClass:"item"},[a("em",[t._v("仓库名称：")]),t._v(t._s(t.detail.name))]),t._v(" "),a("div",{staticClass:"item"},[a("em",[t._v("区域总数：")]),t._v(t._s(t.detail.area.length))]),t._v(" "),a("div",{staticClass:"item"},[a("em",[t._v("仓库地址：")]),t._v(" "),t.addressShow?[t._v(t._s(t.detail.provinceName)+" "+t._s(t.detail.cityName)+" "+t._s(t.detail.townName)+" "+t._s(t.detail.place))]:t._e()],2)]),t._v(" "),a("div",{staticClass:"block"},[a("div",{staticClass:"item"},[a("em",[t._v("仓库编号：")]),t._v(t._s(t.detail.code))]),t._v(" "),a("div",{staticClass:"item"},[a("em",[t._v("商品种类：")]),t._v(t._s(Number(t.detail.KindWeightKg||t.detail.kindWeightKg)+Number(t.detail.kindGoods)+Number(t.detail.kindWeightG)))]),t._v(" "),a("div",{staticClass:"item"},[a("em",[t._v("称重商品：")]),t._v(t._s(t.detail.numWeightKg)+"kg / "+t._s(t.detail.numWeightG)+"g")])]),t._v(" "),a("div",{staticClass:"block"},[a("div",{staticClass:"item"},[a("em",[t._v("仓库所属：")]),t._v(t._s(t.detail.ownerName))]),t._v(" "),a("div",{staticClass:"item"},[a("em",[t._v("物料种类：")]),t._v(t._s(t.detail.kindMaterial))]),t._v(" "),a("div",{staticClass:"item"},[a("em",[t._v("普通商品：")]),t._v(t._s(t.detail.numGoods))])]),t._v(" "),a("div",{staticClass:"item handle"},[a("span",{staticClass:"blue",on:{click:t.changeWarehouse}},[t._v("修改仓库")]),t._v(" "),a("span",{staticClass:"yellow",on:{click:t.changeArea}},[t._v("修改区域")]),t._v(" "),a("span",{staticClass:"gray",on:{click:t.deleteWarehouse}},[t._v("删除")])])])]),t._v(" "),0==t.configIndex?a("div",{staticClass:"tab-box",on:{click:t.tabClick}},[a("span",{class:{active:1==t.tabIndex},attrs:{"data-index":"1"}},[t._v("商品")]),t._v(" "),a("span",{class:{active:2==t.tabIndex},attrs:{"data-index":"2"}},[t._v("物料")])]):t._e(),t._v(" "),a("div",{staticClass:"filter"},[1==t.tabIndex?[a("div",{staticClass:"block-box"},[a("div",{staticClass:"inline-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsName,expression:"goodsName"}],attrs:{type:"text",placeholder:"请输入商品名"},domProps:{value:t.goodsName},on:{input:function(e){e.target.composing||(t.goodsName=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"inline-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.barCode,expression:"barCode"}],attrs:{type:"text",placeholder:"请输入条形码"},domProps:{value:t.barCode},on:{input:function(e){e.target.composing||(t.barCode=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"inline-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.secBarCode,expression:"secBarCode"}],attrs:{type:"text",placeholder:"请输入副条形码"},domProps:{value:t.secBarCode},on:{input:function(e){e.target.composing||(t.secBarCode=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"block-box inline-box"},[a("selectBtn",{staticClass:"select-btn",attrs:{sorts:t.typeNameArr,index:t.typeIndex},on:{emit:t.selectType}})],1)]:t._e(),t._v(" "),2==t.tabIndex?[a("div",{staticClass:"block-box"},[a("div",{staticClass:"inline-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.mName,expression:"mName"}],attrs:{type:"text",placeholder:"请输入物料名称"},domProps:{value:t.mName},on:{input:function(e){e.target.composing||(t.mName=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"inline-box"},[a("selectStore",{attrs:{sorts:t.oneSort,tipName:"请选择一级分类",isSingle:!0},on:{emit:t.getSortOne}})],1),t._v(" "),a("div",{staticClass:"inline-box",on:{click:t.twoSortClick}},[a("selectStore",{ref:"towSortDom",attrs:{sorts:t.twoSort,tipName:"请选择二级分类",isSingle:!0},on:{emit:t.getSortTwo}})],1)])]:t._e(),t._v(" "),a("div",{staticClass:"block-box inline-box button-box"},[a("span",{staticClass:"blue",on:{click:t.filterClick}},[t._v("筛选")]),t._v(" "),1==t.tabIndex?a("span",{staticClass:"gray",on:{click:t.resetGoods}},[t._v("重置")]):t._e(),t._v(" "),2==t.tabIndex?a("span",{staticClass:"gray",on:{click:t.reset}},[t._v("重置")]):t._e()])],2),t._v(" "),a("div",{staticClass:"main"},[1==t.tabIndex?[a("div",{staticClass:"list"},[a("div",{staticClass:"head"},[t._v("\n\t\t\t\t\t商品列表 · 共"),a("em",[t._v(" "+t._s(t.gLength)+" ")]),t._v("条数据\n\t\t\t\t")]),t._v(" "),a("div",{staticClass:"scroll-box"},[t._m(0),t._v(" "),a("ul",{on:{click:t.listHandle}},[t._l(t.goodsList,function(e,s){return a("li",{key:s},[a("span",{staticClass:"narrow handle"},[a("em",{staticClass:"detail goods-detail",attrs:{"data-index":s}},[t._v("查看详情")])]),t._v(" "),(t.gPage-1)*t.gShowNum+s>=9?a("span",[t._v(t._s((t.gPage-1)*t.gShowNum+s+1))]):a("span",[t._v(t._s("0"+((t.gPage-1)*t.gShowNum+s+1)))]),t._v(" "),a("span",{staticClass:"text-ellipsis",attrs:{title:e.goodsName}},[t._v(t._s(e.goodsName))]),t._v(" "),a("span",[t._v(t._s(e.barCode))]),t._v(" "),a("span",[t._v(t._s(e.price))]),t._v(" "),a("span",[t._v(t._s(t.setGoodsType(e.type)))]),t._v(" "),a("span",[t._v(t._s(e.surplus)+t._s(e.unit))]),t._v(" "),a("span",{staticClass:"text-ellipsis",attrs:{title:e.batch}},[t._v(t._s(e.batch))])])}),t._v(" "),t.gLength?t._e():a("li",{staticClass:"empty"},[t._v("- 暂无条目 -")])],2)])]),t._v(" "),a("div",{staticClass:"page-box"},[a("pageBtn",{attrs:{total:t.gPageTotal,page:t.gPage,isNoJump:!0},on:{pageNum:t.gPageChange}})],1)]:t._e(),t._v(" "),2==t.tabIndex?[a("div",{staticClass:"list mList"},[a("div",{staticClass:"head"},[t._v("\n\t\t\t\t\t物料列表 · 共"),a("em",[t._v(" "+t._s(t.mLength)+" ")]),t._v("条数据\n\t\t\t\t")]),t._v(" "),a("div",{staticClass:"scroll-box"},[t._m(1),t._v(" "),a("ul",{on:{click:t.listHandle}},[t._l(t.materialList,function(e,s){return a("li",{key:s},[a("span",{staticClass:"narrow handle"},[a("em",{staticClass:"detail wl-detail",attrs:{"data-id":e.id}},[t._v("查看详情")])]),t._v(" "),(t.mPage-1)*t.mShowNum+s>=9?a("span",[t._v(t._s((t.mPage-1)*t.mShowNum+s+1))]):a("span",[t._v(t._s("0"+((t.mPage-1)*t.mShowNum+s+1)))]),t._v(" "),a("span",{staticClass:"text-ellipsis",attrs:{title:e.name}},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticClass:"text-ellipsis",attrs:{title:t.setWlType(e.type)}},[t._v(t._s(t.setWlType(e.type)))]),t._v(" "),a("span",{staticClass:"text-ellipsis",attrs:{title:t.setWlSort(e.cate)}},[t._v(t._s(t.setWlSort(e.cate)))]),t._v(" "),a("span",{staticClass:"text-ellipsis",attrs:{title:t.setUnit(e.surplus,e.unit)}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.setUnit(e.surplus,e.unit))+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("span",[t._v(t._s(e.batch))])])}),t._v(" "),t.mLength?t._e():a("li",{staticClass:"empty"},[t._v("- 暂无条目 -")])],2)])]),t._v(" "),a("div",{staticClass:"page-box"},[a("pageBtn",{attrs:{total:t.mPageTotal,page:t.mPage,isNoJump:!0},on:{pageNum:t.mPageChange}})],1)]:t._e()],2)])};s._withStripped=!0;var i=a("f6ce"),r=a("bbb9"),n=a("81a2"),o=a("05dd");function l(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function s(i,r){try{var n=e[i](r),o=n.value}catch(t){return void a(t)}if(!n.done)return Promise.resolve(o).then(function(t){s("next",t)},function(t){s("throw",t)});t(o)}("next")})}}var d=null,u={data:function(){return{id:"",detail:{area:[]},gPage:1,gShowNum:10,gPageTotal:1,gLength:0,mPage:1,mShowNum:10,mPageTotal:1,mLength:0,dropList:["10","20"],tabIndex:1,configIndex:0,typeNameArr:[],typeIndex:0,typeList:[{id:-1,name:"全部类型"},{id:0,name:"普通商品"},{id:1,name:"称重商品"}],goodsType:-1,goodsName:"",barCode:"",secBarCode:"",veri:["goodsName","barCode","secBarCode"],mName:"",allSort:[],oneSort:[],twoSort:[],mCid:"",mCidOne:"",goodsData:[],goodsList:[],materialData:"",materialList:[],filterObj:{},addressShow:!1,allMids:[],allGids:[]}},components:{pageBtn:function(){return a.e("page_element").then(a.bind(null,"5921"))},selectBtn:function(){return a.e("select_btn").then(a.bind(null,"3d41"))},selectStore:function(){return a.e("win").then(a.bind(null,"cb83"))}},mounted:function(){var t=this;this.$store.commit("setPageTools",{back:function(){i.a.session("warehouseListsDestroy",!0),i.a.session("warehouseDetail",null),delete t.$route.query.id,delete t.$route.query.sid,t.$router.push({path:"/admin/warehouseList",query:t.$route.query})}});var e=i.a.session("inventConfigure");this.configIndex=e,this.tabIndex=2==e?2:1,this.id=this.$route.query.id,this.getWarehouseDetail(),this.getRequest(),1!=e&&0!=e||(this.getGoodsList(),this.setTypeNameArr()),2!=e&&0!=e||(this.getCategoryList(),this.getMaterialList())},methods:{getWarehouseDetail:function(){var t=this;return l(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.warehouseGetWarehouse({data:{id:t.id}});case 2:a=e.sent,t.detail=a,t.getAreaCn();case 5:case"end":return e.stop()}},e,t)}))()},getGoodsList:function(){var t=this;return l(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.whGetInventoryGoodsList({data:{wid:t.id,type:t.goodsType,page:t.gPage,num:t.gShowNum}});case 2:a=e.sent,t.goodsList=a.list,t.gPageTotal=Number(a.total),t.gLength=Number(a.count);case 6:case"end":return e.stop()}},e,t)}))()},filterGoodsNum:function(){var t=this;return l(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.whGetGoodsExactly({data:{wid:t.id,goodsName:t.goodsName,barCode:t.barCode,secBarCode:t.secBarCode,type:t.goodsType}});case 2:a=e.sent,t.goodsList=a,t.gPageTotal=1,t.gLength=a.length?a.length:0;case 6:case"end":return e.stop()}},e,t)}))()},getMaterialList:function(){var t=this;return l(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.whGetInventoryMaterialList({data:{wid:t.id,page:t.mPage,num:t.mShowNum,name:t.mName,cid:t.mCid}});case 2:a=e.sent,t.materialList=a.list,t.mPageTotal=Number(a.total),t.mLength=Number(a.count);case 6:case"end":return e.stop()}},e,t)}))()},deleteReq:function(){var t=this;return l(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.warehouseDeleteWarehouse({data:{id:t.id}});case 2:e.sent&&t.$router.push({path:"/admin/warehouseList",query:t.$route.query});case 4:case"end":return e.stop()}},e,t)}))()},getCategoryList:function(){var t=this;return l(regeneratorRuntime.mark(function e(){var a,s,i,r,o,l,d,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.invoiv_getCategoryList();case 2:for(a=e.sent,s=[],i=!0,r=!1,o=void 0,e.prev=7,l=a[Symbol.iterator]();!(i=(d=l.next()).done);i=!0)0==(u=d.value).pid&&s.push(u);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),r=!0,o=e.t0;case 15:e.prev=15,e.prev=16,!i&&l.return&&l.return();case 18:if(e.prev=18,!r){e.next=21;break}throw o;case 21:return e.finish(18);case 22:return e.finish(15);case 23:t.oneSort=s,t.allSort=a;case 25:case"end":return e.stop()}},e,t,[[7,11,15,23],[16,,18,22]])}))()},getAreaCn:function(){var t=this;return l(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.e("area_cn").then(a.bind(null,"f529"));case 2:s=e.sent,d=s.default,t.detail.provinceName=d.getNameByCode(t.detail.province),t.detail.cityName=d.getNameByCode(t.detail.city),t.detail.townName=d.getNameByCode(t.detail.town),t.addressShow=!0;case 8:case"end":return e.stop()}},e,t)}))()},getRequest:function(){var t=i.a.session("warehouseDetailDestroy"),e=i.a.session("warehouseDetailRequest");if(t&&e)for(var a in e)this[a]=e[a];i.a.session("warehouseDetailDestroy",null),i.a.session("warehouseDetailRequest",null)},getSortOne:function(t){this.mCid=this.setSortId(t),this.mCidOne=this.mCid;var e=[],a=!0,s=!1,i=void 0;try{for(var r,n=this.allSort[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value;o.pid==this.mCid&&e.push(o)}}catch(t){s=!0,i=t}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}this.twoSort=e},getSortTwo:function(t){var e=this.setSortId(t);this.mCid=e||(this.mCidOne?this.mCidOne:"")},twoSortClick:function(){this.twoSort.length||(this.$refs.towSortDom.sortShow=!1,this.$store.commit("setWin",{title:"提示信息",content:"请选择一级分类"}))},setSortId:function(t){var e=void 0,a=!0,s=!1,i=void 0;try{for(var r,n=t[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value;if(1==o.selected){e=o.id;break}e=""}}catch(t){s=!0,i=t}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}return e},setWlSort:function(t){var e=[],a=!0,s=!1,i=void 0;try{for(var r,n=t[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value;e.push(o.name)}}catch(t){s=!0,i=t}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}return e.join(" , ")},deleteWarehouse:function(){var t=this;this.$store.commit("setWin",{title:"提示信息",winType:"confirm",content:"确认删除该仓库？",callback:function(e){"ok"==e&&t.deleteReq()}})},tabClick:function(t){var e=t.target;if("span"==e.tagName.toLocaleLowerCase()){var a=e.getAttribute("data-index");this.tabIndex=a}},changeWarehouse:function(){delete this.$route.query.sid,this.$router.push({path:"change",query:this.$route.query})},changeArea:function(){var t={area:this.detail.area,id:this.detail.id};i.a.session("warehouseArea",t),this.$router.push({path:"changeArea",query:this.$route.query})},listHandle:function(t){var e=t.target;if(e.className.includes("goods-detail")){var a=parseInt(e.getAttribute("data-index")),s=this.goodsList[a],r=(this.gPage-1)*this.gShowNum+a+1;s.wid=this.id,s.id=this.goodsList[a].gid,s.numerical=r>=9?r:"0"+r,i.a.session("goodsneed",s),i.a.session("warehouseDetailRequest",this.filterObj),this.$router.push({path:"warehouseGoodsDetail",query:this.$route.query})}else if(e.className.includes("wl-detail")){var n=e.getAttribute("data-id");this.$route.query.id=n,this.$route.query.wid=this.id,delete this.$route.query.sid,i.a.session("warehouseDetailRequest",this.filterObj),this.$router.push({path:"warehouseMaterialDetail",query:this.$route.query})}},gPageChange:function(t){this.gPage=t.page,this.gShowNum=t.num,this.setGoodsFilter(),this.getGoodsList()},mPageChange:function(t){this.mPage=t.page,this.mShowNum=t.num,this.filter()},filterClick:function(){this.page=1,this.filter()},filter:function(){if(1==this.tabIndex){var t=0,e=!0,a=!1,s=void 0;try{for(var i,r=this.veri[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){""==this[i.value].trim()&&t++}}catch(t){a=!0,s=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw s}}this.setGoodsFilter(),t>=3?this.getGoodsList():this.filterGoodsNum()}else 2==this.tabIndex&&(this.setMaterialFilter(),this.getMaterialList())},setGoodsFilter:function(){var t={goodsName:this.goodsName,barCode:this.barCode,goodsType:this.goodsType};this.filterObj=r.a.deepCopy(t),this.filterObj.tabIndex=1},setMaterialFilter:function(){var t={name:this.mName,mCid:this.mCid};this.filterObj=r.a.deepCopy(t),this.filterObj.tabIndex=2},clearSort:function(t){var e=r.a.deepCopy(t),a=!0,s=!1,i=void 0;try{for(var n,o=e[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){n.value.selected=!1}}catch(t){s=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(s)throw i}}return e},resetGoods:function(){var t=!0,e=!1,a=void 0;try{for(var s,i=this.veri[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){this[s.value]=""}}catch(t){e=!0,a=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw a}}this.goodsType=-1,this.typeIndex=0,this.gPage=1,this.gShowNum=10,this.getGoodsList()},reset:function(){this.oneSort=this.clearSort(this.oneSort),this.twoSort=[],this.mName="",this.mCid="",this.mPage=1,this.mShowNum=10,this.tabIndex=2,this.filter()},codeInput:function(t){var e=t.target.value;e=e.replace(/[^\d]/g,""),isNaN(e)&&(e=""),this.barCode=e,t.target.value=e},setTypeNameArr:function(){var t=!0,e=!1,a=void 0;try{for(var s,i=this.typeList[Symbol.iterator]();!(t=(s=i.next()).done);t=!0){var r=s.value;this.typeNameArr.push(r.name)}}catch(t){e=!0,a=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw a}}},setGoodsType:function(t){var e="",a=!0,s=!1,i=void 0;try{for(var r,n=this.typeList[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value;o.id==t&&(e=o.name)}}catch(t){s=!0,i=t}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}return e},setUnit:function(t,e){var a="",s="",i=1,r=!0,n=!1,l=void 0;try{for(var d,u=e[Symbol.iterator]();!(r=(d=u.next()).done);r=!0){var c=d.value;1==c.isMin?(s=c.name,1==c.isDefault&&(a=c.name,i=c.value)):1==c.isDefault&&(a=c.name,i=c.value)}}catch(t){n=!0,l=t}finally{try{!r&&u.return&&u.return()}finally{if(n)throw l}}return o.a.comUnit(t,i,a,s)},setWlType:function(t){if(0==t)return"物料"},selectType:function(t){this.goodsType=this.typeList[t].id,this.typeIndex=t,this.setGoodsFilter();var e=0,a=!0,s=!1,i=void 0;try{for(var r,n=this.veri[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){""==this[r.value].trim()&&e++}}catch(t){s=!0,i=t}finally{try{!a&&n.return&&n.return()}finally{if(s)throw i}}e>=3?this.getGoodsList():this.filterGoodsNum()},getAddress:function(t){this.province=t.province,this.city=t.city,this.area=t.area}}},c=(a("cb9a"),a("7610")),v=Object(c.a)(u,s,[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("span",{staticClass:"narrow"},[t._v("操作")]),t._v(" "),a("span",[t._v("序号")]),t._v(" "),a("span",[t._v("商品名")]),t._v(" "),a("span",[t._v("条形码")]),t._v(" "),a("span",[t._v("售价")]),t._v(" "),a("span",[t._v("商品类型")]),t._v(" "),a("span",[t._v("库存数量 / 重量")]),t._v(" "),a("span",[t._v("批次数量")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[a("span",{staticClass:"narrow"},[t._v("操作")]),t._v(" "),a("span",[t._v("序号")]),t._v(" "),a("span",[t._v("物料名称")]),t._v(" "),a("span",[t._v("类型")]),t._v(" "),a("span",[t._v("分类")]),t._v(" "),a("span",[t._v("库存数量 / 重量")]),t._v(" "),a("span",[t._v("批次数量")])])}],!1,null,"03e6886c",null);v.options.__file="src\\module\\invoicing_system\\warehouse_manage\\warehouse_detail.vue";e.default=v.exports},cb9a:function(t,e,a){"use strict";var s=a("a9e2");a.n(s).a}}]);