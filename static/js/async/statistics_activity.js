(window.webpackJsonp=window.webpackJsonp||[]).push([["statistics_activity"],{"32c9":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"activity"},[s("div",{staticClass:"real-time"},[s("div",{staticClass:"title"},[t._v("实时数据")]),t._v(" "),s("div",{staticClass:"block"},[s("div",{staticClass:"left"},[t._m(0),t._v(" "),s("div",{staticClass:"card"},[t._v("\n\t\t\t\t\t今日 （张）\n\t\t\t\t\t"),s("em",[t._v(t._s(t.activityData.todaySalesNum))])]),t._v(" "),s("div",{staticClass:"card"},[t._v("\n\t\t\t\t\t昨日 （张）\n\t\t\t\t\t"),s("em",[t._v(t._s(t.activityData.yestodaySalesNum))])])]),t._v(" "),s("div",{staticClass:"right"},[t._m(1),t._v(" "),s("div",{staticClass:"card"},[t._v("\n\t\t\t\t\t今日 （元）\n\t\t\t\t\t"),s("em",[t._v(t._s(t.activityData.todayMoney))])]),t._v(" "),s("div",{staticClass:"card"},[t._v("\n\t\t\t\t\t昨日 （元）\n\t\t\t\t\t"),s("em",[t._v(t._s(t.activityData.yestodayMoney))])])])])]),t._v(" "),s("div",{staticClass:"filter"},[s("div",{staticClass:"tab-box select-ban",on:{click:t.statusChange}},[s("span",{class:{active:2==t.status},attrs:{"data-status":"2"}},[t._v("进行中的活动")]),t._v(" "),s("span",{class:{active:-2==t.status},attrs:{"data-status":"-2"}},[t._v("已结束的活动")])]),t._v(" "),s("div",{staticClass:"right-box"},[s("selectBtn",{staticClass:"select-btn",attrs:{sorts:t.options,index:t.optionIndex},on:{emit:t.selectType}}),t._v(" "),s("div",{staticClass:"search-box"},[s("span",{staticClass:"yellow",on:{click:t.getList}},[t._v("筛选")]),t._v(" "),s("span",{staticClass:"gray",on:{click:t.reset}},[t._v("重置")])])],1)]),t._v(" "),s("div",{staticClass:"list"},[s("div",{staticClass:"head"},[t._v("\n\t\t\t活动统计 · 共\n\t\t\t"),s("em",[t._v(t._s(t.listLength))]),t._v("条数据\n\t\t")]),t._v(" "),t._m(2),t._v(" "),s("ul",t._l(t.activityList,function(e,a){return s("li",{key:a},[s("span",[s("em",{staticClass:"under-line",on:{click:function(s){t.checkDetail(e)}}},[t._v("查看详情")])]),t._v(" "),s("span",[t._v(t._s(e.name))]),t._v(" "),s("span",[t._v(t._s(t.getTypeName(e.type)))]),t._v(" "),s("span",[t._v(t._s(e.giveNum))]),t._v(" "),s("span",[t._v(t._s(e.getNum))]),t._v(" "),s("span",[t._v(t._s(e.SalesNum))]),t._v(" "),s("span",[t._v(t._s(e.SalesRatio))]),t._v(" "),s("span",[t._v(t._s(t.formatTime(e.createTime)))])])}))]),t._v(" "),s("div",{staticClass:"page-box"},[s("pageBtn",{attrs:{total:t.pageNum,page:t.page,isNoJump:!0},on:{pageNum:t.pageChange}})],1)])};a._withStripped=!0;var i=s("f6ce"),n=s("bbb9"),r=s("81a2");function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function a(i,n){try{var r=e[i](n),c=r.value}catch(t){return void s(t)}if(!r.done)return Promise.resolve(c).then(function(t){a("next",t)},function(t){a("throw",t)});t(c)}("next")})}}var o={data:function(){return{options:[],optionIndex:0,activityData:{todaySalesNum:0,yestodaySalesNum:0,todayMoney:0,yestodayMoney:0},activityList:[],typeList:[],detailData:[],detailType:[],page:1,num:10,status:2,mouldType:"",type:"",pageNum:0,listLength:0,requestObj:""}},components:{selectBtn:function(){return s.e("select_btn").then(s.bind(null,"3d41"))},calendar:function(){return s.e("calendar_type").then(s.bind(null,"f2dd"))},detail:function(){return s.e("activity_detail").then(s.bind(null,"3561"))},pageBtn:function(){return s.e("page_element").then(s.bind(null,"5921"))}},mounted:function(){this.getRequest(),this.getTypeList(),this.getList()},methods:{selectType:function(t){this.optionIndex=t,this.type=this.optionIndex>0?this.typeList[this.optionIndex-1].id:"",this.mouldType=this.optionIndex>0?this.typeList[this.optionIndex-1].children[0].id:"",this.page=1,this.getList()},statusChange:function(t){var e=t.target;"span"==e.tagName.toLocaleLowerCase()&&(this.status=parseInt(e.getAttribute("data-status"))),this.page=1,this.getList()},getRequest:function(){var t=i.a.session("activityRequestDestroy"),e=i.a.session("activityRequest");if(t&&e){for(var s in e)this[s]=e[s];this.optionIndex=this.optionIndex}i.a.session("activityRequestDestroy",null),i.a.session("activityRequest",null)},getTypeList:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var s,a,i,n,c,o,u,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.getActivityMould();case 2:for(s=e.sent,t.typeList=s,a=[],i=!0,n=!1,c=void 0,e.prev=8,o=t.typeList[Symbol.iterator]();!(i=(u=o.next()).done);i=!0)v=u.value,a.push(v.children[0].name);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),n=!0,c=e.t0;case 16:e.prev=16,e.prev=17,!i&&o.return&&o.return();case 19:if(e.prev=19,!n){e.next=22;break}throw c;case 22:return e.finish(19);case 23:return e.finish(16);case 24:a.unshift("全部活动类型"),t.options=a;case 26:case"end":return e.stop()}},e,t,[[8,12,16,24],[17,,19,23]])}))()},getList:function(){var t=this;return c(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.activityGetList({data:{page:t.page,num:t.num,status:t.status,type:t.type,mouldType:t.mouldType}});case 2:s=e.sent,t.activityData=s,t.activityList=s.list,t.pageNum=s.total,t.listLength=s.count,t.requestObj={page:t.page,num:t.num,status:t.status,type:t.type,mouldType:t.mouldType,optionIndex:t.optionIndex,pageNum:t.pageNum};case 8:case"end":return e.stop()}},e,t)}))()},reset:function(){this.options.push(""),this.options.pop(""),this.type="",this.mouldType="",this.status=2,this.page=1,this.getList()},pageChange:function(t){this.page=t.page,this.getList()},getTypeName:function(t){var e="",s=!0,a=!1,i=void 0;try{for(var n,r=this.typeList[Symbol.iterator]();!(s=(n=r.next()).done);s=!0){var c=n.value;if(c.id==t){e=c.children[0].name;break}e="未知类型"}}catch(t){a=!0,i=t}finally{try{!s&&r.return&&r.return()}finally{if(a)throw i}}return this.reqSelectedName=e,e},formatTime:function(t){return n.a.format(new Date(1e3*t),"yyyy-MM-dd")},checkDetail:function(t){var e={detailData:t,detailType:this.typeList};i.a.session("activityRequest",this.requestObj),i.a.session("activityStatisticsDetail",e),this.$router.push({path:"activityStatistics/detail",query:this.$route.query})}}},u=(s("5168"),s("7610")),v=Object(u.a)(o,a,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"name"},[e("em"),this._v("核销量\n\t\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"name"},[e("em"),this._v("活动交易金额(元)\n\t\t\t\t")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[s("span",[t._v("查看")]),t._v(" "),s("span",[t._v("活动名称")]),t._v(" "),s("span",[t._v("活动类型")]),t._v(" "),s("span",[t._v("发券量")]),t._v(" "),s("span",[t._v("领券量")]),t._v(" "),s("span",[t._v("核销量")]),t._v(" "),s("span",[t._v("核销率 (%)")]),t._v(" "),s("span",[t._v("开始时间")])])}],!1,null,"f1553b84",null);v.options.__file="src\\module\\statistics\\activity.vue";e.default=v.exports},5168:function(t,e,s){"use strict";var a=s("764e");s.n(a).a},"764e":function(t,e,s){}}]);