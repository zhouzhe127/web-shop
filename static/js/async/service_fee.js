(window.webpackJsonp=window.webpackJsonp||[]).push([["service_fee"],{"2cf5":function(e,t,n){},"4c7f":function(e,t,n){"use strict";var s=n("a5ae");n.n(s).a},a5ae:function(e,t,n){},cdfd:function(e,t,n){"use strict";var s=n("2cf5");n.n(s).a},f59a:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"picName"},[n("div",{staticClass:"line"},[n("section",{staticClass:"fl"},[n("label",{staticClass:"commodity-name  fl"},[e._v("开启服务费")]),e._v(" "),n("on-off",{attrs:{status:e.on},on:{statusChange:e.getIsDiscountToggle}})],1)]),e._v(" "),n("div",{staticClass:"line"},[n("section",{staticClass:"fl"},[n("span",{staticClass:"required feeRoute"},[e._v("服务费使用规范")]),e._v(" "),n("span",{staticClass:"fl"},[n("radioBtn",{attrs:{list:e.list,index:e.index,name:"name"},on:{selOn:e.doThrowWinResult}})],1)])]),e._v(" "),n("div",{staticClass:"line"},[n("label",{staticClass:"required fl feeSet"},[e._v("服务费费率设置")]),e._v(" "),n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.percent,expression:"percent"}],staticClass:"input feeInput",attrs:{type:"text",disabled:e.disabled,placeholder:"输入费率"},domProps:{value:e.percent},on:{input:function(t){t.target.composing||(e.percent=t.target.value)}}}),e._v("%\n\t\t\t")])]),e._v(" "),n("div",{staticClass:"line"},[n("label",{staticClass:"fl feeGoods"},[e._v("选择服务费菜品")]),e._v(" "),n("span",{staticClass:"fl spanCom"},[e._v("已选择商品:"+e._s(e.goodsLength)+"道, 套餐:"+e._s(e.packagesLength)+"个")]),e._v(" "),n("a",{staticClass:"addclassify",staticStyle:{width:"180px"},attrs:{href:"javascript:void(0);"},on:{click:e.addList}},[e._v("添加关联菜品")])])]),e._v(" "),n("a",{class:""!==e.percent?"yellow":"gray",staticStyle:{margin:"10px 0",width:"250px"},attrs:{href:"javascript:void(0);"},on:{click:e.keepOn}},[e._v("保存")]),e._v(" "),e.isGoodsShow?n("goodListWin",{attrs:{goodsIds:e.goodsIds,isGoods:!0,packages:e.packages,goInName:"isMain"},on:{goodListWin:e.doThrowWinGoods}}):e._e()],1)};s._withStripped=!0;var a=n("81a2"),i=n("f6ce");function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function s(a,i){try{var o=t[a](i),r=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(r).then(function(e){s("next",e)},function(e){s("throw",e)});e(r)}("next")})}}var r={data:function(){return{isGoodsShow:!1,on:!1,percent:"",disabled:!0,list:[{id:0,name:"打折前"},{id:1,name:"打折后"}],index:0,goodsLength:0,goodsIds:[],packages:[],packagesLength:0,userData:Object}},mounted:function(){this.userData=i.a.session("userShop"),this.init()},methods:{getIsDiscountToggle:function(e){this.on=e},doThrowWinResult:function(e){this.index=e},init:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.a.getServiceCharge({data:{shopId:e.userData.currentShop.id}});case 2:(n=t.sent)&&(e.packages=n.packageIds,e.goodsIds=n.goodsIds,e.goodsLength=n.goodsIds.length,e.packagesLength=n.packageIds.length,e.on=Number(n.charge.chargeStatus),e.on=Boolean(e.on),e.index=Number(n.charge.chargeRule),e.percent=n.charge.chargePercent);case 4:case"end":return t.stop()}},t,e)}))()},addList:function(){this.isGoodsShow=!0},keepOn:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var n,s,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.goodsIds?e.goodsIds.toString():"",s=e.packages?e.packages.toString():"",!e.on){t.next=17;break}if(""!=e.percent){t.next=8;break}return e.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"服务费费率不能为空或0"}),t.abrupt("return",!1);case 8:if(!isNaN(e.percent)){t.next=14;break}return e.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"服务费率只能为数字，请正确输入"}),e.percent=0,t.abrupt("return",!1);case 14:if(!(1*e.percent>100||1*e.percent<1)){t.next=17;break}return e.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"服务费率在1-100之间，请正确输入"}),t.abrupt("return",!1);case 17:return t.next=19,a.a.setServiceCharge({data:{shopId:e.userData.currentShop.id,status:Number(e.on),rule:Number(e.index),percent:parseInt(e.percent),uid:e.userData.user.id,goodsIds:n,packageIds:s}});case 19:(i=t.sent)&&(e.list.id=i.charge.chargeRule,e.percent=i.charge.chargePercent,e.goodsIds=i.goodsIds,e.packages=i.packageIds,e.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"保存成功"}));case 21:case"end":return t.stop()}},t,e)}))()},ons:function(){this.on?this.disabled=!1:this.disabled=!0},doThrowWinGoods:function(e,t){"ok"==e&&(this.goodsIds=t.goodArr,this.packages=t.packArr,this.goodsLength=this.goodsIds.length,this.packagesLength=this.packages.length),this.isGoodsShow=!1}},watch:{on:"ons"},components:{onOff:function(){return n.e("on_off").then(n.bind(null,"034b"))},goodListWin:function(){return n.e("good_list_win").then(n.bind(null,"8bf4"))},radioBtn:function(){return n.e("radio_btn").then(n.bind(null,"4dfe"))}}},c=(n("cdfd"),n("4c7f"),n("7610")),d=Object(c.a)(r,s,[],!1,null,"b835553e",null);d.options.__file="src\\module\\shop_config\\service_fee.vue";t.default=d.exports}}]);