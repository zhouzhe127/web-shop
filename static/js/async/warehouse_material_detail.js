(window.webpackJsonp=window.webpackJsonp||[]).push([["warehouse_material_detail"],{"1b31":function(t,e,n){"use strict";var a=n("4ba2");n.n(a).a},"4ba2":function(t,e,n){},"6cc1":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"warehouse-lists"},[n("div",{staticClass:"heander"},[t._m(0),t._v(" "),n("div",{staticClass:"innerBox"},[n("ul",[n("li",[n("span",[t._v("物料名称：")]),n("span",[t._v(t._s(t.goodsDetail.name))])]),t._v(" "),n("li",[n("span",[t._v("物料简码：")]),n("span",[t._v(t._s(t.goodsDetail.BC))])]),t._v(" "),n("li",[n("span",[t._v("品牌：")]),n("span",[t._v(t._s(t.goodsDetail.brandName||"无"))])]),t._v(" "),n("li",[n("span",[t._v("批次数：")]),n("span",[t._v(t._s(t.goodsDetail.batchNum))])])]),t._v(" "),n("ul",[n("li",[n("span",[t._v("物料单位：")]),n("span",[t._v(t._s(t.unitArr.join(",")))])]),t._v(" "),n("li",[n("span",[t._v("默认单位：")]),t.goodsDetail.unit?n("span",[t._v(t._s(t.getdefUnit(t.goodsDetail.unit,1)))]):t._e()]),t._v(" "),n("li",[n("span",[t._v("最小单位：")]),t.goodsDetail.unit?n("span",[t._v(t._s(t.getdefUnit(t.goodsDetail.unit,2)))]):t._e()]),t._v(" "),n("li",[n("span",[t._v("保质期：")]),n("span",[t._v(t._s(t.goodsDetail.validity)+t._s(t.dataUnit[t.goodsDetail.validityType]))])])]),t._v(" "),n("ul",[n("li",[n("span",[t._v("单位换算：")]),t.goodsDetail.unit?n("span",[t._v(t._s(t.computeUnit(t.goodsDetail.unit)))]):t._e()]),t._v(" "),n("li",[n("span",[t._v("分类：")]),n("span",[t._v(t._s(t.goodsCate.join(",")))])]),t._v(" "),n("li",[n("span",[t._v("库存总量：")]),n("span",[t._v(t._s(t.goodsDetail.num)+t._s(t.getdefUnit(t.goodsDetail.unit,2)))])])])])]),t._v(" "),n("div",{staticClass:"main"},[n("div",{staticClass:"unit-box"},[n("select-btn",{attrs:{sorts:t.goodsUnit,index:t.unitIndex},on:{emit:t.selectList}})],1),t._v(" "),n("div",{staticClass:"list"},[n("div",{staticClass:"head"},[t._v("\n\t\t\t\t\t批次列表 · 共"),n("em",[t._v(" "+t._s(t.batchList.length)+" ")]),t._v("条数据\n\t\t\t\t")]),t._v(" "),n("div",{staticClass:"scroll-box"},[t._m(1),t._v(" "),n("ul",[t._l(t.selList,function(e,a){return n("li",{key:a},[n("span",{staticClass:"narrow handle"},[t._v("\n\t                        \t"+t._s(e.indexNum)+"\n\t\t\t\t\t\t\t\t")]),t._v(" "),n("span",[t._v(t._s(e.batchCode))]),t._v(" "),n("span",[t._v(t._s(t.timeFormat(e.productionTime)))]),t._v(" "),n("span",[t._v(t._s(e.supplier))]),t._v(" "),n("span",[t._v(t._s(t.comUnit(e.surplus,t.relation[t.selUnit].value,t.relation[t.selUnit].name,t.minName)))]),t._v(" "),n("span",[t._v(t._s(e.purchasePrice)+"/"+t._s(e.purchaseUnit.name))]),t._v(" "),n("span",[t._v(t._s(e.wName)),e.aName?[t._v("-")]:t._e(),t._v(t._s(e.aName))],2)])}),t._v(" "),t.selList.length?t._e():n("li",{staticClass:"empty"},[t._v("- 暂无条目 -")])],2)])]),t._v(" "),n("div",{staticClass:"page-box"},[n("page-btn",{attrs:{total:t.pageTotal,page:t.page,isNoJump:!0},on:{pageNum:t.pageChange}})],1)])])};a._withStripped=!0;var i=n("f6ce"),s=n("bbb9"),r=n("81a2"),o=n("05dd"),l=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],a=!0,i=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(a=(r=o.next()).done)&&(n.push(r.value),!e||n.length!==e);a=!0);}catch(t){i=!0,s=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(i,s){try{var r=e[i](s),o=r.value}catch(t){return void n(t)}if(!r.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}var v={data:function(){return{unitList:[],tabactive:0,mid:"",wid:"",goodsDetail:{unit:[]},dataUnit:["月","日","年"],goodsData:{},goodsUnit:[],goodsCate:[],selUnit:0,unitIndex:0,minName:"",unitArr:[],page:1,pageTotal:1,showNum:10,relation:[],batchList:[],selList:[],shopId:"",dataObj:{}}},components:{pageBtn:function(){return n.e("page_element").then(n.bind(null,"5921"))},selectBtn:function(){return n.e("select_btn").then(n.bind(null,"3d41"))}},destroyed:function(){i.a.session("materialDetailShopId",null)},mounted:function(){this.mid=this.$route.query.id,this.wid=this.$route.query.wid||"",this.shopId=i.a.session("materialDetailShopId")||"",this.dataObj={mid:this.mid,wid:this.wid},this.shopId&&(this.dataObj.shopId=this.shopId),this.$store.commit("setPageTools",[{name:"返回",className:["back"],fn:function(){i.a.session("warehouseDetailDestroy",!0),window.history.go(-1)}}]),this.init(),this.getDetail()},methods:{init:function(){var t=this;return u(regeneratorRuntime.mark(function e(){var n,a,i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.invoic_getMaterialBatch({data:t.dataObj});case 2:for(i in n=e.sent,t.relation=n.relation,t.batchList=n.list,a=[],t.relation)1==(s=t.relation[i]).isDefault&&(t.selUnit=i,t.unitIndex=i),1==s.isMin&&(t.minName=s.name),a.push(s.name);t.goodsUnit=a,t.paging();case 9:case"end":return e.stop()}},e,t)}))()},getDetail:function(){var t=this;return u(regeneratorRuntime.mark(function e(){var n,a,i,s,o,l,u,v,c,_,d,h,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.invoic_getMaterialDetail({data:t.dataObj});case 2:for(n=e.sent,t.goodsDetail=n,a=!0,i=!1,s=void 0,e.prev=7,o=t.goodsDetail.cate[Symbol.iterator]();!(a=(l=o.next()).done);a=!0)u=l.value,t.goodsCate.push(u.name);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),i=!0,s=e.t0;case 15:e.prev=15,e.prev=16,!a&&o.return&&o.return();case 18:if(e.prev=18,!i){e.next=21;break}throw s;case 21:return e.finish(18);case 22:return e.finish(15);case 23:for(v=!0,c=!1,_=void 0,e.prev=26,d=t.goodsDetail.unit[Symbol.iterator]();!(v=(h=d.next()).done);v=!0)p=h.value,t.unitArr.push(p.name);e.next=34;break;case 30:e.prev=30,e.t1=e.catch(26),c=!0,_=e.t1;case 34:e.prev=34,e.prev=35,!v&&d.return&&d.return();case 37:if(e.prev=37,!c){e.next=40;break}throw _;case 40:return e.finish(37);case 41:return e.finish(34);case 42:case"end":return e.stop()}},e,t,[[7,11,15,23],[16,,18,22],[26,30,34,42],[35,,37,41]])}))()},paging:function(){this.pageTotal=Math.ceil(this.batchList.length/this.showNum);var t=(this.page-1)*this.showNum,e=this.page*this.showNum;e>this.batchList.length&&(e=this.batchList.length);for(var n=t;n<e;n++){var a=n<9?"0"+(n+1):n+1;this.batchList[n].indexNum=a}this.selList=this.batchList.slice(t,e)},timeFormat:function(t){return s.a.format(1e3*parseInt(t),"yyyy年MM月dd日")},pageChange:function(t){this.page=t.page,this.showNum=t.num,this.paging()},comUnit:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=l(e,4),i=a[0],s=a[1],r=a[2],u=a[3];return o.a.comUnit(i,s,r,u)},selectList:function(t){this.selUnit=t},computeUnit:function(t){var e="",n=this.getdefUnit(t,2);for(var a in t)a>0&&(e+="|"),e+=" 1"+t[a].name+"="+t[a].value+n+" ";return e},getdefUnit:function(t,e){var n=1==e?"isDefault":"isMin",a=!0,i=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var l=r.value;if(1==l[n])return l.name}}catch(t){i=!0,s=t}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}},addCount:function(t){return/^0+/.test(t+="")&&(t=t.replace(/^0+/,"")),/\./.test(t)||(t+=".000"),/^\./.test(t)&&(t="0"+t),t=(t+="000").match(/([+-]?)\d+\.\d{3}/)[0]}}},c=(n("1b31"),n("7610")),_=Object(c.a)(v,a,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("库存详情")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("span",{staticClass:"narrow"},[t._v("序号")]),t._v(" "),n("span",[t._v("批次编码")]),t._v(" "),n("span",[t._v("生产日期")]),t._v(" "),n("span",[t._v("供应商")]),t._v(" "),n("span",[t._v("数量/重量")]),t._v(" "),n("span",[t._v("进价")]),t._v(" "),n("span",[t._v("所属仓库")])])}],!1,null,"75d6b840",null);_.options.__file="src\\module\\invoicing_system\\warehouse_manage\\warehouse_material_detail.vue";e.default=_.exports}}]);