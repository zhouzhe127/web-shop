(window.webpackJsonp=window.webpackJsonp||[]).push([["scancode_shopstatistics"],{5257:function(t,e,a){"use strict";var n=a("83f7");a.n(n).a},"738a":function(t,e,a){"use strict";a.r(e);var n=a("81a2"),s=a("bbb9");function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(s,o){try{var i=e[s](o),r=i.value}catch(t){return void a(t)}if(!i.done)return Promise.resolve(r).then(function(t){n("next",t)},function(t){n("throw",t)});t(r)}("next")})}}var i={data:function(){return{page:1,num:10,endTotal:1,staticLists:[],allFormList:[],formList:[],showType:"static",oneData:"",paymentCode:"",showCode:!1,staffId:[],dynamicTags:[],codes:[]}},props:{constructionsName:String,startTime:Number,endTime:Number,constructionsId:String,isOpenTime:Boolean,taskId:Number},methods:{returnStore:function(){this.$emit("throwWinResult","all")},getDetail:function(t){this.showType="order",this.oneData=t.day},getscanorder:function(t){var e=this;this.showType=t,this.$store.commit("setPageTools",[{name:"返回",className:["fd-blue"],fn:function(){e.returnStore()}},{name:"导出",className:["fd-blue"],fn:function(){e.Export()}}])},formatTime:function(t){return 10==t.length&&(t*=1e3),s.a.format(new Date(t),"yyyy-MM-dd hh:mm:ss")},getScanPayData:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.getScanPayData({data:{taskId:t.taskId,showDetail:1,showShopId:t.constructionsId,showDay:""}});case 2:(a=e.sent)&&(t.staticLists=[],t.staticLists.push(a.total),t.allFormList=a.days,t.$nextTick(function(){t.setPage()}));case 4:case"end":return e.stop()}},e,t)}))()},Export:function(){var t=this;return o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a.exportScanPayData({data:{taskId:t.taskId,showDetail:1,showShopId:t.constructionsId,showDay:"",isExport:1}});case 2:case"end":return e.stop()}},e,t)}))()},setPage:function(){this.endTotal=Math.ceil(this.allFormList.length/this.num);var t=(this.page-1)*this.num,e=this.page*this.num,a=this.allFormList.slice(t,e);this.formList=a},openPaycode:function(){this.showCode=!0},backShopId:function(t,e){"ok"==t&&(this.dynamicTags=e,this.dynamicTags.length>0?this.paymentCode="已选择"+this.dynamicTags.length+"个收款码":this.paymentCode="请选择收款码"),this.showCode=!1},handleClose:function(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1),this.dynamicTags.length>0?this.paymentCode="已选择"+this.dynamicTags.length+"个收款码":this.paymentCode="请选择收款码"},getScanPayOrderByCodes:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var a,s,o,i,r,l,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.dynamicTags.length){e.next=3;break}return t.$store.commit("setWin",{content:"请选择收款码",title:"操作提示",winType:"alert"}),e.abrupt("return",!1);case 3:for(a=[],s=!0,o=!1,i=void 0,e.prev=7,r=t.dynamicTags[Symbol.iterator]();!(s=(l=r.next()).done);s=!0)c=l.value,a.push(c.staffId);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),o=!0,i=e.t0;case 15:e.prev=15,e.prev=16,!s&&r.return&&r.return();case 18:if(e.prev=18,!o){e.next=21;break}throw i;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return t.codes=a,e.next=26,n.a.getScanPayOrderByCodes({data:{showShopId:t.constructionsId,codes:t.codes.join(","),taskId:t.taskId,showDay:""}});case 26:(u=e.sent)&&(t.staticLists=[],t.staticLists.push(u.total),t.allFormList=u.list,t.$nextTick(function(){t.setPage()}));case 28:case"end":return e.stop()}},e,t,[[7,11,15,23],[16,,18,22]])}))()},reset:function(){this.dynamicTags=[],this.paymentCode="请选择收款码",this.getScanPayData(),this.codes=[]},handleSizeChange:function(t){this.num=t,this.setPage()},pageChange:function(t){this.page=t,this.setPage()}},components:{pageElement:function(){return a.e("page_element").then(a.bind(null,"5921"))},comTable:function(){return a.e("table").then(a.bind(null,"4360"))},"scancode-order":function(){return a.e("scancode_oredersearch").then(a.bind(null,"815e"))},paymentCode:function(){return a.e("scancode_payment_codewin").then(a.bind(null,"37c41"))}},mounted:function(){var t=this;this.$store.commit("setPageTools",[{name:"返回",className:["fd-blue"],fn:function(){t.returnStore()}},{name:"导出",className:["fd-blue"],fn:function(){t.Export()}}]),this.getScanPayData()},destroyed:function(){clearInterval(this.timer)}},r=(a("5257"),a("d801")),l=Object(r.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"membercard"}},["static"==t.showType?a("section",[a("div",{staticClass:"payment clearfix"},[a("div",{staticClass:"paymentbox fl",on:{click:t.openPaycode}},[a("el-input",{attrs:{placeholder:"请选择收款码",disabled:!0,"suffix-icon":"el-icon-plus"},model:{value:t.paymentCode,callback:function(e){t.paymentCode=e},expression:"paymentCode"}})],1),t._v(" "),a("div",{staticClass:"paymentbox fl"},[a("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:t.getScanPayOrderByCodes}},[t._v("筛选")]),t._v(" "),a("el-button",{staticStyle:{width:"120px"},attrs:{type:"info"},on:{click:t.reset}},[t._v("重置")])],1)]),t._v(" "),a("div",{staticClass:"choiceshop"},[a("div",{staticClass:"choiceshop_l"},[t._v("\n\t\t\t\t收款码:\n\t\t\t")]),t._v(" "),t.dynamicTags.length>0?a("div",{staticClass:"choiceshop_r"},t._l(t.dynamicTags,function(e,n){return a("el-tag",{key:n,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){t.handleClose(e)}}},[t._v("\n\t\t\t\t\t"+t._s(e.staffName)+"\n\t\t\t\t")])})):a("div",{staticClass:"choiceshop_r"},[t._v("\n\t\t\t\t请选择收款码\n\t\t\t")])]),t._v(" "),a("div",{staticClass:"choiceshop"},[a("div",{staticClass:"choiceshop_l"},[t._v("\n\t\t\t\t选择店铺:\n\t\t\t")]),t._v(" "),a("div",{staticClass:"choiceshop_r"},[t._v("\n\t\t\t\t"+t._s(t.constructionsName)+" | 选择时间:"+t._s(t.formatTime(t.startTime))+" - "+t._s(t.formatTime(t.endTime))+"\n\t\t\t")])]),t._v(" "),a("section",{staticStyle:{"margin-bottom":"20px"}},[a("el-table",{staticStyle:{width:"1436px"},attrs:{data:t.staticLists,border:"",stripe:!0,"header-cell-style":{"background-color":"#f5f7fa"},"header-row-style":{height:"40px"},"row-style":{height:"70px"}}},[a("el-table-column",{attrs:{fixed:"",prop:"days",label:"天数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"支付次数",prop:"payTimes",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalConsumption",label:"消费总额",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"优惠总额",prop:"totalDiscount",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"代金券",prop:"totalConsumption",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalVouchersPain)+"("+t._s(e.row.totalVouchersNum)+"张)")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"实收总额",prop:"totalPain",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"积分抵扣总额",prop:"totalPointCash",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"会员消费总额",prop:"totalMemberConsumption",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"微信支付总额",prop:"totalWeChatPain",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"支付宝支付总额",prop:"totalAliPayPain",align:"center"}})],1)],1),t._v(" "),a("div",{staticClass:"list_box",staticStyle:{width:"100%"}},[a("div",{staticClass:"list_title"},[a("div",{staticClass:"list_title_l fl"},[a("span",[t._v("快捷支付统计")]),t._v(" "),a("span"),t._v(" "),a("span",[t._v("共\n\t\t\t\t\t\t\t"),a("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.allFormList.length))]),t._v("个条目")])]),t._v(" "),a("div",{staticClass:"list_title_r fr"})]),t._v(" "),a("el-table",{attrs:{data:t.formList,border:"",stripe:!0,"header-cell-style":{"background-color":"#f5f7fa"},"header-row-style":{height:"40px"},"row-style":{height:"70px"}}},[a("el-table-column",{attrs:{fixed:"",prop:"shopId",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"#e1bb4a"},on:{click:function(a){t.getDetail(e.row)}}},[t._v("查看详情")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"支付次数",prop:"payTimes",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"totalConsumption",label:"消费总额",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"优惠总额",prop:"totalDiscount",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"代金券",prop:"totalConsumption",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.totalVouchersPain)+"("+t._s(e.row.totalVouchersNum)+"张)")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"实收总额",prop:"totalPain",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"积分抵扣总额",prop:"totalPointCash",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"会员消费总额",prop:"totalMemberConsumption",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"微信支付总额",prop:"totalWeChatPain",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"支付宝支付总额",prop:"totalAliPayPain",align:"center"}})],1)],1),t._v(" "),a("div",{staticClass:"pageWrap"},[a("el-pagination",{attrs:{background:"","current-page":t.page,"page-size":t.num,layout:"sizes, prev, pager, next","page-count":t.endTotal,"page-sizes":[10,20,30]},on:{"size-change":t.handleSizeChange,"current-change":t.pageChange}})],1),t._v(" "),t.showCode?a("paymentCode",{attrs:{shopIds:t.dynamicTags,constructionsName:t.constructionsName,constructionsId:t.constructionsId},on:{chooseShop:t.backShopId}}):t._e()],1):t._e(),t._v(" "),"order"==t.showType?a("section",[a("scancode-order",{attrs:{constructionsName:t.constructionsName,startTime:t.startTime,endTime:t.endTime,constructionsId:t.constructionsId,isOpenTime:t.isOpenTime,oneData:t.oneData,taskId:t.taskId,codes:t.codes},on:{scanorderResult:t.getscanorder}})],1):t._e()])},[],!1,null,"d89b8f12",null);e.default=l.exports},"83f7":function(t,e,a){}}]);