(window.webpackJsonp=window.webpackJsonp||[]).push([["single_stockstatics"],{3298:function(t,s,i){"use strict";var e=i("3466");i.n(e).a},3466:function(t,s,i){},d816:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"singleStic"},[i("div",{staticClass:"filter"},[i("div",{staticClass:"block"},[i("div",{staticClass:"input-box input-start"},[i("calendar",{attrs:{time:t.startTime,format:"yyyy年MM月dd日"},on:{emit:t.startTimeChange}})],1),t._v(" "),i("span",{staticClass:"line"},[t._v("-")]),t._v(" "),i("div",{staticClass:"input-box input-end"},[i("calendar",{attrs:{time:t.endTime,format:"yyyy年MM月dd日"},on:{emit:t.endTimeChange}})],1)]),t._v(" "),i("div",{staticClass:"block"},[t.isBrand?i("div",{staticClass:"input-box input-start"},[i("select-store",{attrs:{isSingle:!1,sorts:t.shopList},on:{emit:t.getDrop}})],1):t._e(),t._v(" "),t.isBrand?i("div",{staticClass:"input-check select-ban"},[i("i",{class:{active:1==this.openTime},on:{click:t.timeCheck}}),t._v("\n\t\t\t\t合并店铺\n\t\t\t")]):t._e(),t._v(" "),i("div",{staticClass:"search-box"},[t.isBrand?t._e():i("span",{staticClass:"search-btn",on:{click:t.search}},[t._v("搜索")]),t._v(" "),t.isBrand?i("span",{staticClass:"reset-btn gray",on:{click:t.resetInput}},[t._v("重置")]):t._e()])]),t._v(" "),t.isBrand?i("div",{staticClass:"store-show"},[i("i",[t._v("已选择店铺:")]),t._v(" "),t._l(t.shopList,function(s,e){return s.selected?i("span",{key:e,attrs:{"data-id":s.id}},[t._v(t._s(s.name)+",")]):t._e()})],2):t._e()]),t._v(" "),t.isBrand?t._e():i("div",{staticClass:"tabList"},[i("div",{staticClass:"listBox"},[t._m(0),t._v(" "),t._l(t.discountList,function(s,e){return i("ul",{key:e,staticClass:"listData"},[i("li",{staticClass:"w6 text-ellipsis",attrs:{title:s.goodsName}},[t._v(t._s(s.goodsName))]),t._v(" "),i("li",{staticClass:"w8"},[t._v(t._s(s.barCode))]),t._v(" "),i("li",[t._v(t._s(s.price))]),t._v(" "),i("li",{staticClass:"w3"},[t._v(t._s(s.unit))]),t._v(" "),i("li",{staticStyle:{"border-left":"2px solid #F7F7F7"}},[t._v(t._s(s.initialTotal))]),t._v(" "),i("li",[t._v(t._s(s.initialShelve))]),t._v(" "),i("li",{staticStyle:{"border-right":"2px solid #F7F7F7"}},[t._v(t._s(s.initialInven))]),t._v(" "),i("li",[t._v(t._s(s.addInventoryNum))]),t._v(" "),i("li",{staticStyle:{"border-left":"2px solid #F7F7F7"}},[t._v(t._s(s.goodsOnHandTotal))]),t._v(" "),i("li",[t._v(t._s(s.goodsOnHandShelve))]),t._v(" "),i("li",{staticStyle:{"border-right":"2px solid #F7F7F7"}},[t._v(t._s(s.goodsOnHandInven))]),t._v(" "),i("li",{staticClass:"w5",staticStyle:{"border-left":"0"}},[t._v(t._s(s.totalInven))]),t._v(" "),i("li",{staticClass:"w5"},[t._v(t._s(s.shelveNum))]),t._v(" "),i("li",{staticClass:"w5",staticStyle:{"border-right":"2px solid #F7F7F7"}},[t._v(t._s(s.inventory))]),t._v(" "),i("li",[t._v(t._s(s.checkNum))]),t._v(" "),i("li",{class:Number(s.profitAndLossNum)>0?"w4 tored":"w4 togreen"},[t._v(t._s(s.profitAndLossNum))]),t._v(" "),i("li",{class:Number(s.profitAndLossPrice)>0?"w4 tored":"w4 togreen"},[t._v(t._s(s.profitAndLossPrice))]),t._v(" "),i("li",{staticClass:"w3",staticStyle:{"border-left":"2px solid #F7F7F7"}},[t._v(t._s(s.lossTotalNum))]),t._v(" "),i("li",{staticClass:"w3"},[t._v(t._s(s.shelflossNum))]),t._v(" "),i("li",{staticClass:"w3",staticStyle:{"border-right":"2px solid #F7F7F7"}},[t._v(t._s(s.warehouseLossNum))]),t._v(" "),i("li",{staticClass:"w3"},[t._v(t._s(s.salesNum))]),t._v(" "),i("li",[t._v(t._s(s.originalPrice))]),t._v(" "),i("li",[t._v(t._s(s.discountPrice))]),t._v(" "),i("li",[t._v(t._s(s.paidTotalPrice))])])})],2)]),t._v(" "),t.isBrand?t._e():i("div",{staticClass:"page-box"},[i("pageBtn",{attrs:{total:t.pageNum,num:t.num,page:t.page,isNoJump:!0},on:{pageNum:t.pageChange}})],1)])};e._withStripped=!0;var a=i("f6ce"),n=i("bbb9"),r=i("81a2");var o={data:function(){return{startTime:"",endTime:"",reqStartTime:"",reqEndTime:"",isBrand:"",pageNum:0,discountList:[],userData:"",shopId:"",page:1,num:10,openTime:0,shopList:[],userShopList:"",userShopIdStr:"",shopSelectStr:"",storeName:"",shopIds:""}},created:function(){var t=this;this.userData=a.a.session("userShop");var s=[],i=[];"3"==this.userData.currentShop.ischain&&(this.userShopList=a.a.session("shopList"),this.userShopList.unshift(a.a.session("userShop").currentShop),this.userShopList.forEach(function(t,e){s[e]=t.id;var a={id:t.id,name:t.shopName||t.name};i.push(a)}),this.userShopIdStr=s.join(","),this.userShopList=i),this.$store.commit("setPageTools",[{name:"导出",className:["export-btn"],fn:function(){t.turnTo()}}])},mounted:function(){for(var t in this.isBrand="3"==this.userData.currentShop.ischain,this.shopId=a.a.session("shopId"),this.userShopList)this.userShopList[t].selected=!1;this.shopList=this.userShopList,this.storeName=this.userShopList.length>0?this.userShopList[0].name:"选择店铺",this.startTime=n.a.getTime({time:new Date}).start,this.endTime=n.a.getTime({time:new Date}).end,this.isBrand||this.search()},methods:{timeCheck:function(){this.openTime=0==this.openTime?1:0},startTimeChange:function(t){this.startTime=t},endTimeChange:function(t){this.endTime=t},getDrop:function(t){this.shopList=t;for(var s=[],i=0;i<t.length;i++)1==t[i].selected&&(s.push(t[i].id),t[i].name);this.shopIds=s.join(",")},validate:function(){var t=!0;return parseInt(this.startTime/1e3/3600/24)>parseInt(this.endTime/1e3/3600/24)&&(this.$store.commit("setWin",{title:"提示信息",content:"开始时间不能大于结束时间"}),t=!1),t},search:function(){this.validate()&&(this.reqStartTime=parseInt(this.startTime/1e3),this.reqEndTime=parseInt(this.endTime/1e3),this.getDetail())},getDetail:function(){var t,s=this;return(t=regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.getGoodsInvenStatList({data:{startTime:s.reqStartTime,endTime:s.reqEndTime,shopId:s.shopId,trueShopId:s.shopIds||s.shopId,page:s.page,num:s.num}});case 2:i=t.sent,s.discountList=i.list,s.pageNum=i.total;case 5:case"end":return t.stop()}},t,s)}),function(){var s=t.apply(this,arguments);return new Promise(function(t,i){return function e(a,n){try{var r=s[a](n),o=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(o).then(function(t){e("next",t)},function(t){e("throw",t)});t(o)}("next")})})()},resetInput:function(){if(this.startTime=n.a.getTime({time:new Date}).start,this.endTime=n.a.getTime({time:new Date}).end,this.openTime=0,this.isBrand){var t=n.a.deepCopy(this.shopList),s=!0,i=!1,e=void 0;try{for(var a,r=t[Symbol.iterator]();!(s=(a=r.next()).done);s=!0){a.value.selected=!1}}catch(t){i=!0,e=t}finally{try{!s&&r.return&&r.return()}finally{if(i)throw e}}this.shopList=t,this.shopIds=""}},pageChange:function(t){this.page=t.page,this.num=t.num,this.search()},turnTo:function(){var t={beginTime:this.startTime,endTime:this.endTime,shopId:this.shopId,shopIds:this.isBrand?this.shopIds:this.shopId,isMerge:this.openTime};this.shopIds?(a.a.session("single_stockstatics",t),this.$router.push({path:"/admin/exportTemplate",query:this.$route.query})):this.$store.commit("setWin",{title:"提示信息",content:"请选择店铺"})}},components:{selectBtn:function(){return i.e("select_btn").then(i.bind(null,"3d41"))},calendar:function(){return i.e("calendar_type").then(i.bind(null,"f2dd"))},selectStore:function(){return i.e("win").then(i.bind(null,"cb83"))},pageBtn:function(){return i.e("page_element").then(i.bind(null,"5921"))}}},l=(i("3298"),i("7610")),c=Object(l.a)(o,e,[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("ul",{staticClass:"listTitle"},[i("li",{staticClass:"w6"},[t._v("商品名")]),t._v(" "),i("li",{staticClass:"w8"},[t._v("条码")]),t._v(" "),i("li",{staticClass:"w4"},[t._v("售价")]),t._v(" "),i("li",[t._v("单位")]),t._v(" "),i("li",{staticClass:"layers w12"},[i("span",[t._v("期初数量")]),t._v(" "),i("ul",{staticClass:"sLayers"},[i("li",[t._v("总量")]),t._v(" "),i("li",[t._v("货架")]),t._v(" "),i("li",[t._v("仓库")])])]),t._v(" "),i("li",{staticClass:"w4"},[t._v("入库量")]),t._v(" "),i("li",{staticClass:"layers w12"},[i("span",[t._v("结存")]),t._v(" "),i("ul",{staticClass:"sLayers"},[i("li",[t._v("总量")]),t._v(" "),i("li",[t._v("货架")]),t._v(" "),i("li",[t._v("仓库")])])]),t._v(" "),i("li",{staticClass:"layers w15"},[i("span",[t._v("当前库存")]),t._v(" "),i("ul",{staticClass:"sLayers"},[i("li",[t._v("总量")]),t._v(" "),i("li",[t._v("货架")]),t._v(" "),i("li",[t._v("仓库")])])]),t._v(" "),i("li",{staticClass:"w4"},[t._v("盘点次数")]),t._v(" "),i("li",{staticClass:"w4"},[t._v("盈亏情况")]),t._v(" "),i("li",{staticClass:"w4"},[t._v("盈亏金额")]),t._v(" "),i("li",{staticClass:"layers"},[i("span",[t._v("耗损")]),t._v(" "),i("ul",{staticClass:"sLayers"},[i("li",[t._v("总量")]),t._v(" "),i("li",[t._v("货架")]),t._v(" "),i("li",[t._v("仓库")])])]),t._v(" "),i("li",[t._v("销量")]),t._v(" "),i("li",{staticClass:"w4"},[t._v("消费金额")]),t._v(" "),i("li",{staticClass:"w4"},[t._v("优惠金额")]),t._v(" "),i("li",{staticClass:"w4"},[t._v("实收金额")])])}],!1,null,"25009da7",null);c.options.__file="src\\module\\statistics\\single_stockstatics.vue";s.default=c.exports}}]);