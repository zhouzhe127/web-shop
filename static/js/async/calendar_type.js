(window.webpackJsonp=window.webpackJsonp||[]).push([["calendar_type"],{3944:function(t,e,i){},"6f73":function(t,e,i){"use strict";var s=i("3944");i.n(s).a},f2dd:function(t,e,i){"use strict";i.r(e);var s=i("bbb9"),a={props:{time:[Number,String],type:[Number,String],format:String,show:Boolean,calStyle:Object,tips:String},data:function(){return{timestr:"请选择时间",weekList:["一","二","三","四","五","六","日"],dateList:[],titleContent:"",calendarShow:Boolean,weekShow:!1,currentSelect:"",timeDate:null,day:0,week:0,month:0,quarter:0,year:0,listStyle:"",oneDayStamp:864e5,oneWeekStamp:6048e5,yearStart:0}},watch:{time:"timeChange",type:"typeChange",tips:"inputShow"},mounted:function(){this.timeChange(),this.tips||this.$emit("emit",this.timeDate.getTime(),this.timestr)},methods:{initCalendar:function(){switch(this.getTime(),this.weekShow=!1,this.type){case 1:this.setWeek();break;case 2:this.setMonth();break;case 3:this.setQuarter();break;case 4:this.setYear();break;default:this.weekShow=!0,this.setDay()}this.setTitle()},close:function(t){for(var e=this.$refs.calendarInput.getElementsByTagName("*"),i=!0,s=0;s<e.length;s++)t.target==e[s]&&(i=!1);i&&(this.calendarShow=!1,document.removeEventListener("click",this.close))},inputClick:function(t){this.calendarShow?(this.calendarShow=!1,document.removeEventListener("click",this.close)):(this.calendarShow=!0,document.addEventListener("click",this.close))},stopProp:function(t){t.stopPropagation()},timeChange:function(){this.timeDate=this.time?new Date(this.time):new Date,this.timeDate.setHours(0,0,0,0),this.calendarShow=!!this.show&&this.show,this.initCalendar(),this.inputShow()},typeChange:function(){this.timeDate=new Date,this.timeDate.setHours(0,0,0,0),this.initCalendar(),this.inputShow(),this.$emit("emit",this.currentSelect,this.timestr)},prevMonth:function(t){0==this.month?(this.timeDate.setFullYear(this.year-1,1),this.timeDate.setMonth(11,t)):this.timeDate.setMonth(this.month-1,t)},nextMonth:function(t){11==this.month?(this.timeDate.setFullYear(this.year+1,1),this.timeDate.setMonth(0,t)):this.timeDate.setMonth(this.month+1,t)},flip:function(t){var e=t.target;"prev"==e.className?this.type&&1!=this.type?2==this.type||3==this.type?this.timeDate.setFullYear(this.year-1):4==this.type&&this.timeDate.setFullYear(this.year-12,1):this.prevMonth(1):"next"==e.className&&(this.type&&1!=this.type?2==this.type||3==this.type?this.timeDate.setFullYear(this.year+1):4==this.type&&this.timeDate.setFullYear(this.year+12,1):this.nextMonth(1)),this.initCalendar()},selectList:function(t){var e=t.target;if("li"==e.tagName.toLocaleLowerCase()){var i=parseInt(e.getAttribute("data-time")),s=new Date(i).getDate();"prev-month"==e.className?this.prevMonth(s):"next-month"==e.className?this.nextMonth(s):"active"!=e.className&&this.timeDate.setTime(i),this.initCalendar()}},currentTime:function(){this.timeDate=new Date((new Date).setHours(0,0,0,0)),this.initCalendar()},confirm:function(t){this.inputShow(),this.$emit("emit",this.timeDate.getTime(),this.timestr),this.close(t)},inputShow:function(){switch(this.type){case 1:this.timestr=this.year+"年 第 "+this.week+" 周";break;case 2:this.timestr=this.year+"年 "+(this.month+1)+" 月";break;case 3:this.timestr=this.year+"年 第 "+this.quarter+" 季度";break;case 4:this.timestr=this.year+" 年";break;default:this.timestr=s.a.format(this.timeDate,this.format)}this.tips&&(this.timestr=this.tips)},getTime:function(){this.year=this.timeDate.getFullYear(),this.month=this.timeDate.getMonth(),this.day=this.timeDate.getDate(),this.week=this.timeDate.getDay()},setTitle:function(){this.type&&1!=this.type?2==this.type||3==this.type?this.titleContent=this.year:4==this.type&&(this.titleContent=this.yearStart+"-"+(this.yearStart+11)):this.titleContent=this.year+"-"+(this.month+1)},getWeekOne:function(t,e){return 1==t?e:0==t?e+864e5:e+1e3*(7-t+1)*3600*24},setDay:function(){var t=this.week-this.day%7;t=t<0?t+7:t;var e=[],i=Date.parse(this.year+"/"+(this.month+1)+"/01 00:00:00")-t*this.oneDayStamp;this.listStyle="list-day";for(var s=0;s<42;s++){var a={time:i,value:new Date(i).getDate()},h=new Date(i).getMonth(),n=new Date(i).getFullYear();(n<this.year||n==this.year&&h<this.month)&&(a.offsetStyle="prev-month"),(n>this.year||n==this.year&&h>this.month)&&(a.offsetStyle="next-month"),a.time==Date.parse(this.timeDate)&&(a.selected="active",this.currentSelect=a.time),e.push(a),i+=this.oneDayStamp}this.dateList=e},setWeek:function(){var t=Date.parse(this.year+"/01/01 00:00:00"),e=Date.parse(this.year+"/"+(this.month+1)+"/01 00:00:00"),i=this.getWeekOne(new Date(t).getDay(),t),s=this.getWeekOne(new Date(e).getDay(),e),a=Math.floor((this.timeDate.getTime()-i)/this.oneWeekStamp)+1,h=(s-i)/this.oneWeekStamp+1,n="",r=[];n=this.month>=11?this.year+1+"/01/01 00:00:00":this.year+"/"+(this.month+2)+"/01 00:00:00";var o=Math.ceil((Date.parse(n)-s)/this.oneWeekStamp),l=h;this.listStyle="list-week";for(var c=0;c<o;c++){var m={time:i+(l-1)*this.oneWeekStamp,value:"第 "+l+" 周"};(a<h||a>h+o)&&0==c?(m.selected="active",this.week=l):a==l&&(m.selected="active",this.week=l,this.currentSelect=m.time),r.push(m),l++}this.dateList=r},setMonth:function(){var t=this.year+"/"+this.month+"/01 00:00:00",e=[];this.listStyle="list-month";for(var i=0;i<12;i++){var s=this.year+"/"+(i+1)+"/01 00:00:00",a={value:i+1+" 月"};this.month==i?(a.time=Date.parse(t),a.selected="active",this.currentSelect=a.time):a.time=Date.parse(s),e.push(a)}this.dateList=e},setQuarter:function(){var t=[];this.listStyle="list-week";for(var e=0;e<4;e++){for(var i,s=this.month+1,a={value:"第 "+(e+1)+" 季度"},h=0;h<4;h++)s>=3*h+1&&s<3*(h+1)+1&&(i=3*h+1);var n=3*e+1,r=this.year+"/"+i+"/01 00:00:00",o=this.year+"/"+n+"/01 00:00:00";i==n?(a.time=Date.parse(r),a.selected="active",this.quarter=e+1,this.currentSelect=a.time):a.time=Date.parse(o),t.push(a)}this.dateList=t},setYear:function(){this.timeDate;var t=[],e=(this.year-1970)%12,i=0==e?this.year:this.year-e;this.yearStart=i,this.listStyle="list-month";for(var s=0;s<12;s++){var a=this.year+"/01/01 00:00:00",h=i+s+"/01/01 00:00:00",n={value:i+s};i+s==this.year?(n.time=Date.parse(a),n.selected="active",this.currentSelect=n.time):n.time=Date.parse(h),t.push(n)}this.dateList=t}}},h=(i("6f73"),i("d801")),n=Object(h.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"calendar"},[i("div",{ref:"calendarInput",staticClass:"str-btn",class:{active:t.calendarShow},style:t.calStyle,on:{click:t.inputClick}},[i("span",[t._v(t._s(t.timestr))]),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"shadow-hide"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.calendarShow,expression:"calendarShow"}],staticClass:"calendar-main",on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"head",on:{click:t.flip}},[i("div",{staticClass:"prev"},[t._v("<")]),t._v(" "),i("span",{staticClass:"title"},[t._v(t._s(t.titleContent))]),t._v(" "),i("div",{staticClass:"next"},[t._v(">")])]),t._v(" "),t.weekShow?i("ul",{staticClass:"week"},t._l(t.weekList,function(e,s){return i("li",{key:s},[t._v(t._s(e))])})):t._e(),t._v(" "),i("ul",{ref:"listBox",staticClass:"list",class:t.listStyle,on:{click:t.selectList}},t._l(t.dateList,function(e,s){return i("li",{key:s,class:[e.offsetStyle,e.selected],attrs:{"data-time":e.time}},[t._v(t._s(e.value))])})),t._v(" "),i("div",{staticClass:"btn-box"},[i("div",{staticClass:"green",on:{click:t.currentTime}},[t._v("当前时间")]),t._v(" "),i("div",{staticClass:"yellow",on:{click:t.confirm}},[t._v("确认")])])])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("em",[e("i")])}],!1,null,"710f0f17",null);e.default=n.exports}}]);