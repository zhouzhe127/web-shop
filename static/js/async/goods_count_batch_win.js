(window.webpackJsonp=window.webpackJsonp||[]).push([["goods_count_batch_win"],{"04f8":function(t,e,n){},"7f18":function(t,e,n){"use strict";var i=n("04f8");n.n(i).a},9031:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("win",{attrs:{height:500,width:1020,ok:t.btnOk,cancel:t.btnCancel},on:{winEvent:t.closeWin}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"head"},t._l(t.info,function(e,i){return n("li",{key:i,staticClass:"info"},[t._v(t._s(e.name)+":"+t._s(e.val))])})),t._v(" "),n("div",{staticClass:"nav"},[n("div",{staticClass:"in-block"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.condObj.batchCode,expression:"condObj.batchCode"}],staticClass:"input-txt",attrs:{type:"text",placeholder:"请输入批次编号",maxlength:"40"},domProps:{value:t.condObj.batchCode},on:{input:function(e){e.target.composing||t.$set(t.condObj,"batchCode",e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.condObj.supplier,expression:"condObj.supplier"}],staticClass:"input-txt",attrs:{type:"text",placeholder:"请输入供应商",maxlength:"40"},domProps:{value:t.condObj.supplier},on:{input:function(e){e.target.composing||t.$set(t.condObj,"supplier",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"in-block marginL-10"},[n("calendar",{staticStyle:{"background-color":"#fff"},attrs:{pObj:t.startTime},on:{throwTime:function(e){t.getTime("startTime",e)}}}),t._v(" "),n("span",{staticClass:"line"}),t._v(" "),n("calendar",{staticStyle:{"background-color":"#fff"},attrs:{pObj:t.endTime},on:{throwTime:function(e){t.getTime("endTime",e)}}})],1),t._v(" "),n("div",{staticClass:"in-block",staticStyle:{margin:"0"}},[n("span",{staticClass:"common-btn blue",on:{click:function(e){t.clickBtn("filter",null)}}},[t._v("筛选")]),n("span",{staticClass:"common-btn gray",on:{click:function(e){t.clickBtn("reset",null)}}},[t._v("重置")])])]),t._v(" "),n("div",{staticClass:"table"},[n("div",{staticClass:"title"},t._l(t.tableTitle,function(e,i){return n("li",{key:i,style:e.style?e.style:{}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t"),t.tableTitle.length-1==i?n("span",{staticClass:"clearInput",on:{click:t.clearInput}},[t._v("清空输入")]):t._e()])})),t._v(" "),n("div",{staticClass:"body"},[t._l(t.nowTableData,function(e,i){return n("div",{key:i,staticClass:"row"},t._l(t.tableTitle,function(i,a){return n("li",{key:a,style:i.style?i.style:{}},[t._t("col-"+a,[t.tableTitle.length-1==a?n("div",{staticClass:"input-div"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.countNum,expression:"row.countNum"}],staticClass:"count-num",attrs:{type:"text",placeholder:"请输入数字",maxlength:"9"},domProps:{value:e.countNum},on:{input:[function(n){n.target.composing||t.$set(e,"countNum",n.target.value)},function(n){t.checkNum(e)}]}}),t._v(" "),n("span",{staticClass:"unit"},[t._v(t._s(e.unit))])]):n("span",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e[i.dataName])+"\n\t\t\t\t\t\t\t")])],{item:i,index:a})],2)}))}),t._v(" "),0==t.nowTableData.length?n("div",{staticClass:"tips-div"},[t._v("\n\t\t\t\t\t"+t._s(t.tips)+"\n\t\t\t\t")]):t._e()],2)])])])};i._withStripped=!0;var a=n("bbb9");function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var o={data:function(){return{startTime:{time:"",show:!0,detail:!0,width:160},endTime:{time:"",show:!0,detail:!0,width:160},condObj:{supplier:"",batchCode:""},tableTitle:[{name:"序号",style:{width:"5%"},dataName:"itemIndex"},{name:"批次编号",style:{width:"11.8%"},dataName:"batchCode"},{name:"生产日期",style:{width:"13.54%"},dataName:"productionTimeShow"},{name:"供应商",style:{width:"18.5%"},dataName:"supplier"},{name:"所属仓库",style:{width:"18.36%"},dataName:"storeName"},{name:"数量/重量",style:{width:"13.54%"},dataName:"resetNum"},{name:"盘库库存量",style:{width:"18.5%"},dataName:"countNum"}],tableData:[{batchId:1,itemIndex:"01",surplus:"10",type:"0",batchCode:"33333333333",productionTime:"1531971109",productionTimeShow:"12345234523",supplier:"中华大当家",storeName:"中华一区",resetNum:"12个",unit:"个",countNum:""},{batchId:2,itemIndex:"02",surplus:"20",type:"1",batchCode:"22222222222",productionTime:"1531971109",productionTimeShow:"12345234523",supplier:"中华大当家",storeName:"中华一区",resetNum:"12个",unit:"个",countNum:""},{batchId:3,itemIndex:"03",surplus:"30",type:"1",batchCode:"11111111111",productionTime:"1531971109",productionTimeShow:"12345234523",supplier:"中华大当家",storeName:"中华一区",resetNum:"12个",unit:"个",countNum:""},{batchId:4,itemIndex:"04",surplus:"40",type:"0",batchCode:"44444444444",productionTime:"1531971109",productionTimeShow:"12345234523",supplier:"中华大当家",storeName:"中华一区",resetNum:"12个",unit:"个",countNum:""},{batchId:5,itemIndex:"05",surplus:"50",type:"1",batchCode:"55555555555",productionTime:"1531971109",productionTimeShow:"12345234523",supplier:"中华大当家",storeName:"中华一区",resetNum:"12个",unit:"个",countNum:""}],nowTableData:[]}},props:{list:{type:Array,default:Array,required:!0},title:{type:String,default:"选择批次"},btnOk:{type:Object,default:function(){return{content:"确定",style:{"background-color":"#ff8d01"}}}},btnCancel:{type:Object,default:function(){return{content:"取消",style:{"background-color":"#b3b3b3"}}}},tips:{type:String,default:"无批次信息"},info:{type:Array,default:Array}},methods:{closeWin:function(t){var e=[];"ok"==t&&(e=a.a.deepCopy(this.nowTableData)),this.$emit("emitEvent",e,t)},clickBtn:function(t,e){"reset"==t&&(this.initDateTime(),this.condObj={supplier:"",batchCode:""}),this.nowTableData=this.searchList(this.tableData,e)},searchList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return e=arguments[1]?[].concat(s(t)):this.searchListByTime(t),e=this.searchListByFiled(e,"batchCode",this.condObj.batchCode),e=this.searchListByFiled(e,"supplier",this.condObj.supplier),e=this.addItemIndex(e)},searchListByTime:function(t){var e=this;return t.filter(function(t){var n;if(n=1e3*Number(t.productionTime),e.startTime.time<n&&n<e.endTime.time)return!0})},searchListByFiled:function(t,e,n){return(n=n.trim())?t.filter(function(t){if((t[e]+"").includes(n))return!0}):[].concat(s(t))},clearInput:function(){this.nowTableData=this.nowTableData.map(function(t){return t.countNum="",t})},checkNum:function(t){var e=t.countNum+"",n=[];e=(e=e.trim()).slice(0,30),(n=0==t.type?e.match(/([1-9]\d{0,10})|0/g):e.match(/([1-9]\d{0,10}|0)\.?(\d{0,3})?/g))||((n=[])[0]=""),n[0]&&(n[0]=Number(n[0]),n[0]<0&&(n[0]=0)),n[0]+="",t.countNum=n[0]},getTime:function(t,e){this[t].time=e},initDateTime:function(){var t;this.endTime.time=Date.now(),t=this.generatorDate(this.endTime.time),this.startTime.time=new Date(t.year,t.month,1,0,0,0).getTime()},generatorDate:function(t){return t?"number"!=typeof t&&"string"!=typeof t||(t=Number(t),t=new Date(t)):t=new Date,{year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),week:0}},addItemIndex:function(t){for(var e=0;e<t.length;e++){var n=1+e;t[e].itemIndex=n>=10?n:"0"+n}return t},initData:function(){this.tableData=this.list}},mounted:function(){this.initDateTime(),this.initData(),this.clickBtn("reset",!0)},components:{win:function(){return n.e("win").then(n.bind(null,"f60a"))},calendar:function(){return n.e("calendar_result").then(n.bind(null,"9265"))}}},r=(n("7f18"),n("7610")),c=Object(r.a)(o,i,[],!1,null,"7e128c6e",null);c.options.__file="src\\module\\invoicing_system\\invoicing\\goods_count_batch_win.vue";e.default=c.exports}}]);