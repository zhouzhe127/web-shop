(window.webpackJsonp=window.webpackJsonp||[]).push([["goods_count_batch_win"],{"7f18":function(t,e,i){"use strict";var n=i("8b97");i.n(n).a},"8b97":function(t,e,i){},9031:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("win",{attrs:{height:500,width:1024,ok:t.btnOk,cancel:t.btnCancel},on:{winEvent:t.closeWin}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),i("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"head"},t._l(t.info,function(e,n){return i("li",{key:n,staticClass:"info"},[t._v(t._s(e.name)+":"+t._s(e.val))])})),t._v(" "),i("div",{staticClass:"nav"},[i("div",{staticClass:"in-block"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.condObj.batchCode,expression:"condObj.batchCode"}],staticClass:"input-txt",attrs:{type:"text",placeholder:"请输入批次编号",maxlength:"40"},domProps:{value:t.condObj.batchCode},on:{input:function(e){e.target.composing||t.$set(t.condObj,"batchCode",e.target.value)}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.condObj.supplier,expression:"condObj.supplier"}],staticClass:"input-txt",attrs:{type:"text",placeholder:"请输入供应商",maxlength:"40"},domProps:{value:t.condObj.supplier},on:{input:function(e){e.target.composing||t.$set(t.condObj,"supplier",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"in-block marginL-10"},[i("calendar",{staticStyle:{"background-color":"#fff"},attrs:{pObj:t.startTime,tips:t.startTime.tips},on:{throwTime:function(e){t.getTime("startTime",e)}}}),t._v(" "),i("span",{staticClass:"line"}),t._v(" "),i("calendar",{staticStyle:{"background-color":"#fff"},attrs:{pObj:t.endTime,tips:t.endTime.tips},on:{throwTime:function(e){t.getTime("endTime",e)}}})],1),t._v(" "),i("div",{staticClass:"in-block",staticStyle:{margin:"0"}},[i("span",{staticClass:"common-btn blue",on:{click:function(e){t.clickBtn("filter")}}},[t._v("筛选")]),i("span",{staticClass:"common-btn gray",staticStyle:{margin:"0"},on:{click:function(e){t.clickBtn("reset")}}},[t._v("重置")])])]),t._v(" "),i("div",{staticClass:"table"},[i("div",{staticClass:"title"},t._l(t.tableTitle,function(e,n){return i("li",{key:n,style:e.style?e.style:{}},[t._v("\n\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t"),t.tableTitle.length-1==n?i("span",{staticClass:"clearInput",on:{click:t.clearInput}},[t._v("清空输入")]):t._e()])})),t._v(" "),i("div",{staticClass:"body"},[t._l(t.nowTableData,function(e,n){return i("div",{key:n,staticClass:"row"},t._l(t.tableTitle,function(n,a){return i("li",{key:a,style:n.style?n.style:{}},[t._t("col-"+a,[t.tableTitle.length-1==a?i("div",{staticClass:"input-div"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.countNum,expression:"row.countNum"}],staticClass:"count-num",attrs:{type:"text",placeholder:"请输入数字",maxlength:"9"},domProps:{value:e.countNum},on:{input:[function(i){i.target.composing||t.$set(e,"countNum",i.target.value)},function(i){t.checkNum(e)}]}}),t._v(" "),i("span",{staticClass:"unit"},[t._v(t._s(e.unit))])]):i("span",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e[n.dataName])+"\n\t\t\t\t\t\t\t")])],{item:n,index:a})],2)}))}),t._v(" "),0==t.nowTableData.length?i("div",{staticClass:"tips-div"},[t._v("\n\t\t\t\t\t"+t._s(t.tips)+"\n\t\t\t\t")]):t._e()],2)])])])};n._withStripped=!0;var a=i("bbb9");function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var o={data:function(){return{startTime:{time:"",show:!0,detail:!0,width:160,tips:"请选择开始时间",flag:!0},endTime:{time:"",show:!0,detail:!0,width:160,tips:"请选择结束时间"},condObj:{supplier:"",batchCode:""},tableTitle:[{name:"序号",style:{width:"5%"},dataName:"itemIndex"},{name:"批次编号",style:{width:"11.8%"},dataName:"batchCode"},{name:"生产日期",style:{width:"13.54%"},dataName:"productionTimeShow"},{name:"供应商",style:{width:"18.5%"},dataName:"supplier"},{name:"所属仓库",style:{width:"18.36%"},dataName:"storeName"},{name:"数量/重量",style:{width:"13.54%"},dataName:"resetNum"},{name:"盘库库存量",style:{width:"18.5%"},dataName:"countNum"}],tableData:[],nowTableData:[]}},props:{list:{type:Array,default:Array,required:!0},title:{type:String,default:"选择批次"},btnOk:{type:Object,default:function(){return{content:"确定",style:{"background-color":"#ff8d01"}}}},btnCancel:{type:Object,default:function(){return{content:"取消",style:{"background-color":"#b3b3b3"}}}},tips:{type:String,default:"无批次信息"},info:{type:Array,default:Array}},methods:{closeWin:function(t){var e=[];"ok"==t&&(e=a.a.deepCopy(this.nowTableData)),this.$emit("emitEvent",e,t)},clickBtn:function(t){"reset"==t&&(this.initDateTime(),this.condObj={supplier:"",batchCode:""}),this.nowTableData=this.searchList(this.tableData)},searchList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return e=this.startTime.flag?[].concat(s(t)):this.searchListByTime(t),e=this.searchListByFiled(e,"batchCode",this.condObj.batchCode),e=this.searchListByFiled(e,"supplier",this.condObj.supplier),e=this.addItemIndex(e)},searchListByTime:function(t){var e=this;return t.filter(function(t){var i;if(i=1e3*Number(t.productionTime),e.startTime.time<i&&i<e.endTime.time)return!0})},searchListByFiled:function(t,e,i){return(i=i.trim())?t.filter(function(t){if((t[e]+"").includes(i))return!0}):[].concat(s(t))},clearInput:function(){this.nowTableData=this.nowTableData.map(function(t){return t.countNum="",t})},checkNum:function(t){if(!t.canWrite){var e=t.countNum+"",i=[];e=(e=e.trim()).slice(0,30),(i=0==t.type?e.match(/([1-9]\d{0,9})|0/g):e.match(/([1-9]\d{0,9}|0)\.?(\d{0,3})?/g))||((i=[])[0]=""),i[0]&&Number(i[0])<0&&(i[0]=0),i[0]+="",t.countNum=i[0]}},getTime:function(t,e){this[t].time=e,this.startTime.tips=void 0,this.endTime.tips=void 0,this.startTime.flag=!1},initDateTime:function(){var t;this.endTime.time=Date.now(),t=this.generatorDate(this.endTime.time),this.startTime.time=new Date(t.year,t.month,1,0,0,0).getTime(),this.startTime.tips="请选择开始时间",this.endTime.tips="请选择结束时间",this.startTime.flag=!0},generatorDate:function(t){return t?"number"!=typeof t&&"string"!=typeof t||(t=Number(t),t=new Date(t)):t=new Date,{year:t.getFullYear(),month:t.getMonth(),day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),week:0}},addItemIndex:function(t){for(var e=0;e<t.length;e++){var i=1+e;t[e].itemIndex=i>=10?i:"0"+i}return t},initData:function(){this.tableData=this.list}},mounted:function(){this.initDateTime(),this.initData(),this.clickBtn("reset")},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))},calendar:function(){return i.e("calendar_result").then(i.bind(null,"9265"))}}},r=(i("7f18"),i("6ceb")),c=Object(r.a)(o,n,[],!1,null,"7e128c6e",null);c.options.__file="src\\module\\invoicing_system\\invoicing\\goods_count_batch_win.vue";e.default=c.exports}}]);