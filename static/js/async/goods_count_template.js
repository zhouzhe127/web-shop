(window.webpackJsonp=window.webpackJsonp||[]).push([["goods_count_template"],{4566:function(t,e,a){"use strict";var n=a("fcac");a.n(n).a},"637a":function(t,e,a){"use strict";a.r(e);var n=a("81a2");function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function n(i,r){try{var s=e[i](r),o=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(o).then(function(t){n("next",t)},function(t){n("throw",t)});t(o)}("next")})}}var r={data:function(){return{titleData:[{titleName:"操作",titleStyle:{"text-align":"center"}},{titleName:"序号",dataName:"itemIndex"},{titleName:"模板名称",dataName:"name"}],pageObj:{page:1,total:0,num:10},templateList:[],nowList:[],searchList:[],search:"",tabObj:[{},{}],tableObj:{}}},props:{tab:{type:[String,Number]}},methods:{linkToPage:function(){var t,e,a=this.$route.query;t=[{id:1,path:"/admin/goodsCountHistory"},{id:2,path:"/admin/materialCountHistory"},{id:3,path:"/admin/processHistory"}],e=this.matchList(t,this.tab,"id"),this.$router.push({path:e.path,query:a})},clickBtn:function(t){"reset"==t&&(this.search=""),this.pageObj.page=1,this.filterList()},filterList:function(){this.searchList=this.fnSearch(this.templateList,this.search),this.getPageNum({page:this.pageObj.page,num:this.pageObj.num})},deleteTemplate:function(t,e){var a=this;return i(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.getHttp(t,{id:e.id});case 2:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:a.templateList=a.templateList.filter(function(t){return t.id!=e.id}),a.filterList(),0==a.nowList.length&&a.pageObj.page>1&&(a.pageObj.page-=1,a.filterList());case 8:case"end":return n.stop()}},n,a)}))()},deleteUse:function(t,e,a){var n=this;return i(regeneratorRuntime.mark(function e(){var i,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i={},r=[],s=n.$route.query,r=[{id:1,delPath:"TemplateDeleteTemplate",usePath:"/admin/goodsCount",editPath:"/admin/editGoodsCountTemplate"},{id:2,delPath:"TemplateDeleteTemplate",usePath:"/admin/materialCount",editPath:"/admin/editMaterialCountTemplate"},{id:3,delPath:"templateDeleteTemplate",usePath:"/admin/processMaterial",editPath:"/admin/processMaterial"}],i=n.matchList(r,n.tab,"id"),e.t0=a,e.next="delete"===e.t0?6:"use"===e.t0?8:"edit"===e.t0?11:14;break;case 6:return n.$store.commit("setWin",{title:"温馨提示",winType:"confirm",content:"确认删除该模板?",callback:function(e){"ok"==e&&n.deleteTemplate(i.delPath,t)}}),e.abrupt("break",14);case 8:return s.id=t.id,n.$router.push({path:i.usePath,query:s}),e.abrupt("break",14);case 11:return s.id=t.id,n.$router.push({path:i.editPath,query:s}),e.abrupt("break",14);case 14:case"end":return e.stop()}},e,n)}))()},getTemplates:function(){var t=this;return i(regeneratorRuntime.mark(function e(){var a,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n="",e.t0=t.tab+"",e.next="1"===e.t0?4:"2"===e.t0?4:"3"===e.t0?10:16;break;case 4:return n=1==t.tab?"getInventoryGoodsTemplates":"getInventoryMaterialTemplates",e.next=7,t.getHttp(n,{startTime:0,endTime:Math.ceil(Date.now()/1e3)});case 7:return a=e.sent,Array.isArray(a)&&(t.templateList=a),e.abrupt("break",16);case 10:return n="templateGetListTemplates",e.next=13,t.getHttp(n);case 13:return a=e.sent,Array.isArray(a)&&(t.templateList=a),e.abrupt("break",16);case 16:case"end":return e.stop()}},e,t)}))()},initBtn:function(){var t,e=this;t=this.matchList([{id:1,name:"批量盘库",path:"/admin/goodsCount"},{id:2,name:"批量盘库",path:"/admin/materialCount"},{id:3,name:"立即加工",path:"/admin/processMaterial"}],this.tab,"id"),this.$store.commit("setPageTools",[{name:t.name,style:{height:"40px",color:"#fff"},fn:function(){e.$router.push({path:t.path,query:e.$route.query})}}])},initTab:function(){switch(this.tab+""){case"1":this.tabObj=[{name:"商品盘库"},{name:"模板列表"}];break;case"2":this.tabObj=[{name:"物料盘库"},{name:"模板列表"}];break;case"3":this.tabObj=[{name:"加工记录"},{name:"加工模板"}]}},getPageNum:function(t){this.pageObj.page=t.page,this.pageObj.num=t.num,this.pageObj.total=Math.ceil(this.searchList.length/this.pageObj.num),this.nowList=this.initPage(this.searchList,this.pageObj.page,this.pageObj.num),this.nowList=this.addItemIndex(this.nowList)},initPage:function(t,e,a){var n=(e-1)*a,i=e*a;return t.slice(n,i)},matchList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n={},i=!0,r=!1,s=void 0;try{for(var o,c=t[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var u=o.value;if(u[a]==e){n=u;break}}}catch(t){r=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(r)throw s}}return n},addItemIndex:function(t){for(var e=0;e<t.length;e++){var a=(this.pageObj.page-1)*this.pageObj.num+1+e;t[e].itemIndex=a>=10?a:"0"+a}return t},fnSearch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(e=e.trim())?t.filter(function(t){if("string"==typeof t.name&&t.name.includes(e))return!0}):t},getHttp:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(regeneratorRuntime.mark(function i(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.a[t]({data:a});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},i,e)}))()}},mounted:function(){var t=this;return i(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.initBtn(),t.initTab(),e.next=4,t.getTemplates();case 4:t.clickBtn("reset");case 5:case"end":return e.stop()}},e,t)}))()},watch:{tab:function(){var t=i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.initBtn(),this.initTab(),t.next=4,this.getTemplates();case 4:this.clickBtn("reset");case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},components:{comTable:function(){return a.e("table").then(a.bind(null,"4360"))},pageElement:function(){return a.e("page_element").then(a.bind(null,"5921"))}}},s=(a("4566"),a("d801")),o=Object(s.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"goods-count-template"}},[a("div",{staticClass:"tab-div"},[a("span",{on:{click:t.linkToPage}},[t._v(t._s(t.tabObj[0].name))]),t._v(" "),a("span",{staticClass:"select-tab"},[t._v(t._s(t.tabObj[1].name))])]),t._v(" "),a("div",{staticClass:"content-head"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"template-name",attrs:{type:"text",maxlength:"30",placeholder:"请输入模板名称"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),a("span",{staticClass:"blue common-btn",on:{click:function(e){t.clickBtn("filter")}}},[t._v("筛选")]),a("span",{staticClass:"gray common-btn",on:{click:function(e){t.clickBtn("reset")}}},[t._v("重置")])]),t._v(" "),a("div",{staticClass:"content-body"},[a("com-table",{attrs:{showHand:!0,listName:"模板列表",listHeight:70,showTitle:1,titleData:t.titleData,introData:t.nowList,allTotal:t.searchList.length,fixed:1,bannerStyle:{color:"#43414a",fontSize:"16px"},widthType:!0,listWidth:1200},scopedSlots:t._u([{key:"con-0",fn:function(e){var n=e.data,i=e.index;return a("div",{staticClass:"operation-column"},[a("span",{staticClass:"operation line",on:{click:function(e){t.deleteUse(n,i,"use")}}},[t._v("使用")]),t._v(" "),a("span",{staticClass:"operation line edit-color",on:{click:function(e){t.deleteUse(n,i,"edit")}}},[t._v("编辑")]),t._v(" "),a("span",{staticClass:"operation delete-color",on:{click:function(e){t.deleteUse(n,i,"delete")}}},[t._v("删除")])])}},{key:"con-1",fn:function(e){return[t._v("\r\n\t\t\t\t\t"+t._s(e.data.itemIndex)+"\r\n\t\t\t\t")]}}])}),t._v(" "),a("div",[a("page-element",{attrs:{page:t.pageObj.page,total:t.pageObj.total},on:{pageNum:t.getPageNum}})],1)],1)])},[],!1,null,"3d84ce16",null);e.default=o.exports},fcac:function(t,e,a){}}]);