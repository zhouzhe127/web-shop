(window.webpackJsonp=window.webpackJsonp||[]).push([["goods_count_template"],{3350:function(t,e,n){},"637a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"goods-count-template"}},[n("div",{staticClass:"tab-div"},[n("span",{on:{click:t.linkToPage}},[t._v(t._s(t.tabObj[0].name))]),t._v(" "),n("span",{staticClass:"select-tab"},[t._v(t._s(t.tabObj[1].name))])]),t._v(" "),n("div",{staticClass:"content-head"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"template-name",attrs:{type:"text",maxlength:"30",placeholder:"请输入模板名称"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),n("span",{staticClass:"blue common-btn",on:{click:function(e){t.clickBtn("filter")}}},[t._v("筛选")]),n("span",{staticClass:"gray common-btn",on:{click:function(e){t.clickBtn("reset")}}},[t._v("重置")])]),t._v(" "),n("div",{staticClass:"content-body"},[n("com-table",{attrs:{showHand:!0,listName:"模板列表",listHeight:70,showTitle:1,titleData:t.titleData,introData:t.nowList,allTotal:t.searchList.length,fixed:1,bannerStyle:{color:"#43414a",fontSize:"16px"},widthType:!0,listWidth:1200},scopedSlots:t._u([{key:"con-0",fn:function(e){var a=e.data,i=e.index;return n("div",{staticClass:"operation-column"},[n("span",{staticClass:"operation line",on:{click:function(e){t.deleteUse(a,i,"use")}}},[t._v("使用")]),t._v(" "),n("span",{staticClass:"operation line edit-color",on:{click:function(e){t.deleteUse(a,i,"edit")}}},[t._v("编辑")]),t._v(" "),n("span",{staticClass:"operation delete-color",on:{click:function(e){t.deleteUse(a,i,"delete")}}},[t._v("删除")])])}},{key:"con-1",fn:function(e){return[t._v("\r\n\t\t\t\t\t"+t._s(e.data.itemIndex)+"\r\n\t\t\t\t")]}}])}),t._v(" "),n("div",[n("page-element",{attrs:{page:t.pageObj.page,total:t.pageObj.total},on:{pageNum:t.getPageNum}})],1)],1)])};a._withStripped=!0;var i=n("81a2");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function a(i,r){try{var s=e[i](r),o=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}var s={data:function(){return{titleData:[{titleName:"操作",titleStyle:{"text-align":"center"}},{titleName:"序号",dataName:"itemIndex"},{titleName:"模板名称",dataName:"name"}],pageObj:{page:1,total:0,num:10},templateList:[],nowList:[],searchList:[],search:"",tabObj:[{},{}],tableObj:{}}},props:{tab:{type:[String,Number]}},methods:{linkToPage:function(){var t,e,n=this.$route.query;t=[{id:1,path:"/admin/goodsCountHistory"},{id:2,path:"/admin/materialCountHistory"},{id:3,path:"/admin/processHistory"}],e=this.matchList(t,this.tab,"id"),this.$router.push({path:e.path,query:n})},clickBtn:function(t){"reset"==t&&(this.search=""),this.pageObj.page=1,this.filterList()},filterList:function(){this.searchList=this.fnSearch(this.templateList,this.search),this.getPageNum({page:this.pageObj.page,num:this.pageObj.num})},deleteTemplate:function(t,e){var n=this;return r(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n.getHttp(t,{id:e.id});case 2:if(a.sent){a.next=5;break}return a.abrupt("return");case 5:n.templateList=n.templateList.filter(function(t){return t.id!=e.id}),n.filterList(),0==n.nowList.length&&n.pageObj.page>1&&(n.pageObj.page-=1,n.filterList());case 8:case"end":return a.stop()}},a,n)}))()},deleteUse:function(t,e,n){var a=this;return r(regeneratorRuntime.mark(function e(){var i,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i={},r=[],s=a.$route.query,r=[{id:1,delPath:"TemplateDeleteTemplate",usePath:"/admin/goodsCount",editPath:"/admin/editGoodsCountTemplate"},{id:2,delPath:"TemplateDeleteTemplate",usePath:"/admin/materialCount",editPath:"/admin/editMaterialCountTemplate"},{id:3,delPath:"templateDeleteTemplate",usePath:"/admin/processMaterial",editPath:"/admin/processMaterial"}],i=a.matchList(r,a.tab,"id"),e.t0=n,e.next="delete"===e.t0?6:"use"===e.t0?8:"edit"===e.t0?11:14;break;case 6:return a.$store.commit("setWin",{title:"温馨提示",winType:"confirm",content:"确认删除该模板?",callback:function(e){"ok"==e&&a.deleteTemplate(i.delPath,t)}}),e.abrupt("break",14);case 8:return s.id=t.id,a.$router.push({path:i.usePath,query:s}),e.abrupt("break",14);case 11:return s.id=t.id,a.$router.push({path:i.editPath,query:s}),e.abrupt("break",14);case 14:case"end":return e.stop()}},e,a)}))()},getTemplates:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a="",e.t0=t.tab+"",e.next="1"===e.t0?4:"2"===e.t0?4:"3"===e.t0?10:16;break;case 4:return a=1==t.tab?"getInventoryGoodsTemplates":"getInventoryMaterialTemplates",e.next=7,t.getHttp(a,{startTime:0,endTime:Math.ceil(Date.now()/1e3)});case 7:return n=e.sent,Array.isArray(n)&&(t.templateList=n),e.abrupt("break",16);case 10:return a="templateGetListTemplates",e.next=13,t.getHttp(a);case 13:return n=e.sent,Array.isArray(n)&&(t.templateList=n),e.abrupt("break",16);case 16:case"end":return e.stop()}},e,t)}))()},initBtn:function(){var t,e=this;t=this.matchList([{id:1,name:"批量盘库",path:"/admin/goodsCount"},{id:2,name:"批量盘库",path:"/admin/materialCount"},{id:3,name:"立即加工",path:"/admin/processMaterial"}],this.tab,"id"),this.$store.commit("setPageTools",[{name:t.name,style:{height:"40px",color:"#fff"},fn:function(){e.$router.push({path:t.path,query:e.$route.query})}}])},initTab:function(){switch(this.tab+""){case"1":this.tabObj=[{name:"商品盘库"},{name:"模板列表"}];break;case"2":this.tabObj=[{name:"物料盘库"},{name:"模板列表"}];break;case"3":this.tabObj=[{name:"加工记录"},{name:"加工模板"}]}},getPageNum:function(t){this.pageObj.page=t.page,this.pageObj.num=t.num,this.pageObj.total=Math.ceil(this.searchList.length/this.pageObj.num),this.nowList=this.initPage(this.searchList,this.pageObj.page,this.pageObj.num),this.nowList=this.addItemIndex(this.nowList)},initPage:function(t,e,n){var a=(e-1)*n,i=e*n;return t.slice(a,i)},matchList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a={},i=!0,r=!1,s=void 0;try{for(var o,c=t[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){var u=o.value;if(u[n]==e){a=u;break}}}catch(t){r=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(r)throw s}}return a},addItemIndex:function(t){for(var e=0;e<t.length;e++){var n=(this.pageObj.page-1)*this.pageObj.num+1+e;t[e].itemIndex=n>=10?n:"0"+n}return t},fnSearch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(e=e.trim())?t.filter(function(t){if("string"==typeof t.name&&t.name.includes(e))return!0}):t},getHttp:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(regeneratorRuntime.mark(function a(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a[t]({data:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},a,e)}))()}},mounted:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.initBtn(),t.initTab(),e.next=4,t.getTemplates();case 4:t.clickBtn("reset");case 5:case"end":return e.stop()}},e,t)}))()},watch:{tab:function(){var t=r(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.initBtn(),this.initTab(),t.next=4,this.getTemplates();case 4:this.clickBtn("reset");case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},components:{comTable:function(){return n.e("table").then(n.bind(null,"4360"))},pageElement:function(){return n.e("page_element").then(n.bind(null,"5921"))}}},o=(n("8e0c"),n("6ceb")),c=Object(o.a)(s,a,[],!1,null,"4f85039a",null);c.options.__file="src\\module\\invoicing_system\\invoicing\\goods_count_template.vue";e.default=c.exports},"8e0c":function(t,e,n){"use strict";var a=n("3350");n.n(a).a}}]);