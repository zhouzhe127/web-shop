(window.webpackJsonp=window.webpackJsonp||[]).push([["win"],{"1f14":function(t,e,s){},4903:function(t,e,s){"use strict";var i=s("1f14");s.n(i).a},cb83:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-store-body"},[s("div",{ref:"selectBtn",staticClass:"select-body-btn",on:{click:t.showSort}},[s("input",{style:t.spanWidth,attrs:{type:"text",placeholder:t.tips,readonly:"readonly"},domProps:{value:t.sortName}}),t._v(" "),t._m(0)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.sortShow,expression:"sortShow"}],ref:"listBox",staticClass:"list select-ban",style:t.listPosition,on:{click:t.storeList}},[s("em",{style:t.emPosition}),t._v(" "),s("ul",[t.single?t._e():s("li",{staticClass:"all",class:{active:t.allSelected},attrs:{"data-type":"all"}},[t._v("全部选择")]),t._v(" "),t._l(t.sort,function(e,i){return s("li",{key:i,class:{active:e.selected},attrs:{"data-type":"single","data-id":e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),t.confirm?s("div",{staticClass:"handle"},[s("span",{staticClass:"gray",on:{click:t.cancel}},[t._v("取消")]),t._v(" "),s("span",{staticClass:"yellow",on:{click:t.ok}},[t._v("确认")])]):t._e()])])};i._withStripped=!0;var o=s("bbb9"),l={props:["sorts","width","tipName","isSingle","isConfirm"],data:function(){return{sort:[],emitList:[],sortName:"",sortNameStr:"",sortSel:!1,tips:"",selected:-1,spanWidth:"width:158px;",sortShow:!1,allSelected:!1,single:!0,confirm:!1,saveList:[],saveAll:!0,selectNum:0,listPosition:"",emPosition:""}},watch:{sorts:"init"},mounted:function(){(this.sorts||this.sorts==[])&&this.init()},methods:{init:function(){this.validate()&&(this.sort=this.sorts?this.sorts:[],this.tips=this.tipName?this.tipName:"请选择...",this.single=!!this.isSingle,this.confirm=!!this.isConfirm,this.spanWidth=this.width?"width:"+(this.width-42)+"px;":"width:158px;",this.setSelected(this.sort),this.setSelectAll())},showSort:function(t){this.sortShow?this.hideDrop():(this.setPosition(),this.sortShow=!0,this.saveList=o.a.deepCopy(this.sort),this.saveAll=o.a.deepCopy(this.allSelected),document.addEventListener("click",this.close))},setPosition:function(){var t=this;this.$nextTick(function(){t.$refs.selectBtn.getBoundingClientRect().left+500>=document.querySelector(".details_con").getBoundingClientRect().right&&(t.listPosition="right:0px;left:auto;",t.emPosition="right:15px;left:auto;")})},cancel:function(){this.setSelected(this.saveList),this.sort=this.saveList,this.setSelectAll(),this.hideDrop()},ok:function(){this.setSelected(this.sort),this.setSelectAll(),this.$emit("emit",this.sort),this.hideDrop()},validate:function(){var t=0,e=!0,s=!1,i=void 0;try{for(var o,l=this.sorts[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){1==o.value.selected&&t++}}catch(t){s=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(s)throw i}}return!(t>1&&this.isSingle)||(console.log("select_store 组件：单选模式，不允许选中多个选项"),!1)},setSelected:function(t){this.clearEach();var e=!0,s=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var n=o.value;1==n.selected&&this.eachEmitList(n)}}catch(t){s=!0,i=t}finally{try{!e&&l.return&&l.return()}finally{if(s)throw i}}this.sortName=this.selectNum>=1?this.sortNameStr:""},storeList:function(t){var e=this;t.stopPropagation();var s=t.target;if("li"==s.tagName.toLocaleLowerCase()){var i=s.getAttribute("data-type");if("all"==i){var l=o.a.deepCopy(this.sort);this.clearEach(),this.allSelected?(l.forEach(function(t,e){t.selected=!1}),this.allSelected=!1,this.selectNum=0):(l.forEach(function(t,s){t.selected=!0,e.eachEmitList(t)}),this.allSelected=!0),this.sort=l,this.setSelectAll(),this.emitMethod()}else if("single"==i){var n=o.a.deepCopy(this.sort),a=s.getAttribute("data-id"),r=s.className;this.clearEach(),this.single&&n.forEach(function(t,e){t.selected=!1}),n.forEach(function(t,s){t.id==a&&(r.includes("active")?t.selected=!1:t.selected=!0),1==t.selected&&e.eachEmitList(t)}),this.sort=n,this.single&&!this.confirm&&this.hideDrop(),this.setSelectAll(),this.emitMethod()}}},eachEmitList:function(t){this.selectNum++,this.sortNameStr+=t.name+" "},clearEach:function(){this.sortNameStr="",this.emitList=[],this.selectNum=0},setSelectAll:function(){this.selectNum==this.sort.length?this.allSelected=!0:this.allSelected=!1},emitMethod:function(){this.confirm||(this.sortName=this.selectNum>=1?this.sortNameStr:"",this.$emit("emit",this.sort))},hideDrop:function(){this.sortShow=!1,document.removeEventListener("click",this.close)},close:function(t){for(var e=this.$refs.selectBtn.getElementsByTagName("*"),s=!0,i=0;i<e.length;i++)t.target==e[i]&&(s=!1);s&&(this.confirm||this.hideDrop())}}},n=(s("4903"),s("6ceb")),a=Object(n.a)(l,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("em",[e("i")])}],!1,null,"95633264",null);a.options.__file="src\\components\\select_store.vue";e.default=a.exports}}]);