(window.webpackJsonp=window.webpackJsonp||[]).push([["member_detail_balance"],{"31bf":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFCQThBNjA5NTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFCQThBNjBBNTcxNTExRTdCNzI4QzVFQTBERTkzQkVEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUJBOEE2MDc1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUJBOEE2MDg1NzE1MTFFN0I3MjhDNUVBMERFOTNCRUQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4kIzh0AAABmklEQVR42oyUTSgFURTHvdfzke+yYMNiUKOXyIKUCK9slJKPbGyUslBWVhIrK/UUexsLxEaRzxI2Sh4WJDNJsfGRFFHy/I/+U891Z8apX/d0z73/OXPuuTdgWVaSxppAN8cizt2AHbAAtp2FhmH8jCFFwASzoEYjXkL6QQz0gAsnGExY2ACOXURUqwQn3PNLSDJZBWkem8dAOwXEUsC6bdum82sBMAfSPUT2wTj9ZDBPPxUsQywsGTWDKp9fqQMdzHxYiZWBiGTU5SHwClbAPRgE9S7rhkI8Yp1tgiPWbo9zDyBPs7ZWfq1QE7hlzwyAAs5lsj46yxGhD00gF0yAA7DIuSjIdquBCN1p5jM49nLMB30etXwRoUOX4BR4pD/tc6qnQfaQau9glH4jj34GPLsITYrQBjhTAkuSLv03MEI/SyNiS4vI8cfZSzF2qlgpKGYNw6ATVGhEPkErXoC4c/vlFrcwO7lD1eDKpy4iEoHIuXr7d/nVy3/c/mtQzj1/nhEnM5PZrYEn8MWvS1dvgTZ5zxLfIrFvAQYAHHVSK1WxAuMAAAAASUVORK5CYII="},"9ed1d":function(t,e,n){"use strict";var i=n("c3bb");n.n(i).a},c3bb:function(t,e,n){},d8d8:function(t,e,n){"use strict";n.r(e);var i=n("81a2"),o=n("f6ce");var a=/[^\d]/g,s={props:{memberInfo:Object,type:[String,Number],shopId:[String,Number]},data:function(){return{onoff:!1,obj:{point:0,amount:0,mobile:"",msg:"",type:"",behavior:"",remark:"",msgStatus:""},msgTemplate:"",amount:this.memberInfo.totalAmount,point:this.memberInfo.point,operationType:"+",operationIndex:0,title:""}},computed:{points:{get:function(){return this.obj.point},set:function(t){this.obj.point=t.replace(a,"")}},amounts:{get:function(){return this.obj.amount},set:function(t){this.obj.amount=t.replace(a,"")}}},methods:{statusChange:function(t){this.onoff=t},winEvent:function(t){"ok"==t?this.compelUpdatePointAndBalance():this.$emit("winEvent","close")},compelUpdatePointAndBalance:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return 0==e.type?"0"==e.operationIndex?e.obj.type=12:e.obj.type=13:"0"==e.operationIndex?e.obj.type=10:e.obj.type=11,t.next=3,i.a.compelUpdatePointAndBalance({data:{memberId:e.memberInfo.memberId,point:e.obj.point,amount:e.obj.amount,mobile:e.memberInfo.mobile,msg:e.obj.msg,type:e.obj.type,behavior:e.obj.behavior,remark:e.obj.remark,msgStatus:Number(e.onoff),totalAmount:e.memberInfo.totalAmount,shopId:e.shopId}});case 3:0==e.type?e.memberInfo.totalAmount=e.changeNum():e.memberInfo.point=e.changeNum(),e.$store.commit("setWin",{title:"提示信息",content:"更改成功！"}),e.$emit("winEvent","close");case 6:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(o,a){try{var s=e[o](a),r=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(r).then(function(t){i("next",t)},function(t){i("throw",t)});t(r)}("next")})})()},selectiveType:function(t){this.operationIndex=t,this.operationType=0==t?"+":"-",this.changeNum()},changeNum:function(){return"0"==this.type?"0"==this.operationIndex?(Number(this.amount)+Number(this.obj.amount)).toFixed(2):(Number(this.amount)-Number(this.obj.amount)).toFixed(2):"0"==this.operationIndex?(Number(this.point)+Number(this.obj.point)).toFixed(2):(Number(this.point)-Number(this.obj.point)).toFixed(2)},usingSmsTemplates:function(){var t=o.a.session("userShop");"1"==this.type?this.msgTemplate=String("尊敬的"+this.memberInfo.name+"用户您好，由于"+this.obj.behavior+"原因，您的积分由"+this.memberInfo.point+"变动至"+this.changeNum()+"敬请谅解。如有问题请致电："+t.currentShop.telephone):this.msgTemplate=String("尊敬的"+this.memberInfo.name+"用户您好，由于"+this.obj.behavior+"原因，您的余额由"+this.memberInfo.totalAmount+"变动至"+this.changeNum()+"敬请谅解。如有问题请致电："+t.currentShop.telephone),this.obj.msg=this.msgTemplate}},components:{Win:function(){return n.e("win").then(n.bind(null,"f60a"))},onOff:function(){return n.e("on_off").then(n.bind(null,"034b"))}}},r=(n("9ed1d"),n("d801")),m=Object(r.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("Win",{attrs:{width:800,height:550},on:{winEvent:t.winEvent}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(0==t.type?"余额操作":"积分操作"))]),t._v(" "),i("div",{staticClass:"member-details",attrs:{slot:"content",id:"balances"},slot:"content"},[i("div",{staticClass:"member-box"},[i("p",{staticClass:"fl box-left"},[0==t.type?[t._v("余额变动量")]:[t._v("积分变动量")]],2),t._v(" "),"0"==t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.amounts,expression:"amounts"}],staticClass:"fl",staticStyle:{"margin-left":"28px","text-indent":"10px",width:"217px",height:"41px"},attrs:{type:"text",placeholder:"请输入金额",maxlength:"5"},domProps:{value:t.amounts},on:{input:function(e){e.target.composing||(t.amounts=e.target.value)}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.points,expression:"points"}],staticClass:"fl",staticStyle:{"margin-left":"28px","text-indent":"10px",width:"217px",height:"41px"},attrs:{type:"text",placeholder:"请输入金额",maxlength:"5"},domProps:{value:t.points},on:{input:function(e){e.target.composing||(t.points=e.target.value)}}}),t._v(" "),i("p",{staticClass:"fl balanceTip"},[i("span",{class:{active:0==t.operationIndex},on:{click:function(e){t.selectiveType("0")}}},[t._v("增加")]),t._v(" "),i("span",{class:{active:1==t.operationIndex},on:{click:function(e){t.selectiveType("1")}}},[t._v("减少")])])]),t._v(" "),i("div",{staticClass:"reason"},[i("p",{staticClass:"fl box-left",staticStyle:{"margin-top":"5px"}},[t._v("原因")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.obj.behavior,expression:"obj.behavior"}],staticStyle:{"margin-left":"28px"},attrs:{rows:"4",cols:"62",placeholder:"请输入变动原因",maxlength:"30"},domProps:{value:t.obj.behavior},on:{input:function(e){e.target.composing||t.$set(t.obj,"behavior",e.target.value)}}})]),t._v(" "),i("p",{staticClass:"memberNotice"},[i("img",{staticStyle:{width:"17px",height:"17px","margin-right":"5px"},attrs:{src:n("31bf")}}),t._v("最佳10个字，最多30个字，在余额详情显示")]),t._v(" "),i("div",{staticClass:"member-box"},[i("p",{staticClass:"fl box-left"},[t._v("操作")]),t._v(" "),"0"==t.type?i("p",{staticClass:"fl",staticStyle:{width:"auto","margin-left":"28px","margin-right":"10px","font-size":"16px"}},[t._v(" "+t._s(t.amount)+t._s(t.operationType)+t._s(t.obj.amount)+"="+t._s(t.changeNum()))]):i("p",{staticClass:"fl",staticStyle:{width:"auto","margin-left":"28px","margin-right":"10px","font-size":"16px"}},[t._v(t._s(t.point)+t._s(t.operationType)+t._s(t.obj.point)+"="+t._s(t.changeNum()))]),t._v(" "),i("p",{staticClass:"fl",staticStyle:{height:"43px","line-height":"43px",display:"flex","align-items":"center",color:"#A5A5A5","font-size":"14px"}},[i("img",{staticStyle:{width:"17px",height:"17px","margin-right":"7px"},attrs:{src:n("31bf")}}),t._v("在原有余额上增加或减少")])]),t._v(" "),i("div",{staticClass:"reason"},[i("p",{staticClass:"fl box-left",staticStyle:{"margin-top":"5px"}},[t._v("备注")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.obj.remark,expression:"obj.remark"}],staticStyle:{"margin-left":"28px"},attrs:{rows:"4",cols:"62",placeholder:"操作余额备注",maxlength:"50"},domProps:{value:t.obj.remark},on:{input:function(e){e.target.composing||t.$set(t.obj,"remark",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"reason"},[i("p",{staticClass:"fl box-left",staticStyle:{height:"40px","line-height":"40px"}},[t._v("短信提醒")]),t._v(" "),i("on-off",{staticStyle:{"margin-left":"28px"},attrs:{status:t.onoff},on:{statusChange:t.statusChange}}),t._v(" "),i("a",{staticClass:"fl",staticStyle:{display:"block",color:"#F7931E",height:"40px","line-height":"40px","text-decoration":"underline","margin-left":"32px",cursor:"pointer"},on:{click:t.usingSmsTemplates}},[t._v("使用短信模板")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.obj.msg,expression:"obj.msg"}],staticStyle:{"margin-left":"148px","margin-top":"13px"},attrs:{rows:"6",cols:"62",placeholder:"短信提醒编辑",maxlength:"50"},domProps:{value:t.obj.msg},on:{input:function(e){e.target.composing||t.$set(t.obj,"msg",e.target.value)}}})],1)])])],1)},[],!1,null,"b69202fe",null);e.default=m.exports}}]);