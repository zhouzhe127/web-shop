(window.webpackJsonp=window.webpackJsonp||[]).push([["base_brand"],{"1de6":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticStyle:{"text-align":"left","min-width":"600px"},attrs:{id:"brandBase"}},[i("div",{staticClass:"line"},[t._m(0),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.baseDetial.brandName,expression:"baseDetial.brandName"}],staticClass:"input mes",attrs:{type:"text",maxlength:"20",placeholder:"请输入品牌名称"},domProps:{value:t.baseDetial.brandName},on:{input:function(e){e.target.composing||t.$set(t.baseDetial,"brandName",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"line"},[t._m(1),t._v(" "),i("selectBtn",{attrs:{sorts:t.industryList.map(function(t){return t.name}),name:t.industryName},on:{selOn:t.getDrop}})],1),t._v(" "),i("div",{staticClass:"line"},[i("span",{staticClass:"ltitle"},[t._v("负责人")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.baseDetial.contactMan,expression:"baseDetial.contactMan"}],staticClass:"input mes",attrs:{type:"text",maxlength:"15",placeholder:"请输入负责人"},domProps:{value:t.baseDetial.contactMan},on:{input:function(e){e.target.composing||t.$set(t.baseDetial,"contactMan",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"line"},[t._m(2),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.baseDetial.telephone,expression:"baseDetial.telephone"}],staticClass:"input mes",attrs:{type:"text",maxlength:"11",placeholder:"请输入手机号码"},domProps:{value:t.baseDetial.telephone},on:{input:function(e){e.target.composing||t.$set(t.baseDetial,"telephone",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"line",staticStyle:{height:"150px"}},[i("section",{staticClass:"imgBox"},[t._m(3),t._v(" "),i("form",{attrs:{id:"imageUpForm",enctype:"multipart/form-data"}},[i("input",{staticClass:"imgInput",attrs:{type:"file",accept:"image/jpeg,image/png,image/image/tiff",id:"file_upload",name:"image"},on:{change:t.fileNameChange}})]),t._v(" "),""==t.baseDetial.logoImage?i("section",{staticClass:"imgsize",staticStyle:{border:"1px solid #C0C0C0"}},[i("img",{staticStyle:{width:"47px",height:"47px","margin-left":"50px","margin-top":"25px"},attrs:{src:s("f518")}}),t._v(" "),i("section",{staticClass:"imgBottom"},[t._v("添加品牌LOGO")])]):t._e(),t._v(" "),""!=t.baseDetial.logoImage?i("section",{staticClass:"imgsize"},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"imgs",src:t.imgHost+t.baseDetial.logoImage}}),t._v(" "),i("section",{staticClass:"imgBottom"},[t._v("更改LOGO")])]):t._e()]),t._v(" "),i("section",{staticClass:"imgBox"},[i("span",{staticClass:"ltitle",staticStyle:{height:"150px","margin-right":"20px",width:"100px"}},[t._v("商标")]),t._v(" "),i("form",{attrs:{id:"imageUpForm2",enctype:"multipart/form-data"}},[i("input",{staticClass:"imgInput",attrs:{type:"file",accept:"image/jpeg,image/png,image/image/tiff",id:"file_upload2",name:"image"},on:{change:t.fileNameChange2}})]),t._v(" "),""==t.baseDetial.license?i("section",{staticClass:"imgsize",staticStyle:{border:"1px solid #C0C0C0"}},[i("img",{staticStyle:{width:"47px",height:"47px","margin-left":"50px","margin-top":"25px"},attrs:{src:s("f518")}}),t._v(" "),i("section",{staticClass:"imgBottom"},[t._v("添加商标")])]):t._e(),t._v(" "),""!=t.baseDetial.license?i("section",{staticClass:"imgsize"},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"imgs",src:t.imgHost+t.baseDetial.license}}),t._v(" "),i("section",{staticClass:"imgBottom"},[t._v("更改商标")])]):t._e()])]),t._v(" "),i("div",{staticClass:"line",staticStyle:{height:"auto"}},[i("div",{staticStyle:{width:"120px",height:"40px","line-height":"40px","text-align":"right"}},[t._v("门店排序:")]),t._v(" "),i("section",{staticClass:"oCont"},[i("div",{staticClass:"Box"},[i("section",{staticClass:"oDe",class:{act:0==t.status},staticStyle:{"border-left":"none"},on:{click:function(e){t.getOidList(0)}}},[t._v("直营店")]),t._v(" "),i("section",{staticClass:"oDe",class:{act:1==t.status},on:{click:function(e){t.getOidList(1)}}},[t._v("加盟店")])]),t._v(" "),i("div",{staticClass:"oBox"},t._l(t.shopList,function(e,s){return"0"==e.status?i("ul",{key:s,staticClass:"oUl"},[i("li",{staticClass:"oLi",staticStyle:{width:"15%"}},[t._v(t._s(s+1))]),t._v(" "),i("li",{staticClass:"oLi",staticStyle:{color:"rgb(41,161,225)"}},[t._v(t._s(e.name))]),t._v(" "),i("li",{staticClass:"oLi fi fi-arrow-up-end",staticStyle:{width:"15%","font-size":"20px"},on:{click:function(i){t.tackUp(e,s)}}}),t._v(" "),i("li",{staticClass:"oLi fi fi-arrow-up",staticStyle:{width:"15%","font-size":"20px"},on:{click:function(i){t.tackUpOne(e,s)}}}),t._v(" "),i("li",{staticClass:"oLi fi fi-arrow-down",staticStyle:{width:"15%","font-size":"20px"},on:{click:function(i){t.tackDownOne(e,s)}}}),t._v(" "),i("li",{staticClass:"oLi fi fi-arrow-down-end",staticStyle:{width:"15%","font-size":"20px"},on:{click:function(i){t.tackDown(e,s)}}})]):t._e()}))])]),t._v(" "),i("div",{staticStyle:{width:"300px","padding-left":"50px"}},[i("a",{staticClass:"yellow fl",staticStyle:{width:"290px"},on:{click:t.send}},[t._v("修改店铺信息")])])])};i._withStripped=!0;var a=s("81a2"),n=s("f6ce"),o=s("bbb9");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function i(a,n){try{var o=e[a](n),r=o.value}catch(t){return void s(t)}if(!o.done)return Promise.resolve(r).then(function(t){i("next",t)},function(t){i("throw",t)});t(r)}("next")})}}var l={data:function(){return{baseDetial:{},imgHost:"",logoImage:"",userData:null,status:0,shopListDel:{},brandIndex:-1,shopList:[],industryList:[],industryName:"",industryIndex:0,shopId:""}},mounted:function(){this.userData=n.a.session("userShop"),this.shopId=this.userData.currentShop.id;for(var t=this.userData.shopList.brand,e=0;e<t.length;e++)this.shopId==t[e].id&&(this.shopListDel=t[e],this.brandIndex=e);this.shopList=this.shopListDel.direct,this.shopList=o.a.sortByAll(this.shopList,"sort"),this.imgHost=this.userData.uploadUrl,this.baseGet()},components:{selectBtn:function(){return s.e("select_btn").then(s.bind(null,"3d41"))}},methods:{getOidList:function(t){this.status=t,this.shopList=0==t?this.shopListDel.direct:this.shopListDel.franchise},getDrop:function(t){this.industryIndex=t,this.industryName=this.industryList[t].name},tackUp:function(t,e){0!=e&&(this.shopList.splice(e,1),this.shopList.unshift(t))},tackUpOne:function(t,e){0!=e&&(this.shopList.splice(e,1),this.shopList.splice(e-1,1,t,this.shopList[e-1]))},tackDown:function(t,e){e!=this.shopList.length-1&&(this.shopList.splice(e,1),this.shopList.push(t))},tackDownOne:function(t,e){e!=this.shopList.length-1&&(this.shopList.splice(e,1,this.shopList[e+1],t),this.shopList.splice(e+2,1))},getindustryList:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.GetIndustry({data:{}});case 2:t.industryList=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},baseGet:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.GetIndustry({data:{}});case 2:return t.industryList=e.sent,e.next=5,a.a.brandgetConfig({data:{}});case 5:t.baseDetial=e.sent,t.industryIndex=t.baseDetial.industry,t.industryName=t.industryList[t.baseDetial.industry].name;case 8:case"end":return e.stop()}},e,t)}))()},baseUpdate:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var s,i,o,r,l,c,p,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(s=[],i=[],o=0;o<t.shopListDel.direct.length;o++)t.shopListDel.direct[o].sort=o+1,0==t.shopListDel.direct[o].status&&((r={}).shopId=t.shopListDel.direct[o].id,r.shopName=t.shopListDel.direct[o].name,r.sort=t.shopListDel.direct[o].sort,s.push(r));for(l=0;l<t.shopListDel.franchise.length;l++)t.shopListDel.franchise[l].sort=l+1,0==t.shopListDel.franchise[l].status&&((c={}).shopId=t.shopListDel.franchise[l].id,c.shopName=t.shopListDel.franchise[l].name,c.sort=t.shopListDel.franchise[l].sort,i.push(c));return e.next=6,a.a.brandSetConfig({data:{industry:t.industryIndex,brandName:t.baseDetial.brandName,contactMan:t.baseDetial.contactMan,telephone:t.baseDetial.telephone,logoImage:t.baseDetial.logoImage,license:t.baseDetial.license,directSort:s,joinSort:i}});case 6:p=e.sent,t.baseDetial.id=t.shopId,p&&(h=t.baseDetial.brandName,t.shopListDel.name=t.baseDetial.brandName,t.shopListDel.contactMan=t.baseDetial.contactMan,t.shopListDel.logoImage=t.baseDetial.logoImage,t.shopListDel.telephone=t.baseDetial.telephone,t.shopListDel.industry=t.industryIndex,t.userData.shopList.brand.splice(t.brandIndex,1,t.shopListDel),t.userData.currentShop=t.baseDetial,t.userData.currentShop.name=h,t.userData.currentShop.newName=h,n.a.session("userShop",t.userData),t.$store.commit("setlogoName",h),t.$store.commit("setWin",{title:"温馨提示",winType:"alert",content:"店铺信息修改成功"}));case 9:case"end":return e.stop()}},e,t)}))()},send:function(){return""==this.baseDetial.brandName?(this.$store.commit("setWin",{title:"错误提示",winType:"alert",content:"品牌名称不能为空"}),!1):""==this.baseDetial.telephone?(this.$store.commit("setWin",{title:"错误提示",winType:"alert",content:"联系方式不能为空"}),!1):void this.baseUpdate()},fileNameChange:function(t){var e=this;return r(regeneratorRuntime.mark(function s(){var i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(t),s.next=3,a.a.uploadImg({formId:"imageUpForm",data:{type:8,shopId:e.shopId}});case 3:i=s.sent,e.baseDetial.logoImage=i;case 5:case"end":return s.stop()}},s,e)}))()},fileNameChange2:function(t){var e=this;return r(regeneratorRuntime.mark(function s(){var i;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return console.log(t),s.next=3,a.a.uploadImg({formId:"imageUpForm2",data:{type:8,shopId:e.shopId}});case 3:i=s.sent,e.baseDetial.license=i;case 5:case"end":return s.stop()}},s,e)}))()}}},c=(s("460e"),s("7610")),p=Object(c.a)(l,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"ltitle"},[this._v("品牌名称\n\t\t\t"),e("span",{staticClass:"required"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"ltitle",staticStyle:{"margin-right":"20px"}},[this._v("行业分类\n\t\t\t"),e("span",{staticClass:"required"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"ltitle"},[this._v("联系方式\n\t\t\t"),e("span",{staticClass:"required"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"ltitle",staticStyle:{height:"150px","margin-right":"20px"}},[this._v("品牌LOGO\n\t\t\t\t"),e("span",{staticClass:"required"})])}],!1,null,"1a749351",null);p.options.__file="src\\module\\brand_configuration\\base_brand.vue";e.default=p.exports},2786:function(t,e,s){},"460e":function(t,e,s){"use strict";var i=s("2786");s.n(i).a},f518:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAKxJREFUeNrs2LENgzAQhWE7ygAZgQ2yApsk9S1hGMJeB7ERGzhHh+w0EXdF0P8ky9IV8BVH8Yi11mCdUsqg1/s4E5HJ+j334JMdn5qZOf4W/jjgwYMHDx48ePDgwYMHD/7XxJxzV5aNOuyrmc0eBfxbWfZIYm2ugt/XZtOzGj/3oefZzFbzD9bpj9mo13KciUhkbcCDBw8ePHjw4MGDBw8e/MkC7hGPUt/lI8AAt9oYPL6CVYkAAAAASUVORK5CYII="}}]);