(window.webpackJsonp=window.webpackJsonp||[]).push([["activity_detail"],{3561:function(t,e,i){"use strict";i.r(e);var s=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips"},[e("img",{attrs:{src:i("fdd3"),title:"最多可查看7天"}}),this._v("最多可查看7天")])}],a=i("f6ce"),n=i("bbb9"),r=i("81a2");var c={data:function(){return{sessionData:"",startTime:(new Date).setHours(0,0,0,0)-5184e5,endTime:(new Date).setHours(0,0,0,0),selectDays:7,receive:"",detail:"",salesNumList:[],detailTypeList:[],isBrand:"",userData:"",userShopList:"",shopList:""}},components:{calendar:function(){return i.e("calendar_type").then(i.bind(null,"f2dd"))}},created:function(){this.userData=a.a.session("userShop"),this.isBrand="3"==this.userData.currentShop.ischain?1:0;var t=[];1==this.isBrand&&(this.userShopList=a.a.session("shopList"),this.userShopList.forEach(function(e){var i={id:e.id,name:e.shopName};t.push(i)}),this.userShopList=t),this.sessionData=a.a.session("activityStatisticsDetail")},mounted:function(){var t=this;this.$store.commit("setPageTools",{back:function(){a.a.session("activityRequestDestroy",!0),t.$router.push({path:"../activityStatistics",query:t.$route.query})}}),this.receive=this.sessionData.detailData,this.detailTypeList=this.sessionData.detailType,this.shopList=this.userShopList,this.getDetail()},destroyed:function(){a.a.session("activityStatisticsDetail",null)},methods:{getDetail:function(){var t,e=this;return(t=regeneratorRuntime.mark(function t(){var i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validate()){t.next=2;break}return t.abrupt("return");case 2:return i=new Date(e.endTime).setHours(23,59,59,0),t.next=5,r.a.activityStatisticsGetDetail({data:{activityId:e.receive.id,type:e.receive.type,mouldType:e.receive.mouldType,startTime:parseInt(e.startTime/1e3),endTime:parseInt(i/1e3)}});case 5:s=t.sent,e.detail=s,e.salesNumList=s.salesNumList;case 8:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function s(a,n){try{var r=e[a](n),c=r.value}catch(t){return void i(t)}if(!r.done)return Promise.resolve(c).then(function(t){s("next",t)},function(t){s("throw",t)});t(c)}("next")})})()},reset:function(){this.startTime=(new Date).setHours(0,0,0,0),this.startTime=this.startTime-5184e5,this.endTime=(new Date).setHours(0,0,0,0),this.selectDays=7,this.getDetail()},startTimeChange:function(t){this.startTime=t,this.setDays()},endTimeChange:function(t){this.endTime=t,this.setDays()},formatTime:function(t){return n.a.format(new Date(1e3*t),"yyyy-MM-dd")},ifActive:function(t){if(0!=this.detail.type||0!=this.detail.mouldType){var e=this.detail.startTime,i=this.detail.endTime;return n.a.format(new Date(1e3*e),"yyyy年MM月dd日")+" 至 "+n.a.format(new Date(1e3*i),"yyyy年MM月dd日")}switch(t){case"0":return"永久";case"1":return"一年";case"2":return"两年";case"-1":return"不使用";default:return"无"}},objectType:function(t){switch(t){case"0":return"店内";case"1":case"2":return"会员";case"3":return"微分店";default:return"店内"}},judgeDiscount:function(t){switch(t){case"1":return"单品减免";case"2":return"整单减免";case"3":return"单品打折";case"4":return"整单打折";case"5":return"赠菜";default:return"无"}},getTypeName:function(t){var e="",i=!0,s=!1,a=void 0;try{for(var n,r=this.detailTypeList[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var c=n.value;if(c.id==t){e=c.children[0].name;break}e="未知类型"}}catch(t){s=!0,a=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw a}}return e},filtShop:function(t){var e=this;t=void 0==t?[]:t.split(",");var i=[];if("1"==this.isBrand){var s=function(s){t.forEach(function(t){e.shopList[s].id==t&&i.push(e.shopList[s].name)})};for(var a in this.shopList)s(a);return i.toString()}},setDays:function(){this.selectDays=(this.endTime-this.startTime)/864e5+1,this.validate()},validate:function(){var t=!0;return this.startTime&&this.endTime&&this.endTime<this.startTime&&(this.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"开始时间不能大于结束时间"}),t=!1),this.selectDays>7&&(this.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"相隔天数大于7天，请重新选择"}),t=!1),t}}},l=(i("c480"),i("d801")),o=Object(l.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-detail"},[i("div",{staticClass:"detail"},[i("div",{staticClass:"title"},[t._v("活动详情")]),t._v(" "),i("div",{staticClass:"left"},[i("ul",[i("li",[t._v("活动名称："+t._s(t.detail.name))]),t._v(" "),i("li",[t._v("活动类型："+t._s(t.getTypeName(t.detail.type)))]),t._v(" "),i("li",[t._v("活动对象："+t._s(t.objectType(t.detail.objectType)))]),t._v(" "),i("li",[i("span",[t._v("活动范围：")]),t._v(" "),i("p",["0"==t.isBrand?[t._v(t._s(t.shopList.name))]:t._e(),t._v(" "),"1"==t.isBrand?[t._v(t._s(t.filtShop(t.detail.shopIds)))]:t._e()],2)]),t._v(" "),i("li",[t._v("发起人 ：  "+t._s(t.detail.createUid))])])]),t._v(" "),i("div",{staticClass:"line"}),t._v(" "),i("div",{staticClass:"right"},[i("ul",[t.detail.coupons&&t.detail.coupons.length>=1?i("li",[i("span",[t._v("权益内容：")]),t._v(" "),i("p",[t._l(t.detail.coupons,function(e,i){return[t._v("\n\t\t\t\t\t\t\t"+t._s(e.name)+"("+t._s(e.num)+"张 "+t._s(t.judgeDiscount(e.type))+"\n\t\t\t\t\t\t\t"),1==e.type||2==e.type?[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.param)+"元\n\t\t\t\t\t\t\t")]:t._e(),t._v(" "),3==e.type||4==e.type?[t._v("\n\t\t\t\t\t\t\t\t打"+t._s(parseInt(e.param)/10)+"折\n\t\t\t\t\t\t\t")]:t._e(),t._v(" "),5==e.type?[t._v("\n\t\t\t\t\t\t\t\t赠\n\t\t\t\t\t\t\t")]:t._e(),t._v("\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t"),i!=t.detail.coupons.length-1?[t._v("\n\t\t\t\t\t\t\t\t、\n\t\t\t\t\t\t\t")]:t._e()]})],2)]):i("li",[i("span",[t._v("权益内容：")]),t._v(" "),i("p",[t._v("无")])]),t._v(" "),i("li",[t._v("活动期限："+t._s(t.ifActive(t.detail.limit)))]),t._v(" "),t.detail.explain&&t.detail.explain.length>=1?i("li",[t._v("活动说明："+t._s(t.detail.explain))]):i("li",[t._v("活动说明：无")])])])]),t._v(" "),i("div",{staticClass:"filter"},[i("calendar",{attrs:{time:t.startTime,format:"yyyy年MM月dd日"},on:{emit:t.startTimeChange}}),t._v(" "),i("calendar",{attrs:{time:t.endTime,format:"yyyy年MM月dd日"},on:{emit:t.endTimeChange}}),t._v(" "),i("div",{staticClass:"days"},[t._v("\n\t\t\t已选择 "+t._s(t.selectDays)+" 天\n\t\t")]),t._v(" "),i("div",{staticClass:"search-box"},[i("span",{staticClass:"yellow",on:{click:t.getDetail}},[t._v("搜索")]),t._v(" "),i("span",{staticClass:"gray",on:{click:t.reset}},[t._v("重置")])]),t._v(" "),t._m(0)],1),t._v(" "),i("div",{staticClass:"list"},[i("div",{staticClass:"head"},[t._v("\n\t\t\t共 "+t._s(t.selectDays)+" 日\n\t\t")]),t._v(" "),i("div",{staticClass:"title"},[i("span"),t._v(" "),t._l(t.salesNumList,function(e,s){return i("span",{key:s},[t._v(t._s(t.formatTime(e.time)))])})],2),t._v(" "),i("ul",[i("li",[i("span",[t._v("当日核销量")]),t._v(" "),t._l(t.salesNumList,function(e,s){return i("span",{key:s},[t._v(t._s(e.count))])})],2)])])])},s,!1,null,"6788fcc8",null);e.default=o.exports},c480:function(t,e,i){"use strict";var s=i("ea3f");i.n(s).a},ea3f:function(t,e,i){},fdd3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAASCAYAAAC9+TVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTNEMTRBQjQ3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTNEMTRBQjU3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1M0QxNEFCMjdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1M0QxNEFCMzdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoJwRHcAAAF1SURBVHjapNRPKARRHMDx2bGsEiUXB5JEDubktiWlxHUl5eCmlJSDPyfkTykOJOWwxz1ISRxsCUURF21pDi5ulIQD7Zbb+L76jZ7Xm92DV5/27e+9+c37O7EgCJz/lrjv+/r/VsxjCAlL/xOs4TIMeJ7nuFqHETzIbyLipf24wLIeDJMMI4Myy4NqvosYQE5iarTrv9NBA3aLTPkaS1KvwJ7UZ3COUzWSzRLr1oVBtGPaaEuzprG4dLCVPI7xhgl0W/o0oTcekeBM5p/FlcTeUWfpm3QtwWfZgTHUS6wa5REvbLQlqcUqbrEvsQ3URCRxbUmqtHPjyGhGiyz8qxvRsIUPqW9r58VWcirJjRH8xoLUe2T3dvAZsYNZlWTSaDjAl9QLmNMW1yxT3J2CSnKHFa2hGS1oQ4eMZNxyJdQZSofH3pHhV8pRTuKxxCk+Qsq8gKrMyiW7L/Lwk0w/9ed7YnQ6FH3oVAdJpvECX74neTPzjwADADrTSFI39Bw5AAAAAElFTkSuQmCC"}}]);