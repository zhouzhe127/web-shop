(window.webpackJsonp=window.webpackJsonp||[]).push([["breaks_coupon"],{"394a":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjUwOEQyNTZCQTRCRTExRTZCNUU0RjY1REI2NkY3ODg0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjUwOEQyNTZDQTRCRTExRTZCNUU0RjY1REI2NkY3ODg0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTA4RDI1NjlBNEJFMTFFNkI1RTRGNjVEQjY2Rjc4ODQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTA4RDI1NkFBNEJFMTFFNkI1RTRGNjVEQjY2Rjc4ODQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7or2pHAAAAc0lEQVR42mLcvHnzDgYGBncG/GAXE5AoBeK/eBSB5EpBCi8D8QI8ChcC8SUmKKcWiL9gUfQViGtADJjC50Dcg0VhD1QOrhAm+AyJD1LQDeMwoVlTi8SvgYphKGSAeuoSFC9ElmBBU/gPiEuAmBE9yAACDAATAxqU6+dAOgAAAABJRU5ErkJggg=="},"443e":function(t,e,i){"use strict";var s=i("a157");i.n(s).a},"7f53":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("div",{attrs:{id:"breakCoupon"}},[s("div",{staticClass:"type"},[t._l(t.goodlist,function(e,i){return[s("div",{key:i,class:{selected:t.typeId==i},on:{click:function(s){t.tabTypes(e,i)}}},[t._v(t._s(e.name)+"\n\t\t\t\t")])]})],2),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"fl"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.couponName,expression:"couponName"}],staticClass:"inp",attrs:{maxlength:"20",placeholder:"请输入优惠券名称"},domProps:{value:t.couponName},on:{input:function(e){e.target.composing||(t.couponName=e.target.value)}}})])]),t._v(" "),"3"==t.ischain?[t._m(2),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"fl"},[s("div",{staticClass:"buttons",on:{click:t.openShopWin}},[s("img",{attrs:{src:i("8e35")}}),t._v(" 选择门店\n\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"associated"},[t._v("\n\t\t\t\t\t\t共关联"+t._s(t.getArrLength("selectShops"))+"家门店\n\t\t\t\t\t")])])])]:t._e(),t._v(" "),"0"==t.typeId?[t._m(3),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"fl"},[s("div",{staticClass:"buttons",on:{click:t.openGoodsWindow}},[s("img",{attrs:{src:i("8e35")}}),t._v(" 选择菜品\n\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"associated"},[t._v("\n\t\t\t\t\t\t共关联商品"+t._s(t.getArrLength("selectGoods"))+"份，套餐"+t._s(t.getArrLength("selectPackages"))+"份\n\t\t\t\t\t")])])])]:t._e(),t._v(" "),1==t.typeId?[t._m(4),t._v(" "),s("div",{staticClass:"right"},t._l(t.compulsoryCreditsList,function(e,i){return s("section",{key:i,staticClass:"fl reduce"},[s("span",{class:{sign:t.compulsoryCredits==i},on:{click:function(s){t.changecompulsoryCredits(e,i)}}},[t._v(t._s(e.name))])])}))]:t._e(),t._v(" "),t._m(5),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"fl creditamount"},[s("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:t.deratePrice,expression:"deratePrice",modifiers:{trim:!0,number:!0}}],staticClass:"input reduceamount",attrs:{placeholder:"请输入减免金额",maxlength:"6"},domProps:{value:t.deratePrice},on:{input:function(e){e.target.composing||(t.deratePrice=t._n(e.target.value.trim()))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("div",{staticClass:"yuan"},[t._v("\n\t\t\t\t\t元\n\t\t\t\t")])])]),t._v(" "),t._m(6),t._v(" "),s("div",{staticClass:"right"},t._l(t.validList,function(e,i){return s("section",{key:i,staticClass:"fl reduce"},[s("span",{class:{sign:t.validType.index==i},on:{click:function(s){t.changevalidType(e,i)}}},[t._v(t._s(e.name))])])})),t._v(" "),s("div",{staticClass:"left "}),t._v(" "),0==t.validType.index?s("div",{staticClass:"right"},[s("div",{staticClass:"line",staticStyle:{"text-align":"left"}},[t._v("\n\t\t\t\t领券后\n\t\t\t\t"),s("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:t.validType.time,expression:"validType.time",modifiers:{trim:!0,number:!0}}],staticClass:"input couponinp",attrs:{maxlength:"3"},domProps:{value:t.validType.time},on:{input:function(e){e.target.composing||t.$set(t.validType,"time",t._n(e.target.value.trim()))},blur:function(e){t.$forceUpdate()}}}),t._v(" 日内有效\n\t\t\t")])]):t._e(),t._v(" "),1==t.validType.index?s("div",{staticClass:"right",staticStyle:{"padding-left":"10px"}},[s("div",{staticClass:"cleander"},[s("div",{staticClass:"cleander_o",on:{click:t.showCalendar}},[s("div",{staticClass:"cleander_t"},[t._v(t._s(t.transformDate(t.validType.startTime)))]),t._v(" "),s("div",{staticClass:"cleander_f"},[t._v("\n\t\t\t\t\t\t至\n\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"cleander_s"},[t._v(t._s(t.transformDate(t.validType.endTime)))])]),t._v(" "),t.isShowCa?s("can-multi",{attrs:{sideStart:t.validType.startTime,sideEnd:t.validType.endTime},on:{closeCan:function(){t.isShowCa=!1},castTime:t.getAddAlltime}}):t._e()],1),t._v(" "),s("div",{staticClass:"triangle",on:{click:t.showCalendar}},[s("img",{attrs:{src:i("394a")}})]),t._v(" "),s("div",{staticClass:"foday"},[t._v("\n\t\t\t\t共"+t._s(t.getValidDay())+"天\n\t\t\t")])]):t._e(),t._v(" "),t._m(7),t._v(" "),s("div",{staticClass:"right",staticStyle:{"text-align":"left","padding-left":"10px"}},[s("select-btn",{attrs:{name:t.validTime,sorts:t.validTimeList.map(function(t){return t.name}),width:190},on:{selOn:t.selexpirationTime}})],1),t._v(" "),t._m(8),t._v(" "),s("div",{staticClass:"fl clearfix",staticStyle:{"text-align":"left","padding-left":"10px"}},[s("use-time",{attrs:{useDate:t.useDate},on:{getTime:t.getResult}})],1),t._v(" "),t._m(9),t._v(" "),s("div",{staticClass:"right"},t._l(t.useThresholdList,function(e,i){return s("section",{key:i,staticClass:"fl reduce"},[s("span",{class:{sign:t.useThresholdId==i},on:{click:function(s){t.changeuseThreshold(e,i)}}},[t._v(t._s(e.name))])])})),t._v(" "),1==t.typeId?[t._m(10),t._v(" "),s("div",{staticClass:"right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.maxCeiling,expression:"maxCeiling"}],staticClass:"fl",staticStyle:{width:"149px",height:"36px",padding:"0","border-color":"#999","text-indent":"10px",outline:"none","margin-left":"10px"},attrs:{type:"text",maxlength:"2",placeholder:"0"},domProps:{value:t.maxCeiling},on:{input:function(e){e.target.composing||(t.maxCeiling=e.target.value)}}}),t._v(" "),s("div",{staticStyle:{border:"1px solid #999",width:"38px",float:"left",height:"38px","border-left":"none","text-align":"center","line-height":"38px"}},[t._v("张")])])]:t._e(),t._v(" "),1==t.useThresholdId?[s("div",{staticClass:"left "}),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"fl creditamount"},[s("input",{directives:[{name:"model",rawName:"v-model.trim.number",value:t.threshold,expression:"threshold",modifiers:{trim:!0,number:!0}}],staticClass:"input reduceamount",attrs:{placeholder:"请输入金额",maxlength:"6"},domProps:{value:t.threshold},on:{input:function(e){e.target.composing||(t.threshold=t._n(e.target.value.trim()))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),s("div",{staticClass:"yuan"},[t._v("\n\t\t\t\t\t\t元\n\t\t\t\t\t")])])])]:t._e(),t._v(" "),t._m(11),t._v(" "),s("div",{staticClass:"fl",staticStyle:{width:"100%"}}),t._v(" "),t._m(12),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"fl note"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.annotation,expression:"annotation"}],staticClass:"input",attrs:{placeholder:"20字",maxlength:"20"},domProps:{value:t.annotation},on:{input:function(e){e.target.composing||(t.annotation=e.target.value)}}})])]),t._v(" "),t._m(13),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"fl useinformation"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.useKnow,expression:"useKnow"}],staticClass:"describe",attrs:{maxlength:"150"},domProps:{value:t.useKnow},on:{input:function(e){e.target.composing||(t.useKnow=e.target.value)}}}),t._v(" "),t._m(14)])]),t._v(" "),s("div",{staticClass:"save-coupon"},[s("a",{staticClass:"yellow",staticStyle:{width:"200px"},attrs:{href:"javascript:void(0);"},on:{click:t.getSendInfo}},[t._v("保存")])]),t._v(" "),t.shopWin?s("coupon-shop-win",{attrs:{selectShops:t.selectShops,shopList:t.shopList},on:{closeShopWin:t.closeShopWin}}):t._e(),t._v(" "),t.goodsWin?s("goodListWin",{attrs:{goodsIds:t.selectGoods,isGoods:!0,packages:t.selectPackages,goInName:"isCoupon"},on:{goodListWin:t.closeGoodWin}}):t._e()],2)])},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line"},[e("div",{staticClass:"title"},[this._v("主要信息")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left "},[e("div",{staticClass:"text required"},[this._v("\n\t\t\t\t优惠券名称\n\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left "},[e("div",{staticClass:"text required"},[this._v("\n\t\t\t\t\t适用门店\n\t\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left "},[e("div",{staticClass:"text required"},[this._v("\n\t\t\t\t\t关联商品\n\t\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left "},[e("div",{staticClass:"text required"},[this._v("\n\t\t\t\t\t强制减免\n\t\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left "},[e("div",{staticClass:"text required"},[this._v("\n\t\t\t\t减免金额\n\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left "},[e("div",{staticClass:"text required"},[this._v("\n\t\t\t\t券有效期\n\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("div",{staticClass:"text"},[this._v("\n\t\t\t\t领取生效\n\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("div",{staticClass:"text"},[this._v("\n\t\t\t\t使用时段\n\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left "},[e("div",{staticClass:"text required"},[this._v("\n\t\t\t\t使用门槛\n\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left "},[e("div",{staticClass:"text required"},[this._v("\n\t\t\t\t\t最大使用上限\n\t\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"set-line",staticStyle:{float:"left"}},[e("div",{staticClass:"title"},[this._v("其他设置")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left "},[e("div",{staticClass:"text",staticStyle:{"margin-right":"10px"}},[this._v("\n\t\t\t\t备注\n\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left "},[e("div",{staticClass:"text",staticStyle:{"margin-right":"10px"}},[this._v("\n\t\t\t\t使用须知\n\t\t\t")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl describetip"},[e("div",{staticClass:"fl tips"},[e("img",{attrs:{src:i("bdf6")}})]),this._v(" "),e("div",{staticClass:"fl"},[this._v("\n\t\t\t\t\t\t限制150字\n\t\t\t\t\t")])])}];s._withStripped=!0;var n=i("05dd"),l=i("f6ce"),o=i("81a2"),r=i("bbb9");var c={data:function(){return{editCoupon:!1,ischain:"",goodlist:[{typeId:0,name:"单品减免"},{typeId:1,name:"整单减免"}],typeId:0,couponName:"",shopWin:!1,goodsWin:!1,isShowCa:!1,selectShops:[],selectGoods:[],selectPackages:[],compulsoryCreditsList:[{compulsoryCredits:"0",name:"否"},{compulsoryCredits:"1",name:"是"}],compulsoryCredits:"0",deratePrice:"",validList:[{validType:"0",name:"相对时间"},{validType:"1",name:"指定时间"}],validType:{index:0,time:"",startTime:(new Date).getTime(),endTime:(new Date).getTime()},validTimeList:[{name:"领取后即刻生效",id:0},{name:"领取1小时后生效",id:1},{name:"领取2小时后生效",id:2},{name:"领取3小时后生效",id:3},{name:"领取6小时后生效",id:6},{name:"领取12小时后生效",id:12},{name:"领取24小时后生效",id:24}],validTimeId:0,validTime:"领取后即刻生效",useDate:{list:["不设限制","指定每周使用时段","指定每月使用日期和时段 "],index:0,week:[],month:[],show:!1},useThresholdList:[{name:"不设限制",id:0},{name:"指定门槛",id:1}],useThresholdId:0,threshold:"",annotation:"",useKnow:"",maxCeiling:0,shopList:[]}},props:{couponDetail:Object},mounted:function(){if(this.ischain=l.a.session("userShop").currentShop.ischain,this.shopList=l.a.session("shopList"),!r.a.isEmptyObject(this.couponDetail)){var t=this.couponDetail;this.editCoupon=!0,this.typeId=t.type-1,this.couponName=t.name,t.shopIds&&t.shopIds.length>0&&(this.selectShops=t.shopIds.split(",")),t.gids&&t.gids.length>0&&null!=t.gids&&0!=t.gids&&(this.selectGoods=t.gids.split(",")),t.pids&&t.pids.length>0&&null!=t.pids&&0!=t.pids&&(this.selectPackages=t.pids.split(",")),this.deratePrice=t.param,this.compulsoryCredits=t.isDiscount,this.validType.index=t.validityType,0==t.validityType?this.validType.time=t.relativeTime:1==t.validityType&&(this.validType.startTime=1e3*(t.startTime-0),this.validType.endTime=1e3*(t.endTime-0)),this.useDate.index=t.periodSel,1==t.periodSel&&t.useTime&&t.useTime.list&&(this.useDate.week=this.changeArrToNeed(t.useTime.list,"w")),2==t.periodSel&&t.useTime&&t.useTime.list&&(this.useDate.month=this.changeArrToNeed(t.useTime.list,"m")),this.validTimeId=t.delayHours;var e=!0,i=!1,s=void 0;try{for(var a,n=this.validTimeList[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var o=a.value;o.id==this.validTimeId&&(this.validTime=o.name)}}catch(t){i=!0,s=t}finally{try{!e&&n.return&&n.return()}finally{if(i)throw s}}0!=t.lowestConsume&&(this.useThresholdId=1,this.threshold=t.lowestConsume),this.annotation=t.annotation,this.useKnow=t.useKnow}},components:{"can-multi":function(){return i.e("can_multi").then(i.bind(null,"742e"))},"coupon-shop-win":function(){return i.e("coupon_shop_win").then(i.bind(null,"9299"))},selectBtn:function(){return i.e("select_btn").then(i.bind(null,"3d41"))},"use-time":function(){return i.e("use_time").then(i.bind(null,"5b788"))},goodListWin:function(){return i.e("good_list_win").then(i.bind(null,"8bf4"))}},methods:{tabTypes:function(t,e){this.typeId=e},openShopWin:function(){this.shopWin=!0},closeShopWin:function(t){this.shopWin=!1,t&&(this.selectShops=t.selectShops)},openGoodsWindow:function(){if(0==this.selectShops.length&&"3"==this.ischain)return this.valiData("请先选择店铺","提示信息"),!1;this.goodsWin=!0},closeGoodWin:function(t,e){if("ok"==t){if(e.goodArr.length+e.packArr.length>5)return this.valiData("商品和套餐最多一共只能选择5个","提示信息"),!1;this.selectGoods=e.goodArr,this.selectPackages=e.packArr}this.goodsWin=!1},getArrLength:function(t){return this[t].length},changecompulsoryCredits:function(t,e){this.compulsoryCredits=e},changeuseThreshold:function(t,e){this.useThresholdId=e},changevalidType:function(t,e){this.validType.index=e},showCalendar:function(){this.isShowCa=!this.isShowCa},transformDate:function(t){return r.a.format(new Date(t),"yyyy-MM-dd")},getValidDay:function(){return Math.floor((this.validType.endTime-this.validType.startTime)/864e5+1)},getAddAlltime:function(t){this.validType.startTime=t.startTime,this.validType.endTime=t.endTime,this.isShowCa=!1},selexpirationTime:function(t){this.validTime=this.validTimeList[t].name,this.validTimeId=this.validTimeList[t].id},getResult:function(t){this.useDate=t},doThrowWinGoods:function(t,e){"ok"==t&&(this.selectGoods=e.goodArr,this.selectPackages=e.packArr),this.goodsWin=!1},valiData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"提示信息",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"alert";this.$store.commit("setWin",{winType:i,title:e,content:t})},arrToString:function(t){for(var e="",i=0;i<t.length;i++)e+=t[i],i<t.length-1&&(e+=",");return e},changeArr:function(t,e){for(var i=[],s=0;s<t.length;s++){var a={};"w"==e?a.week=t[s].week.sort(function(t,e){return t-e}):"m"==e&&(a.month=t[s].month.sort(function(t,e){return t-e})),a.isNextDay=t[s].isNextDay;var n=t[s].startslotH+":"+t[s].startslotM,l=t[s].endslotH+":"+t[s].endslotM;a.startslot=n,a.endslot=l,i.push(a)}return i},changeArrToNeed:function(t,e){for(var i=[],s=0;s<t.length;s++){var a={};a.startslotH=t[s].startslot.split(":")[0],a.startslotM=t[s].startslot.split(":")[1],a.endslotH=t[s].endslot.split(":")[0],a.endslotM=t[s].endslot.split(":")[1],a.isNextDay=t[s].isNextDay,"w"==e?a.week=t[s].week:"m"==e&&(a.month=t[s].month),i.push(a)}return i},checkData:function(){var t=/^[0-9]*$/,e=/^\d+(\.\d+)?$/;if(!n.a.checkData({couponName:{cond:"$$.trim() !== '' && $$.length<=20",pro:"优惠券名称不能为空且不能超过20个字"}},this))return!1;if("3"==this.ischain&&0==this.selectShops.length)return this.valiData("请选择优惠券的关联店铺"),!1;if(0==this.typeId&&0==this.selectGoods.length&&0==this.selectPackages.length)return this.valiData("请选择关联商品或套餐"),!1;if(""==this.deratePrice||this.deratePrice-0<0||!e.test(this.deratePrice))return this.valiData("请填写非负数(大于0)的减免金额"),!1;if(0==this.validType.index){if(""==this.validType.time.toString().trim())return this.valiData("请输入券有效期"),!1;if(!t.test(this.validType.time))return this.valiData("券有效期只能是整数"),!1}var i=[],s="";if(0!=this.useDate.index){1==this.useDate.index?(i=this.useDate.week,s="使用时段请选择日期(周)"):2==this.useDate.index&&(i=this.useDate.month,s="使用时段请选择日期(月)");for(var a=0;a<i.length;a++){if(1==this.useDate.index){if(0==i[a].week.length)return this.valiData(s),!1}else if(2==this.useDate.index&&0==i[a].month.length)return this.valiData(s),!1;if(""==i[a].startslotH.toString().trim()||""==i[a].startslotM.toString().trim()||""==i[a].endslotH.toString().trim()||""==String(i[a].endslotM).trim())return this.valiData("使用时段的时间不能为空"),!1;if(!(t.test(i[a].startslotH)&&t.test(i[a].startslotM)&&t.test(i[a].endslotH)&&t.test(i[a].endslotM)))return this.valiData("使用时段的时间只能是整数"),!1;if(i[a].startslotH>23||i[a].startslotM>59||i[a].endslotH>23||i[a].endslotM>59)return this.valiData("请输入正确的使用时间"),!1;if(!i[a].isNextDay&&(i[a].startslotH>i[a].endslotH||i[a].startslotH==i[a].endslotH&&i[a].startslotM>i[a].endslotM))return this.valiData("使用时段里，未点击隔天,结束时间不能小于开始时间"),!1}}if(1==this.useThresholdId){if(""==this.threshold.toString().trim())return this.valiData("指定门槛金额不能为空"),!1;if(this.threshold-0<0)return this.valiData("指定门槛金额不能小于0"),!1;if(!e.test(this.threshold))return this.valiData("指定门槛金额只能是数字"),!1}return this.annotation.length>20?(this.valiData("备注字数不能大于20"),!1):!(this.useKnow.length>150)||(this.valiData("使用须知字数不能大于150"),!1)},getSendInfo:function(){if(this.checkData()){var t={};"3"==this.ischain?t.shopIds=this.arrToString(this.selectShops):t.shopIds=l.a.session("userShop").currentShop.id,t.gids=this.arrToString(this.selectGoods),t.pids=this.arrToString(this.selectPackages),t.name=this.couponName,t.param=this.deratePrice,t.delayHours=this.validTimeId,t.annotation=this.annotation,t.useKnow=this.useKnow,t.validityType=this.validType.index,t.periodSel=this.useDate.index,t.isDiscount=this.compulsoryCredits,t.useLimit=this.maxCeiling,t.billPrice="",t.reckoningPrice="",t.tastePrice="",0==this.useThresholdId?t.lowestConsume=0:t.lowestConsume=this.threshold;var e={};1==this.useDate.index&&(e.type="week",e.list=this.changeArr(this.useDate.week,"w")),2==this.useDate.index&&(e.type="month",e.list=this.changeArr(this.useDate.month,"m")),e=JSON.stringify(e),t.useTime=e,0==this.validType.index?t.relativeTime=this.validType.time:(t.startTime=parseInt(this.validType.startTime/1e3),t.endTime=parseInt(this.validType.endTime/1e3)),0==this.typeId?t.type=1:t.type=2,r.a.isEmptyObject(this.couponDetail)||(t.id=this.couponDetail.id),this.operateCoupons(t)}},operateCoupons:function(t){var e,i=this;return(e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i.editCoupon){e.next=7;break}return e.next=3,o.a.addCoupon({data:t});case 3:i.valiData("添加成功"),i.$router.push("/admin/addCoupon"),e.next=11;break;case 7:return e.next=9,o.a.editCoupon({data:t});case 9:i.$emit("changeMnage"),i.valiData("修改成功");case 11:case"end":return e.stop()}},e,i)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function s(a,n){try{var l=t[a](n),o=l.value}catch(t){return void i(t)}if(!l.done)return Promise.resolve(o).then(function(t){s("next",t)},function(t){s("throw",t)});e(o)}("next")})})()}}},d=(i("443e"),i("7610")),h=Object(d.a)(c,s,a,!1,null,"4d33ce3f",null);h.options.__file="src\\module\\marketing_tools\\new_coupons\\breaks_coupon.vue";e.default=h.exports},"8e35":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAyRTk3N0U3NjkwOTExRTY4MzI2OEU1NkY3Qjg2QTA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAyRTk3N0U4NjkwOTExRTY4MzI2OEU1NkY3Qjg2QTA3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDJFOTc3RTU2OTA5MTFFNjgzMjY4RTU2RjdCODZBMDciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDJFOTc3RTY2OTA5MTFFNjgzMjY4RTU2RjdCODZBMDciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7A3duJAAAANElEQVR42mL6//8/Ax6MDPCpY2BioBIYNYiOBrEA8X8i1f4fel5jJNI7jKPpaNQgHAAgwAAuLjvvigxAWAAAAABJRU5ErkJggg=="},a157:function(t,e,i){},bdf6:function(t,e,i){t.exports=i.p+"images/alert.cbc28c67.jpg"}}]);