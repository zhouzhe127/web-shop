(window.webpackJsonp=window.webpackJsonp||[]).push([["output_select_goods_ware"],{"6dab":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"output-select-goods"}},[t._m(0),t._v(" "),s("div",[s("div",{staticClass:"table-select"},[s("div",{staticClass:"select-title"},[t._v("\n\t\t\t\t\t货品信息\n\t\t\t\t\t"),s("span",{staticClass:"circle"}),t._v(" 共\n\t\t\t\t\t"),s("span",{staticClass:"select-num"},[t._v(t._s(t.sleList.length))]),t._v(" 个条目\n\t\t\t\t\t"),s("a",{staticClass:"packUp",on:{click:function(e){t.show=!t.show}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.show?"收起":"展开")+"\n\t\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"select-body"},[t._m(1),t._v(" "),t._l(t.sleList,function(e,i){return t.show?s("div",{key:i,staticClass:"select-item"},[s("div",{staticClass:"select-row"},[s("li",{staticStyle:{color:"#ff3c04"},on:{click:function(s){t.delList(e,i)}}},[t._v("删除")]),t._v(" "),s("li",i<9?[t._v(t._s("0"+(i+1)))]:[t._v(t._s(i+1))]),t._v(" "),s("li",[t._v(t._s(e.goodsName))]),t._v(" "),s("li",[t._v(t._s(e.barCode))]),t._v(" "),s("li",[t._v(t._s(e.price))]),t._v(" "),s("li",[t._v(t._s(t.typeList[Number(e.type)+1]))]),t._v(" "),s("li",[t._v(t._s(e.surplus)+t._s(e.unit))]),t._v(" "),s("li",[t._v(t._s(e.batch))])])]):t._e()}),t._v(" "),0==t.sleList.length?s("div",{attrs:{id:"emptyData"}},[t._v("-----暂无条目-----")]):t._e()],2)]),t._v(" "),s("div",{staticClass:"search-module"},[s("div",{staticClass:"inline-box"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.goodsName,expression:"goodsName"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入商品名"},domProps:{value:t.goodsName},on:{input:function(e){e.target.composing||(t.goodsName=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.barCode,expression:"barCode"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入条形码"},domProps:{value:t.barCode},on:{input:function(e){e.target.composing||(t.barCode=e.target.value)}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.secBarCode,expression:"secBarCode"}],staticClass:"search-input",attrs:{type:"text",placeholder:"请输入副条形码"},domProps:{value:t.secBarCode},on:{input:function(e){e.target.composing||(t.secBarCode=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"inline-box search-select"},[s("select-btn",{ref:"select",attrs:{sorts:t.typeList,name:t.allGoods},on:{selOn:t.selectList}})],1),t._v(" "),s("div",{staticClass:"inline-box setspeen"},[s("div",{staticClass:"blue filter",on:{click:t.search}},[t._v("筛选")]),t._v(" "),s("div",{staticClass:"gray reset",on:{click:t.reset}},[t._v("重置")])])]),t._v(" "),s("div",{staticClass:"table-select"},[s("div",{staticClass:"select-title"},[t._v("\n\t\t\t\t\t商品列表\n\t\t\t\t\t"),s("span",{staticClass:"circle"}),t._v(" 共\n\t\t\t\t\t"),s("span",{staticClass:"select-num"},[t._v(t._s(t.listTotal))]),t._v(" 个条目\n\t\t\t\t")]),t._v(" "),s("div",{staticClass:"select-body"},[t._m(2),t._v(" "),t._l(t.goodsdetail,function(e,i){return s("div",{key:i,staticClass:"select-item",class:{active:e.select}},[s("div",{staticClass:"select-row"},[e.select?s("li",[t._v("已添加")]):t._e(),t._v(" "),!e.select&&e.surplus>0?s("li",{staticClass:"add",on:{click:function(s){t.addList(e,i)}}},[t._v("添加")]):t._e(),t._v(" "),e.surplus<=0?s("li",{staticClass:"surplus-empty",on:{click:t.addEmpty}},[t._v("添加")]):t._e(),t._v(" "),i+1+10*(t.page-1)<10?s("li",[t._v(t._s("0"+(i+1)))]):s("li",[t._v(t._s(i+1+10*(t.page-1)))]),t._v(" "),s("li",[t._v(t._s(e.goodsName))]),t._v(" "),s("li",[t._v(t._s(e.barCode))]),t._v(" "),s("li",[t._v(t._s(e.price))]),t._v(" "),s("li",[t._v(t._s(t.typeList[Number(e.type)+1]))]),t._v(" "),s("li",[t._v(t._s(e.surplus)+t._s(e.unit))]),t._v(" "),s("li",[t._v(t._s(e.batch))])])])}),t._v(" "),0==t.goodsdetail.length?s("div",{attrs:{id:"emptyData"}},[t._v("-----暂无条目-----")]):t._e()],2)]),t._v(" "),s("div",{staticClass:"page-box"},[s("pageBtn",{attrs:{isNoPaging:!1,isNoJump:!0,total:t.pageTotal,page:t.page},on:{pageNum:t.pageChange}})],1)])])};i._withStripped=!0;var a=s("81a2"),n=s("bbb9");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function i(a,n){try{var r=e[a](n),o=r.value}catch(t){return void s(t)}if(!r.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})}}var o={data:function(){return{page:1,selType:-1,goodsdetail:"",typeList:["全部类型","普通商品","称重商品"],allGoods:"全部类型",pageTotal:0,sleList:[],listTotal:0,goodsName:"",barCode:"",secBarCode:"",num:10,veri:["goodsName","barCode","secBarCode"],sinSle:[],show:!0}},props:["sleCommodity","wid","addBtn","dstShopId","srcShopId","shopId"],methods:{init:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.whGetInventoryGoodsList({data:{wid:t.wid?t.wid:"",type:t.selType,page:t.page,num:t.num,shopId:t.shopId}});case 2:s=e.sent,t.listTotal=s.count,t.goodsdetail=s.list,t.pageTotal=s.total,t.checkSle();case 7:case"end":return e.stop()}},e,t)}))()},addEmpty:function(){this.alert("该商品库存数量不足")},checkIn:function(){var t=[];for(var e in this.sleCommodity)this.sleCommodity[e].noPrev?this.sinSle.push(this.sleCommodity[e]):t.push(this.sleCommodity[e]);this.sleList=t},alert:function(t,e){this.$store.commit("setWin",{title:e,content:t})},filterGoodsNum:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.whGetGoodsExactly({data:{wid:t.wid,goodsName:t.goodsName,barCode:t.barCode,secBarCode:t.secBarCode,type:t.selType,shopId:t.dstShopId}});case 2:s=e.sent,t.goodsdetail=s,t.pageTotal=1,t.listTotal=s.length?s.length:0,t.checkSle();case 7:case"end":return e.stop()}},e,t)}))()},selectList:function(t){this.selType=t-1;var e=0,s=!0,i=!1,a=void 0;try{for(var n,r=this.veri[Symbol.iterator]();!(s=(n=r.next()).done);s=!0){""==this[n.value].trim()&&e++}}catch(t){i=!0,a=t}finally{try{!s&&r.return&&r.return()}finally{if(i)throw a}}e>=3?this.init():this.filterGoodsNum()},addList:function(t){var e=this;return r(regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.checkGoods(t);case 2:s.sent&&(t.select=!0,e.sleList.push(t));case 4:case"end":return s.stop()}},s,e)}))()},checkSle:function(){var t=!0,e=!1,s=void 0;try{for(var i,a=this.goodsdetail[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.select=!1}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}var n=!0,r=!1,o=void 0;try{for(var l,c=this.goodsdetail[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var v=l.value,d=!0,u=!1,_=void 0;try{for(var p,h=this.sleList[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var m=p.value;v.gid==m.gid&&(v.select=!0)}}catch(t){u=!0,_=t}finally{try{!d&&h.return&&h.return()}finally{if(u)throw _}}var f=!0,g=!1,y=void 0;try{for(var C,b=this.sinSle[Symbol.iterator]();!(f=(C=b.next()).done);f=!0){var w=C.value;v.gid==w.id&&(v.select=!0)}}catch(t){g=!0,y=t}finally{try{!f&&b.return&&b.return()}finally{if(g)throw y}}}}catch(t){r=!0,o=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}},delList:function(t,e){this.sleList.splice(e,1),t.select=!1,this.checkSle()},search:function(){var t=0,e=!0,s=!1,i=void 0;try{for(var a,n=this.veri[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){""==this[a.value].trim()&&t++}}catch(t){s=!0,i=t}finally{try{!e&&n.return&&n.return()}finally{if(s)throw i}}t>=3?this.init():this.filterGoodsNum()},reset:function(){this.page=1,this.goodsName="",this.barCode="",this.$refs.select.sortName="全部类型",this.$refs.select.selected=0,this.selType=-1,this.init()},pageChange:function(t){this.page=t.page,this.init()},checkGoods:function(t){var e=this;return r(regeneratorRuntime.mark(function s(){var i,n;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i={goods:[{goodsId:t.gid,itemName:t.goodsName,unit:t.unit,type:t.type,barCode:t.barCode}]},s.next=3,a.a.invoic_getMatchItemList({data:{itemList:i,srcShopId:e.srcShopId,dstShopId:e.dstShopId}});case 3:if(!((n=s.sent).goods&&n.goods.length>0)){s.next=8;break}return s.abrupt("return",!0);case 8:e.alert("出入货商品不匹配");case 9:case"end":return s.stop()}},s,e)}))()}},mounted:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.sleCommodity&&(t.sleList=n.a.deepCopy(t.sleCommodity)),t.$store.commit("setPageTools",[{name:"确定",className:["firstBtn wearhouse"],fn:function(){t.$store.commit("setPageTools",[]),t.$emit("select",t.sleList)}},{name:"取消",className:["abrogate"],fn:function(){t.$store.commit("setPageTools",[]),t.$emit("select",!1)}}]),t.init(),e.next=5,t.checkIn();case 5:case"end":return e.stop()}},e,t)}))()},components:{pageBtn:function(){return s.e("page_element").then(s.bind(null,"5921"))},selectBtn:function(){return s.e("select_btn").then(s.bind(null,"3d41"))}}},l=(s("7747"),s("6ceb")),c=Object(l.a)(o,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i"),this._v(" "),e("h3",[this._v("选择添加商品")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-head"},[s("li",[t._v("操作")]),t._v(" "),s("li",[t._v("序号")]),t._v(" "),s("li",[t._v("商品名")]),t._v(" "),s("li",[t._v("条形码")]),t._v(" "),s("li",[t._v("售价")]),t._v(" "),s("li",[t._v("商品类型")]),t._v(" "),s("li",[t._v("库存数量/重量")]),t._v(" "),s("li",[t._v("批次数量")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-head"},[s("li",[t._v("操作")]),t._v(" "),s("li",[t._v("序号")]),t._v(" "),s("li",[t._v("商品名")]),t._v(" "),s("li",[t._v("条形码")]),t._v(" "),s("li",[t._v("售价")]),t._v(" "),s("li",[t._v("商品类型")]),t._v(" "),s("li",[t._v("库存数量/重量")]),t._v(" "),s("li",[t._v("批次数量")])])}],!1,null,"bba3f0b0",null);c.options.__file="src\\module\\invoicing_system\\warehouse_manage\\output_select_goods_ware.vue";e.default=c.exports},"76ff":function(t,e,s){},7747:function(t,e,s){"use strict";var i=s("76ff");s.n(i).a}}]);