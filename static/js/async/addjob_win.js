(window.webpackJsonp=window.webpackJsonp||[]).push([["addjob_win"],{"675e":function(t,s,i){"use strict";var e=i("7ac3");i.n(e).a},"7ac3":function(t,s,i){},f431:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("win",{attrs:{align:"center",width:700,height:400,ok:t.okStyle},on:{winEvent:t.getWin}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),i("div",{attrs:{slot:"content",id:"tan"},slot:"content"},[t.isJob?i("div",{staticClass:"job"},[t.batch?i("div",{staticStyle:{width:"100%",height:"50px",overflow:"hidden","margin-top":"20px","margin-bottom":"20px"}},[i("a",{staticClass:"raduobtn",class:{selectbtn:1===t.jobType},attrs:{href:"javascript:void(0);"},on:{click:function(s){t.selectJobType(1)}}},[t._v("品牌职位")]),t._v(" "),i("a",{staticClass:"raduobtn",class:{selectbtn:0===t.jobType},attrs:{href:"javascript:void(0);"},on:{click:function(s){t.selectJobType(0)}}},[t._v("门店职位")])]):t._e(),t._v(" "),i("radio",{attrs:{list:t.jobList,index:t.index,name:"name"},on:{selOn:t.getRadio}}),t._v(" "),t.jobList[t.index]?i("h3",{staticClass:"selJobName"},[t._v("已选择:"+t._s(t.jobList[t.index].name))]):t._e()],1):i("div",{staticClass:"shop"},[i("div",{staticStyle:{width:"100%",height:"50px",overflow:"hidden","margin-top":"20px","margin-left":"20px"}},[i("a",{staticClass:"raduobtn",class:{selectbtn:-1===t.shopType},attrs:{href:"javascript:void(0);"},on:{click:function(s){t.selectShopType(-1)}}},[t._v("全部")]),t._v(" "),i("a",{staticClass:"raduobtn",class:{selectbtn:1===t.shopType},attrs:{href:"javascript:void(0);"},on:{click:function(s){t.selectShopType(1)}}},[t._v("直营店")]),t._v(" "),i("a",{staticClass:"raduobtn",class:{selectbtn:2===t.shopType},attrs:{href:"javascript:void(0);"},on:{click:function(s){t.selectShopType(2)}}},[t._v("加盟店")])]),t._v(" "),i("ul",t._l(t.showShopList,function(s,e){return i("li",{key:e,class:{active:s.selected},on:{click:function(i){t.selJob(s)}}},[t._v(t._s(s.shopName))])}))]),t._v(" "),t.isJob?t._e():i("div",{staticClass:"bottomSel"},[i("section",{staticClass:"isallselect",on:{click:function(s){t.allShops(0)}}},[t._v("取消全部")]),t._v(" "),i("section",{staticClass:"isallselect allselect",on:{click:function(s){t.allShops(1)}}},[t._v("选择全部")]),t._v(" "),i("h3",{staticStyle:{width:"160px",height:"40px","line-height":"40px",float:"right",color:"#FF9700"}},[t._v("已选择:"+t._s(t.selectNum)+"个")])])])])],1)};e._withStripped=!0;var o=i("81a2");function n(t){return function(){var s=t.apply(this,arguments);return new Promise(function(t,i){return function e(o,n){try{var h=s[o](n),l=h.value}catch(t){return void i(t)}if(!h.done)return Promise.resolve(l).then(function(t){e("next",t)},function(t){e("throw",t)});t(l)}("next")})}}var h={data:function(){return{title:"",list:[],index:-1,okStyle:{content:"下一步",style:{backgroundColor:"#F79337",color:"#fff"}},isJob:!0,isBrand:!0,shopType:-1,jobType:1,jobList:[],allJobList:[],shopList:[],showShopList:[],selectNum:0,jobInfo:{roleId:"",name:"",shopIds:[]},onIndex:-1}},props:["type","editJob","batch"],mounted:function(){"brand"==this.type?(this.editJob?this.title="修改品牌职位":this.title="选择品牌职位",this.isBrand=!0):"shop"==this.type?(this.editJob?this.title="修改门店职位":this.title="选择门店职位",this.isBrand=!1):this.batch&&(this.title="批量管理员工职位"),this.newGetJobInfoList()},methods:{getShopList:function(){var t=this;return n(regeneratorRuntime.mark(function s(){var i,e,n,h,l,a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,o.a.getShopList();case 2:for(i=s.sent,e=0;e<i.length;e++)i[e].selected=!1;if(t.shopList=i,t.showShopList=i,t.editJob){for(n=t.editJob.shopIds,h=0;h<t.shopList.length;h++)for(l=0;l<n.length;l++)n[l]==t.shopList[h].id&&(t.shopList[h].selected=!0);for(t.selectNum=0,a=0;a<t.shopList.length;a++)t.shopList[a].selected&&t.selectNum++}case 7:case"end":return s.stop()}},s,t)}))()},newGetJobInfoList:function(){var t=this;return n(regeneratorRuntime.mark(function s(){var i,e,n,h,l;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t.jobList=[],s.next=3,o.a.getUserRoleList();case 3:if(i=s.sent,e={roleId:0,name:"超级管理员",shopIds:[]},t.batch)for(t.allJobList=i,n=0;n<t.allJobList.length;n++)"1"===t.allJobList[n].type&&t.jobList.push(t.allJobList[n]);else for(h=0;h<i.length;h++)t.isBrand&&"1"===i[h].type?t.jobList.push(i[h]):!t.isBrand&&"0"===i[h].type&&i[h].id>=1e5&&t.jobList.push(i[h]);if(t.jobList.unshift(e),t.editJob){for(t.jobInfo=t.editJob,l=0;l<t.jobList.length;l++)t.jobInfo.roleId==t.jobList[l].id&&(t.index=l);0==t.jobInfo.roleId&&(t.index=0)}case 8:case"end":return s.stop()}},s,t)}))()},getWin:function(t){if(this.isJob){if("ok"==t){if(""==this.jobInfo.roleId)return this.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"请选择职位"}),!1;0!==this.index||0===this.index&&"shop"==this.type?(this.batch,this.title=this.title+"（"+this.jobInfo.name+"）适用门店",this.getShopList(),this.isJob=!1,this.okStyle.content="确定"):this.$emit("addJob",t,"admin",this.jobType)}this.$emit("addJob",t)}else{if("ok"==t){this.jobInfo.shopIds=[];for(var s=0;s<this.shopList.length;s++)this.shopList[s].selected&&this.jobInfo.shopIds.push(this.shopList[s].id);if(0==this.jobInfo.shopIds.length)return this.$store.commit("setWin",{title:"提示信息",winType:"alert",content:"请选择门店"}),!1;0===this.index&&"shop"==this.type&&(this.jobInfo.roleId="0")}var i={jobInfo:this.jobInfo,shopList:this.shopList};this.$emit("addJob",t,i,this.jobType)}},selectJobType:function(t){this.jobType=t,this.jobList=[],this.index=-1;for(var s=0;s<this.allJobList.length;s++)t==this.allJobList[s].type&&(1===t?this.jobList.push(this.allJobList[s]):0===t&&this.allJobList[s].id>=1e5&&this.jobList.push(this.allJobList[s]));this.jobList.unshift({roleId:0,name:"超级管理员",shopIds:[]})},isSelected:function(t){return t==this.onIndex},selectShopType:function(t){if(this.shopType=t,this.showShopList=[],-1===t)this.showShopList=this.shopList;else if(1===t)for(var s=0;s<this.shopList.length;s++)"1"==this.shopList[s].ischain&&this.showShopList.push(this.shopList[s]);else if(2===t)for(var i=0;i<this.shopList.length;i++)"2"==this.shopList[i].ischain&&this.showShopList.push(this.shopList[i])},selJob:function(t){t.selected=!t.selected,this.selectNum=0;for(var s=0;s<this.shopList.length;s++)this.shopList[s].selected&&this.selectNum++},shopSel:function(t){if(-1===this.shopType)for(var s=0;s<this.showShopList.length;s++)this.showShopList[s].selected=t;else if(1===this.shopType)for(var i=0;i<this.showShopList.length;i++)"1"==this.showShopList[i].ischain&&(this.showShopList[i].selected=t);else if(2===this.shopType)for(var e=0;e<this.showShopList.length;e++)"2"==this.showShopList[e].ischain&&(this.showShopList[e].selected=t)},allShops:function(t){if(0===t)this.shopSel(!1),this.selectNum=0;else{this.shopSel(!0),this.selectNum=0;for(var s=0;s<this.shopList.length;s++)this.shopList[s].selected&&this.selectNum++}},getRadio:function(t){this.index=t,-1!=t&&(this.jobInfo.roleId=this.jobList[t].id,this.jobInfo.name=this.jobList[t].name,this.okStyle.content="下一步"),0===t&&1===this.jobType&&(this.okStyle.content="确定")}},components:{win:function(){return i.e("win").then(i.bind(null,"f60a"))},radio:function(){return i.e("radio_btn").then(i.bind(null,"4dfe"))}}},l=(i("675e"),i("7610")),a=Object(l.a)(h,e,[],!1,null,"e845a15e",null);a.options.__file="src\\module\\brand_configuration\\addjob_win.vue";s.default=a.exports}}]);