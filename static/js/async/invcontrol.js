(window.webpackJsonp=window.webpackJsonp||[]).push([["invcontrol"],{"3a26":function(t,e,n){},"7db4":function(t,e){t.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABkAAD/4QQDaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzA2NyA3OS4xNTc3NDcsIDIwMTUvMDMvMzAtMjM6NDA6NDIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0idXVpZDo1RDIwODkyNDkzQkZEQjExOTE0QTg1OTBEMzE1MDhDOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowN0JDN0IxN0I1RkExMUU2QUQxNThFNDZGMTVGMEY1OCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowN0JDN0IxNkI1RkExMUU2QUQxNThFNDZGMTVGMEY1OCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBJbGx1c3RyYXRvciBDQyAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3YjNhYTQ4OS04NGNiLTU2NGUtYjY2YS0yZDcyYTgwZDczZDgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6N2IzYWE0ODktODRjYi01NjRlLWI2NmEtMmQ3MmE4MGQ3M2Q4Ii8+IDxkYzp0aXRsZT4gPHJkZjpBbHQ+IDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCI+6aOf54mpIFvovazmjaJdPC9yZGY6bGk+IDwvcmRmOkFsdD4gPC9kYzp0aXRsZT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7QBIUGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAA8cAVoAAxslRxwCAAACAAIAOEJJTQQlAAAAAAAQ/OEfici3yXgvNGI0B1h36//uAA5BZG9iZQBkwAAAAAH/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAgICAgICAgICAgMDAwMDAwMDAwMBAQEBAQEBAgEBAgICAQICAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA//AABEIAAEAAQMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAAKAQEAAAAAAAAAAAAAAAAAAAAAEAEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwBlAP/Z"},"8da3":function(t,e,n){"use strict";var i=n("3a26");n.n(i).a},acdf:function(t,e,n){"use strict";n.r(e);var i=n("f6ce"),s=n("81a2");function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(s,o){try{var r=e[s](o),a=r.value}catch(t){return void n(t)}if(!r.done)return Promise.resolve(a).then(function(t){i("next",t)},function(t){i("throw",t)});t(a)}("next")})}}var r={data:function(){return{shopId:null,imgHost:null,category:[],child:[],parentCate:{id:-1,child:null},childCid:-2,goodsList:[],nowGoods:[],showCom:"",comObj:{good:Object},oneArea:{name:"请选择一级分类",id:-1},oneIndex:-1,twoArea:{name:"请选择二级分类",index:-2},twoIndex:-1,search:""}},mounted:function(){this.initData(),this.syncRequest()},methods:{funSearchkeyUp:function(){this.search=this.search.trim(),this.oneArea.name="请选择一级分类",this.twoArea.name="请选择二级分类",this.oneIndex=-1,this.twoIndex=-1;for(var t=[],e=0;e<this.goodsList.length;e++){var n=this.goodsList[e];n.goodsName&&n.goodsName.indexOf(this.search)>-1&&t.push(n)}this.nowGoods=t},closeInvcontrolWin:function(t){var e=this;return o(regeneratorRuntime.mark(function n(){var i,s,o,r,a,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("edit"!=t){n.next=16;break}return n.next=3,e.getHttp("ShopGetExtra");case 3:return i=n.sent,n.next=6,e.getGoodsList(!1,i.goodsConfigVer);case 6:return s=n.sent,n.next=9,e.getHttp("InventoryGetlist");case 9:o=n.sent,r=o.list,a=e.filterGoodsByStock(s,r),e.goodsList=e.deleteChildGoods(a),e.goodsList=e.changeGoodsStatus(e.goodsList),e.goodsList=e.funSortGoods(e.goodsList),-2==e.childCid?e.funToggleCate(e.parentCate):(c={id:e.childCid},e.funToggleChild(c));case 16:e.showCom="";case 17:case"end":return n.stop()}},n,e)}))()},openWinInvcontroWin:function(t){this.comObj.good=t,this.showCom="setInvcontrol"},newselectOneArea:function(t){this.search="",this.oneIndex=t,this.twoIndex=-1;var e=this.category[t];this.oneArea={id:e.id,name:e.name},this.twoArea={id:-1,name:"请选择二级分类"},this.funToggleCate(e)},newselectTwoArea:function(t){this.search="",this.twoIndex=t;var e=this.child[t];this.twoArea={id:e.id,name:e.name},this.funToggleChild(e)},selectOne:function(t){for(var e=0;e<t.length;e++){if(1==t[e].selected){this.parentCate=t[e],this.funToggleCate(t[e]);break}this.nowGoods=this.goodsList}},funToggleCate:function(t){if(this.parentCate=t,this.childCid=-2,-1==t.id)return this.child=[],void(this.nowGoods=this.goodsList);this.child=t.child,this.child||(this.child=[]),this.nowGoods=this.filterGoodsByCategoryByPid(this.goodsList,t.id)},openTwo:function(){return this.parentCate.id<1?(this.$refs.towSortDom.sortShow=!1,void this.$store.commit("setWin",{title:"提示信息",content:"请选择一级分类"})):0==this.parentCate.child.length?(this.$refs.towSortDom.sortShow=!1,void this.$store.commit("setWin",{title:"提示信息",content:"此一级分类下无二级分类"})):void 0},selectTwo:function(t){if(-2==this.childCid)return!1;for(var e=0;e<t.length;e++){if(1==t[e].selected){this.funToggleChild(t[e]);break}this.funToggleCate(this.parentCate)}},funToggleChild:function(t){this.childCid=t.id,this.nowGoods=this.filterGoodsByCategoryByPid(this.goodsList,this.childCid)},filterGoodsByCategoryByPid:function(t,e){if(-1==e)return t;var n=[];return t.forEach(function(t){t.cids||(t.cids=[]),t.cids.some(function(i){if(i==e)return n.push(t),!0})}),n},filterGoodsByStock:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],i=[];n=t.filter(function(t){return 1==t.isStock});var s=!0,o=!1,r=void 0;try{for(var a,c=n[Symbol.iterator]();!(s=(a=c.next()).done);s=!0){var l=a.value,u=!0,d=!1,h=void 0;try{for(var A,g=e[Symbol.iterator]();!(u=(A=g.next()).done);u=!0){var f=A.value;if(l.id==f.gid){l.goodsThreshold=f.goodsThreshold,l.goodsNum=f.goodsNum;break}}}catch(t){d=!0,h=t}finally{try{!u&&g.return&&g.return()}finally{if(d)throw h}}}}catch(t){o=!0,r=t}finally{try{!s&&c.return&&c.return()}finally{if(o)throw r}}var m=!0,p=!1,v=void 0;try{for(var w,x=n[Symbol.iterator]();!(m=(w=x.next()).done);m=!0){var y=w.value;y.relative=[];var C=!0,G=!1,I=void 0;try{for(var b,k=n[Symbol.iterator]();!(C=(b=k.next()).done);C=!0){var D=b.value;D.groupId==y.id&&D.id!=y.id&&y.relative.push(D)}}catch(t){G=!0,I=t}finally{try{!C&&k.return&&k.return()}finally{if(G)throw I}}i.push(y)}}catch(t){p=!0,v=t}finally{try{!m&&x.return&&x.return()}finally{if(p)throw v}}return i},changeGoodsStatus:function(t){return t.map(function(t){if(t.newStatus=t.status,1==t.isGroup){for(var e=!1,n=0,i=t.relative.length;n<i;n++){if(1==t.relative[n].status){e=!0;break}}t.newStatus=e?1:0}return t})},deleteChildGoods:function(t){return t.filter(function(t){return!Number(t.groupId)})},funSortGoods:function(t){var e=[],n=[];return t.sort(function(t,e){return t.sort==e.sort?t.id-e.id:t.sort-e.sort}).forEach(function(t){parseInt(t.goodsNum)<parseInt(t.goodsThreshold)?e.push(t):n.push(t)}),e.concat(n)},getCate:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.getCategoryList({data:{shopId:t.shopId}});case 2:return n=e.sent,i.a.session("areaList",n),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,t)}))()},getCategoryList:function(t,e){var n=this;return o(regeneratorRuntime.mark(function s(){var o,r;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(o=null,!t){s.next=7;break}return s.next=4,n.getCate();case 4:o=s.sent,s.next=25;break;case 7:if(r=i.a.session("httpGoodVersion")){s.next=14;break}return s.next=11,n.getCate();case 11:o=s.sent,s.next=25;break;case 14:if(r.otherConfigVer!=e){s.next=22;break}if(o=i.a.session("areaList")){s.next=20;break}return s.next=19,n.getCate();case 19:o=s.sent;case 20:s.next=25;break;case 22:return s.next=24,n.getCate();case 24:o=s.sent;case 25:return s.abrupt("return",o);case 26:case"end":return s.stop()}},s,n)}))()},getGoods:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,s.a.getGoodsList({data:{shopId:t.shopId,page:1,num:9999,specification:1}});case 3:return o=e.sent,n=o.list,i.a.session("goodList",n),e.abrupt("return",n);case 7:case"end":return e.stop()}},e,t)}))()},getGoodsList:function(t,e){var n=this;return o(regeneratorRuntime.mark(function s(){var o,r;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(o=null,!t){s.next=7;break}return s.next=4,n.getGoods();case 4:o=s.sent,s.next=25;break;case 7:if(r=i.a.session("httpGoodVersion")){s.next=14;break}return s.next=11,n.getGoods();case 11:o=s.sent,s.next=25;break;case 14:if(r.goodsConfigVer!=e){s.next=22;break}if(o=i.a.session("goodList")){s.next=20;break}return s.next=19,n.getGoods();case 19:o=s.sent;case 20:s.next=25;break;case 22:return s.next=24,n.getGoods();case 24:o=s.sent;case 25:return s.abrupt("return",o);case 26:case"end":return s.stop()}},s,n)}))()},getHttp:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(regeneratorRuntime.mark(function i(){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a[t]({data:n});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}},i,e)}))()},syncRequest:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var n,s,o,r,a,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getHttp("ShopGetExtra");case 2:return n=e.sent,e.next=5,t.getGoodsList(!1,n.goodsConfigVer);case 5:return s=e.sent,e.next=8,t.getHttp("InventoryGetlist");case 8:return o=e.sent,r=o.list,a=t.filterGoodsByStock(s,r),t.goodsList=t.changeGoodsStatus(t.goodsList),t.goodsList=t.deleteChildGoods(a),t.goodsList=t.funSortGoods(t.goodsList),e.next=16,t.getCategoryList(!1,n.otherConfigVer);case 16:(c=e.sent)[0]&&-1!=c[0].id&&c.unshift({id:-1,name:"全部"}),t.category=c,t.funToggleCate(t.parentCate),i.a.session("httpGoodVersion",n);case 21:case"end":return e.stop()}},e,t)}))()},initData:function(){var t=i.a.session("userShop");this.shopId=t.currentShop.id,this.imgHost=t.uploadUrl}},components:{elCategory:function(){return n.e("el_category").then(n.bind(null,"eff4"))},setInvcontrol:function(){return n.e("invcontrol_set_win").then(n.bind(null,"82aa"))}}},a=(n("8da3"),n("d801")),c=Object(a.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"good-invcontrol"}},[i("section",{staticClass:"fl user-content"},[i("section",{staticClass:"user-function"},[i("section",{staticClass:" fl",staticStyle:{width:"100%",height:"50px"}},[i("elCategory",{attrs:{categoryArr:t.category,itemIndex:t.oneIndex,itemArea:t.oneArea},on:{selectCategory:t.newselectOneArea}}),t._v(" "),i("elCategory",{attrs:{categoryArr:t.child,itemIndex:t.twoIndex,itemArea:t.twoArea},on:{selectCategory:t.newselectTwoArea}}),t._v(" "),i("el-input",{staticStyle:{width:"210px"},attrs:{placeholder:"请输入名称",clearable:""},on:{change:function(e){t.funSearchkeyUp()}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){t.funSearchkeyUp()}},slot:"append"})],1)],1)]),t._v(" "),i("section",{staticClass:"user-info"},[i("section",{staticClass:"commodity-box"},[t._l(t.nowGoods,function(e,s){return[i("section",{key:s,staticClass:"fl",staticStyle:{width:"300px"}},[1==e.newStatus?i("section",{staticClass:"fl",staticStyle:{transition:"all 0.2s"},on:{click:function(n){t.openWinInvcontroWin(e)}}},[e.imageName?i("img",{staticClass:"cname",attrs:{src:t.imgHost+e.imageName,width:"300",height:"200",alt:"商品"}}):i("img",{staticClass:"cname",attrs:{src:n("7db4"),width:"300",height:"200",alt:"商品"}}),t._v(" "),i("section",{staticClass:"comprice",staticStyle:{height:"100%","text-align":"center"}},[i("h2",{staticStyle:{height:"120px","line-height":"120px",width:"100%","font-size":"64px"}},[t._v("估清")]),t._v(" "),i("p",{staticClass:"text-ellipsis",staticStyle:{"font-size":"24px"},attrs:{title:e.goodsName}},[t._v(t._s(e.goodsName))])])]):i("section",{staticClass:"fl",staticStyle:{transition:"all 0.2s"},on:{click:function(n){t.openWinInvcontroWin(e)}}},[e.imageName?i("img",{staticClass:"cname",attrs:{src:t.imgHost+e.imageName,width:"300",height:"200",alt:"商品"}}):i("img",{staticClass:"cname",attrs:{src:n("7db4"),width:"300",height:"200",alt:"商品"}}),t._v(" "),i("section",{staticClass:"comprice",staticStyle:{height:"100%","text-align":"center"}},[i("h2",{staticClass:"commodityName text-ellipsis",staticStyle:{"font-size":"24px","text-align":"center","line-height":"40px","margin-bottom":"40px"},attrs:{title:e.goodsName}},[t._v(t._s(e.goodsName))]),t._v(" "),1==e.isGroup?i("section",{staticClass:"fl",staticStyle:{height:"30px","line-height":"30px",width:"100%"}},[i("section",{staticClass:"fl",staticStyle:{width:"100%","text-align":"center","font-size":"16px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t库存：\n\t\t\t\t\t\t\t\t\t\t\t"),t._l(e.relative,function(n,s){return i("span",{key:s,staticStyle:{"font-size":"16px"}},[t._v(t._s(n.goodsNum)+"\n\t\t\t\t\t\t\t\t\t\t\t\t"),s!=e.relative.length-1?i("i",[t._v("/")]):t._e()])})],2),t._v(" "),i("section",{staticClass:"fl",staticStyle:{width:"100%","text-align":"center","font-size":"16px"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t库存预警：\n\t\t\t\t\t\t\t\t\t\t\t"),t._l(e.relative,function(n,s){return i("span",{key:s,staticStyle:{"font-size":"16px"}},[t._v(t._s(n.goodsThreshold)+"\n\t\t\t\t\t\t\t\t\t\t\t\t"),s!=e.relative.length-1?i("i",[t._v("/")]):t._e()])})],2)]):i("section",{staticClass:"fl",staticStyle:{height:"30px","line-height":"30px",width:"100%"}},[i("section",{staticClass:"fl",staticStyle:{width:"100%","text-align":"center","font-size":"16px"}},[t._v("库存：\n\t\t\t\t\t\t\t\t\t\t\t"),i("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(e.goodsNum))])]),t._v(" "),i("section",{staticClass:"fl",staticStyle:{width:"100%","text-align":"center","font-size":"16px"}},[t._v("库存预警：\n\t\t\t\t\t\t\t\t\t\t\t"),i("span",{staticStyle:{"font-size":"16px"}},[t._v(t._s(e.goodsThreshold))])])])])])])]})],2)])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i(t.showCom,{tag:"component",attrs:{pObj:t.comObj},on:{throwInvcontrolWin:t.closeInvcontrolWin}})],1)],1)},[],!1,null,"1bd14352",null);e.default=c.exports}}]);