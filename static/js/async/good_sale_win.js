(window.webpackJsonp=window.webpackJsonp||[]).push([["./good_sale_win"],{"13a1":function(t,i,e){"use strict";var n=e("6149");e.n(n).a},"38a7":function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("win",{attrs:{align:"right",width:480,height:"auto"},on:{winEvent:t.clickResult}},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.title))]),t._v(" "),e("div",{staticStyle:{"background-color":"#F2F2F2"},attrs:{slot:"content"},slot:"content"},[e("div",{staticClass:"jobWin"},[e("h2",{staticClass:"required tag"},[t._v("起售类型")]),t._v(" "),t._l(t.computerWay,function(i,n){return[e("div",{key:n,staticClass:"computeStyle",class:{icSelect:n+1==t.info.type},on:{click:function(i){t.changeSelect(n+1)}}},[t._v("\n\t\t\t\t\t\t"+t._s(i)+"\n\t\t\t\t\t")])]}),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("h2",{staticClass:"required tag"},[t._v("起售商品")]),t._v(" "),e("div",{staticClass:"mes"},[e("a",{staticClass:"addclassify",staticStyle:{width:"150px"},attrs:{href:"javascript:void(0);"},on:{click:t.edit}},[t._v("添加商品")])]),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("div",{staticStyle:{color:"#999","margin-left":"120px","padding-right":"30px"}},[t._v("\n\t\t\t\t\t"+t._s(t.info.goodsName)+"\n\t\t\t\t")]),t._v(" "),e("div",{staticClass:"clear"}),t._v(" "),e("h2",{staticClass:"required tag"},[t._v("起售数量")]),t._v(" "),e("div",{staticClass:"mes"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.info.num,expression:"info.num"}],staticClass:"input",staticStyle:{width:"150px"},attrs:{type:"text",maxlength:"2",placeholder:"请输起售数量"},domProps:{value:t.info.num},on:{input:function(i){i.target.composing||t.$set(t.info,"num",i.target.value)}}})]),t._v(" "),e("div",{staticClass:"clear"})],2)])]),t._v(" "),t.showTan?e("goodListWin",{attrs:{goodsIds:this.info.gid.split(","),isGoods:1!=this.info.type,goInName:"goodSale",isOnlyGoods:!0,allGid:t.allGid,idAndName:!0},on:{goodListWin:t.doThrowTanResult}}):t._e()],1)};n._withStripped=!0;var s=e("81a2");function o(t){return function(){var i=t.apply(this,arguments);return new Promise(function(t,e){return function n(s,o){try{var r=i[s](o),a=r.value}catch(t){return void e(t)}if(!r.done)return Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)});t(a)}("next")})}}var r={data:function(){return{title:this.isAdd?"新建起售商品":"编辑起售商品",showTan:!1,computerWay:["单品起售","多品联动起售"],info:{}}},props:{item:Object,newrecordList:Array,isAdd:null,jobIndex:"",allGid:Array},created:function(){this.info={id:this.item.id?this.item.id:"",gid:this.item.gid?this.item.gid:"",num:this.item.num?this.item.num:"",type:this.item.type?this.item.type:"1",goodsName:this.item.goodsName?this.item.goodsName:""}},methods:{changeSelect:function(t){if(!this.isAdd)return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"不能修改起售配置类型"}),!1;this.info.type=t},addJob:function(t){var i=this;return o(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.GoodsleastAdd({data:{gid:i.info.gid,num:i.info.num,type:i.info.type}});case 2:(n=e.sent)&&(i.info.id=n.id,i.newrecordList.push(i.info)),i.$emit("throwWinResult",t);case 5:case"end":return e.stop()}},e,i)}))()},editJob:function(t){var i=this;return o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.GoodsleastEdit({data:{id:i.info.id,num:i.info.num}});case 2:e.sent&&i.newrecordList.splice(i.jobIndex,1,i.info),i.$emit("throwWinResult",t);case 5:case"end":return e.stop()}},e,i)}))()},clickResult:function(t){if("ok"==t){if(!this.info)return!0;if(!/(^[2-9]{1}$)|(^[1-9]\d{1}$)/.test(Number(this.info.num)))return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"起售数量为2到99"}),!1;if(""==this.info.gid)return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"请添加起售商品"}),!1;if("1"==this.info.type&&this.info.gid.split(",").length>1)return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"单品起售只能添加一个商品"}),!1;if("2"==this.info.type&&(this.info.gid.split(",").length<2||this.info.gid.split(",").length>11))return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"多品联动起售只能添加2到10个商品"}),!1;this.isAdd?this.addJob(t):this.isAdd||this.editJob(t)}else"cancel"==t?this.$emit("throwWinResult",t):"close"==t&&this.$emit("throwWinResult",t)},edit:function(){if(!this.isAdd)return this.$store.commit("setWin",{title:"温馨提示",winType:"alter",content:"不能修改起售商品"}),!1;this.showTan=!0},doThrowTanResult:function(t,i){if("ok"==t)if(1==this.info.type)this.info.goodsName=i.goodArr[0].goodsName,this.info.gid=i.goodArr[0].id;else{for(var e=[],n=[],s=0;s<i.goodArr.length;s++)n.push(i.goodArr[s].id),e.push(i.goodArr[s].goodsName);this.info.goodsName=e.join("、"),this.info.gid=n.join(",")}this.showTan=!1}},components:{win:function(){return e.e("win").then(e.bind(null,"f60a"))},goodListWin:function(){return e.e("good_list_win").then(e.bind(null,"8bf4"))}}},a=(e("13a1"),e("6ceb")),d=Object(a.a)(r,n,[],!1,null,"a145716a",null);d.options.__file="src\\module\\shop_config\\good_sale_win.vue";i.default=d.exports},6149:function(t,i,e){}}]);