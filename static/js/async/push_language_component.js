(window.webpackJsonp=window.webpackJsonp||[]).push([["push_language_component"],{"04cf":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"msnmodel"}},[s("div",{staticClass:"online-box clearfix"},[s("span",{staticClass:"online-sub fl"}),t._v(" "),s("div",{staticClass:"rightHalf"},[s("a",{staticClass:"addclassify fl",attrs:{href:"javascript:void(0);"},on:{click:t.addPushlanguage}},[t._v("增加推送语")]),t._v(" "),t._m(0)])]),t._v(" "),t._l(t.followerMessage,function(e,a){return s("div",{staticClass:"online-box clearfix"},[s("span",{staticClass:"online-sub fl"},[s("span",{staticClass:"serial"},[t._v(t._s(a+1))])]),t._v(" "),s("div",{staticClass:"rightHalf"},[s("section",{staticClass:"clearfix",staticStyle:{margin:"0 15px 19px 0"}},[s("select-btn",{staticClass:"fl",attrs:{name:e.type,sorts:t.expirationTimeList.map(function(t){return t.name}),width:211,showIndex:a},on:{selOn:t.selexpirationTime}}),t._v(" "),s("a",{staticClass:"delet fl",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.deletePush(a)}}})],1),t._v(" "),"0"==e.typeId?[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"item.content"}],staticClass:"txt",attrs:{maxlength:"100"},domProps:{value:e.content},on:{input:function(s){s.target.composing||t.$set(e,"content",s.target.value)}}}),t._v(" "),t._m(1,!0),t._v(" "),s("p",{staticClass:"sample"},[t._v(t._s(t.msg))])]:t._e(),t._v(" "),"1"==e.typeId?[s("div",{staticClass:"uploadImgs"},[s("a",{staticClass:"addclassify fl",staticStyle:{"margin-right":"15px"},attrs:{href:"javascript:void(0);"}},[t._v("上传图片")]),t._v(" "),s("form",{attrs:{enctype:"multipart/form-data",id:"endImage"}},[s("input",{attrs:{type:"file",id:"bg_upload",accept:"image/jpeg,image/png,image/gif,image/tiff",name:"image",onclick:"this.value = ''"},on:{change:function(e){t.bgNameChange(a)}}})])]),t._v(" "),t._m(2,!0),t._v(" "),""!=e.img?s("div",{staticClass:"imgshow"},[s("img",{attrs:{alt:"logo",src:e.img}})]):t._e(),t._v(" "),s("div",{staticClass:"push"},[s("span",{staticClass:"push_l required fl"},[t._v("\n\t\t\t\t\t\t推送标题\n\t\t\t\t\t")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"item.title"}],staticClass:"inp fl",attrs:{type:"text",placeholder:"请输入推送标题",maxlength:"20"},domProps:{value:e.title},on:{input:function(s){s.target.composing||t.$set(e,"title",s.target.value)}}}),t._v(" "),t._m(3,!0)]),t._v(" "),s("div",{staticClass:"push"},[s("span",{staticClass:"push_l required fl"},[t._v("\n\t\t\t\t\t\t推送链接\n\t\t\t\t\t")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"item.url"}],staticClass:"inp fl",attrs:{type:"text",placeholder:"请输入推送链接"},domProps:{value:e.url},on:{input:function(s){s.target.composing||t.$set(e,"url",s.target.value)}}})]),t._v(" "),s("section",{staticClass:"clearfix",staticStyle:{"margin-bottom":"20px"}},[s("a",{staticClass:"addclassify fl",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.addsencPushlanguage(a,"1")}}},[t._v("增加二级图文关联")]),t._v(" "),t._m(4,!0)]),t._v(" "),e.secondary.length>0?s("section",[s("ul",{staticClass:"title"},t._l(e.secondary,function(e,i){return s("li",{class:t.ruleIndex==i?"active":"",on:{click:function(e){t.getDetails(i)}}},[t._v("二级图文"+t._s(i+1)+"\n\t\t\t\t\t\t\t"),s("i",{staticClass:"deletes",on:{click:function(e){e.stopPropagation(),t.deletesecPush(a,i)}}})])})),t._v(" "),t._l(e.secondary,function(e,i){return t.ruleIndex==i?s("div",{staticClass:"content"},[s("div",{staticClass:"uploadImgs"},[s("a",{staticClass:"addclassify fl",staticStyle:{"margin-right":"15px"},attrs:{href:"javascript:void(0);"}},[t._v("上传图片")]),t._v(" "),s("form",{attrs:{enctype:"multipart/form-data",id:"startImage"}},[s("input",{attrs:{type:"file",id:"bg_upload",accept:"image/jpeg,image/png,image/gif,image/tiff",name:"image",onclick:"this.value = ''"},on:{change:function(e){t.upNameChange(a,i)}}})])]),t._v(" "),t._m(5,!0),t._v(" "),""!=e.imgUrl?s("div",{staticClass:"smallimg"},[s("img",{attrs:{alt:"logo",src:e.imgUrl}})]):t._e(),t._v(" "),s("div",{staticClass:"push"},[s("span",{staticClass:"push_l required fl"},[t._v("\n\t\t\t\t\t\t推送标题\n\t\t\t\t\t")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"int.title"}],staticClass:"inp fl",attrs:{type:"text",placeholder:"请输入推送标题",maxlength:"20"},domProps:{value:e.title},on:{input:function(s){s.target.composing||t.$set(e,"title",s.target.value)}}}),t._v(" "),t._m(6,!0)]),t._v(" "),s("div",{staticClass:"push"},[s("span",{staticClass:"push_l required fl"},[t._v("\n\t\t\t\t\t\t推送链接\n\t\t\t\t\t")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.url,expression:"int.url"}],staticClass:"inp fl",attrs:{type:"text",placeholder:"请输入推送链接"},domProps:{value:e.url},on:{input:function(s){s.target.composing||t.$set(e,"url",s.target.value)}}})])]):t._e()})],2):t._e()]:t._e()],2)])})],2)};a._withStripped=!0;var i=s("81a2"),n=s("f6ce");function l(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function a(i,n){try{var l=e[i](n),r=l.value}catch(t){return void s(t)}if(!l.done)return Promise.resolve(r).then(function(t){a("next",t)},function(t){a("throw",t)});t(r)}("next")})}}var r={data:function(){return{shopId:n.a.session("userShop").currentShop.id,uploadUrl:n.a.session("userShop").uploadUrl,expirationTimeList:[{name:"文字推送",id:0},{name:"图文推送",id:1}],followerMessage:[],message:[],spreaderMessage:[],imageMessage:[],ruleIndex:0}},props:{msg:String,resultArr:Array},watch:{resultArr:"initValue"},mounted:function(){this.initValue()},methods:{initValue:function(){this.followerMessage=this.resultArr},valiData:function(t,e,s){this.$store.commit("setWin",{content:t,title:e,winType:s})},selexpirationTime:function(t,e){this.followerMessage[e].type=this.expirationTimeList[t].name,this.followerMessage[e].typeId=this.expirationTimeList[t].id},addPushlanguage:function(){if(this.followerMessage.length>=5)return this.valiData("关注推送语最多添加5条!"),!1;this.followerMessage.push({type:"文字推送",typeId:0,content:"",img:"",title:"",url:"",secondary:[]})},addsencPushlanguage:function(t){if(this.followerMessage[t].secondary.length>=5)return this.valiData("关注推送语二级图文关联最多添加5条!"),!1;this.followerMessage[t].secondary.push({imgUrl:"",title:"",url:""})},deletePush:function(t){this.followerMessage.splice(t,1)},deletesecPush:function(t,e){this.ruleIndex>=e&&(this.ruleIndex=0),this.followerMessage[t].secondary.splice(e,1)},bgNameChange:function(t){var e=this;return l(regeneratorRuntime.mark(function s(){var a;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,i.a.uploadImg({data:{type:8,shopId:e.shopId},formId:"endImage"});case 2:a=s.sent,e.followerMessage[t].img=e.uploadUrl+a;case 4:case"end":return s.stop()}},s,e)}))()},upNameChange:function(t,e){var s=this;return l(regeneratorRuntime.mark(function a(){var n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.uploadImg({data:{type:8,shopId:s.shopId},formId:"startImage"});case 2:n=a.sent,s.followerMessage[t].secondary[e].imgUrl=s.uploadUrl+n;case 4:case"end":return a.stop()}},a,s)}))()},getDetails:function(t){this.ruleIndex=t}},components:{selectBtn:function(){return s.e("select_btn").then(s.bind(null,"3d41"))}}},o=(s("8e71"),s("6ceb")),c=Object(o.a)(r,a,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v(" 上限5条推送\n\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"handle-tips"},[e("i"),this._v(" 限100字以内\n\t\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"handle-tips",staticStyle:{"margin-bottom":"20px"}},[e("i"),this._v(" 尺寸:680PX*480PX最佳\n\t\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v(" 限20字\n\t\t\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v(" 上限5篇二级图文\n\t\t\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"handle-tips",staticStyle:{"margin-bottom":"20px"}},[e("i"),this._v(" 尺寸:180PX*180PX最佳\n\t\t\t\t\t\t")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fl handle-tips"},[e("i"),this._v(" 限20字\n\t\t\t\t\t\t\t")])}],!1,null,"6ecb00eb",null);c.options.__file="src\\module\\public_number_configuration\\push_language_component.vue";e.default=c.exports},"3dad":function(t,e,s){},"8e71":function(t,e,s){"use strict";var a=s("3dad");s.n(a).a}}]);