(window.webpackJsonp=window.webpackJsonp||[]).push([["output_select_supplies"],{"0c3f":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"output-select-goods"}},[t._m(0),t._v(" "),s("div",[s("div",{staticClass:"table-select"},[s("div",{staticClass:"select-title"},[t._v("\n\t\t\t\t货品信息\n\t\t\t\t"),s("span",{staticClass:"circle"}),t._v(" 共\n\t\t\t\t"),s("span",{staticClass:"select-num"},[t._v(t._s(t.sleList.length))]),t._v(" 个条目\n\t\t\t\t"),s("a",{staticClass:"packUp",on:{click:function(e){t.show=!t.show}}},[t._v("\n\t\t\t\t\t"+t._s(t.show?"收起":"展开")+"\n\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"select-body"},[t._m(1),t._v(" "),t._l(t.sleList,function(e,i){return t.show?s("div",{key:i,staticClass:"select-item"},[s("div",{staticClass:"select-row"},[s("li",{staticStyle:{color:"#ff3c04"},on:{click:function(s){t.delList(e,i)}}},[t._v("删除")]),t._v(" "),s("li",i<9?[t._v(t._s("0"+(i+1)))]:[t._v(t._s(i+1))]),t._v(" "),s("li",[t._v(t._s(e.name))]),t._v(" "),s("li",[t._v(t._s(t.typeCate[Number(e.type)+1].label))]),t._v(" "),s("li",[t._v(t._s(t.getString(e.cate,"name")))]),t._v(" "),e.goodsNum?s("li",[t._v(t._s(e.goodsNum.surplus)),t._l(e.unit,function(e,i){return 1==e.isMin?s("span",{key:i},[t._v(t._s(e.name))]):t._e()})],2):s("li",[t._v("--")]),t._v(" "),e.goodsNum?s("li",[t._v(t._s(e.goodsNum.batch))]):s("li",[t._v("--")])])]):t._e()}),t._v(" "),0==t.sleList.length?s("div",{attrs:{id:"emptyData"}},[t._v("-----暂无条目-----")]):t._e()],2)]),t._v(" "),s("div",{staticClass:"search-module"},[s("div",{staticClass:"sleType"},[s("el-input",{attrs:{placeholder:"请输入物料名称"},model:{value:t.goodsName,callback:function(e){t.goodsName=e},expression:"goodsName"}})],1),t._v(" "),s("div",{staticClass:"sleType"},[s("el-select",{attrs:{placeholder:"全部类型"},model:{value:t.typeValue,callback:function(e){t.typeValue=e},expression:"typeValue"}},t._l(t.typeCate,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),s("div",{staticClass:"sleBtn"},[s("select-store",{attrs:{sorts:t.oneCate,isSingle:!0,tipName:"请选择一级分类"},on:{emit:t.getDrop}})],1),t._v(" "),s("div",{staticClass:"sleBtn",on:{click:t.checkOne}},[s("select-store",{ref:"twosel",attrs:{sorts:t.twoCate,isSingle:!0,tipName:"请选择二级分类"},on:{emit:t.getNext}})],1),t._v(" "),s("div",{staticClass:"setSpeen"},[s("div",{staticClass:"blue filter",on:{click:t.search}},[t._v("筛选")]),t._v(" "),s("div",{staticClass:"gray reset",on:{click:t.reset}},[t._v("重置")])])]),t._v(" "),s("div",{staticClass:"table-select"},[s("div",{staticClass:"select-title"},[t._v("\n\t\t\t\t物料列表\n\t\t\t\t"),s("span",{staticClass:"circle"}),t._v(" 共\n\t\t\t\t"),s("span",{staticClass:"select-num"},[t._v(t._s(t.listTotal))]),t._v(" 个条目\n\t\t\t")]),t._v(" "),s("div",{staticClass:"select-body"},[t._m(2),t._v(" "),t._l(t.goodsList,function(e,i){return s("div",{key:i,staticClass:"select-item",class:{active:e.select}},[s("div",{staticClass:"select-row"},[e.select?s("li",[t._v("已添加")]):t._e(),t._v(" "),!e.checkAdd&!e.select?s("li",{staticStyle:{color:"#27a8e0"},on:{click:function(s){t.addList(e,i)}}},[t._v("添加")]):t._e(),t._v(" "),e.checkAdd&!e.select?s("li",{staticStyle:{color:"#cccccc"}},[t._v("添加")]):t._e(),t._v(" "),i+1+10*(t.page-1)<10?s("li",[t._v(t._s("0"+(i+1)))]):s("li",[t._v(t._s(i+1+10*(t.page-1)))]),t._v(" "),s("li",[t._v(t._s(e.name||"--"))]),t._v(" "),s("li",[t._v(t._s(t.typeCate[Number(e.type)+1].label))]),t._v(" "),s("li",[t._v(t._s(t.getString(e.cate,"name")))]),t._v(" "),e.goodsNum?s("li",[t._v(t._s(e.goodsNum.surplus)),t._l(e.unit,function(e,i){return 1==e.isMin?s("span",{key:i},[t._v(t._s(e.name))]):t._e()})],2):s("li",[t._v("--")]),t._v(" "),e.goodsNum?s("li",[t._v(t._s(e.goodsNum.batch))]):s("li",[t._v("--")])])])}),t._v(" "),0==t.goodsList.length?s("div",{attrs:{id:"emptyData"}},[t._v("-----暂无条目-----")]):t._e()],2)]),t._v(" "),s("div",{staticClass:"page-box"},[s("pageBtn",{attrs:{isNoJump:!1,isNoPaging:!0,total:t.pageTotal,page:t.page},on:{pageNum:t.pageChange}})],1)])])};i._withStripped=!0;var a=s("81a2"),n=s("bbb9");function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,s){return function i(a,n){try{var r=e[a](n),l=r.value}catch(t){return void s(t)}if(!r.done)return Promise.resolve(l).then(function(t){i("next",t)},function(t){i("throw",t)});t(l)}("next")})}}var l={data:function(){return{page:1,selType:0,goodsList:"",allGoods:"全部类型",pageTotal:0,num:10,tebData:["物料"],sleList:[],goodsName:"",oneCate:[],twoCate:[],oneSle:"",twoSle:"",cataList:"",listTotal:0,sinSle:[],show:!0,typeCate:[{value:-1,label:"全部类型"},{value:0,label:"成品"},{value:1,label:"半成品"},{value:2,label:"普通物料"}],typeValue:-1}},props:["type","sleSupplies","wid","addBtn"],methods:{init:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var s,i,r,l,o,c,v,u,d,_,p,h,f,g,m,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.getMaterialList({data:{page:t.page,name:t.goodsName,cid:t.twoSle?t.twoSle.id?t.twoSle.id:"":t.oneSle.id?t.oneSle.id:"",type:t.typeValue,num:10}});case 2:for(s=e.sent,t.goodsList=s.list,t.pageTotal=s.total,t.listTotal=s.count,i=[],r=!0,l=!1,o=void 0,e.prev=10,c=t.goodsList[Symbol.iterator]();!(r=(v=c.next()).done);r=!0)u=v.value,i.push(u.id);e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),l=!0,o=e.t0;case 18:e.prev=18,e.prev=19,!r&&c.return&&c.return();case 21:if(e.prev=21,!l){e.next=24;break}throw o;case 24:return e.finish(21);case 25:return e.finish(18);case 26:if(!(i.length>0)){e.next=56;break}return e.next=29,a.a.invoiv_getMaterialNum({data:{mids:i.join(","),wid:t.wid?t.wid:""}});case 29:d=e.sent,e.t1=regeneratorRuntime.keys(t.goodsList);case 31:if((e.t2=e.t1()).done){e.next=55;break}for(_=e.t2.value,p=!0,h=!1,f=void 0,e.prev=36,g=d[Symbol.iterator]();!(p=(m=g.next()).done);p=!0)y=m.value,t.goodsList[_].id==y.id&&(t.goodsList[_].goodsNum=y);e.next=44;break;case 40:e.prev=40,e.t3=e.catch(36),h=!0,f=e.t3;case 44:e.prev=44,e.prev=45,!p&&g.return&&g.return();case 47:if(e.prev=47,!h){e.next=50;break}throw f;case 50:return e.finish(47);case 51:return e.finish(44);case 52:t.addBtn&&(!d[_]||!d[_].batch||d[_].batch<=0||d[_].surplus<=0)&&(t.goodsList[_].checkAdd=!0),e.next=31;break;case 55:t.goodsList=n.a.deepCopy(t.goodsList);case 56:t.checkSle();case 57:case"end":return e.stop()}},e,t,[[10,14,18,26],[19,,21,25],[36,40,44,52],[45,,47,51]])}))()},getCate:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var s,i,n,r,l,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.invoiv_getCategoryList();case 2:for(s=e.sent,t.cataList=s,i=!0,n=!1,r=void 0,e.prev=7,l=t.cataList[Symbol.iterator]();!(i=(o=l.next()).done);i=!0)0==(c=o.value).pid&&t.oneCate.push(c);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),n=!0,r=e.t0;case 15:e.prev=15,e.prev=16,!i&&l.return&&l.return();case 18:if(e.prev=18,!n){e.next=21;break}throw r;case 21:return e.finish(18);case 22:return e.finish(15);case 23:case"end":return e.stop()}},e,t,[[7,11,15,23],[16,,18,22]])}))()},checkIn:function(){var t=[];for(var e in this.sleSupplies)this.sleSupplies[e].noPrev?this.sinSle.push(this.sleSupplies[e]):t.push(this.sleSupplies[e]);this.sleList=t},checkSle:function(){var t=!0,e=!1,s=void 0;try{for(var i,a=this.goodsList[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.select=!1}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}var n=!0,r=!1,l=void 0;try{for(var o,c=this.goodsList[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var v=o.value,u=!0,d=!1,_=void 0;try{for(var p,h=this.sleList[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var f=p.value;v.id==f.id&&(v.select=!0)}}catch(t){d=!0,_=t}finally{try{!u&&h.return&&h.return()}finally{if(d)throw _}}var g=!0,m=!1,y=void 0;try{for(var b,w=this.sinSle[Symbol.iterator]();!(g=(b=w.next()).done);g=!0){var C=b.value;v.id==C.id&&(v.select=!0)}}catch(t){m=!0,y=t}finally{try{!g&&w.return&&w.return()}finally{if(m)throw y}}}}catch(t){r=!0,l=t}finally{try{!n&&c.return&&c.return()}finally{if(r)throw l}}},getString:function(t,e){if("string"!=typeof t&&t){var s=[],i=!0,a=!1,n=void 0;try{for(var r,l=t[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){var o=r.value;s.push(o[e])}}catch(t){a=!0,n=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw n}}return s.join(",")}return t},selectList:function(t){this.selType=t-1},pageChange:function(t){this.page=t.page,this.init()},tebClick:function(t){this.tabactive=t},checkOne:function(){0==this.oneSle.length&&(this.$refs.twosel.sortShow=!1,this.alert("请选择一级分类"))},addList:function(t){t.select=!0,this.sleList.push(t)},delList:function(t,e){this.sleList.splice(e,1),t.select=!1,this.checkSle()},search:function(){this.init()},reset:function(){this.page=1,this.goodsName="",this.oneSle="",this.twoSle="",this.typeValue=-1;var t=!0,e=!1,s=void 0;try{for(var i,a=this.oneCate[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.selected=!1}}catch(t){e=!0,s=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw s}}this.oneCate=n.a.deepCopy(this.oneCate);var r=!0,l=!1,o=void 0;try{for(var c,v=this.twoCate[Symbol.iterator]();!(r=(c=v.next()).done);r=!0){c.value.selected=!1}}catch(t){l=!0,o=t}finally{try{!r&&v.return&&v.return()}finally{if(l)throw o}}this.twoCate=n.a.deepCopy(this.twoCate),this.init()},getDrop:function(t){for(var e in t){if(t[e].selected){this.oneSle=t[e];break}this.oneSle=""}for(var s in this.twoCate=[],this.cataList)this.cataList[s].pid==this.oneSle.id&&this.twoCate.push(this.cataList[s])},getNext:function(t){for(var e in t){if(t[e].selected){this.twoSle=t[e];break}this.twoSle=""}},alert:function(t,e){this.$store.commit("setWin",{title:e,content:t})}},mounted:function(){var t=this;return r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.sleSupplies),t.sleSupplies&&(t.sleList=t.sleSupplies),t.type||t.$store.commit("setPageTools",[{name:"确定",className:["firstBtn wearhouse"],fn:function(){t.$emit("select",t.sleList)}},{name:"取消",className:["abrogate"],fn:function(){t.$emit("select",!1)}}]),t.getCate(),t.init(),e.next=7,t.checkIn();case 7:case"end":return e.stop()}},e,t)}))()},components:{pageBtn:function(){return s.e("page_element").then(s.bind(null,"5921"))},selectBtn:function(){return s.e("select_btn").then(s.bind(null,"3d41"))},selectStore:function(){return s.e("win").then(s.bind(null,"cb83"))}},destroyed:function(){this.type||this.$store.commit("setPageTools",[])}},o=(s("ef60"),s("6ceb")),c=Object(o.a)(l,i,[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("i"),this._v(" "),e("h3",[this._v("选择添加物料")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-head"},[s("li",[t._v("操作")]),t._v(" "),s("li",[t._v("序号")]),t._v(" "),s("li",[t._v("物料名称")]),t._v(" "),s("li",[t._v("类型")]),t._v(" "),s("li",[t._v("分类")]),t._v(" "),s("li",[t._v("库存数量/重量")]),t._v(" "),s("li",[t._v("批次数量")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"select-head"},[s("li",[t._v("操作")]),t._v(" "),s("li",[t._v("序号")]),t._v(" "),s("li",[t._v("物料名称")]),t._v(" "),s("li",[t._v("类型")]),t._v(" "),s("li",[t._v("分类")]),t._v(" "),s("li",[t._v("库存数量/重量")]),t._v(" "),s("li",[t._v("批次数量")])])}],!1,null,"1c35d6af",null);c.options.__file="src\\module\\invoicing_system\\warehouse_manage\\output_select_supplies.vue";e.default=c.exports},"61a2":function(t,e,s){},ef60:function(t,e,s){"use strict";var i=s("61a2");s.n(i).a}}]);