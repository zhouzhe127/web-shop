(window.webpackJsonp=window.webpackJsonp||[]).push([["order_bill_list"],{"0da2":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{attrs:{id:"orMaRetreat"}},[s("section",{directives:[{name:"show",rawName:"v-show",value:!t.showDetails,expression:"!showDetails"}]},[t.shopName?t._e():s("section",{staticClass:"orMaRetreatTime yuChairFix"},[s("section",{staticClass:"block-div"},[s("selectBtn",{attrs:{sorts:t.optionsOne},on:{emit:t.selectTypeOne}})],1),t._v(" "),s("div",{staticClass:"block-div"},[s("section",{staticClass:"fl yuChairFix"},[s("calendar",{staticClass:"data-box",attrs:{time:t.startTime,type:t.selectedType,format:"yyyy年MM月dd日"},on:{emit:t.startTimeChange}})],1),t._v(" "),s("span",{staticClass:"zhi"},[t._v("—")]),t._v(" "),s("section",{staticClass:"fl yuChairFix"},[s("calendar",{staticClass:"data-box",attrs:{time:t.endTime,type:t.selectedType,format:"yyyy年MM月dd日"},on:{emit:t.endTimeChange}})],1),t._v(" "),s("span",{staticClass:"order-order-searchA",on:{click:t.selectByTime}},[s("span",{staticClass:"order-order-search"})])]),t._v(" "),s("section",{staticClass:"block-div",staticStyle:{"line-height":"46px"}},[s("div",{class:[{active:t.isOpenTime},"pickBlu"],on:{click:t.selectBusinessHours}}),t._v(" "),s("span",{staticStyle:{"font-size":"16px"}},[t._v("按营业时间")])])]),t._v(" "),t.shopName?s("section",{staticClass:"orMaRetreatTime yuChairFix"},[s("div",{staticClass:"block-div",staticStyle:{"font-size":"16px",color:"#333333"}},[t._v("\n\t\t\t\t选择店铺：\n\t\t\t\t"),s("span",[t._v(t._s(t.shopName))]),t._v(" "),s("span",{staticStyle:{margin:"0 10px"}},[t._v("|")]),t._v("\n\t\t\t\t选择时间：\n\t\t\t\t"),s("span",[t._v(t._s(t.transformTime(t.sTime))+" - "+t._s(t.transformTime(t.eTime)))])])]):t._e(),t._v(" "),s("section",{staticClass:"orMaRetreatTime yuChairFix"},[s("section",{staticClass:"block-div"},[s("selectBtn",{attrs:{sorts:t.optionsTwo,name:t.selectedNameTwo},on:{emit:t.selectTypeTwo}})],1),t._v(" "),s("section",{staticClass:"block-div",on:{click:function(e){t.noData(e)}}},[s("selectBtn",{attrs:{sorts:t.optionsThree,name:t.selectedNameThree},on:{emit:t.selectTypeThree}})],1),t._v(" "),s("section",{staticClass:"block-div"},[s("selectBtn",{attrs:{sorts:t.optionsFour},on:{emit:t.selectTypeFour}})],1),t._v(" "),s("div",{staticClass:"block-div"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.optionValue,expression:"optionValue"}],staticClass:"numbering",attrs:{type:"text",placeholder:t.shuName,maxlength:"18"},domProps:{value:t.optionValue},on:{input:function(e){e.target.composing||(t.optionValue=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"block-div"},[s("a",{staticStyle:{background:"#2EA8DC"},attrs:{href:"javascript:;"},on:{click:function(e){t.getOrderBillList()}}},[t._v("筛选")]),t._v(" "),s("a",{staticStyle:{background:"#B3B3B3"},attrs:{href:"javascript:;"},on:{click:function(e){t.filterReset(!0)}}},[t._v("重置")])])]),t._v(" "),0==t.selectedTypeOne?s("section",{staticClass:"orMaRetreatTime yuChairFix"},[s("section",{staticClass:"oCont"},[s("div",{staticClass:"Box"},[s("section",{staticClass:"oDe",class:{act:-1==t.status},staticStyle:{"border-left":"none"},on:{click:function(e){t.getOidList(-1)}}},[t._v("全部\n\t\t\t\t\t")]),t._v(" "),s("section",{staticClass:"oDe",class:{act:0==t.status},on:{click:function(e){t.getOidList(0)}}},[t._v("未结算\n\t\t\t\t\t")]),t._v(" "),s("section",{staticClass:"oDe",class:{act:1==t.status},on:{click:function(e){t.getOidList(1)}}},[t._v("已结算\n\t\t\t\t\t")])])])]):t._e(),t._v(" "),s("table-com",{attrs:{showHand:!1,titleHeight:60,showTitle:1,titleData:t.tableOne,fixed:0,widthType:!1,introData:[t.totalList],bannerStyle:{backgroundColor:"#f2f2f2"}},scopedSlots:t._u([{key:"title-2",fn:function(e){return s("span",{},[s("span",{staticClass:"detLi",on:{click:function(e){t.openDetial(1,e)}}},[t._v("消费总额\n\t\t\t\t\t"),s("img",{staticClass:"detImg1",staticStyle:{"vertical-align":"middle"},attrs:{src:i("7fce")}}),t._v(" "),1==t.orderAll?s("div",{staticClass:"detDiv1"},[s("i",{staticClass:"detI triright"}),t._v(" "),s("h3",{staticClass:"detH3",staticStyle:{color:"#e6e6e7","white-space":"normal"}},[t._v("该时间段内所有商品原价的金额总计（不计入退品金额）")])]):t._e()])])}},{key:"title-3",fn:function(e){return s("span",{},[s("span",{staticClass:"detLi",on:{click:function(e){t.openDetial(2,e)}}},[t._v("挂账总额\n\t\t\t\t\t"),s("img",{staticClass:"detImg1",staticStyle:{"vertical-align":"middle"},attrs:{src:i("7fce")}}),t._v(" "),2==t.orderAll?s("div",{staticClass:"detDiv1"},[s("i",{staticClass:"detI triright"}),t._v(" "),s("h3",{staticClass:"detH3",staticStyle:{color:"#e6e6e7","white-space":"normal"}},[t._v("该时间段内所有订单实际需要支付的金额的总计")])]):t._e()])])}}])}),t._v(" "),s("table-com",{attrs:{showHand:!0,listName:"挂账统计",titleHeight:50,showTitle:1,titleData:t.tableTwo,allTotal:t.totalList.orderNum,fixed:1,widthType:!1,introData:t.orderCredit,bannerStyle:{backgroundColor:"#f2f2f2"},listWidth:1200},scopedSlots:t._u([{key:"title-6",fn:function(e){return s("span",{},[s("span",{staticClass:"detLi",on:{click:function(e){t.openDetial(3,e)}}},[t._v("消费金额\n\t\t\t\t\t"),s("img",{staticClass:"detImg1",staticStyle:{"vertical-align":"middle"},attrs:{src:i("7fce")}}),t._v(" "),3==t.orderAll?s("div",{staticClass:"detDiv1"},[s("i",{staticClass:"detI triright"}),t._v(" "),s("h3",{staticClass:"detH3",staticStyle:{color:"#e6e6e7","white-space":"normal"}},[t._v("该笔订单内所有商品原价的金额总计（不计入退品金额）")])]):t._e()])])}},{key:"title-9",fn:function(e){return s("span",{},[s("span",{staticClass:"detLi",on:{click:function(e){t.openDetial(4,e)}}},[t._v("挂账金额\n\t\t\t\t\t"),s("img",{staticClass:"detImg1",staticStyle:{"vertical-align":"middle"},attrs:{src:i("7fce")}}),t._v(" "),4==t.orderAll?s("div",{staticClass:"detDiv1"},[s("i",{staticClass:"detI triright"}),t._v(" "),s("h3",{staticClass:"detH3",staticStyle:{color:"#e6e6e7","white-space":"normal"}},[t._v("该笔订单实际需要支付的金额的总计")])]):t._e()])])}},{key:"con-0",fn:function(e){return s("span",{},[s("a",{staticStyle:{color:"#21a7de"},attrs:{href:"javascript:void(0)"},on:{click:function(i){t.goDetails(e.data.oid,e.index)}}},[t._v(t._s(e.data.oid))])])}}])}),t._v(" "),t.total>1?s("div",{staticClass:"pagebox fl"},[s("page-element",{attrs:{page:t.page,total:t.total,isNoJump:!0},on:{pageNum:t.goPage}})],1):t._e()],1),t._v(" "),t.showDetails?s("div",[s("orderDetail",{attrs:{detail:t.detail,isDelete:!1},on:{detailShow:t.getDetailShow}})],1):t._e()])};s._withStripped=!0;var a=i("81a2"),n=i("f6ce"),l=i("bbb9");function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){return function s(a,n){try{var l=e[a](n),o=l.value}catch(t){return void i(t)}if(!l.done)return Promise.resolve(o).then(function(t){s("next",t)},function(t){s("throw",t)});t(o)}("next")})}}var r={data:function(){return{orderCredit:[],startTime:(new Date).setHours(0,0,0,0),endTime:(new Date).setHours(23,59,59,999),selectedType:0,page:1,num:10,total:1,showDetails:!1,optionValue:"",totalList:{totalDay:1,orderNum:0,originalPrice:0,billPrice:0},optionsOne:["挂账时间","结账时间"],selectedTypeOne:0,optionsTwo:["全部","个人账户","企业账户"],selectedTypeTwo:0,selectedNameTwo:"请选择账户类型",optionsThree:[],selectedTypeThree:0,selectedNameThree:"请选择挂账账户",optionsFour:["订单号","挂账人名称","操作人名称"],selectedTypeFour:0,shuName:"请输入订单号",status:-1,isOpenTime:!0,allBillName:[],allBill:[],showBill:[],billId:0,userdata:{},tableOne:[],tableTwo:[],orderAll:0}},props:["sId","shopName","sTime","eTime","gType","isOpen"],created:function(){var t=this;this.userdata=n.a.session("userShop"),this.shopName&&(this.startTime=this.sTime,this.endTime=this.eTime,this.selectedTypeOne=this.gType,this.isOpenTime=Boolean(this.isOpen),this.$store.commit("setPageTools",[{name:"返回",className:["export-btn"],fn:function(){var e={startTime:t.sTime,endTime:t.eTime,operateTime:t.gType};t.$emit("return",e)}}])),this.tableOne=[{titleName:"天数",dataName:"totalDay",conStyle:{color:"#ffa627"}},{titleName:"订单数",dataName:"orderNum",conStyle:{color:"#ffa627"}},{titleName:"消费总额",dataName:"originalPrice",conStyle:{color:"#ffa627"}},{titleName:"挂账总额",dataName:"billPrice",conStyle:{color:"#ffa627"}}],this.tableTwo=[{titleName:"订单号",dataName:"oid",titleStyle:{width:"180px"},conStyle:{color:"#21a7de"}},{titleName:"订单状态",titleStyle:{width:"80px"},dataName:"isSettle"},{titleName:"挂账类型",titleStyle:{width:"80px"},dataName:"billType"},{titleName:"挂账账户",dataName:"billName"},{titleName:"挂账人",dataName:"personName"},{titleName:"操作人",dataName:"createName"},{titleName:"消费金额",dataName:"originalPrice"},{titleName:"挂账时间",dataName:"createTime"},{titleName:"结算时间",dataName:"updateTime"},{titleName:"挂账金额",dataName:"billPrice"}]},destroyed:function(){this.$store.commit("setPageTools",[])},beforeMount:function(){var t=this;this.billGetBillNames(),this.getOrderBillList(),document.onclick=function(){t.orderAll=0}},methods:{openDetial:function(t,e){e.stopPropagation(),this.orderAll=t},selectBusinessHours:function(){this.isOpenTime=!this.isOpenTime},getOidList:function(t){this.status=t,this.page=1,this.getOrderBillList()},filterReset:function(t){this.optionsOne=["挂账时间","结账时间"],this.selectedTypeOne=0,this.optionsTwo=["全部","个人账户","企业账户"],this.selectedTypeTwo=0,this.selectedNameTwo="请选择账户类型",this.optionsThree=l.a.deepCopy(this.allBillName),this.selectedTypeThree=0,this.selectedNameThree="请选择挂账账户",this.optionsFour=["订单号","挂账人名称","操作人名称"],this.selectedTypeFour=0,this.shuName="请输入订单号",t&&(this.startTime=(new Date).setHours(0,0,0,0),this.endTime=(new Date).setHours(23,59,59,999)),this.status=-1,this.optionValue="",this.page=1,this.num=10,this.total=1,this.billId=0,this.getOrderBillList()},selectTypeOne:function(t){this.selectedTypeOne=t},selectTypeTwo:function(t){this.selectedTypeTwo=t,this.billId=0,this.changType()},selectTypeThree:function(t){this.selectedTypeThree=t,this.billId=this.showBill[t].billId},noData:function(t){t.stopPropagation(),0==this.showBill.length&&this.$store.commit("setWin",{title:"提示信息",content:"该分类下没有挂账账户"})},selectTypeFour:function(t){switch(this.selectedTypeFour=t,this.selectedTypeFour+""){case"0":this.shuName="请输入订单号";break;case"1":this.shuName="请输入挂账人名";break;case"2":this.shuName="请输入操作人名"}},billGetBillNames:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var i,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.a.billGetBillNames({data:{shopId:t.sId?t.sId:t.userdata.currentShop.id}});case 2:i=e.sent,s={billId:"0",name:"全部"},i.unshift(s),t.allBill=i,t.changType();case 7:case"end":return e.stop()}},e,t)}))()},changType:function(){var t=[];switch(this.selectedTypeTwo+""){case"0":t=this.allBill.map(function(t){return t.name}),this.showBill=this.allBill;break;case"1":this.showBill=this.allBill.filter(function(t){return 1==t.type}),t=this.showBill.map(function(t){return t.name});break;case"2":this.showBill=this.allBill.filter(function(t){return 2==t.type}),t=this.showBill.map(function(t){return t.name})}this.allBillName=l.a.deepCopy(t),this.optionsThree=l.a.deepCopy(t)},checkDate:function(){var t=this.startTime,e=new Date(Number(this.endTime)).setDate(1);return+t<+(e=new Date(e).setHours(0,0,0,0))?(this.$store.commit("setWin",{title:"提示信息",content:"很抱歉,选择的时间段不能跨月"}),!0):parseInt(this.startTime/1e3)>parseInt(this.endTime/1e3)?(this.$store.commit("setWin",{title:"提示信息",content:"开始时间不能大于结束时间"}),!0):void 0},getOrderBillList:function(){var t=this;return o(regeneratorRuntime.mark(function e(){var i,s,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.checkDate()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.a.billstatisticsGetList({data:{startTime:parseInt(t.startTime/1e3),endTime:parseInt(t.endTime/1e3),page:t.page+0,num:t.num,isOpenTime:Number(t.isOpenTime),operateTime:t.selectedTypeOne,billType:t.selectedTypeTwo,billId:t.billId,isSettle:t.status,optionKey:t.selectedTypeFour+1,optionValue:t.optionValue,shopId:t.sId?t.sId:t.userdata.currentShop.id}});case 4:if(i=e.sent,t.totalList=i.total,t.totalList.totalDay=Math.ceil((t.endTime-t.startTime)/864e5),s=i.list){e.next=10;break}return e.abrupt("return");case 10:for(n=0;n<s.length;n++)0==s[n].updateTime?s[n].updateTime="--":s[n].updateTime=l.a.format(new Date(1e3*s[n].updateTime),"yyyy-MM-dd hh:mm"),s[n].createTime=l.a.format(new Date(1e3*s[n].createTime),"yyyy-MM-dd hh:mm"),s[n].isSettle=0==s[n].isSettle?"未结清":"已结清",s[n].billType=1==s[n].billType?"个人账户":"企业账户";t.orderCredit=s,t.total=i.pageNum;case 13:case"end":return e.stop()}},e,t)}))()},selectByTime:function(){this.filterReset(!1)},startTimeChange:function(t){this.startTime=t},endTimeChange:function(t){this.endTime=new Date(t).setHours(23,59,59,999)},goPage:function(t){this.page=t.page,this.num=t.num,this.getOrderBillList()},goDetails:function(t){var e=this;return o(regeneratorRuntime.mark(function i(){var s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.a.OrderstatisticsBillDelite({data:{trueShopId:e.sId?e.sId:e.userdata.currentShop.id,oid:t}});case 2:(s=i.sent)&&(e.detail=s,e.showDetails=!0);case 4:case"end":return i.stop()}},i,e)}))()},getDetailShow:function(){var t=this;this.showDetails=!1,this.shopName&&this.$store.commit("setPageTools",[{name:"返回",className:["export-btn"],fn:function(){var e={startTime:t.sTime,endTime:t.eTime,operateTime:t.gType};t.$emit("return",e)}}])},transformTime:function(t){return l.a.format(new Date(Number(t)),"yyyy年MM月dd日")}},components:{calendar:function(){return i.e("calendar_type").then(i.bind(null,"f2dd"))},PageElement:function(){return i.e("page_element").then(i.bind(null,"5921"))},orderDetail:function(){return i.e("delete_detail").then(i.bind(null,"603c"))},tableCom:function(){return i.e("table").then(i.bind(null,"4360"))},selectBtn:function(){return i.e("select_btn").then(i.bind(null,"3d41"))}}},c=(i("b45b"),i("6ceb")),d=Object(c.a)(r,s,[],!1,null,"a37ca374",null);d.options.__file="src\\module\\statistics\\order_bill_list.vue";e.default=d.exports},"7fce":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QkU0QjkxNkU3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QkU0QjkxNkY3QjFFMTFFNzhEOUY4ODQ1N0UwNTQwQUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3MTI4MzA4RjdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MTI4MzA5MDdCMUUxMUU3OEQ5Rjg4NDU3RTA1NDBBQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PimH4BQAAAHcSURBVHjafJRLKERhFMfnjhkrorBRZlIWFqyUNAumGZL3RmNDYSETGwsRWShlwY4yZeFNYYM0ynsjmSxEmYXHGI8VyQ6z4H/qP/r6uuPUb+6d75z/+c693znXKHdXW0zMA5p4dXAtCg7AKtjXBTbtfz6YAm7wQcEWfQ4m7wBHwA/CZonKKPoEXWAFvGsbpYAWMAzOQB04VhNJJRvgEdSACNezgTx7EtgDt6w4CLapKZHKrPgxwAyIURRP0g2ewTQIgBswSF+EsTFqDUnkZdY+8MDAAjDB+xEwpNx7eC+x/dR6JZEPvIIF5V0M8DrGJJKglWs9Stw8tT4rdzhkmRaldLElZe2S1zRlLUatRxLlgDvtdKSiXHABUkElmKVvWYu9lxxyal/AbtKU8ao22VcWnlTArBelohfgtCS2eJJeUGviF+2TjY1VxapiJoHGP5uIphTsWPlCM9mxuiWDcTDJrtatGWSBRQNDKzuegDxQxOGMWwaPV6wQXCk+mb1zNqpLKvoBbSwzqL2vN/aPX0viZKxo2iWHlQ6Z4ga2Qgh0Kic5p5yUnb4QY0VzrU+/THExZ0cGc5SfkajyKDJO6eCUTxFO9D0ShwtUgEYK68E3vwxrYB3s8pX82a8AAwCMD2um1YF6vgAAAABJRU5ErkJggg=="},b45b:function(t,e,i){"use strict";var s=i("c54f");i.n(s).a},c54f:function(t,e,i){}}]);