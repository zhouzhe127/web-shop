(window.webpackJsonp=window.webpackJsonp||[]).push([["user_groupings"],{6645:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"user_group"}},[n("header",{staticClass:"user_group_header"},[n("div",{staticClass:"select_keywords"},[n("i",[e._v("关键字")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.keyWords,expression:"keyWords"}],attrs:{type:"text",placeholder:"请输入分组名称"},domProps:{value:e.keyWords},on:{input:function(t){t.target.composing||(e.keyWords=t.target.value)}}}),e._v(" "),n("button",{staticClass:"btn blue",on:{click:e.selectGroup}},[e._v("筛选")]),e._v(" "),n("button",{staticClass:"btn gray",on:{click:e.resertGroup}},[e._v("重置")])])]),e._v(" "),n("com-table",{key:e.index,staticClass:"table_width",attrs:{listHeight:80,listName:"用户分组",showTitle:1,introData:e.userList,listWidth:1437,titleData:e.titleList,allTotal:e.allUserList.length,widthType:!0},scopedSlots:e._u([{key:"con-0",fn:function(t){return n("div",{staticClass:"operate_user"},[n("span",{staticClass:"export_user",on:{click:function(n){e.exportUser(t.data.id)}}},[e._v("导出用户")]),e._v(" "),n("span",{staticClass:"show_detail",on:{click:function(n){e.checkDetails(t.data.id)}}},[e._v("查看详情")]),e._v(" "),n("span",{staticClass:"edit_user",on:{click:function(n){e.editUserInfo(t.data,t.index)}}},[e._v("编辑")]),e._v(" "),n("span",{staticClass:"delete_user",on:{click:function(n){e.deleteUser(t.data.id,t.index)}}},[e._v("删除")])])}},{key:"con-1",fn:function(t){return n("div",{},[e._v(e._s(e.num*(e.page-1)+t.index+1))])}}])}),e._v(" "),n("section",{staticClass:"turn-page"},[n("pageElement",{attrs:{page:Number(e.page),total:Number(e.pageNum),numArr:[10,20,30,40,50],isNoJump:!0},on:{pageNum:e.pageChange}})],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[e.isShowNewGroup?n("win",{attrs:{width:512,height:169},on:{winEvent:e.winEvent}},[n("span",{attrs:{slot:"title"},slot:"title"},[e._v("新增用户组")]),e._v(" "),n("div",{staticClass:"new_user",attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"group_name"},[n("span",{staticClass:"required"},[e._v("分组名称")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.groupName,expression:"groupName",modifiers:{trim:!0}}],attrs:{maxlength:"20",type:"text",placeholder:"请输入名称"},domProps:{value:e.groupName},on:{input:function(t){t.target.composing||(e.groupName=t.target.value.trim())},blur:function(t){e.$forceUpdate()}}})])])]):e._e()],1)],1)};r._withStripped=!0;var i=n("81a2"),s=n("05dd");function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(i,s){try{var a=t[i](s),o=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(o).then(function(e){r("next",e)},function(e){r("throw",e)});e(o)}("next")})}}var o={data:function(){return{index:null,titleList:[{titleName:"操作",titleStyle:{fontSize:"16px",width:"483px",flex:"none"}},{titleName:"序号",titleStyle:{fontSize:"16px",width:"318px",flex:"none"}},{titleName:"分组名称",dataName:"name",titleStyle:{fontSize:"16px",width:"318px",flex:"none"}},{titleName:"人数",dataName:"count",titleStyle:{fontSize:"16px",width:"318px",flex:"none"}}],allTotal:0,page:1,num:10,pageNum:1,userList:[],isShowNewGroup:!1,editUser:[],list:[{name:"无",id:1},{name:"店长",id:2},{name:"组员",id:3}],groupName:"",result:[],keyWords:"",isEdit:!1,editId:"",total:0,allUserList:[],editIndex:""}},methods:{pushNewGroup:function(){this.isShowNewGroup=!0,this.editUser=[],this.isEdit=!1},winEvent:function(e){e&&"ok"==e?this.addNewGroup():this.isShowNewGroup=!1,this.groupName="",this.editId=""},addNewGroup:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s.a.checkData({groupName:{cond:"$$.trim() != ''",pro:"请输入分组名称"}},e)){t.next=2;break}return t.abrupt("return",!1);case 2:e.isEdit?e.editGroup():e.addGroup();case 3:case"end":return t.stop()}},t,e)}))()},editGroup:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.groupName,t.next=3,i.a.editUserGroup({data:{id:e.editId,name:n}});case 3:e.$store.commit("setWin",{winType:"alert",content:"修改成功",title:"操作提示"}),e.allUserList[e.editIndex].name=n,e.isShowNewGroup=!1;case 6:case"end":return t.stop()}},t,e)}))()},addGroup:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.addUserGroups({data:{name:e.groupName}});case 2:e.getUserGroup(e.page),e.isShowNewGroup=!1;case 4:case"end":return t.stop()}},t,e)}))()},exportUser:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i.a.exportUserGroup({data:{groupId:e,format:"csv"}});case 1:case"end":return t.stop()}},n,t)}))()},checkDetails:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:s.a.groupFansList={groupId:e,isOwer:!0},t.$router.push("/admin/Assistantfans");case 2:case"end":return n.stop()}},n,t)}))()},editUserInfo:function(e,t){if(e.id<=2)return this.$store.commit("setWin",{content:"默认分组无法编辑",title:"操作提示",winType:"alert"}),!1;this.groupName=e.name,this.isEdit=!0,this.isShowNewGroup=!0,this.editId=e.id,this.editIndex=this.page*this.num-this.num+t},deleteUser:function(e,t){var n=this;if(e<=2)return this.$store.commit("setWin",{content:"默认分组无法删除",title:"操作提示",winType:"alert"}),!1;this.editIndex=this.page*this.num-this.num+t,this.$store.commit("setWin",{content:"确认要执行删除操作吗？",title:"操作提示",winType:"confirm",callback:function(t){"ok"==t&&n.deleUserGroup(e)}})},deleUserGroup:function(e){var t=this;return a(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.deleUserGroups({data:{id:e}});case 2:t.$store.commit("setWin",{winType:"alert",content:"删除成功",title:"操作提示"}),t.allUserList.splice(t.editIndex,1),t.setPage();case 5:case"end":return n.stop()}},n,t)}))()},resertGroup:function(){this.getUserGroup(),this.groupName="",this.page=1,this.keyWords=""},selectGroup:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""==!e.keyWords.trim()){t.next=3;break}return e.$store.commit("setWin",{winType:"alert",title:"提示信息",content:"请输入关键字"}),t.abrupt("return",!1);case 3:n=[],e.allUserList.forEach(function(t){t.name==e.keyWords&&n.push(t)}),e.allUserList=n,e.setPage();case 7:case"end":return t.stop()}},t,e)}))()},getUserGroup:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.getUserGroups({data:{}});case 2:null==(n=t.sent)&&(n={}),e.allUserList=Object.values(n),e.$nextTick(function(){e.setPage()});case 6:case"end":return t.stop()}},t,e)}))()},pageChange:function(e){this.page=e.page,this.num=e.num,this.setPage()},setPage:function(){this.pageNum=Math.ceil(this.allUserList.length/this.num);var e=(this.page-1)*this.num,t=this.page*this.num;this.userList=this.allUserList.slice(e,t)}},mounted:function(){var e=this;this.$store.commit("setPageTools",{pushNewGroup:function(){e.pushNewGroup()}}),this.getUserGroup()},components:{pageElement:function(){return n.e("page_element").then(n.bind(null,"5921"))},win:function(){return n.e("win").then(n.bind(null,"f60a"))},"mul-select":function(){return n.e("mul_select").then(n.bind(null,"7d09"))},selectBtn:function(){return n.e("select_btn").then(n.bind(null,"3d41"))},comTable:function(){return n.e("table").then(n.bind(null,"4360"))}}},u=(n("e181"),n("6ceb")),c=Object(u.a)(o,r,[],!1,null,"52545c70",null);c.options.__file="src\\module\\seller_assistant\\user_groupings.vue";t.default=c.exports},abb8:function(e,t,n){},e181:function(e,t,n){"use strict";var r=n("abb8");n.n(r).a}}]);