(window.webpackJsonp=window.webpackJsonp||[]).push([["warehouse_list"],{"1a14":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"warehouse-lists"},[i("ul",{staticClass:"choose-btn"},[i("li",{class:{select:0==e.toggleCom},on:{click:function(t){e.toggleCom=0}}},[e._v("仓库列表")]),e._v(" "),i("li",{class:{select:1==e.toggleCom},on:{click:function(t){e.toggleCom=1}}},[e._v("操作记录")])]),e._v(" "),0==e.toggleCom?i("div",[i("div",{staticClass:"filter"},[i("div",{staticClass:"block"},[i("div",{staticClass:"inline-box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"}],attrs:{type:"text",placeholder:"请输入仓库编号"},domProps:{value:e.code},on:{input:[function(t){t.target.composing||(e.code=t.target.value)},e.codeInput],propertychange:e.codeInput}})]),e._v(" "),i("div",{staticClass:"inline-box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",placeholder:"请输入仓库名称"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"inline-box"},[e._v("\n\t\t\t\t\t\t仓库所属：\n\t\t\t\t\t\t"),i("selectStore",{attrs:{sorts:e.owner,tipName:e.dropName,isConfirm:!0},on:{emit:e.getDrop}})],1)]),e._v(" "),i("div",{staticClass:"block"},[i("div",{staticClass:"inline-box"},[e._v("\n\t\t\t\t\t\t仓库地址：\n\t\t\t\t\t\t"),i("addressLinkage",{attrs:{province:e.province,city:e.city,area:e.town},on:{emit:e.getAddress}})],1),e._v(" "),i("div",{staticClass:"inline-box"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.place,expression:"place"}],attrs:{type:"text",placeholder:"请输入详细地址"},domProps:{value:e.place},on:{input:function(t){t.target.composing||(e.place=t.target.value)}}})]),e._v(" "),i("div",{staticClass:"inline-box input-check select-ban"},[i("i",{class:{active:"0"===this.isShare},on:{click:e.clickCheck}}),e._v("\n\t\t\t\t\t\t非共享\n\t\t\t\t\t")]),e._v(" "),i("div",{staticClass:"inline-box button-box"},[i("span",{staticClass:"blue",on:{click:e.filterClick}},[e._v("筛选")]),e._v(" "),i("span",{staticClass:"gray",on:{click:e.reset}},[e._v("重置")])])])]),e._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"list"},[i("div",{staticClass:"head"},[e._v("\n\t\t\t\t\t\t仓库列表 · 共"),i("em",[e._v(" "+e._s(e.allList.length)+" ")]),e._v("条数据\n\t\t\t\t\t")]),e._v(" "),i("div",{staticClass:"list-box"},[i("div",{staticClass:"fixed",on:{click:e.listHandle}},[i("span",{staticClass:"fixed-title"},[e._v("操作")]),e._v(" "),e._l(e.list,function(t,s){return i("div",{key:s,staticClass:"fixed-list"},[i("span",{staticClass:"detail",attrs:{"data-index":s}},[e._v("查看详情")])])})],2),e._v(" "),e._m(0),e._v(" "),i("ul",[e._l(e.list,function(t,s){return i("li",{key:s},[i("span",[e._v(e._s(t.name))]),e._v(" "),i("span",{staticClass:"narrow"},[e._v(e._s(e.setShared(t.isShared)))]),e._v(" "),i("span",{staticClass:"text-ellipsis",attrs:{title:t.code}},[e._v(e._s(t.code))]),e._v(" "),i("span",{staticClass:"text-ellipsis",attrs:{title:t.ownerName}},[e._v(e._s(t.ownerName))]),e._v(" "),i("span",[e._v(e._s(t.area.length))]),e._v(" "),i("span",[e._v(e._s(Number(t.KindWeightKg||t.kindWeightKg)+Number(t.kindGoods)+Number(t.kindWeightG)))]),e._v(" "),i("span",[e._v(e._s(t.kindMaterial))]),e._v(" "),i("span",[i("em",{staticClass:"warp warp-three"},[e._v(e._s(t.provinceName)+" "+e._s(t.cityName)+" "+e._s(t.townName)+" "+e._s(t.place))])])])}),e._v(" "),e.list.length?e._e():i("li",{staticClass:"empty"},[e._v("- 暂无条目 -")])],2)])]),e._v(" "),i("div",{staticClass:"page-box"},[i("pageBtn",{attrs:{total:e.pageTotal,page:e.page,isNoJump:!0},on:{pageNum:e.pageChange}})],1)])]):e._e(),e._v(" "),1==e.toggleCom?i("operation-com"):e._e()],1)};s._withStripped=!0;var a=i("f6ce"),n=i("bbb9"),r=i("81a2");function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function s(a,n){try{var r=t[a](n),o=r.value}catch(e){return void i(e)}if(!r.done)return Promise.resolve(o).then(function(e){s("next",e)},function(e){s("throw",e)});e(o)}("next")})}}var l=null,c={data:function(){return{allList:[],filterList:[],list:[],listLength:0,page:1,showNum:10,pageTotal:1,province:"",city:"",town:"",provinceName:"",cityName:"",townName:"",place:"",isShare:"",owner:"",dropName:"请选择所属",code:"",name:"",filterObj:"",userData:"",brandId:"",toggleCom:0}},components:{pageBtn:function(){return i.e("page_element").then(i.bind(null,"5921"))},addressLinkage:function(){return i.e("address_linkage").then(i.bind(null,"4867"))},selectStore:function(){return i.e("win").then(i.bind(null,"cb83"))},operationCom:function(){return i.e("operation").then(i.bind(null,"6c7a"))}},created:function(){this.userData=a.a.session("userShop")},mounted:function(){"3"==this.userData.currentShop.ischain&&(this.brandId=this.userData.currentShop.id),this.initBtn(),this.getRequest(),this.getList();var e=a.a.session("warehouseManagerTab");1==e&&(this.toggleCom=e,a.a.session("warehouseManagerTab",null))},methods:{initBtn:function(){var e=this,t=[{name:"查看全部",className:["wearhouse all"],fn:function(){a.a.session("warehouseListsRequest",e.filterObj),e.$router.push({path:"warehouseList/searchGoods",query:e.$route.query})}},{name:"新建仓库",className:["wearhouse create"],fn:function(){e.$router.push({path:"warehouseList/create",query:e.$route.query})}}];this.$store.commit("setPageTools",t)},listHandle:function(e){var t=e.target;if(t.className.includes("detail")){var i=t.getAttribute("data-index"),s=this.list[i].id;a.a.session("warehouseListsRequest",this.filterObj),this.$route.query.id=s,this.$router.push({path:"warehouseList/warehouseDetail",query:this.$route.query})}},getOwners:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var i,s,a,n,o,l,c,u,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.invoicing_getOwners();case 2:if(i=t.sent,s=[],!i){t.next=24;break}for(a=!0,n=!1,o=void 0,t.prev=8,l=i[Symbol.iterator]();!(a=(c=l.next()).done);a=!0)u=c.value,h={selected:!0},3==u.ischain?(h.id=u.brandId+",0",h.name=u.brandName):u.brandId?(h.id=u.brandId+","+u.shopId,h.name=u.brandName+"-"+u.shopName):(h.id="0,"+u.shopId,h.name=u.shopName),s.push(h);t.next=16;break;case 12:t.prev=12,t.t0=t.catch(8),n=!0,o=t.t0;case 16:t.prev=16,t.prev=17,!a&&l.return&&l.return();case 19:if(t.prev=19,!n){t.next=22;break}throw o;case 22:return t.finish(19);case 23:return t.finish(16);case 24:e.owner=s;case 25:case"end":return t.stop()}},t,e,[[8,12,16,24],[17,,19,23]])}))()},getList:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.warehouseWarehouseList();case 2:i=t.sent,e.allList=i,e.filter();case 5:case"end":return t.stop()}},t,e)}))()},getRequest:function(){var e=a.a.session("warehouseListsDestroy"),t=a.a.session("warehouseListsRequest");if(e){if(t)for(var i in t)this[i]=t[i]}else this.getOwners();a.a.session("warehouseListsDestroy",null),a.a.session("warehouseListsRequest",null)},filterClick:function(){this.page=1,this.filter()},filter:function(){var e={code:this.code,name:this.name,owner:this.owner,province:this.province,city:this.city,town:this.town,place:this.place,isShared:this.isShare};this.filterObj=e,this.condition(e),this.paging()},reset:function(){for(var e in this.filterObj)if("owner"==e){var t=n.a.deepCopy(this.owner),i=!0,s=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){r.value.selected=!0}}catch(e){s=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(s)throw a}}this.owner=t}else this[e]="";this.filter()},paging:function(){this.pageTotal=Math.ceil(this.filterList.length/this.showNum);var e=(this.page-1)*this.showNum,t=this.page*this.showNum;t>this.filterList.length&&(t=this.filterList.length),this.list=this.filterList.slice(e,t),this.getAreaCn()},condition:function(e){var t=n.a.deepCopy(this.allList);for(var i in e){var s=[];if(""!=e[i]){if("owner"==i){var a=!0,r=!1,o=void 0;try{for(var l,c=e.owner[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value,h=!0,v=!1,p=void 0;try{for(var d,f=t[Symbol.iterator]();!(h=(d=f.next()).done);h=!0){var m=d.value;u.selected&&m.owner.includes(u.id)&&s.push(m)}}catch(e){v=!0,p=e}finally{try{!h&&f.return&&f.return()}finally{if(v)throw p}}}}catch(e){r=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(r)throw o}}}else{var g=!0,_=!1,w=void 0;try{for(var b,y=t[Symbol.iterator]();!(g=(b=y.next()).done);g=!0){var C=b.value;C[i].includes(e[i])&&s.push(C)}}catch(e){_=!0,w=e}finally{try{!g&&y.return&&y.return()}finally{if(_)throw w}}}t=s}}this.filterList=t},codeInput:function(e){var t=e.target.value;t=t.replace(/[^A-Za-z0-9]/g,""),this.code=t,e.target.value=t},setShared:function(e){return 0==e?"非共享":1==e?"共享":void 0},getDrop:function(e){this.owner=e,this.page=1,this.filter()},clickCheck:function(){"0"===this.isShare?this.isShare="":this.isShare="0",this.page=1,this.filter()},pageChange:function(e){this.page=e.page,this.showNum=e.num,this.filter()},getAreaCn:function(){var e=this;return o(regeneratorRuntime.mark(function t(){var s,a,r,o,c,u,h,v;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.e("area_cn").then(i.bind(null,"f529"));case 2:for(s=t.sent,l=s.default,a=n.a.deepCopy(e.list),r=!0,o=!1,c=void 0,t.prev=8,u=a[Symbol.iterator]();!(r=(h=u.next()).done);r=!0)(v=h.value).provinceName=l.getNameByCode(v.province),v.cityName=l.getNameByCode(v.city),v.townName=l.getNameByCode(v.town);t.next=16;break;case 12:t.prev=12,t.t0=t.catch(8),o=!0,c=t.t0;case 16:t.prev=16,t.prev=17,!r&&u.return&&u.return();case 19:if(t.prev=19,!o){t.next=22;break}throw c;case 22:return t.finish(19);case 23:return t.finish(16);case 24:e.list=a;case 25:case"end":return t.stop()}},t,e,[[8,12,16,24],[17,,19,23]])}))()},getAddress:function(e){this.province=e.province,this.city=e.city,this.town=e.area,this.page=1,this.filter()}}},u=(i("9861"),i("7610")),h=Object(u.a)(c,s,[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title"},[i("span",[e._v("仓库名称")]),e._v(" "),i("span",{staticClass:"narrow"},[e._v("共享状态")]),e._v(" "),i("span",[e._v("仓库编号")]),e._v(" "),i("span",[e._v("仓库所属")]),e._v(" "),i("span",[e._v("区域总数")]),e._v(" "),i("span",[e._v("商品种类")]),e._v(" "),i("span",[e._v("物料种类")]),e._v(" "),i("span",[e._v("仓库地址")])])}],!1,null,"406d6c52",null);h.options.__file="src\\module\\invoicing_system\\warehouse_manage\\warehouse_list.vue";t.default=h.exports},9861:function(e,t,i){"use strict";var s=i("eb08");i.n(s).a},eb08:function(e,t,i){}}]);