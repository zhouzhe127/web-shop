(window.webpackJsonp=window.webpackJsonp||[]).push([["kitchen_model"],{"0081":function(t,e,n){},a0db:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"kitchen"}},[n("section",[n("label",{staticClass:"topCom  fl"},[t._v("后厨模式开关：")]),t._v(" "),n("on-off",{attrs:{status:t.on},on:{statusChange:t.getIsDiscountToggle}})],1),t._v(" "),n("comTable",{attrs:{showHand:!1,titleData:t.titleData,introData:t.currentList,bannerStyle:t.bannerStyle,contentStyle:t.contentStyle,titleHeight:50,listHeight:50},scopedSlots:t._u([{key:"con-0",fn:function(e){return n("span",{staticStyle:{cursor:"pointer",display:"inline-block"}},[n("span",{staticStyle:{color:"#28A8E0","font-size":"16px"},on:{click:function(n){t.see(e.data,e.index,n)}}},[t._v("查看")]),t._v(" "),n("span",{staticStyle:{padding:"0 20px",color:"#D2D2D2"}},[t._v("|")]),t._v(" "),n("span",{staticStyle:{color:"#FE8D2C","font-size":"16px"},on:{click:function(n){t.toEdit(e.data,e.index)}}},[t._v("编辑")]),t._v(" "),n("span",{staticStyle:{padding:"0 20px",color:"#D2D2D2"}},[t._v("|")]),t._v(" "),n("span",{staticStyle:{color:"#FD3F1F","font-size":"16px"},on:{click:function(n){t.delJob(e.data.id,e.index)}}},[t._v("删除")]),t._v(" "),t.isShowGoods===e.index?n("div",{staticClass:"detLi"},[n("div",{staticClass:"detDiv"},[n("i",{staticClass:"detI"}),t._v(" "),n("h3",{staticClass:"detH3"},[t._v(t._s(t.goodsName.join("、")))])])]):t._e()])}},{key:"con-1",fn:function(e){return n("span",{},[t._v(t._s(e.index+1))])}},{key:"con-2",fn:function(e){return n("span",{},[t._v(t._s(0==e.data.type?"后厨加工":"出品台"))])}}])}),t._v(" "),t.showTan?n("kitchenModel",{attrs:{item:t.info,isAdd:t.isAdd,Area:t.Area,allName:t.allName},on:{throwWinResult:t.doThrowTanResult}}):t._e()],1)};i._withStripped=!0;var o=n("81a2"),s=n("bbb9"),r=n("f6ce");function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(o,s){try{var r=e[o](s),a=r.value}catch(t){return void n(t)}if(!r.done)return Promise.resolve(a).then(function(t){i("next",t)},function(t){i("throw",t)});t(a)}("next")})}}var c={data:function(){return{currentList:[],on:!1,showTan:!1,info:{},index:null,isAdd:!0,Area:[],isShowGoods:-1,goodsName:[],goodLists:[],packlist:[],allName:[]}},created:function(){var t=this;this.titleData=[{titleName:"操作",titleStyle:{width:"300px"}},{titleName:"序号"},{titleName:"操作台类型"},{titleName:"操作台名称",dataName:"name"},{titleName:"关联商品数量",dataName:"goodsNum"}],this.bannerStyle={backgroundColor:"#F2F2F2",color:"#434149",fontSize:"16px"},this.contentStyle={color:"#666666",fontSize:"14px"},this.getGoods(),this.getOn(),document.onclick=function(){t.isShowGoods=-1,t.goodsName=[]}},mounted:function(){var t=this,e=[{name:"添加操作台",className:"userLabel",fn:function(){t.addKitchen()}}];this.$store.commit("setPageTools",e),this.init(),this.getArea(),this.getPack()},methods:{getGoods:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.goodLists=r.a.session("goodList"),t.goodLists){e.next=6;break}return e.next=4,o.a.getGoodsList({data:{page:1,num:9999,specification:1}});case 4:n=e.sent,t.goodLists=n.list;case 6:case"end":return e.stop()}},e,t)}))()},getPack:function(){var t=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getpackagelist({data:{page:1,num:9999}});case 2:t.packlist=e.sent;case 3:case"end":return e.stop()}},e,t)}))()},getOn:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getIsKitchen({data:{}});case 2:n=e.sent,t.on=Boolean(n);case 4:case"end":return e.stop()}},e,t)}))()},getIsDiscountToggle:function(t){var e=this;t?this.isKitchen():this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确认关闭后厨模式开关?",callback:function(t){"ok"==t&&e.isKitchen()}})},isKitchen:function(){var t=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.editIsKitchen({data:{isKitchen:Number(!t.on)}});case 2:t.on=!t.on;case 3:case"end":return e.stop()}},e,t)}))()},addKitchen:function(){this.getAllNames(),this.isAdd=!0,this.info={},this.showTan=!0},toEdit:function(t,e){this.getAllNames(),this.info=t,this.index=e,this.isAdd=!1,this.showTan=!0},init:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.KitchenGetList({data:{}});case 2:(n=e.sent)&&(t.currentList=n,t.sortList());case 4:case"end":return e.stop()}},e,t)}))()},getAllNames:function(){this.allName=[];for(var t=0;t<this.currentList.length;t++)this.allName.push(this.currentList[t].name)},deleteJob:function(t,e){var n=this;return a(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o.a.KitchenDelete({data:{id:t}});case 2:i.sent&&(n.currentList.splice(e,1),n.sortList(),n.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"删除成功"}));case 4:case"end":return i.stop()}},i,n)}))()},delJob:function(t,e){var n=this;this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确定删除该操作台?",callback:function(i){"ok"==i&&n.deleteJob(t,e)}})},see:function(t,e,n){n.stopPropagation(),0!=this.goodsName.length&&(this.goodsName=[]);var i=!0,o=!1,s=void 0;try{for(var r,a=this.goodLists[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var c=r.value;-1!=t.goodsIds.indexOf(c.id)&&(this.goodsName=this.goodsName.concat(c.goodsName))}}catch(t){o=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw s}}for(var u=0;u<this.packlist.length;u++)-1!=t.packageIds.indexOf(this.packlist[u].id)&&(this.goodsName=this.goodsName.concat(this.goodLists[u].goodsName));this.isShowGoods=e},getArea:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.getArea({data:{}});case 2:(n=e.sent)&&(t.Area=n);case 4:case"end":return e.stop()}},e,t)}))()},doThrowTanResult:function(t,e){"ok"==t&&(this.isAdd?this.currentList.push(e):this.currentList.splice(this.index,1,e),this.sortList()),this.showTan=!1},sortList:function(){this.currentList=s.a.sortByAll(this.currentList,["sort","id"],!0)}},components:{comTable:function(){return n.e("table").then(n.bind(null,"4360"))},onOff:function(){return n.e("on_off").then(n.bind(null,"034b"))},kitchenModel:function(){return n.e("kitchen_model_win").then(n.bind(null,"c813"))}}},u=(n("fd2d"),n("7610")),d=Object(u.a)(c,i,[],!1,null,"5a08ae1a",null);d.options.__file="src\\module\\shop_config\\kitchen_model.vue";e.default=d.exports},fd2d:function(t,e,n){"use strict";var i=n("0081");n.n(i).a}}]);