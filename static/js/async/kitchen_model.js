(window.webpackJsonp=window.webpackJsonp||[]).push([["kitchen_model"],{"350d":function(t,e,n){"use strict";var r=n("7d92");n.n(r).a},"7d92":function(t,e,n){},a0db:function(t,e,n){"use strict";n.r(e);var r=n("81a2"),i=n("bbb9"),o=n("f6ce");function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}if(!a.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}("next")})}}var s={data:function(){return{currentList:[],on:!1,showTan:!1,info:{},index:null,isAdd:!0,Area:[],goodLists:[],packlist:[],allName:[]}},created:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[{name:"添加操作台",className:"userLabel",fn:function(){t.addKitchen()}}],t.$store.commit("setPageTools",n),t.getOn(),t.goodLists=o.a.session("goodList"),t.goodLists){e.next=9;break}return e.next=7,r.a.getGoodsList({data:{page:1,num:9999,specification:1}});case 7:i=e.sent,t.goodLists=i.list;case 9:return e.next=11,r.a.getpackagelist({data:{page:1,num:9999}});case 11:t.packlist=e.sent,t.init();case 13:case"end":return e.stop()}},e,t)}))()},mounted:function(){this.getArea()},methods:{getOn:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.getIsKitchen({data:{}});case 2:n=e.sent,t.on=Boolean(n);case 4:case"end":return e.stop()}},e,t)}))()},getIsDiscountToggle:function(){var t=this;this.on?this.isKitchen():this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确认关闭后厨模式开关?",callback:function(e){"ok"==e?t.isKitchen():t.on=!0}})},isKitchen:function(){var t=this;return a(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.editIsKitchen({data:{isKitchen:Number(t.on)}});case 2:case"end":return e.stop()}},e,t)}))()},addKitchen:function(){this.getAllNames(),this.isAdd=!0,this.info={},this.showTan=!0},toEdit:function(t,e){this.getAllNames(),this.info=t,this.index=e,this.isAdd=!1,this.showTan=!0},init:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var n,i,o,a,s,c,u,l,d,f,h,p,m,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.KitchenGetList({data:{}});case 2:if(!(n=e.sent)){e.next=51;break}i=0;case 5:if(!(i<n.length)){e.next=49;break}for(o=[],a=!0,s=!1,c=void 0,e.prev=10,u=t.goodLists[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)d=l.value,n[i].goodsIds.includes(d.id)&&(o=o.concat(d.goodsName));e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),s=!0,c=e.t0;case 18:e.prev=18,e.prev=19,!a&&u.return&&u.return();case 21:if(e.prev=21,!s){e.next=24;break}throw c;case 24:return e.finish(21);case 25:return e.finish(18);case 26:for(f=!0,h=!1,p=void 0,e.prev=29,m=t.packlist[Symbol.iterator]();!(f=(v=m.next()).done);f=!0)g=v.value,n[i].packageIds.includes(g.id)&&(o=o.concat(g.packageName));e.next=37;break;case 33:e.prev=33,e.t1=e.catch(29),h=!0,p=e.t1;case 37:e.prev=37,e.prev=38,!f&&m.return&&m.return();case 40:if(e.prev=40,!h){e.next=43;break}throw p;case 43:return e.finish(40);case 44:return e.finish(37);case 45:n[i].goodsName=o.join("、");case 46:i++,e.next=5;break;case 49:t.currentList=n,t.sortList();case 51:case"end":return e.stop()}},e,t,[[10,14,18,26],[19,,21,25],[29,33,37,45],[38,,40,44]])}))()},getAllNames:function(){this.allName=[];for(var t=0;t<this.currentList.length;t++)this.allName.push(this.currentList[t].name)},deleteJob:function(t,e){var n=this;return a(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.a.KitchenDelete({data:{id:t}});case 2:i.sent&&(n.currentList.splice(e,1),n.sortList(),n.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"删除成功"}));case 4:case"end":return i.stop()}},i,n)}))()},delJob:function(t,e){var n=this;this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确定删除该操作台?",callback:function(r){"ok"==r&&n.deleteJob(t,e)}})},getArea:function(){var t=this;return a(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.a.getArea({data:{}});case 2:(n=e.sent)&&(t.Area=n.map(function(t){return t.selected=!1,t}));case 4:case"end":return e.stop()}},e,t)}))()},doThrowTanResult:function(t){"ok"==t&&this.init(),this.showTan=!1},sortList:function(){this.currentList=i.a.sortByAll(this.currentList,["sort","id"],!0)}},components:{kitchenModel:function(){return n.e("kitchen_model_win").then(n.bind(null,"c813"))}}},c=(n("350d"),n("d801")),u=Object(c.a)(s,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"kitchen"}},[n("section",{staticClass:"top"},[n("label",[t._v("后厨模式开关：")]),t._v(" "),n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:t.getIsDiscountToggle},model:{value:t.on,callback:function(e){t.on=e},expression:"on"}})],1),t._v(" "),n("section",[n("el-table",{ref:"multipleTable",attrs:{stripe:"","header-cell-style":{"background-color":"#f5f7fa"},data:t.currentList,border:""}},[n("el-table-column",{attrs:{"min-width":"120",align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"bottom",width:"600",trigger:"click"}},[n("div",{staticStyle:{"overflow-y":"auto","max-height":"400px",height:"auto"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.row.goodsName)+"\n\t\t\t\t\t\t\t")]),t._v(" "),n("span",{staticStyle:{color:"#28A8E0",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[t._v("查看")])]),t._v(" "),n("span",{staticStyle:{padding:"0 5px",color:"#D2D2D2"}},[t._v("|")]),t._v(" "),n("span",{staticStyle:{color:"#FE8D2C",cursor:"pointer"},on:{click:function(n){t.toEdit(e.row,e.$index)}}},[t._v("编辑")]),t._v(" "),n("span",{staticStyle:{padding:"0 5px",color:"#D2D2D2"}},[t._v("|")]),t._v(" "),n("span",{staticStyle:{color:"#FD3F1F",cursor:"pointer"},on:{click:function(n){t.delJob(e.row.id,e.$index)}}},[t._v("删除")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center","min-width":"50",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.$index+1))])]}}])}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"100",align:"center",label:"操作台类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(0==e.row.type?"后厨加工":"出品台"))])]}}])}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"100",prop:"name",align:"center",label:"操作台名称"}}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"","min-width":"50",prop:"goodsNum",align:"center",label:"关联商品数量"}})],1)],1),t._v(" "),t.showTan?n("kitchenModel",{attrs:{item:t.info,isAdd:t.isAdd,Area:t.Area,allName:t.allName},on:{throwWinResult:t.doThrowTanResult}}):t._e()],1)},[],!1,null,"f210f1fc",null);e.default=u.exports}}]);