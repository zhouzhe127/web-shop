(window.webpackJsonp=window.webpackJsonp||[]).push([["table_manage_win"],{"590d":function(e,t,a){"use strict";var n=a("9026");a.n(n).a},9026:function(e,t,a){},9503:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("win",{attrs:{align:"right",width:580,height:669,ok:e.okStyle,cancel:e.cancelStyle},on:{winEvent:e.clickResult}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.title))]),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{attrs:{id:"table-window"}},[a("div",{staticClass:"table-window-show"},[a("ul",[a("li",[a("p",{staticClass:"required table-area fl"},[e._v("区域")]),e._v(" "),a("span",{staticClass:"table-span"},[a("radioBtn",{attrs:{list:e.Area,index:e.Index,name:"areaName"},on:{selOn:e.doThrowWinResult}})],1)]),e._v(" "),a("li",[a("p",{staticClass:"required table-area fl"},[e._v("桌号名称")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.getOneTable.tableName,expression:"getOneTable.tableName"}],staticClass:"input",staticStyle:{width:"410px"},attrs:{type:"text",placeholder:"输入桌台名称(创建多个桌台请以逗号隔开)",maxlength:"40"},domProps:{value:e.getOneTable.tableName},on:{input:function(t){t.target.composing||e.$set(e.getOneTable,"tableName",t.target.value)}}})]),e._v(" "),e.isAdd?e._e():a("li",[a("p",{staticClass:"required table-area fl"},[e._v("桌号编号")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.getOneTable.id,expression:"getOneTable.id"}],staticClass:"input",staticStyle:{width:"410px"},attrs:{type:"text",placeholder:"输入桌台编号(数字)",maxlength:"9"},domProps:{value:e.getOneTable.id},on:{input:function(t){t.target.composing||e.$set(e.getOneTable,"id",t.target.value)}}})]),e._v(" "),a("li",[a("p",{staticClass:"required table-area fl"},[e._v("标准席位")]),e._v(" "),a("span",{staticClass:"table-span"},[a("subadd",{attrs:{bindnum:e.getOneTable.normalSeat,maxnum:1e3,minnum:1,sign:!1},on:{toClick:e.changeOne}})],1)]),e._v(" "),a("li",[a("p",{staticClass:"table-area required fl"},[e._v("容纳人数")]),e._v(" "),a("span",{staticClass:"table-span"},[a("subadd",{attrs:{bindnum:e.minSeat,maxnum:1e3,minnum:1,sign:!1},on:{toClick:e.changeTwo}}),e._v(" "),a("p",{staticClass:"table-area fl",staticStyle:{width:"60px","text-align":"center"}},[e._v("至")]),e._v(" "),a("subadd",{attrs:{bindnum:e.maxSeat,maxnum:1e3,minnum:1,sign:!1},on:{toClick:e.changeThree}})],1)]),e._v(" "),a("li",[a("p",{staticClass:"table-area required fl"},[e._v("排序")]),e._v(" "),a("span",{staticClass:"table-span"},[a("subadd",{attrs:{bindnum:e.sort,maxnum:255,minnum:1,sign:!1},on:{toClick:e.changeFour}})],1)]),e._v(" "),a("li",[a("p",{staticClass:"table-area fl"},[e._v("描述")]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.getOneTable.description,expression:"getOneTable.description"}],staticClass:"describe",attrs:{maxlength:"50"},domProps:{value:e.getOneTable.description},on:{input:function(t){t.target.composing||e.$set(e.getOneTable,"description",t.target.value)}}})])])])])])])};n._withStripped=!0;var i=a("81a2");function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function n(i,r){try{var s=t[i](r),l=s.value}catch(e){return void a(e)}if(!s.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}("next")})}}var s={data:function(){return{title:"",okStyle:null,cancelStyle:null,sort:255,minSeat:1,maxSeat:99,getOneTable:{},Index:-1,areaID:0}},props:{isAdd:null,tableId:"",tableIndex:"",userData:Object,tableList:Array,Area:Array,tableDetial:Object},mounted:function(){this.isAdd?(this.title="新建桌台",this.cancelStyle=null,this.okStyle={content:"保存",style:{backgroundColor:"#29ABE2",color:"#fff"}}):this.isAdd||(this.title="修改桌台",this.okStyle=null,this.cancelStyle={content:"删除",style:{backgroundColor:"red",color:"#fff "}}),this.getTableInfo()},methods:{doThrowWinResult:function(e){this.getOneTable&&this.Area&&(this.Index=e)},changeOne:function(e){this.getOneTable.normalSeat=e},changeTwo:function(e){this.minSeat=e},changeThree:function(e){this.maxSeat=e},changeFour:function(e){this.sort=e},createTable:function(e){var t=this;return r(regeneratorRuntime.mark(function a(){var n,r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.createTable({data:{areaId:t.Area[t.Index].id,shopId:t.userData.currentShop.id,tableName:t.getOneTable.tableName,normalSeat:t.getOneTable.normalSeat,description:t.getOneTable.description,minSeat:t.minSeat,maxSeat:t.maxSeat,sort:t.sort,createUid:t.userData.user.id}});case 2:if(n=a.sent){for(r=0;r<n.length;r++)t.tableList.push(n[r]);t.$emit("throwWinResult",e)}case 4:case"end":return a.stop()}},a,t)}))()},editTable:function(e){var t=this;return r(regeneratorRuntime.mark(function a(){var n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.editTable({data:{shopId:t.userData.currentShop.id,areaId:t.Area[t.Index].id,id:t.tableId,newTableId:t.getOneTable.id,tableName:t.getOneTable.tableName,normalSeat:t.getOneTable.normalSeat,description:t.getOneTable.description,minSeat:t.minSeat,maxSeat:t.maxSeat,sort:t.sort,updateUid:t.userData.user.id}});case 2:(n=a.sent)&&(t.tableList.splice(t.tableIndex,1,n),t.$emit("throwWinResult",e));case 4:case"end":return a.stop()}},a,t)}))()},deleteTable:function(e){var t=this;return r(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.deleteTable({data:{shopId:t.userData.currentShop.id,id:t.tableId}});case 2:a.sent&&(t.tableList.splice(t.tableIndex,1),t.$emit("throwWinResult",e));case 4:case"end":return a.stop()}},a,t)}))()},getTableInfo:function(){var e=this;return r(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isAdd)e.isAdd&&(e.getOneTable={tableName:"",normalSeat:6,description:"",id:""});else for(e.areaID=e.tableDetial.areaId,e.getOneTable=e.tableDetial,e.sort=e.tableDetial.sort,e.minSeat=e.tableDetial.minSeat,e.maxSeat=e.tableDetial.maxSeat,a=0;a<e.Area.length;a++)e.Area[a].id+""==e.areaID+""&&(e.Index=a);case 1:case"end":return t.stop()}},t,e)}))()},clickResult:function(e){var t=this;if("ok"==e){var a=this.getOneTable,n=(a.tableName+"").split(/,|，/);a.tableName="";for(var i=0;i<n.length;i++){if(n[i].length>20)return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"单个桌台名不能超过20个字"}),!1;null!=n[i]&&""!=n[i]&&(a.tableName+=n[i],a.tableName+=",")}if(a.tableName=(a.tableName+"").substring(0,a.tableName.length-1),-1==this.Index)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"请选择区域"}),!1;if(""==a.tableName||void 0==a.tableName||null==a.tableName)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"桌号名不能为空"}),!1;var r=a.normalSeat-0,s=/^[0-9]+$/;if(!s.test(Number(this.getOneTable.id)))return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"桌号编号只能是数字"}),!1;if(""==r||void 0==r||null==r)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"标准席位不能为空"}),!1;if(!s.test(r))return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"标准席位只能是数字"}),!1;var l=this.minSeat-0,o=this.maxSeat-0;if(o<0)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"容纳的最大人数不能小于0"}),!1;if(!s.test(o))return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"容纳的最大人数只能为整数"}),!1;if(l<0)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"容纳的最小人数不能小于0"}),!1;if(!s.test(l))return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"容纳的最小人数只能为整数"}),!1;if(l>o)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"容纳最大人数不能小于最小人数"}),!1;this.isAdd?this.createTable(e):this.isAdd||this.editTable(e)}else"cancel"==e?(this.isAdd||this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确定删除桌台"+this.getOneTable.tableName+"?",callback:function(a){"ok"==a&&t.deleteTable(e)}}),this.isAdd&&this.$emit("throwWinResult",e)):this.$emit("throwWinResult",e)}},components:{win:function(){return a.e("win").then(a.bind(null,"f60a"))},subadd:function(){return a.e("subadd").then(a.bind(null,"e7ea"))},radioBtn:function(){return a.e("radio_btn").then(a.bind(null,"4dfe"))}}},l=(a("590d"),a("7610")),o=Object(l.a)(s,n,[],!1,null,"7a215b04",null);o.options.__file="src\\module\\shop_config\\table_manage_win.vue";t.default=o.exports}}]);