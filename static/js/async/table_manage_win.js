(window.webpackJsonp=window.webpackJsonp||[]).push([["table_manage_win"],{"590d":function(e,t,a){"use strict";var n=a("f76c");a.n(n).a},9503:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("win",{attrs:{align:"right",width:600,height:670,ok:e.okStyle,cancel:e.cancelStyle},on:{winEvent:e.clickResult}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.title))]),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{attrs:{id:"table-window"}},[a("el-form",{ref:"getOneTable",attrs:{model:e.getOneTable,"label-width":"120px"}},[a("el-form-item",{attrs:{required:"",label:"区域"}},[a("el-radio-group",{model:{value:e.oIndex,callback:function(t){e.oIndex=t},expression:"oIndex"}},e._l(e.Area,function(t,n){return a("el-radio",{key:n,staticClass:"labItem",attrs:{label:n,border:""}},[e._v(e._s(t.areaName))])}))],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"桌号名称"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{maxlength:"40",placeholder:"输入桌台名称(创建多个桌台请以逗号隔开)"},model:{value:e.getOneTable.tableName,callback:function(t){e.$set(e.getOneTable,"tableName",t)},expression:"getOneTable.tableName"}})],1),e._v(" "),e.isAdd?e._e():a("el-form-item",{attrs:{required:"",label:"桌号编号"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"输入桌台编号(数字)",maxlength:"9"},model:{value:e.getOneTable.id,callback:function(t){e.$set(e.getOneTable,"id",t)},expression:"getOneTable.id"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"标准席位"}},[a("el-input-number",{staticStyle:{width:"150px"},attrs:{min:1,max:1e3},model:{value:e.getOneTable.normalSeat,callback:function(t){e.$set(e.getOneTable,"normalSeat",t)},expression:"getOneTable.normalSeat"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"容纳人数"}},[a("el-input-number",{staticStyle:{width:"150px"},attrs:{min:1,max:1e3},model:{value:e.minSeat,callback:function(t){e.minSeat=t},expression:"minSeat"}}),e._v(" "),a("span",[e._v("至")]),e._v(" "),a("el-input-number",{staticStyle:{width:"150px"},attrs:{min:1,max:1e3},model:{value:e.maxSeat,callback:function(t){e.maxSeat=t},expression:"maxSeat"}})],1),e._v(" "),a("el-form-item",{attrs:{required:"",label:"排序"}},[a("el-input-number",{staticStyle:{width:"150px"},attrs:{min:1,max:255},model:{value:e.sort,callback:function(t){e.sort=t},expression:"sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",maxlength:"50"},model:{value:e.getOneTable.description,callback:function(t){e.$set(e.getOneTable,"description",t)},expression:"getOneTable.description"}})],1)],1)],1)])])};n._withStripped=!0;var i=a("81a2");function r(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function n(i,r){try{var l=t[i](r),s=l.value}catch(e){return void a(e)}if(!l.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}var l={data:function(){return{title:"",okStyle:null,cancelStyle:null,sort:255,minSeat:1,maxSeat:99,getOneTable:{},oIndex:-1,areaID:0}},props:{isAdd:Boolean,tableId:"",userData:Object,Area:Array,tableDetial:Object},mounted:function(){this.isAdd?(this.title="新建桌台",this.okStyle={content:"保存",style:{backgroundColor:"#29ABE2",color:"#fff"}}):this.isAdd||(this.title="修改桌台",this.cancelStyle={content:"删除",style:{backgroundColor:"red",color:"#fff "}}),this.getTableInfo()},methods:{createTable:function(e){var t=this;return r(regeneratorRuntime.mark(function a(){var n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.createTable({data:{areaId:t.Area[t.oIndex].id,shopId:t.userData.currentShop.id,tableName:t.getOneTable.tableName,normalSeat:t.getOneTable.normalSeat,description:t.getOneTable.description,minSeat:t.minSeat,maxSeat:t.maxSeat,sort:t.sort,createUid:t.userData.user.id}});case 2:(n=a.sent)&&t.$emit("throwWinResult",e,n);case 4:case"end":return a.stop()}},a,t)}))()},editTable:function(e){var t=this;return r(regeneratorRuntime.mark(function a(){var n;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.editTable({data:{shopId:t.userData.currentShop.id,areaId:t.Area[t.oIndex].id,id:t.tableId,newTableId:t.getOneTable.id,tableName:t.getOneTable.tableName,normalSeat:t.getOneTable.normalSeat,description:t.getOneTable.description,minSeat:t.minSeat,maxSeat:t.maxSeat,sort:t.sort,updateUid:t.userData.user.id}});case 2:(n=a.sent)&&t.$emit("throwWinResult",e,n);case 4:case"end":return a.stop()}},a,t)}))()},deleteTable:function(e){var t=this;return r(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.deleteTable({data:{shopId:t.userData.currentShop.id,id:t.tableId}});case 2:a.sent&&t.$emit("throwWinResult",e,t.tableId);case 4:case"end":return a.stop()}},a,t)}))()},getTableInfo:function(){if(this.isAdd)this.isAdd&&(this.getOneTable={tableName:"",normalSeat:6,description:"",id:""});else{this.areaID=this.tableDetial.areaId,this.getOneTable=this.tableDetial,this.sort=this.tableDetial.sort,this.minSeat=this.tableDetial.minSeat,this.maxSeat=this.tableDetial.maxSeat;for(var e=0;e<this.Area.length;e++)this.Area[e].id+""==this.areaID+""&&(this.oIndex=e)}},clickResult:function(e){var t=this;if("ok"==e){var a=this.getOneTable,n=(a.tableName+"").split(/,|，/);a.tableName="";for(var i=0;i<n.length;i++){if(n[i].length>20)return this.$store.commit("setWin",{title:"提示信息",winType:"alter",content:"单个桌台名不能超过20个字"}),!1;null!=n[i]&&""!=n[i]&&(a.tableName+=n[i],a.tableName+=",")}if(a.tableName=(a.tableName+"").substring(0,a.tableName.length-1),-1==this.oIndex)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"请选择区域"}),!1;if(""==a.tableName||void 0==a.tableName||null==a.tableName)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"桌号名不能为空"}),!1;if(0==this.getOneTable.id.trim().length&&!this.isAdd)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"桌号编号不能为空"}),!1;var r=a.normalSeat-0,l=/^[0-9]+$/;if(!l.test(Number(this.getOneTable.id))&&!this.isAdd)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"桌号编号只能是数字"}),!1;if(""==r||void 0==r||null==r)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"标准席位不能为空"}),!1;if(!l.test(r))return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"标准席位只能是数字"}),!1;var s=this.minSeat-0,o=this.maxSeat-0;if(o<0)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"容纳的最大人数不能小于0"}),!1;if(!l.test(o))return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"容纳的最大人数只能为整数"}),!1;if(s<0)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"容纳的最小人数不能小于0"}),!1;if(!l.test(s))return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"容纳的最小人数只能为整数"}),!1;if(s>o)return this.$store.commit("setWin",{title:"操作提示",winType:"alter",content:"容纳最大人数不能小于最小人数"}),!1;this.isAdd?this.createTable(e):this.isAdd||this.editTable(e)}else"cancel"==e?(this.isAdd||this.$store.commit("setWin",{title:"操作提示",winType:"confirm",content:"确定删除桌台"+this.getOneTable.tableName+"?",callback:function(a){"ok"==a&&t.deleteTable(e)}}),this.isAdd&&this.$emit("throwWinResult",e)):this.$emit("throwWinResult",e)}},components:{win:function(){return a.e("win").then(a.bind(null,"f60a"))},subadd:function(){return a.e("subadd").then(a.bind(null,"e7ea"))},radioBtn:function(){return a.e("radio_btn").then(a.bind(null,"4dfe"))}}},s=(a("590d"),a("6ceb")),o=Object(s.a)(l,n,[],!1,null,"7a215b04",null);o.options.__file="src\\module\\shop_config\\table_manage_win.vue";t.default=o.exports},f76c:function(e,t,a){}}]);